'use strict';
var $JSCompiler_prototypeAlias$$;
function $dbg_assert$$module$src$log$$() {
}
;function $pads$$module$src$lib$$($str$jscomp$6$$, $len$$) {
  return ($str$jscomp$6$$ || 0 === $str$jscomp$6$$ ? $str$jscomp$6$$ + "" : "").padEnd($len$$, " ");
}
function $pad0$$module$src$lib$$($str$jscomp$7$$, $len$jscomp$1$$) {
  return ($str$jscomp$7$$ || 0 === $str$jscomp$7$$ ? $str$jscomp$7$$ + "" : "").padStart($len$jscomp$1$$, "0");
}
function $view$$module$src$lib$$($constructor$$, $memory$$, $offset$jscomp$26$$, $length$jscomp$17$$) {
  return new Proxy({}, {get:function($b$jscomp$1_target$jscomp$91$$, $property$jscomp$5_x$jscomp$89$$) {
    $b$jscomp$1_target$jscomp$91$$ = new $constructor$$($memory$$.buffer, $offset$jscomp$26$$, $length$jscomp$17$$);
    $property$jscomp$5_x$jscomp$89$$ = $b$jscomp$1_target$jscomp$91$$[$property$jscomp$5_x$jscomp$89$$];
    return "function" === typeof $property$jscomp$5_x$jscomp$89$$ ? $property$jscomp$5_x$jscomp$89$$.bind($b$jscomp$1_target$jscomp$91$$) : $property$jscomp$5_x$jscomp$89$$;
  }, set:function($target$jscomp$92$$, $property$jscomp$6$$, $value$jscomp$91$$) {
    (new $constructor$$($memory$$.buffer, $offset$jscomp$26$$, $length$jscomp$17$$))[$property$jscomp$6$$] = $value$jscomp$91$$;
    return !0;
  }, });
}
function $h$$module$src$lib$$($n$jscomp$2$$, $len$jscomp$2$$) {
  return "0x" + $pad0$$module$src$lib$$(($n$jscomp$2$$ ? $n$jscomp$2$$.toString(16) : "").toUpperCase(), $len$jscomp$2$$ || 1);
}
var $get_rand_int$$module$src$lib$$;
if ("undefined" !== typeof crypto && crypto.getRandomValues) {
  const $rand_data$$ = new Int32Array(1);
  $get_rand_int$$module$src$lib$$ = function() {
    crypto.getRandomValues($rand_data$$);
    return $rand_data$$[0];
  };
} else {
  if ("undefined" !== typeof require) {
    const $crypto$jscomp$1$$ = require("crypto");
    $get_rand_int$$module$src$lib$$ = function() {
      return $crypto$jscomp$1$$.$randomBytes$(4).readInt32LE(0);
    };
  } else {
    "undefined" !== typeof process && import("node:crypto").then($crypto$jscomp$2$$ => {
      $get_rand_int$$module$src$lib$$ = function() {
        return $crypto$jscomp$2$$.randomBytes(4).readInt32LE(0);
      };
    });
  }
}
var $int_log2$$module$src$lib$$;
if ("function" === typeof Math.clz32) {
  $int_log2$$module$src$lib$$ = function($x$jscomp$92$$) {
    return 31 - Math.clz32($x$jscomp$92$$);
  };
} else {
  for (var $int_log2_table$$module$src$lib$$ = new Int8Array(256), $i$$module$src$lib$$ = 0, $b$$module$src$lib$$ = -2; 256 > $i$$module$src$lib$$; $i$$module$src$lib$$++) {
    $i$$module$src$lib$$ & $i$$module$src$lib$$ - 1 || $b$$module$src$lib$$++, $int_log2_table$$module$src$lib$$[$i$$module$src$lib$$] = $b$$module$src$lib$$;
  }
  $int_log2$$module$src$lib$$ = function($x$jscomp$93$$) {
    $x$jscomp$93$$ >>>= 0;
    var $tt$$ = $x$jscomp$93$$ >>> 16;
    if ($tt$$) {
      var $t$$ = $tt$$ >>> 8;
      return $t$$ ? 24 + $int_log2_table$$module$src$lib$$[$t$$] : 16 + $int_log2_table$$module$src$lib$$[$tt$$];
    }
    return ($t$$ = $x$jscomp$93$$ >>> 8) ? 8 + $int_log2_table$$module$src$lib$$[$t$$] : $int_log2_table$$module$src$lib$$[$x$jscomp$93$$];
  };
}
function $round_up_to_next_power_of_2$$module$src$lib$$($x$jscomp$94$$) {
  return 1 >= $x$jscomp$94$$ ? 1 : 1 << 1 + $int_log2$$module$src$lib$$($x$jscomp$94$$ - 1);
}
function $ByteQueue$$module$src$lib$$($size$jscomp$21$$) {
  var $data$jscomp$79$$ = new Uint8Array($size$jscomp$21$$), $start$jscomp$13$$, $end$jscomp$9$$;
  this.length = 0;
  this.push = function($item$jscomp$1$$) {
    this.length !== $size$jscomp$21$$ && this.length++;
    $data$jscomp$79$$[$end$jscomp$9$$] = $item$jscomp$1$$;
    $end$jscomp$9$$ = $end$jscomp$9$$ + 1 & $size$jscomp$21$$ - 1;
  };
  this.shift = function() {
    if (this.length) {
      var $item$jscomp$2$$ = $data$jscomp$79$$[$start$jscomp$13$$];
      $start$jscomp$13$$ = $start$jscomp$13$$ + 1 & $size$jscomp$21$$ - 1;
      this.length--;
      return $item$jscomp$2$$;
    }
    return -1;
  };
  this.clear = function() {
    this.length = $end$jscomp$9$$ = $start$jscomp$13$$ = 0;
  };
  this.clear();
}
function $FloatQueue$$module$src$lib$$() {
  this.size = 65536;
  this.data = new Float32Array(65536);
  this.length = this.end = this.start = 0;
}
$FloatQueue$$module$src$lib$$.prototype.push = function($item$jscomp$3$$) {
  this.length === this.size ? this.start = this.start + 1 & this.size - 1 : this.length++;
  this.data[this.end] = $item$jscomp$3$$;
  this.end = this.end + 1 & this.size - 1;
};
$FloatQueue$$module$src$lib$$.prototype.shift = function() {
  if (this.length) {
    var $item$jscomp$4$$ = this.data[this.start];
    this.start = this.start + 1 & this.size - 1;
    this.length--;
    return $item$jscomp$4$$;
  }
};
function $JSCompiler_StaticMethods_shift_block$$($JSCompiler_StaticMethods_shift_block$self$$, $count$jscomp$39$$) {
  var $slice$$ = new Float32Array($count$jscomp$39$$);
  $count$jscomp$39$$ > $JSCompiler_StaticMethods_shift_block$self$$.length && ($count$jscomp$39$$ = $JSCompiler_StaticMethods_shift_block$self$$.length);
  var $slice_end$$ = $JSCompiler_StaticMethods_shift_block$self$$.start + $count$jscomp$39$$, $partial$$ = $JSCompiler_StaticMethods_shift_block$self$$.data.subarray($JSCompiler_StaticMethods_shift_block$self$$.start, $slice_end$$);
  $slice$$.set($partial$$);
  $slice_end$$ >= $JSCompiler_StaticMethods_shift_block$self$$.size && ($slice_end$$ -= $JSCompiler_StaticMethods_shift_block$self$$.size, $slice$$.set($JSCompiler_StaticMethods_shift_block$self$$.data.subarray(0, $slice_end$$), $partial$$.length));
  $JSCompiler_StaticMethods_shift_block$self$$.start = $slice_end$$;
  $JSCompiler_StaticMethods_shift_block$self$$.length -= $count$jscomp$39$$;
  return $slice$$;
}
$FloatQueue$$module$src$lib$$.prototype.clear = function() {
  this.length = this.end = this.start = 0;
};
function $dump_file$$module$src$lib$$($ab$$, $name$jscomp$74$$) {
  Array.isArray($ab$$) || ($ab$$ = [$ab$$]);
  $download$$module$src$lib$$(new Blob($ab$$), $name$jscomp$74$$);
}
function $download$$module$src$lib$$($ev_file_or_blob$$, $name$jscomp$75$$) {
  var $a$jscomp$2$$ = document.createElement("a");
  $a$jscomp$2$$.download = $name$jscomp$75$$;
  $a$jscomp$2$$.href = window.URL.createObjectURL($ev_file_or_blob$$);
  $a$jscomp$2$$.dataset.downloadurl = ["application/octet-stream", $a$jscomp$2$$.download, $a$jscomp$2$$.href].join(":");
  document.createEvent ? ($ev_file_or_blob$$ = document.createEvent("MouseEvent"), $ev_file_or_blob$$.initMouseEvent("click", !0, !0, window, 0, 0, 0, 0, 0, !1, !1, !1, !1, 0, null), $a$jscomp$2$$.dispatchEvent($ev_file_or_blob$$)) : $a$jscomp$2$$.click();
  window.URL.revokeObjectURL($a$jscomp$2$$.href);
}
function $Bitmap$$module$src$lib$$($length_or_buffer$$) {
  "number" === typeof $length_or_buffer$$ ? this.view = new Uint8Array($length_or_buffer$$ + 7 >> 3) : $length_or_buffer$$ instanceof ArrayBuffer && (this.view = new Uint8Array($length_or_buffer$$));
}
$Bitmap$$module$src$lib$$.prototype.set = function($bit_mask_index$jscomp$73$$, $value$jscomp$92$$) {
  const $byte_index$$ = $bit_mask_index$jscomp$73$$ >> 3;
  $bit_mask_index$jscomp$73$$ = 1 << ($bit_mask_index$jscomp$73$$ & 7);
  this.view[$byte_index$$] = $value$jscomp$92$$ ? this.view[$byte_index$$] | $bit_mask_index$jscomp$73$$ : this.view[$byte_index$$] & ~$bit_mask_index$jscomp$73$$;
};
$Bitmap$$module$src$lib$$.prototype.get = function($index$jscomp$74$$) {
  return this.view[$index$jscomp$74$$ >> 3] >> ($index$jscomp$74$$ & 7) & 1;
};
$Bitmap$$module$src$lib$$.prototype.$get_buffer$ = function() {
  return this.view.buffer;
};
var $load_file$$module$src$lib$$, $get_file_size$$module$src$lib$$;
if ("undefined" === typeof XMLHttpRequest || "undefined" !== typeof process && process.$versions$ && process.$versions$.node) {
  let $fs$$;
  $load_file$$module$src$lib$$ = async function($data$jscomp$80_fd_filename$jscomp$2_result$jscomp$3$$, $options$jscomp$34$$) {
    $fs$$ || ($fs$$ = await import("node:fs/promises"));
    if ($options$jscomp$34$$.$range$) {
      $data$jscomp$80_fd_filename$jscomp$2_result$jscomp$3$$ = await $fs$$.open($data$jscomp$80_fd_filename$jscomp$2_result$jscomp$3$$, "r");
      const $buffer$jscomp$17$$ = Buffer.allocUnsafe($options$jscomp$34$$.$range$.length);
      try {
        await $data$jscomp$80_fd_filename$jscomp$2_result$jscomp$3$$.read({buffer:$buffer$jscomp$17$$, position:$options$jscomp$34$$.$range$.start});
      } finally {
        await $data$jscomp$80_fd_filename$jscomp$2_result$jscomp$3$$.close();
      }
      $options$jscomp$34$$.done && $options$jscomp$34$$.done(new Uint8Array($buffer$jscomp$17$$));
    } else {
      $data$jscomp$80_fd_filename$jscomp$2_result$jscomp$3$$ = await $fs$$.readFile($data$jscomp$80_fd_filename$jscomp$2_result$jscomp$3$$, {encoding:$options$jscomp$34$$.$as_json$ ? "utf-8" : null, }), $data$jscomp$80_fd_filename$jscomp$2_result$jscomp$3$$ = $options$jscomp$34$$.$as_json$ ? JSON.parse($data$jscomp$80_fd_filename$jscomp$2_result$jscomp$3$$) : (new Uint8Array($data$jscomp$80_fd_filename$jscomp$2_result$jscomp$3$$)).buffer, $options$jscomp$34$$.done($data$jscomp$80_fd_filename$jscomp$2_result$jscomp$3$$);
    }
  };
  $get_file_size$$module$src$lib$$ = async function($path$jscomp$5$$) {
    $fs$$ || ($fs$$ = await import("node:fs/promises"));
    return (await $fs$$.stat($path$jscomp$5$$)).size;
  };
} else {
  $load_file$$module$src$lib$$ = async function($filename$jscomp$3$$, $options$jscomp$35$$, $n_tries$jscomp$1$$) {
    function $retry$$() {
      const $number_of_tries$$ = $n_tries$jscomp$1$$ || 0;
      setTimeout(() => {
        $load_file$$module$src$lib$$($filename$jscomp$3$$, $options$jscomp$35$$, $number_of_tries$$ + 1);
      }, 1000 * ([1, 1, 2, 3, 5, 8, 13, 21][$number_of_tries$$] || 34));
    }
    var $http$$ = new XMLHttpRequest;
    $http$$.open($options$jscomp$35$$.method || "get", $filename$jscomp$3$$, !0);
    $http$$.responseType = $options$jscomp$35$$.$as_json$ ? "json" : "arraybuffer";
    if ($options$jscomp$35$$.headers) {
      for (var $header_names_start$jscomp$14$$ = Object.keys($options$jscomp$35$$.headers), $i$jscomp$3$$ = 0; $i$jscomp$3$$ < $header_names_start$jscomp$14$$.length; $i$jscomp$3$$++) {
        var $name$jscomp$76$$ = $header_names_start$jscomp$14$$[$i$jscomp$3$$];
        $http$$.setRequestHeader($name$jscomp$76$$, $options$jscomp$35$$.headers[$name$jscomp$76$$]);
      }
    }
    $options$jscomp$35$$.$range$ && ($header_names_start$jscomp$14$$ = $options$jscomp$35$$.$range$.start, $http$$.setRequestHeader("Range", "bytes=" + $header_names_start$jscomp$14$$ + "-" + ($header_names_start$jscomp$14$$ + $options$jscomp$35$$.$range$.length - 1)), $http$$.setRequestHeader("X-Accept-Encoding", "identity"), $http$$.onreadystatechange = function() {
      200 === $http$$.status && (console.error("Server sent full file in response to ranged request, aborting", {filename:$filename$jscomp$3$$}), $http$$.abort());
    });
    $http$$.onload = function() {
      if (4 === $http$$.readyState) {
        if (200 !== $http$$.status && 206 !== $http$$.status) {
          console.error("Loading the image " + $filename$jscomp$3$$ + " failed (status %d)", $http$$.status), 500 <= $http$$.status && 600 > $http$$.status && $retry$$();
        } else {
          if ($http$$.response) {
            if ($options$jscomp$35$$.$range$) {
              const $enc$$ = $http$$.getResponseHeader("Content-Encoding");
              $enc$$ && "identity" !== $enc$$ && console.error("Server sent Content-Encoding in response to ranged request", {filename:$filename$jscomp$3$$, $enc$:$enc$$});
            }
            $options$jscomp$35$$.done && $options$jscomp$35$$.done($http$$.response, $http$$);
          }
        }
      }
    };
    $http$$.onerror = function($e$jscomp$8$$) {
      console.error("Loading the image " + $filename$jscomp$3$$ + " failed", $e$jscomp$8$$);
      $retry$$();
    };
    $options$jscomp$35$$.progress && ($http$$.onprogress = function($e$jscomp$9$$) {
      $options$jscomp$35$$.progress($e$jscomp$9$$);
    });
    $http$$.send(null);
  }, $get_file_size$$module$src$lib$$ = async function($url$jscomp$22$$) {
    return new Promise(($resolve$$, $reject$$) => {
      $load_file$$module$src$lib$$($url$jscomp$22$$, {done:($buffer$jscomp$18_header$jscomp$2$$, $http$jscomp$1_match$$) => {
        $buffer$jscomp$18_header$jscomp$2$$ = $http$jscomp$1_match$$.getResponseHeader("Content-Range") || "";
        ($http$jscomp$1_match$$ = $buffer$jscomp$18_header$jscomp$2$$.match(/\/(\d+)\s*$/)) ? $resolve$$(+$http$jscomp$1_match$$[1]) : $reject$$(Error("`Range: bytes=...` header not supported (Got `" + $buffer$jscomp$18_header$jscomp$2$$ + "`)"));
      }, headers:{Range:"bytes=0-0", "X-Accept-Encoding":"identity"}});
    });
  };
}
function $read_sized_string_from_mem$$module$src$lib$$($mem$$, $offset$jscomp$28$$, $len$jscomp$4$$) {
  return String.fromCharCode(...(new Uint8Array($mem$$.buffer, $offset$jscomp$28$$ >>> 0, $len$jscomp$4$$ >>> 0)));
}
const $CHARMAPS$$module$src$lib$$ = {$cp437$:" \u263a\u263b\u2665\u2666\u2663\u2660\u2022\u25d8\u25cb\u25d9\u2642\u2640\u266a\u266b\u263c\u25ba\u25c4\u2195\u203c\u00b6\u00a7\u25ac\u21a8\u2191\u2193\u2192\u2190\u221f\u2194\u25b2\u25bc !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u2302\u00c7\u00fc\u00e9\u00e2\u00e4\u00e0\u00e5\u00e7\u00ea\u00eb\u00e8\u00ef\u00ee\u00ec\u00c4\u00c5\u00c9\u00e6\u00c6\u00f4\u00f6\u00f2\u00fb\u00f9\u00ff\u00d6\u00dc\u00a2\u00a3\u00a5\u20a7\u0192\u00e1\u00ed\u00f3\u00fa\u00f1\u00d1\u00aa\u00ba\u00bf\u2310\u00ac\u00bd\u00bc\u00a1\u00ab\u00bb\u2591\u2592\u2593\u2502\u2524\u2561\u2562\u2556\u2555\u2563\u2551\u2557\u255d\u255c\u255b\u2510\u2514\u2534\u252c\u251c\u2500\u253c\u255e\u255f\u255a\u2554\u2569\u2566\u2560\u2550\u256c\u2567\u2568\u2564\u2565\u2559\u2558\u2552\u2553\u256b\u256a\u2518\u250c\u2588\u2584\u258c\u2590\u2580\u03b1\u00df\u0393\u03c0\u03a3\u03c3\u00b5\u03c4\u03a6\u0398\u03a9\u03b4\u221e\u03c6\u03b5\u2229\u2261\u00b1\u2265\u2264\u2320\u2321\u00f7\u2248\u00b0\u2219\u00b7\u221a\u207f\u00b2\u25a0 ", 
$cp858$:"\u00c7\u00fc\u00e9\u00e2\u00e4\u00e0\u00e5\u00e7\u00ea\u00eb\u00e8\u00ef\u00ee\u00ec\u00c4\u00c5\u00c9\u00e6\u00c6\u00f4\u00f6\u00f2\u00fb\u00f9\u00ff\u00d6\u00dc\u00f8\u00a3\u00d8\u00d7\u0192\u00e1\u00ed\u00f3\u00fa\u00f1\u00d1\u00aa\u00ba\u00bf\u00ae\u00ac\u00bd\u00bc\u00a1\u00ab\u00bb\u2591\u2592\u2593\u2502\u2524\u00c1\u00c2\u00c0\u00a9\u2563\u2551\u2557\u255d\u00a2\u00a5\u2510\u2514\u2534\u252c\u251c\u2500\u253c\u00e3\u00c3\u255a\u2554\u2569\u2566\u2560\u2550\u256c\u00a4\u00f0\u00d0\u00ca\u00cb\u00c8\u20ac\u00cd\u00ce\u00cf\u2518\u250c\u2588\u2584\u00a6\u00cc\u2580\u00d3\u00df\u00d4\u00d2\u00f5\u00d5\u00b5\u00fe\u00de\u00da\u00db\u00d9\u00fd\u00dd\u00af\u00b4\u00ad\u00b1\u2017\u00be\u00b6\u00a7\u00f7\u00b8\u00b0\u00a8\u00b7\u00b9\u00b3\u00b2\u25a0 "};
$CHARMAPS$$module$src$lib$$.$cp858$ = $CHARMAPS$$module$src$lib$$.$cp437$.slice(0, 128) + $CHARMAPS$$module$src$lib$$.$cp858$;
$CHARMAPS$$module$src$lib$$.$ascii$ = $CHARMAPS$$module$src$lib$$.$cp437$.split("").map(($c$$, $i$jscomp$4$$) => 31 < $i$jscomp$4$$ && 128 > $i$jscomp$4$$ ? $c$$ : ".").join("");
function $get_charmap$$module$src$lib$$($encoding$jscomp$3$$) {
  return $encoding$jscomp$3$$ && $CHARMAPS$$module$src$lib$$[$encoding$jscomp$3$$] ? $CHARMAPS$$module$src$lib$$[$encoding$jscomp$3$$] : $CHARMAPS$$module$src$lib$$.$cp437$;
}
;function $SyncBuffer$$module$src$buffer$$($buffer$jscomp$19$$) {
  this.buffer = $buffer$jscomp$19$$;
  this.byteLength = $buffer$jscomp$19$$.byteLength;
  this.onload = void 0;
}
$JSCompiler_prototypeAlias$$ = $SyncBuffer$$module$src$buffer$$.prototype;
$JSCompiler_prototypeAlias$$.load = function() {
  this.onload && this.onload({buffer:this.buffer});
};
$JSCompiler_prototypeAlias$$.get = function($start$jscomp$15$$, $len$jscomp$5$$, $fn$$) {
  $fn$$(new Uint8Array(this.buffer, $start$jscomp$15$$, $len$jscomp$5$$));
};
$JSCompiler_prototypeAlias$$.set = function($start$jscomp$16$$, $slice$jscomp$1$$, $fn$jscomp$1$$) {
  (new Uint8Array(this.buffer, $start$jscomp$16$$, $slice$jscomp$1$$.byteLength)).set($slice$jscomp$1$$);
  $fn$jscomp$1$$();
};
$JSCompiler_prototypeAlias$$.$get_buffer$ = function($fn$jscomp$2$$) {
  $fn$jscomp$2$$(this.buffer);
};
$JSCompiler_prototypeAlias$$.$get_state$ = function() {
  const $state$$ = [];
  $state$$[0] = this.byteLength;
  $state$$[1] = new Uint8Array(this.buffer);
  return $state$$;
};
$JSCompiler_prototypeAlias$$.$set_state$ = function($state$jscomp$1$$) {
  this.byteLength = $state$jscomp$1$$[0];
  this.buffer = $state$jscomp$1$$[1].slice().buffer;
};
function $AsyncXHRBuffer$$module$src$buffer$$($filename$jscomp$4$$, $size$jscomp$24$$, $fixed_chunk_size$$) {
  this.filename = $filename$jscomp$4$$;
  this.byteLength = $size$jscomp$24$$;
  this.$g$ = new Map;
  this.$h$ = new Set;
  this.$fixed_chunk_size$ = $fixed_chunk_size$$;
  this.$l$ = !!$fixed_chunk_size$$;
  this.onload = void 0;
}
$JSCompiler_prototypeAlias$$ = $AsyncXHRBuffer$$module$src$buffer$$.prototype;
$JSCompiler_prototypeAlias$$.load = async function() {
  void 0 === this.byteLength && (this.byteLength = await $get_file_size$$module$src$lib$$(this.filename));
  this.onload && this.onload(Object.create(null));
};
$JSCompiler_prototypeAlias$$.$JSC$1669_get_from_cache$ = function($block_index_offset$jscomp$29$$, $len$jscomp$6_result$jscomp$4$$) {
  var $number_of_blocks$$ = $len$jscomp$6_result$jscomp$4$$ / 256;
  $block_index_offset$jscomp$29$$ /= 256;
  for (var $i$jscomp$5$$ = 0; $i$jscomp$5$$ < $number_of_blocks$$; $i$jscomp$5$$++) {
    if (!this.$g$.get($block_index_offset$jscomp$29$$ + $i$jscomp$5$$)) {
      return;
    }
  }
  if (1 === $number_of_blocks$$) {
    return this.$g$.get($block_index_offset$jscomp$29$$);
  }
  $len$jscomp$6_result$jscomp$4$$ = new Uint8Array($len$jscomp$6_result$jscomp$4$$);
  for ($i$jscomp$5$$ = 0; $i$jscomp$5$$ < $number_of_blocks$$; $i$jscomp$5$$++) {
    $len$jscomp$6_result$jscomp$4$$.set(this.$g$.get($block_index_offset$jscomp$29$$ + $i$jscomp$5$$), 256 * $i$jscomp$5$$);
  }
  return $len$jscomp$6_result$jscomp$4$$;
};
$JSCompiler_prototypeAlias$$.get = function($offset$jscomp$30$$, $len$jscomp$7$$, $fn$jscomp$3$$) {
  var $block$jscomp$1$$ = this.$JSC$1669_get_from_cache$($offset$jscomp$30$$, $len$jscomp$7$$);
  if ($block$jscomp$1$$) {
    $fn$jscomp$3$$($block$jscomp$1$$);
  } else {
    var $requested_start$$ = $offset$jscomp$30$$, $requested_length$$ = $len$jscomp$7$$;
    this.$fixed_chunk_size$ && ($requested_start$$ = $offset$jscomp$30$$ - $offset$jscomp$30$$ % this.$fixed_chunk_size$, $requested_length$$ = Math.ceil(($offset$jscomp$30$$ - $requested_start$$ + $len$jscomp$7$$) / this.$fixed_chunk_size$) * this.$fixed_chunk_size$);
    $load_file$$module$src$lib$$(this.filename, {done:function($block$jscomp$2_buffer$jscomp$20$$) {
      $block$jscomp$2_buffer$jscomp$20$$ = new Uint8Array($block$jscomp$2_buffer$jscomp$20$$);
      this.$JSC$1669_handle_read$($requested_start$$, $requested_length$$, $block$jscomp$2_buffer$jscomp$20$$);
      $requested_start$$ === $offset$jscomp$30$$ && $requested_length$$ === $len$jscomp$7$$ ? $fn$jscomp$3$$($block$jscomp$2_buffer$jscomp$20$$) : $fn$jscomp$3$$($block$jscomp$2_buffer$jscomp$20$$.subarray($offset$jscomp$30$$ - $requested_start$$, $offset$jscomp$30$$ - $requested_start$$ + $len$jscomp$7$$));
    }.bind(this), $range$:{start:$requested_start$$, length:$requested_length$$}, });
  }
};
$JSCompiler_prototypeAlias$$.set = function($start$jscomp$17_start_block$$, $data$jscomp$81$$, $fn$jscomp$4$$) {
  $start$jscomp$17_start_block$$ /= 256;
  for (var $block_count$$ = $data$jscomp$81$$.length / 256, $i$jscomp$6$$ = 0; $i$jscomp$6$$ < $block_count$$; $i$jscomp$6$$++) {
    var $block$jscomp$3$$ = this.$g$.get($start$jscomp$17_start_block$$ + $i$jscomp$6$$);
    void 0 === $block$jscomp$3$$ ? this.$g$.set($start$jscomp$17_start_block$$ + $i$jscomp$6$$, $data$jscomp$81$$.slice(256 * $i$jscomp$6$$, 256 * ($i$jscomp$6$$ + 1))) : $block$jscomp$3$$.set($data$jscomp$81$$.subarray(256 * $i$jscomp$6$$, 256 * ($i$jscomp$6$$ + 1)));
    this.$h$.add($start$jscomp$17_start_block$$ + $i$jscomp$6$$);
  }
  $fn$jscomp$4$$();
};
$JSCompiler_prototypeAlias$$.$JSC$1669_handle_read$ = function($offset$jscomp$31_start_block$jscomp$1$$, $block_count$jscomp$1_len$jscomp$9$$, $block$jscomp$4$$) {
  $offset$jscomp$31_start_block$jscomp$1$$ /= 256;
  $block_count$jscomp$1_len$jscomp$9$$ /= 256;
  for (var $i$jscomp$7$$ = 0; $i$jscomp$7$$ < $block_count$jscomp$1_len$jscomp$9$$; $i$jscomp$7$$++) {
    const $cached_block$$ = this.$g$.get($offset$jscomp$31_start_block$jscomp$1$$ + $i$jscomp$7$$);
    $cached_block$$ ? $block$jscomp$4$$.set($cached_block$$, 256 * $i$jscomp$7$$) : this.$l$ && this.$g$.set($offset$jscomp$31_start_block$jscomp$1$$ + $i$jscomp$7$$, $block$jscomp$4$$.slice(256 * $i$jscomp$7$$, 256 * ($i$jscomp$7$$ + 1)));
  }
};
$JSCompiler_prototypeAlias$$.$get_buffer$ = function($fn$jscomp$5$$) {
  $fn$jscomp$5$$();
};
$JSCompiler_prototypeAlias$$.$get_state$ = function() {
  const $state$jscomp$2$$ = [], $block_cache$$ = [];
  for (const [$index$jscomp$75$$, $block$jscomp$5$$] of this.$g$) {
    this.$h$.has($index$jscomp$75$$) && $block_cache$$.push([$index$jscomp$75$$, $block$jscomp$5$$]);
  }
  $state$jscomp$2$$[0] = $block_cache$$;
  return $state$jscomp$2$$;
};
$JSCompiler_prototypeAlias$$.$set_state$ = function($block_cache$jscomp$1_state$jscomp$3$$) {
  $block_cache$jscomp$1_state$jscomp$3$$ = $block_cache$jscomp$1_state$jscomp$3$$[0];
  this.$g$.clear();
  this.$h$.clear();
  for (const [$index$jscomp$76$$, $block$jscomp$6$$] of $block_cache$jscomp$1_state$jscomp$3$$) {
    this.$g$.set($index$jscomp$76$$, $block$jscomp$6$$), this.$h$.add($index$jscomp$76$$);
  }
};
function $AsyncXHRPartfileBuffer$$module$src$buffer$$($filename$jscomp$5$$, $size$jscomp$26$$, $fixed_chunk_size$jscomp$1$$, $zstd_decompress$$) {
  const $parts$$ = $filename$jscomp$5$$.match(/\.[^\.]+(\.zst)?$/);
  this.$j$ = $parts$$ ? $parts$$[0] : "";
  this.$i$ = $filename$jscomp$5$$.substring(0, $filename$jscomp$5$$.length - this.$j$.length);
  this.$s$ = this.$j$.endsWith(".zst");
  this.$i$.endsWith("/") || (this.$i$ += "-");
  this.$g$ = new Map;
  this.$h$ = new Set;
  this.byteLength = $size$jscomp$26$$;
  this.$fixed_chunk_size$ = $fixed_chunk_size$jscomp$1$$;
  this.$o$ = $zstd_decompress$$;
  this.$l$ = !!$fixed_chunk_size$jscomp$1$$;
  this.onload = void 0;
}
$JSCompiler_prototypeAlias$$ = $AsyncXHRPartfileBuffer$$module$src$buffer$$.prototype;
$JSCompiler_prototypeAlias$$.load = function() {
  this.onload && this.onload(Object.create(null));
};
$JSCompiler_prototypeAlias$$.get = function($offset$jscomp$32$$, $len$jscomp$10$$, $fn$jscomp$6$$) {
  var $block$jscomp$7_part_filename$$ = this.$JSC$1678_get_from_cache$($offset$jscomp$32$$, $len$jscomp$10$$);
  if ($block$jscomp$7_part_filename$$) {
    $fn$jscomp$6$$($block$jscomp$7_part_filename$$);
  } else {
    if (this.$fixed_chunk_size$) {
      const $start_index$$ = Math.floor($offset$jscomp$32$$ / this.$fixed_chunk_size$), $m_offset$$ = $offset$jscomp$32$$ - $start_index$$ * this.$fixed_chunk_size$, $total_count$$ = Math.ceil(($m_offset$$ + $len$jscomp$10$$) / this.$fixed_chunk_size$), $blocks$$ = new Uint8Array($total_count$$ * this.$fixed_chunk_size$);
      let $finished$$ = 0;
      for (let $i$jscomp$8$$ = 0; $i$jscomp$8$$ < $total_count$$; $i$jscomp$8$$++) {
        var $block$jscomp$8_offset$jscomp$33$$ = ($start_index$$ + $i$jscomp$8$$) * this.$fixed_chunk_size$;
        $block$jscomp$7_part_filename$$ = this.$i$ + $block$jscomp$8_offset$jscomp$33$$ + "-" + ($block$jscomp$8_offset$jscomp$33$$ + this.$fixed_chunk_size$) + this.$j$;
        ($block$jscomp$8_offset$jscomp$33$$ = this.$JSC$1678_get_from_cache$($block$jscomp$8_offset$jscomp$33$$, this.$fixed_chunk_size$)) ? ($blocks$$.set($block$jscomp$8_offset$jscomp$33$$, $i$jscomp$8$$ * this.$fixed_chunk_size$), $finished$$++, $finished$$ === $total_count$$ && $fn$jscomp$6$$($blocks$$.subarray($m_offset$$, $m_offset$$ + $len$jscomp$10$$))) : $load_file$$module$src$lib$$($block$jscomp$7_part_filename$$, {done:async function($block$jscomp$9_buffer$jscomp$21_decompressed$$) {
          $block$jscomp$9_buffer$jscomp$21_decompressed$$ = new Uint8Array($block$jscomp$9_buffer$jscomp$21_decompressed$$);
          this.$s$ && ($block$jscomp$9_buffer$jscomp$21_decompressed$$ = await this.$o$(this.$fixed_chunk_size$, $block$jscomp$9_buffer$jscomp$21_decompressed$$), $block$jscomp$9_buffer$jscomp$21_decompressed$$ = new Uint8Array($block$jscomp$9_buffer$jscomp$21_decompressed$$));
          $blocks$$.set($block$jscomp$9_buffer$jscomp$21_decompressed$$, $i$jscomp$8$$ * this.$fixed_chunk_size$);
          this.$JSC$1678_handle_read$(($start_index$$ + $i$jscomp$8$$) * this.$fixed_chunk_size$, this.$fixed_chunk_size$ | 0, $block$jscomp$9_buffer$jscomp$21_decompressed$$);
          $finished$$++;
          $finished$$ === $total_count$$ && $fn$jscomp$6$$($blocks$$.subarray($m_offset$$, $m_offset$$ + $len$jscomp$10$$));
        }.bind(this), });
      }
    } else {
      $load_file$$module$src$lib$$(this.$i$ + $offset$jscomp$32$$ + "-" + ($offset$jscomp$32$$ + $len$jscomp$10$$) + this.$j$, {done:function($block$jscomp$10_buffer$jscomp$22$$) {
        $block$jscomp$10_buffer$jscomp$22$$ = new Uint8Array($block$jscomp$10_buffer$jscomp$22$$);
        this.$JSC$1678_handle_read$($offset$jscomp$32$$, $len$jscomp$10$$, $block$jscomp$10_buffer$jscomp$22$$);
        $fn$jscomp$6$$($block$jscomp$10_buffer$jscomp$22$$);
      }.bind(this), });
    }
  }
};
$JSCompiler_prototypeAlias$$.$JSC$1678_get_from_cache$ = $AsyncXHRBuffer$$module$src$buffer$$.prototype.$JSC$1669_get_from_cache$;
$JSCompiler_prototypeAlias$$.set = $AsyncXHRBuffer$$module$src$buffer$$.prototype.set;
$JSCompiler_prototypeAlias$$.$JSC$1678_handle_read$ = $AsyncXHRBuffer$$module$src$buffer$$.prototype.$JSC$1669_handle_read$;
$JSCompiler_prototypeAlias$$.$get_state$ = $AsyncXHRBuffer$$module$src$buffer$$.prototype.$get_state$;
$JSCompiler_prototypeAlias$$.$set_state$ = $AsyncXHRBuffer$$module$src$buffer$$.prototype.$set_state$;
function $SyncFileBuffer$$module$src$buffer$$($file$$) {
  this.file = $file$$;
  this.byteLength = $file$$.size;
  1073741824 < $file$$.size && console.warn("SyncFileBuffer: Allocating buffer of " + ($file$$.size >> 20) + " MB ...");
  this.buffer = new ArrayBuffer($file$$.size);
  this.onload = void 0;
}
$JSCompiler_prototypeAlias$$ = $SyncFileBuffer$$module$src$buffer$$.prototype;
$JSCompiler_prototypeAlias$$.load = function() {
  $JSCompiler_StaticMethods_load_next$$(this, 0);
};
function $JSCompiler_StaticMethods_load_next$$($JSCompiler_StaticMethods_load_next$self$$, $start$jscomp$18$$) {
  var $filereader$$ = new FileReader;
  $filereader$$.onload = function($buffer$jscomp$23_e$jscomp$10$$) {
    $buffer$jscomp$23_e$jscomp$10$$ = new Uint8Array($buffer$jscomp$23_e$jscomp$10$$.target.result);
    (new Uint8Array(this.buffer, $start$jscomp$18$$)).set($buffer$jscomp$23_e$jscomp$10$$);
    $JSCompiler_StaticMethods_load_next$$(this, $start$jscomp$18$$ + 4194304);
  }.bind($JSCompiler_StaticMethods_load_next$self$$);
  $start$jscomp$18$$ < $JSCompiler_StaticMethods_load_next$self$$.byteLength ? $filereader$$.readAsArrayBuffer($JSCompiler_StaticMethods_load_next$self$$.file.slice($start$jscomp$18$$, Math.min($start$jscomp$18$$ + 4194304, $JSCompiler_StaticMethods_load_next$self$$.byteLength))) : ($JSCompiler_StaticMethods_load_next$self$$.file = void 0, $JSCompiler_StaticMethods_load_next$self$$.onload && $JSCompiler_StaticMethods_load_next$self$$.onload({buffer:$JSCompiler_StaticMethods_load_next$self$$.buffer}));
}
$JSCompiler_prototypeAlias$$.get = $SyncBuffer$$module$src$buffer$$.prototype.get;
$JSCompiler_prototypeAlias$$.set = $SyncBuffer$$module$src$buffer$$.prototype.set;
$JSCompiler_prototypeAlias$$.$get_buffer$ = $SyncBuffer$$module$src$buffer$$.prototype.$get_buffer$;
$JSCompiler_prototypeAlias$$.$get_state$ = $SyncBuffer$$module$src$buffer$$.prototype.$get_state$;
$JSCompiler_prototypeAlias$$.$set_state$ = $SyncBuffer$$module$src$buffer$$.prototype.$set_state$;
function $AsyncFileBuffer$$module$src$buffer$$($file$jscomp$1$$) {
  this.file = $file$jscomp$1$$;
  this.byteLength = $file$jscomp$1$$.size;
  this.$g$ = new Map;
  this.$h$ = new Set;
  this.onload = void 0;
}
$JSCompiler_prototypeAlias$$ = $AsyncFileBuffer$$module$src$buffer$$.prototype;
$JSCompiler_prototypeAlias$$.load = function() {
  this.onload && this.onload(Object.create(null));
};
$JSCompiler_prototypeAlias$$.get = function($offset$jscomp$34$$, $len$jscomp$11$$, $fn$jscomp$7$$) {
  var $block$jscomp$11_fr$$ = this.$JSC$1687_get_from_cache$($offset$jscomp$34$$, $len$jscomp$11$$);
  $block$jscomp$11_fr$$ ? $fn$jscomp$7$$($block$jscomp$11_fr$$) : ($block$jscomp$11_fr$$ = new FileReader, $block$jscomp$11_fr$$.onload = function($block$jscomp$12_e$jscomp$11$$) {
    $block$jscomp$12_e$jscomp$11$$ = new Uint8Array($block$jscomp$12_e$jscomp$11$$.target.result);
    this.$JSC$1687_handle_read$($offset$jscomp$34$$, $len$jscomp$11$$, $block$jscomp$12_e$jscomp$11$$);
    $fn$jscomp$7$$($block$jscomp$12_e$jscomp$11$$);
  }.bind(this), $block$jscomp$11_fr$$.readAsArrayBuffer(this.file.slice($offset$jscomp$34$$, $offset$jscomp$34$$ + $len$jscomp$11$$)));
};
$JSCompiler_prototypeAlias$$.$JSC$1687_get_from_cache$ = $AsyncXHRBuffer$$module$src$buffer$$.prototype.$JSC$1669_get_from_cache$;
$JSCompiler_prototypeAlias$$.set = $AsyncXHRBuffer$$module$src$buffer$$.prototype.set;
$JSCompiler_prototypeAlias$$.$JSC$1687_handle_read$ = $AsyncXHRBuffer$$module$src$buffer$$.prototype.$JSC$1669_handle_read$;
$JSCompiler_prototypeAlias$$.$get_state$ = $AsyncXHRBuffer$$module$src$buffer$$.prototype.$get_state$;
$JSCompiler_prototypeAlias$$.$set_state$ = $AsyncXHRBuffer$$module$src$buffer$$.prototype.$set_state$;
$JSCompiler_prototypeAlias$$.$get_buffer$ = function($fn$jscomp$8$$) {
  $fn$jscomp$8$$();
};
$JSCompiler_prototypeAlias$$.$get_as_file$ = function($name$jscomp$77$$) {
  for (var $parts$jscomp$1$$ = [], $existing_blocks$$ = Array.from(this.$g$.keys()).sort(function($x$jscomp$95$$, $y$jscomp$73$$) {
    return $x$jscomp$95$$ - $y$jscomp$73$$;
  }), $current_offset$$ = 0, $i$jscomp$9$$ = 0; $i$jscomp$9$$ < $existing_blocks$$.length; $i$jscomp$9$$++) {
    var $block_index$jscomp$1_start$jscomp$19$$ = $existing_blocks$$[$i$jscomp$9$$], $block$jscomp$13$$ = this.$g$.get($block_index$jscomp$1_start$jscomp$19$$);
    $block_index$jscomp$1_start$jscomp$19$$ *= 256;
    $block_index$jscomp$1_start$jscomp$19$$ !== $current_offset$$ && ($parts$jscomp$1$$.push(this.file.slice($current_offset$$, $block_index$jscomp$1_start$jscomp$19$$)), $current_offset$$ = $block_index$jscomp$1_start$jscomp$19$$);
    $parts$jscomp$1$$.push($block$jscomp$13$$);
    $current_offset$$ += $block$jscomp$13$$.length;
  }
  $current_offset$$ !== this.file.size && $parts$jscomp$1$$.push(this.file.slice($current_offset$$));
  return new File($parts$jscomp$1$$, $name$jscomp$77$$);
};
function $buffer_from_object$$module$src$buffer$$($obj$jscomp$26$$, $is_async_zstd_decompress_worker$$) {
  if ($obj$jscomp$26$$.buffer instanceof ArrayBuffer) {
    return new $SyncBuffer$$module$src$buffer$$($obj$jscomp$26$$.buffer);
  }
  if ("undefined" !== typeof File && $obj$jscomp$26$$.buffer instanceof File) {
    return $is_async_zstd_decompress_worker$$ = $obj$jscomp$26$$.async, void 0 === $is_async_zstd_decompress_worker$$ && ($is_async_zstd_decompress_worker$$ = 268435456 <= $obj$jscomp$26$$.buffer.size), $is_async_zstd_decompress_worker$$ ? new $AsyncFileBuffer$$module$src$buffer$$($obj$jscomp$26$$.buffer) : new $SyncFileBuffer$$module$src$buffer$$($obj$jscomp$26$$.buffer);
  }
  if ($obj$jscomp$26$$.url) {
    return $obj$jscomp$26$$.$use_parts$ ? new $AsyncXHRPartfileBuffer$$module$src$buffer$$($obj$jscomp$26$$.url, $obj$jscomp$26$$.size, $obj$jscomp$26$$.$fixed_chunk_size$, $is_async_zstd_decompress_worker$$) : new $AsyncXHRBuffer$$module$src$buffer$$($obj$jscomp$26$$.url, $obj$jscomp$26$$.size, $obj$jscomp$26$$.$fixed_chunk_size$);
  }
}
;function $DMA$$module$src$dma$$($cpu_io$$) {
  this.$cpu$ = $cpu_io$$;
  this.$o$ = new Uint8Array(8);
  this.$s$ = new Uint8Array(8);
  this.$g$ = new Uint16Array(8);
  this.$j$ = new Uint16Array(8);
  this.$h$ = new Uint16Array(8);
  this.$l$ = new Uint16Array(8);
  this.$channel_mask$ = new Uint8Array(8);
  this.$u$ = new Uint8Array(8);
  this.$unmask_listeners$ = [];
  this.$i$ = 0;
  $cpu_io$$ = $cpu_io$$.$io$;
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 0, this, this.$port_addr_write$.bind(this, 0));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 2, this, this.$port_addr_write$.bind(this, 1));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 4, this, this.$port_addr_write$.bind(this, 2));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 6, this, this.$port_addr_write$.bind(this, 3));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 1, this, this.$port_count_write$.bind(this, 0));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 3, this, this.$port_count_write$.bind(this, 1));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 5, this, this.$port_count_write$.bind(this, 2));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 7, this, this.$port_count_write$.bind(this, 3));
  $JSCompiler_StaticMethods_register_read$$($cpu_io$$, 0, this, this.$port_addr_read$.bind(this, 0));
  $JSCompiler_StaticMethods_register_read$$($cpu_io$$, 2, this, this.$port_addr_read$.bind(this, 1));
  $JSCompiler_StaticMethods_register_read$$($cpu_io$$, 4, this, this.$port_addr_read$.bind(this, 2));
  $JSCompiler_StaticMethods_register_read$$($cpu_io$$, 6, this, this.$port_addr_read$.bind(this, 3));
  $JSCompiler_StaticMethods_register_read$$($cpu_io$$, 1, this, this.$port_count_read$.bind(this, 0));
  $JSCompiler_StaticMethods_register_read$$($cpu_io$$, 3, this, this.$port_count_read$.bind(this, 1));
  $JSCompiler_StaticMethods_register_read$$($cpu_io$$, 5, this, this.$port_count_read$.bind(this, 2));
  $JSCompiler_StaticMethods_register_read$$($cpu_io$$, 7, this, this.$port_count_read$.bind(this, 3));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 192, this, this.$port_addr_write$.bind(this, 4));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 196, this, this.$port_addr_write$.bind(this, 5));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 200, this, this.$port_addr_write$.bind(this, 6));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 204, this, this.$port_addr_write$.bind(this, 7));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 194, this, this.$port_count_write$.bind(this, 4));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 198, this, this.$port_count_write$.bind(this, 5));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 202, this, this.$port_count_write$.bind(this, 6));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 206, this, this.$port_count_write$.bind(this, 7));
  $JSCompiler_StaticMethods_register_read$$($cpu_io$$, 192, this, this.$port_addr_read$.bind(this, 4));
  $JSCompiler_StaticMethods_register_read$$($cpu_io$$, 196, this, this.$port_addr_read$.bind(this, 5));
  $JSCompiler_StaticMethods_register_read$$($cpu_io$$, 200, this, this.$port_addr_read$.bind(this, 6));
  $JSCompiler_StaticMethods_register_read$$($cpu_io$$, 204, this, this.$port_addr_read$.bind(this, 7));
  $JSCompiler_StaticMethods_register_read$$($cpu_io$$, 194, this, this.$port_count_read$.bind(this, 4));
  $JSCompiler_StaticMethods_register_read$$($cpu_io$$, 198, this, this.$port_count_read$.bind(this, 5));
  $JSCompiler_StaticMethods_register_read$$($cpu_io$$, 202, this, this.$port_count_read$.bind(this, 6));
  $JSCompiler_StaticMethods_register_read$$($cpu_io$$, 206, this, this.$port_count_read$.bind(this, 7));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 135, this, this.$port_page_write$.bind(this, 0));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 131, this, this.$port_page_write$.bind(this, 1));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 129, this, this.$port_page_write$.bind(this, 2));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 130, this, this.$port_page_write$.bind(this, 3));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 143, this, this.$port_page_write$.bind(this, 4));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 139, this, this.$port_page_write$.bind(this, 5));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 137, this, this.$port_page_write$.bind(this, 6));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 138, this, this.$port_page_write$.bind(this, 7));
  $JSCompiler_StaticMethods_register_read$$($cpu_io$$, 135, this, this.$port_page_read$.bind(this, 0));
  $JSCompiler_StaticMethods_register_read$$($cpu_io$$, 131, this, this.$port_page_read$.bind(this, 1));
  $JSCompiler_StaticMethods_register_read$$($cpu_io$$, 129, this, this.$port_page_read$.bind(this, 2));
  $JSCompiler_StaticMethods_register_read$$($cpu_io$$, 130, this, this.$port_page_read$.bind(this, 3));
  $JSCompiler_StaticMethods_register_read$$($cpu_io$$, 143, this, this.$port_page_read$.bind(this, 4));
  $JSCompiler_StaticMethods_register_read$$($cpu_io$$, 139, this, this.$port_page_read$.bind(this, 5));
  $JSCompiler_StaticMethods_register_read$$($cpu_io$$, 137, this, this.$port_page_read$.bind(this, 6));
  $JSCompiler_StaticMethods_register_read$$($cpu_io$$, 138, this, this.$port_page_read$.bind(this, 7));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 1159, this, this.$port_pagehi_write$.bind(this, 0));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 1155, this, this.$port_pagehi_write$.bind(this, 1));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 1153, this, this.$port_pagehi_write$.bind(this, 2));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 1154, this, this.$port_pagehi_write$.bind(this, 3));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 1163, this, this.$port_pagehi_write$.bind(this, 5));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 1161, this, this.$port_pagehi_write$.bind(this, 6));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 1162, this, this.$port_pagehi_write$.bind(this, 7));
  $JSCompiler_StaticMethods_register_read$$($cpu_io$$, 1159, this, this.$port_pagehi_read$.bind(this, 0));
  $JSCompiler_StaticMethods_register_read$$($cpu_io$$, 1155, this, this.$port_pagehi_read$.bind(this, 1));
  $JSCompiler_StaticMethods_register_read$$($cpu_io$$, 1153, this, this.$port_pagehi_read$.bind(this, 2));
  $JSCompiler_StaticMethods_register_read$$($cpu_io$$, 1154, this, this.$port_pagehi_read$.bind(this, 3));
  $JSCompiler_StaticMethods_register_read$$($cpu_io$$, 1163, this, this.$port_pagehi_read$.bind(this, 5));
  $JSCompiler_StaticMethods_register_read$$($cpu_io$$, 1161, this, this.$port_pagehi_read$.bind(this, 6));
  $JSCompiler_StaticMethods_register_read$$($cpu_io$$, 1162, this, this.$port_pagehi_read$.bind(this, 7));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 10, this, this.$port_singlemask_write$.bind(this, 0));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 212, this, this.$port_singlemask_write$.bind(this, 4));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 15, this, this.$port_multimask_write$.bind(this, 0));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 222, this, this.$port_multimask_write$.bind(this, 4));
  $JSCompiler_StaticMethods_register_read$$($cpu_io$$, 15, this, this.$port_multimask_read$.bind(this, 0));
  $JSCompiler_StaticMethods_register_read$$($cpu_io$$, 222, this, this.$port_multimask_read$.bind(this, 4));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 11, this, this.$port_mode_write$.bind(this, 0));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 214, this, this.$port_mode_write$.bind(this, 4));
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 12, this, this.$portC_write$);
  $JSCompiler_StaticMethods_register_write$$($cpu_io$$, 216, this, this.$portC_write$);
}
$JSCompiler_prototypeAlias$$ = $DMA$$module$src$dma$$.prototype;
$JSCompiler_prototypeAlias$$.$get_state$ = function() {
  return [this.$o$, this.$s$, this.$g$, this.$j$, this.$h$, this.$l$, this.$channel_mask$, this.$u$, this.$i$, ];
};
$JSCompiler_prototypeAlias$$.$set_state$ = function($state$jscomp$4$$) {
  this.$o$ = $state$jscomp$4$$[0];
  this.$s$ = $state$jscomp$4$$[1];
  this.$g$ = $state$jscomp$4$$[2];
  this.$j$ = $state$jscomp$4$$[3];
  this.$h$ = $state$jscomp$4$$[4];
  this.$l$ = $state$jscomp$4$$[5];
  this.$channel_mask$ = $state$jscomp$4$$[6];
  this.$u$ = $state$jscomp$4$$[7];
  this.$i$ = $state$jscomp$4$$[8];
};
$JSCompiler_prototypeAlias$$.$port_count_write$ = function($channel$jscomp$1$$, $data_byte$$) {
  this.$h$[$channel$jscomp$1$$] = $JSCompiler_StaticMethods_flipflop_get$$(this, this.$h$[$channel$jscomp$1$$], $data_byte$$, !1);
  this.$l$[$channel$jscomp$1$$] = $JSCompiler_StaticMethods_flipflop_get$$(this, this.$l$[$channel$jscomp$1$$], $data_byte$$, !0);
};
$JSCompiler_prototypeAlias$$.$port_count_read$ = function($channel$jscomp$2$$) {
  return $JSCompiler_StaticMethods_flipflop_read$$(this, this.$h$[$channel$jscomp$2$$]);
};
$JSCompiler_prototypeAlias$$.$port_addr_write$ = function($channel$jscomp$3$$, $data_byte$jscomp$1$$) {
  this.$g$[$channel$jscomp$3$$] = $JSCompiler_StaticMethods_flipflop_get$$(this, this.$g$[$channel$jscomp$3$$], $data_byte$jscomp$1$$, !1);
  this.$j$[$channel$jscomp$3$$] = $JSCompiler_StaticMethods_flipflop_get$$(this, this.$j$[$channel$jscomp$3$$], $data_byte$jscomp$1$$, !0);
};
$JSCompiler_prototypeAlias$$.$port_addr_read$ = function($channel$jscomp$4$$) {
  return $JSCompiler_StaticMethods_flipflop_read$$(this, this.$g$[$channel$jscomp$4$$]);
};
$JSCompiler_prototypeAlias$$.$port_pagehi_write$ = function($channel$jscomp$5$$, $data_byte$jscomp$2$$) {
  this.$s$[$channel$jscomp$5$$] = $data_byte$jscomp$2$$;
};
$JSCompiler_prototypeAlias$$.$port_pagehi_read$ = function($channel$jscomp$6$$) {
  return this.$s$[$channel$jscomp$6$$];
};
$JSCompiler_prototypeAlias$$.$port_page_write$ = function($channel$jscomp$7$$, $data_byte$jscomp$3$$) {
  this.$o$[$channel$jscomp$7$$] = $data_byte$jscomp$3$$;
};
$JSCompiler_prototypeAlias$$.$port_page_read$ = function($channel$jscomp$8$$) {
  return this.$o$[$channel$jscomp$8$$];
};
$JSCompiler_prototypeAlias$$.$port_singlemask_write$ = function($channel_offset$$, $data_byte$jscomp$4$$) {
  $JSCompiler_StaticMethods_update_mask$$(this, ($data_byte$jscomp$4$$ & 3) + $channel_offset$$, $data_byte$jscomp$4$$ & 4 ? 1 : 0);
};
$JSCompiler_prototypeAlias$$.$port_multimask_write$ = function($channel_offset$jscomp$1$$, $data_byte$jscomp$5$$) {
  for (var $i$jscomp$10$$ = 0; 4 > $i$jscomp$10$$; $i$jscomp$10$$++) {
    $JSCompiler_StaticMethods_update_mask$$(this, $channel_offset$jscomp$1$$ + $i$jscomp$10$$, $data_byte$jscomp$5$$ & 1 << $i$jscomp$10$$);
  }
};
$JSCompiler_prototypeAlias$$.$port_multimask_read$ = function($channel_offset$jscomp$2$$) {
  var $value$jscomp$94$$ = 0 | this.$channel_mask$[$channel_offset$jscomp$2$$ + 0];
  $value$jscomp$94$$ |= this.$channel_mask$[$channel_offset$jscomp$2$$ + 1] << 1;
  $value$jscomp$94$$ |= this.$channel_mask$[$channel_offset$jscomp$2$$ + 2] << 2;
  return $value$jscomp$94$$ |= this.$channel_mask$[$channel_offset$jscomp$2$$ + 3] << 3;
};
$JSCompiler_prototypeAlias$$.$port_mode_write$ = function($channel_offset$jscomp$3$$, $data_byte$jscomp$6$$) {
  this.$u$[($data_byte$jscomp$6$$ & 3) + $channel_offset$jscomp$3$$] = $data_byte$jscomp$6$$;
};
$JSCompiler_prototypeAlias$$.$portC_write$ = function() {
  this.$i$ = 0;
};
function $JSCompiler_StaticMethods_update_mask$$($JSCompiler_StaticMethods_update_mask$self$$, $channel$jscomp$11$$, $i$jscomp$11_value$jscomp$95$$) {
  if ($JSCompiler_StaticMethods_update_mask$self$$.$channel_mask$[$channel$jscomp$11$$] !== $i$jscomp$11_value$jscomp$95$$ && ($JSCompiler_StaticMethods_update_mask$self$$.$channel_mask$[$channel$jscomp$11$$] = $i$jscomp$11_value$jscomp$95$$, !$i$jscomp$11_value$jscomp$95$$)) {
    for ($i$jscomp$11_value$jscomp$95$$ = 0; $i$jscomp$11_value$jscomp$95$$ < $JSCompiler_StaticMethods_update_mask$self$$.$unmask_listeners$.length; $i$jscomp$11_value$jscomp$95$$++) {
      $JSCompiler_StaticMethods_update_mask$self$$.$unmask_listeners$[$i$jscomp$11_value$jscomp$95$$].$fn$.call($JSCompiler_StaticMethods_update_mask$self$$.$unmask_listeners$[$i$jscomp$11_value$jscomp$95$$].$this_value$, $channel$jscomp$11$$);
    }
  }
}
$JSCompiler_prototypeAlias$$.$do_read$ = function($buffer$jscomp$25$$, $start$jscomp$20$$, $len$jscomp$12_read_count$$, $channel$jscomp$12$$, $fn$jscomp$10$$) {
  $len$jscomp$12_read_count$$ = $JSCompiler_StaticMethods_count_get_8bit$$(this, $channel$jscomp$12$$);
  var $addr$$ = $JSCompiler_StaticMethods_address_get_8bit$$(this, $channel$jscomp$12$$);
  if ($start$jscomp$20$$ + $len$jscomp$12_read_count$$ > $buffer$jscomp$25$$.byteLength) {
    $fn$jscomp$10$$(!0);
  } else {
    var $cpu$jscomp$1$$ = this.$cpu$;
    this.$g$[$channel$jscomp$12$$] += $len$jscomp$12_read_count$$;
    $buffer$jscomp$25$$.get($start$jscomp$20$$, $len$jscomp$12_read_count$$, function($data$jscomp$82$$) {
      $JSCompiler_StaticMethods_write_blob$$($cpu$jscomp$1$$, $data$jscomp$82$$, $addr$$);
      $fn$jscomp$10$$(!1);
    });
  }
};
$JSCompiler_prototypeAlias$$.$do_write$ = function($buffer$jscomp$26$$, $start$jscomp$21$$, $len$jscomp$13$$, $channel$jscomp$13$$, $fn$jscomp$11$$) {
  var $read_count$jscomp$1$$ = this.$h$[$channel$jscomp$13$$] + 1 & 65535, $bytes_per_count$$ = 5 <= $channel$jscomp$13$$ ? 2 : 1, $read_bytes$$ = $read_count$jscomp$1$$ * $bytes_per_count$$, $addr$jscomp$1$$ = $JSCompiler_StaticMethods_address_get_8bit$$(this, $channel$jscomp$13$$), $unfinished$$ = !1, $want_more$$ = !1, $autoinit$$ = this.$u$[$channel$jscomp$13$$] & 16;
  $len$jscomp$13$$ < $read_bytes$$ ? ($read_count$jscomp$1$$ = Math.floor($len$jscomp$13$$ / $bytes_per_count$$), $read_bytes$$ = $read_count$jscomp$1$$ * $bytes_per_count$$, $unfinished$$ = !0) : $len$jscomp$13$$ > $read_bytes$$ && ($want_more$$ = !0);
  $start$jscomp$21$$ + $read_bytes$$ > $buffer$jscomp$26$$.byteLength ? $fn$jscomp$11$$(!0) : (this.$g$[$channel$jscomp$13$$] += $read_count$jscomp$1$$, this.$h$[$channel$jscomp$13$$] -= $read_count$jscomp$1$$, !$unfinished$$ && $autoinit$$ && (this.$g$[$channel$jscomp$13$$] = this.$j$[$channel$jscomp$13$$], this.$h$[$channel$jscomp$13$$] = this.$l$[$channel$jscomp$13$$]), $buffer$jscomp$26$$.set($start$jscomp$21$$, this.$cpu$.$mem8$.subarray($addr$jscomp$1$$, $addr$jscomp$1$$ + $read_bytes$$), () => 
  {
    $want_more$$ && $autoinit$$ ? this.$do_write$($buffer$jscomp$26$$, $start$jscomp$21$$ + $read_bytes$$, $len$jscomp$13$$ - $read_bytes$$, $channel$jscomp$13$$, $fn$jscomp$11$$) : $fn$jscomp$11$$(!1);
  }));
};
function $JSCompiler_StaticMethods_address_get_8bit$$($JSCompiler_StaticMethods_address_get_8bit$self$$, $channel$jscomp$14$$) {
  var $addr$jscomp$2$$ = $JSCompiler_StaticMethods_address_get_8bit$self$$.$g$[$channel$jscomp$14$$];
  5 <= $channel$jscomp$14$$ && ($addr$jscomp$2$$ <<= 1);
  $addr$jscomp$2$$ = $addr$jscomp$2$$ & 65535 | $JSCompiler_StaticMethods_address_get_8bit$self$$.$o$[$channel$jscomp$14$$] << 16;
  return $addr$jscomp$2$$ |= $JSCompiler_StaticMethods_address_get_8bit$self$$.$s$[$channel$jscomp$14$$] << 24;
}
function $JSCompiler_StaticMethods_count_get_8bit$$($JSCompiler_StaticMethods_count_get_8bit$self_count$jscomp$40$$, $channel$jscomp$15$$) {
  $JSCompiler_StaticMethods_count_get_8bit$self_count$jscomp$40$$ = $JSCompiler_StaticMethods_count_get_8bit$self_count$jscomp$40$$.$h$[$channel$jscomp$15$$] + 1;
  5 <= $channel$jscomp$15$$ && ($JSCompiler_StaticMethods_count_get_8bit$self_count$jscomp$40$$ *= 2);
  return $JSCompiler_StaticMethods_count_get_8bit$self_count$jscomp$40$$;
}
function $JSCompiler_StaticMethods_flipflop_get$$($JSCompiler_StaticMethods_flipflop_get$self$$, $old_dword$$, $new_byte$$, $continuing$$) {
  $continuing$$ || ($JSCompiler_StaticMethods_flipflop_get$self$$.$i$ ^= 1);
  return $JSCompiler_StaticMethods_flipflop_get$self$$.$i$ ? $old_dword$$ & -256 | $new_byte$$ : $old_dword$$ & -65281 | $new_byte$$ << 8;
}
function $JSCompiler_StaticMethods_flipflop_read$$($JSCompiler_StaticMethods_flipflop_read$self$$, $dword$$) {
  $JSCompiler_StaticMethods_flipflop_read$self$$.$i$ ^= 1;
  return $JSCompiler_StaticMethods_flipflop_read$self$$.$i$ ? $dword$$ & 255 : $dword$$ >> 8 & 255;
}
;function $IO$$module$src$io$$($cpu$jscomp$2$$) {
  this.ports = [];
  this.$cpu$ = $cpu$jscomp$2$$;
  for (var $i$jscomp$12$$ = 0; 65536 > $i$jscomp$12$$; $i$jscomp$12$$++) {
    this.ports[$i$jscomp$12$$] = $JSCompiler_StaticMethods_create_empty_entry$$(this);
  }
  var $memory_size$$ = $cpu$jscomp$2$$.$memory_size$[0];
  for ($i$jscomp$12$$ = 0; $i$jscomp$12$$ << 17 < $memory_size$$; $i$jscomp$12$$++) {
    $cpu$jscomp$2$$.$g$[$i$jscomp$12$$] = $cpu$jscomp$2$$.$j$[$i$jscomp$12$$] = void 0, $cpu$jscomp$2$$.$M$[$i$jscomp$12$$] = $cpu$jscomp$2$$.$i$[$i$jscomp$12$$] = void 0;
  }
  $JSCompiler_StaticMethods_mmap_register$$(this, $memory_size$$, 4294967296 - $memory_size$$, function() {
    return 255;
  }, function() {
  }, function() {
    return -1;
  }, function() {
  });
}
function $JSCompiler_StaticMethods_create_empty_entry$$($JSCompiler_StaticMethods_create_empty_entry$self$$) {
  return {$read8$:$JSCompiler_StaticMethods_create_empty_entry$self$$.$empty_port_read8$, $read16$:$JSCompiler_StaticMethods_create_empty_entry$self$$.$empty_port_read16$, $read32$:$JSCompiler_StaticMethods_create_empty_entry$self$$.$empty_port_read32$, $write8$:$JSCompiler_StaticMethods_create_empty_entry$self$$.$empty_port_write$, $write16$:$JSCompiler_StaticMethods_create_empty_entry$self$$.$empty_port_write$, $write32$:$JSCompiler_StaticMethods_create_empty_entry$self$$.$empty_port_write$, $device$:void 0, 
  };
}
$JSCompiler_prototypeAlias$$ = $IO$$module$src$io$$.prototype;
$JSCompiler_prototypeAlias$$.$empty_port_read8$ = function() {
  return 255;
};
$JSCompiler_prototypeAlias$$.$empty_port_read16$ = function() {
  return 65535;
};
$JSCompiler_prototypeAlias$$.$empty_port_read32$ = function() {
  return -1;
};
$JSCompiler_prototypeAlias$$.$empty_port_write$ = function() {
};
function $JSCompiler_StaticMethods_register_read$$($JSCompiler_StaticMethods_register_read$self$$, $port_addr$$, $device$$, $r8$$, $r16$$, $r32$$) {
  $r8$$ && ($JSCompiler_StaticMethods_register_read$self$$.ports[$port_addr$$].$read8$ = $r8$$);
  $r16$$ && ($JSCompiler_StaticMethods_register_read$self$$.ports[$port_addr$$].$read16$ = $r16$$);
  $r32$$ && ($JSCompiler_StaticMethods_register_read$self$$.ports[$port_addr$$].$read32$ = $r32$$);
  $JSCompiler_StaticMethods_register_read$self$$.ports[$port_addr$$].$device$ = $device$$;
}
function $JSCompiler_StaticMethods_register_write$$($JSCompiler_StaticMethods_register_write$self$$, $port_addr$jscomp$1$$, $device$jscomp$1$$, $w8$$, $w16$$, $w32$$) {
  $w8$$ && ($JSCompiler_StaticMethods_register_write$self$$.ports[$port_addr$jscomp$1$$].$write8$ = $w8$$);
  $w16$$ && ($JSCompiler_StaticMethods_register_write$self$$.ports[$port_addr$jscomp$1$$].$write16$ = $w16$$);
  $w32$$ && ($JSCompiler_StaticMethods_register_write$self$$.ports[$port_addr$jscomp$1$$].$write32$ = $w32$$);
  $JSCompiler_StaticMethods_register_write$self$$.ports[$port_addr$jscomp$1$$].$device$ = $device$jscomp$1$$;
}
$JSCompiler_prototypeAlias$$.$register_read_consecutive$ = function($port_addr$jscomp$2$$, $device$jscomp$2$$, $r8_1$$, $r8_2$$, $r8_3$$, $r8_4$$) {
  function $r16_1$$() {
    return $r8_1$$.call(this) | $r8_2$$.call(this) << 8;
  }
  function $r16_2$$() {
    return $r8_3$$.call(this) | $r8_4$$.call(this) << 8;
  }
  function $r32$jscomp$1$$() {
    return $r8_1$$.call(this) | $r8_2$$.call(this) << 8 | $r8_3$$.call(this) << 16 | $r8_4$$.call(this) << 24;
  }
  $r8_3$$ && $r8_4$$ ? ($JSCompiler_StaticMethods_register_read$$(this, $port_addr$jscomp$2$$, $device$jscomp$2$$, $r8_1$$, $r16_1$$, $r32$jscomp$1$$), $JSCompiler_StaticMethods_register_read$$(this, $port_addr$jscomp$2$$ + 1, $device$jscomp$2$$, $r8_2$$), $JSCompiler_StaticMethods_register_read$$(this, $port_addr$jscomp$2$$ + 2, $device$jscomp$2$$, $r8_3$$, $r16_2$$), $JSCompiler_StaticMethods_register_read$$(this, $port_addr$jscomp$2$$ + 3, $device$jscomp$2$$, $r8_4$$)) : ($JSCompiler_StaticMethods_register_read$$(this, 
  $port_addr$jscomp$2$$, $device$jscomp$2$$, $r8_1$$, $r16_1$$), $JSCompiler_StaticMethods_register_read$$(this, $port_addr$jscomp$2$$ + 1, $device$jscomp$2$$, $r8_2$$));
};
$JSCompiler_prototypeAlias$$.$register_write_consecutive$ = function($port_addr$jscomp$3$$, $device$jscomp$3$$, $w8_1$$, $w8_2$$, $w8_3$$, $w8_4$$) {
  function $w16_1$$($data$jscomp$83$$) {
    $w8_1$$.call(this, $data$jscomp$83$$ & 255);
    $w8_2$$.call(this, $data$jscomp$83$$ >> 8 & 255);
  }
  function $w16_2$$($data$jscomp$84$$) {
    $w8_3$$.call(this, $data$jscomp$84$$ & 255);
    $w8_4$$.call(this, $data$jscomp$84$$ >> 8 & 255);
  }
  function $w32$jscomp$1$$($data$jscomp$85$$) {
    $w8_1$$.call(this, $data$jscomp$85$$ & 255);
    $w8_2$$.call(this, $data$jscomp$85$$ >> 8 & 255);
    $w8_3$$.call(this, $data$jscomp$85$$ >> 16 & 255);
    $w8_4$$.call(this, $data$jscomp$85$$ >>> 24);
  }
  $w8_3$$ && $w8_4$$ ? ($JSCompiler_StaticMethods_register_write$$(this, $port_addr$jscomp$3$$, $device$jscomp$3$$, $w8_1$$, $w16_1$$, $w32$jscomp$1$$), $JSCompiler_StaticMethods_register_write$$(this, $port_addr$jscomp$3$$ + 1, $device$jscomp$3$$, $w8_2$$), $JSCompiler_StaticMethods_register_write$$(this, $port_addr$jscomp$3$$ + 2, $device$jscomp$3$$, $w8_3$$, $w16_2$$), $JSCompiler_StaticMethods_register_write$$(this, $port_addr$jscomp$3$$ + 3, $device$jscomp$3$$, $w8_4$$)) : ($JSCompiler_StaticMethods_register_write$$(this, 
  $port_addr$jscomp$3$$, $device$jscomp$3$$, $w8_1$$, $w16_1$$), $JSCompiler_StaticMethods_register_write$$(this, $port_addr$jscomp$3$$ + 1, $device$jscomp$3$$, $w8_2$$));
};
$JSCompiler_prototypeAlias$$.$mmap_read32_shim$ = function($addr$jscomp$7$$) {
  var $fn$jscomp$12$$ = this.$cpu$.$g$[$addr$jscomp$7$$ >>> 17];
  return $fn$jscomp$12$$($addr$jscomp$7$$) | $fn$jscomp$12$$($addr$jscomp$7$$ + 1) << 8 | $fn$jscomp$12$$($addr$jscomp$7$$ + 2) << 16 | $fn$jscomp$12$$($addr$jscomp$7$$ + 3) << 24;
};
$JSCompiler_prototypeAlias$$.$mmap_write32_shim$ = function($addr$jscomp$8$$, $value$jscomp$98$$) {
  var $fn$jscomp$13$$ = this.$cpu$.$j$[$addr$jscomp$8$$ >>> 17];
  $fn$jscomp$13$$($addr$jscomp$8$$, $value$jscomp$98$$ & 255);
  $fn$jscomp$13$$($addr$jscomp$8$$ + 1, $value$jscomp$98$$ >> 8 & 255);
  $fn$jscomp$13$$($addr$jscomp$8$$ + 2, $value$jscomp$98$$ >> 16 & 255);
  $fn$jscomp$13$$($addr$jscomp$8$$ + 3, $value$jscomp$98$$ >>> 24);
};
function $JSCompiler_StaticMethods_mmap_register$$($JSCompiler_StaticMethods_mmap_register$self$$, $addr$jscomp$9_aligned_addr$jscomp$2$$, $size$jscomp$27$$, $read_func8$$, $write_func8$$, $read_func32$$, $write_func32$$) {
  $read_func32$$ || ($read_func32$$ = $JSCompiler_StaticMethods_mmap_register$self$$.$mmap_read32_shim$.bind($JSCompiler_StaticMethods_mmap_register$self$$));
  $write_func32$$ || ($write_func32$$ = $JSCompiler_StaticMethods_mmap_register$self$$.$mmap_write32_shim$.bind($JSCompiler_StaticMethods_mmap_register$self$$));
  for ($addr$jscomp$9_aligned_addr$jscomp$2$$ >>>= 17; 0 < $size$jscomp$27$$; $addr$jscomp$9_aligned_addr$jscomp$2$$++) {
    $JSCompiler_StaticMethods_mmap_register$self$$.$cpu$.$g$[$addr$jscomp$9_aligned_addr$jscomp$2$$] = $read_func8$$, $JSCompiler_StaticMethods_mmap_register$self$$.$cpu$.$j$[$addr$jscomp$9_aligned_addr$jscomp$2$$] = $write_func8$$, $JSCompiler_StaticMethods_mmap_register$self$$.$cpu$.$M$[$addr$jscomp$9_aligned_addr$jscomp$2$$] = $read_func32$$, $JSCompiler_StaticMethods_mmap_register$self$$.$cpu$.$i$[$addr$jscomp$9_aligned_addr$jscomp$2$$] = $write_func32$$, $size$jscomp$27$$ -= 131072;
  }
}
function $JSCompiler_StaticMethods_port_read32$$($JSCompiler_StaticMethods_port_read32$self_entry$jscomp$5$$, $port_addr$jscomp$9$$) {
  $JSCompiler_StaticMethods_port_read32$self_entry$jscomp$5$$ = $JSCompiler_StaticMethods_port_read32$self_entry$jscomp$5$$.ports[$port_addr$jscomp$9$$];
  return $JSCompiler_StaticMethods_port_read32$self_entry$jscomp$5$$.$read32$.call($JSCompiler_StaticMethods_port_read32$self_entry$jscomp$5$$.$device$, $port_addr$jscomp$9$$);
}
;function $BusConnector$$module$src$bus$$() {
  this.$listeners$ = {};
  this.$g$ = void 0;
}
$BusConnector$$module$src$bus$$.prototype.register = function($name$jscomp$78$$, $fn$jscomp$14$$, $this_value$jscomp$1$$) {
  var $listeners$$ = this.$listeners$[$name$jscomp$78$$];
  void 0 === $listeners$$ && ($listeners$$ = this.$listeners$[$name$jscomp$78$$] = []);
  $listeners$$.push({$fn$:$fn$jscomp$14$$, $this_value$:$this_value$jscomp$1$$, });
};
$BusConnector$$module$src$bus$$.prototype.unregister = function($name$jscomp$79$$, $fn$jscomp$15$$) {
  var $listeners$jscomp$1$$ = this.$listeners$[$name$jscomp$79$$];
  void 0 !== $listeners$jscomp$1$$ && (this.$listeners$[$name$jscomp$79$$] = $listeners$jscomp$1$$.filter(function($l$$) {
    return $l$$.$fn$ !== $fn$jscomp$15$$;
  }));
};
$BusConnector$$module$src$bus$$.prototype.send = function($listeners$jscomp$2_name$jscomp$80$$, $value$jscomp$102$$) {
  if (this.$g$ && ($listeners$jscomp$2_name$jscomp$80$$ = this.$g$.$listeners$[$listeners$jscomp$2_name$jscomp$80$$], void 0 !== $listeners$jscomp$2_name$jscomp$80$$)) {
    for (var $i$jscomp$13$$ = 0; $i$jscomp$13$$ < $listeners$jscomp$2_name$jscomp$80$$.length; $i$jscomp$13$$++) {
      var $listener$jscomp$64$$ = $listeners$jscomp$2_name$jscomp$80$$[$i$jscomp$13$$];
      $listener$jscomp$64$$.$fn$.call($listener$jscomp$64$$.$this_value$, $value$jscomp$102$$);
    }
  }
};
function $Bus$$module$src$bus$create$$() {
  var $c0$$ = new $BusConnector$$module$src$bus$$, $c1$$ = new $BusConnector$$module$src$bus$$;
  $c0$$.$g$ = $c1$$;
  $c1$$.$g$ = $c0$$;
  return [$c0$$, $c1$$];
}
;var $DSP_COMMAND_SIZES$$module$src$sb16$$ = new Uint8Array(256), $DSP_COMMAND_HANDLERS$$module$src$sb16$$ = [], $MIXER_READ_HANDLERS$$module$src$sb16$$ = [], $MIXER_WRITE_HANDLERS$$module$src$sb16$$ = [], $MIXER_REGISTER_IS_LEGACY$$module$src$sb16$$ = new Uint8Array(256), $FM_HANDLERS$$module$src$sb16$$ = [];
function $SB16$$module$src$sb16$$($cpu$jscomp$3$$, $bus$$) {
  this.$cpu$ = $cpu$jscomp$3$$;
  this.$bus$ = $bus$$;
  this.$write_buffer$ = new $ByteQueue$$module$src$lib$$(64);
  this.$read_buffer$ = new $ByteQueue$$module$src$lib$$(64);
  this.$i$ = this.$o$ = this.$command$ = this.$B$ = 0;
  this.$mixer_registers$ = new Uint8Array(256);
  $JSCompiler_StaticMethods_mixer_reset$$(this);
  this.$dummy_speaker_enabled$ = !1;
  this.$test_register$ = 0;
  this.$dsp_signed$ = this.$dsp_16bit$ = this.$dsp_stereo$ = this.$dsp_highspeed$ = !1;
  this.$dac_buffers$ = [new $FloatQueue$$module$src$lib$$, new $FloatQueue$$module$src$lib$$, ];
  this.$dma$ = $cpu$jscomp$3$$.$devices$.$dma$;
  this.$dma_channel$ = this.$dma_irq$ = this.$j$ = this.$dma_bytes_left$ = this.$l$ = this.$v$ = 0;
  this.$dma_channel_8bit$ = 1;
  this.$dma_channel_16bit$ = 5;
  this.$dma_autoinit$ = !1;
  this.$g$ = new ArrayBuffer(65536);
  this.$J$ = new Int8Array(this.$g$);
  this.$u$ = new Uint8Array(this.$g$);
  this.$I$ = new Int16Array(this.$g$);
  this.$K$ = new Uint16Array(this.$g$);
  this.$M$ = new $SyncBuffer$$module$src$buffer$$(this.$g$);
  this.$dma_paused$ = this.$s$ = !1;
  this.$sampling_rate$ = 22050;
  $bus$$.send("dac-tell-sampling-rate", this.$sampling_rate$);
  this.$h$ = 1;
  this.$D$ = 170;
  this.$C$ = 0;
  this.$asp_registers$ = new Uint8Array(256);
  this.$A$ = new $ByteQueue$$module$src$lib$$(64);
  this.$G$ = this.$F$ = this.$O$ = 0;
  this.$fm_waveform_select_enable$ = !1;
  this.$irq$ = 5;
  this.$irq_triggered$ = new Uint8Array(16);
  $cpu$jscomp$3$$.$io$.$register_read_consecutive$(544, this, this.$port2x0_read$, this.$port2x1_read$, this.$port2x2_read$, this.$port2x3_read$);
  $cpu$jscomp$3$$.$io$.$register_read_consecutive$(904, this, this.$port2x0_read$, this.$port2x1_read$);
  $cpu$jscomp$3$$.$io$.$register_read_consecutive$(548, this, this.$port2x4_read$, this.$port2x5_read$);
  $JSCompiler_StaticMethods_register_read$$($cpu$jscomp$3$$.$io$, 550, this, this.$port2x6_read$);
  $JSCompiler_StaticMethods_register_read$$($cpu$jscomp$3$$.$io$, 551, this, this.$port2x7_read$);
  $JSCompiler_StaticMethods_register_read$$($cpu$jscomp$3$$.$io$, 552, this, this.$port2x8_read$);
  $JSCompiler_StaticMethods_register_read$$($cpu$jscomp$3$$.$io$, 553, this, this.$port2x9_read$);
  $JSCompiler_StaticMethods_register_read$$($cpu$jscomp$3$$.$io$, 554, this, this.$port2xA_read$);
  $JSCompiler_StaticMethods_register_read$$($cpu$jscomp$3$$.$io$, 555, this, this.$port2xB_read$);
  $JSCompiler_StaticMethods_register_read$$($cpu$jscomp$3$$.$io$, 556, this, this.$port2xC_read$);
  $JSCompiler_StaticMethods_register_read$$($cpu$jscomp$3$$.$io$, 557, this, this.$port2xD_read$);
  $cpu$jscomp$3$$.$io$.$register_read_consecutive$(558, this, this.$port2xE_read$, this.$port2xF_read$);
  $cpu$jscomp$3$$.$io$.$register_write_consecutive$(544, this, this.$port2x0_write$, this.$port2x1_write$, this.$port2x2_write$, this.$port2x3_write$);
  $cpu$jscomp$3$$.$io$.$register_write_consecutive$(904, this, this.$port2x0_write$, this.$port2x1_write$);
  $cpu$jscomp$3$$.$io$.$register_write_consecutive$(548, this, this.$port2x4_write$, this.$port2x5_write$);
  $JSCompiler_StaticMethods_register_write$$($cpu$jscomp$3$$.$io$, 550, this, this.$port2x6_write$);
  $JSCompiler_StaticMethods_register_write$$($cpu$jscomp$3$$.$io$, 551, this, this.$port2x7_write$);
  $cpu$jscomp$3$$.$io$.$register_write_consecutive$(552, this, this.$port2x8_write$, this.$port2x9_write$);
  $JSCompiler_StaticMethods_register_write$$($cpu$jscomp$3$$.$io$, 554, this, this.$port2xA_write$);
  $JSCompiler_StaticMethods_register_write$$($cpu$jscomp$3$$.$io$, 555, this, this.$port2xB_write$);
  $JSCompiler_StaticMethods_register_write$$($cpu$jscomp$3$$.$io$, 556, this, this.$port2xC_write$);
  $JSCompiler_StaticMethods_register_write$$($cpu$jscomp$3$$.$io$, 557, this, this.$port2xD_write$);
  $JSCompiler_StaticMethods_register_write$$($cpu$jscomp$3$$.$io$, 558, this, this.$port2xE_write$);
  $JSCompiler_StaticMethods_register_write$$($cpu$jscomp$3$$.$io$, 559, this, this.$port2xF_write$);
  $cpu$jscomp$3$$.$io$.$register_read_consecutive$(816, this, this.$port3x0_read$, this.$port3x1_read$);
  $cpu$jscomp$3$$.$io$.$register_write_consecutive$(816, this, this.$port3x0_write$, this.$port3x1_write$);
  this.$dma$.$unmask_listeners$.push({$fn$:this.$L$, $this_value$:this, });
  $bus$$.register("dac-request-data", function() {
    !this.$dma_bytes_left$ || this.$dma_paused$ ? $JSCompiler_StaticMethods_dac_send$$(this) : $JSCompiler_StaticMethods_dma_transfer_next$$(this);
  }, this);
  $bus$$.register("speaker-has-initialized", function() {
    $JSCompiler_StaticMethods_mixer_reset$$(this);
  }, this);
  $bus$$.send("speaker-confirm-initialized");
  $JSCompiler_StaticMethods_dsp_reset$$(this);
}
function $JSCompiler_StaticMethods_dsp_reset$$($JSCompiler_StaticMethods_dsp_reset$self$$) {
  $JSCompiler_StaticMethods_dsp_reset$self$$.$write_buffer$.clear();
  $JSCompiler_StaticMethods_dsp_reset$self$$.$read_buffer$.clear();
  $JSCompiler_StaticMethods_dsp_reset$self$$.$command$ = 0;
  $JSCompiler_StaticMethods_dsp_reset$self$$.$o$ = 0;
  $JSCompiler_StaticMethods_dsp_reset$self$$.$dummy_speaker_enabled$ = !1;
  $JSCompiler_StaticMethods_dsp_reset$self$$.$test_register$ = 0;
  $JSCompiler_StaticMethods_dsp_reset$self$$.$dsp_highspeed$ = !1;
  $JSCompiler_StaticMethods_dsp_reset$self$$.$dsp_stereo$ = !1;
  $JSCompiler_StaticMethods_dsp_reset$self$$.$dsp_16bit$ = !1;
  $JSCompiler_StaticMethods_dsp_reset$self$$.$dsp_signed$ = !1;
  $JSCompiler_StaticMethods_dsp_reset$self$$.$dac_buffers$[0].clear();
  $JSCompiler_StaticMethods_dsp_reset$self$$.$dac_buffers$[1].clear();
  $JSCompiler_StaticMethods_dsp_reset$self$$.$v$ = 0;
  $JSCompiler_StaticMethods_dsp_reset$self$$.$l$ = 0;
  $JSCompiler_StaticMethods_dsp_reset$self$$.$dma_bytes_left$ = 0;
  $JSCompiler_StaticMethods_dsp_reset$self$$.$j$ = 0;
  $JSCompiler_StaticMethods_dsp_reset$self$$.$dma_irq$ = 0;
  $JSCompiler_StaticMethods_dsp_reset$self$$.$dma_channel$ = 0;
  $JSCompiler_StaticMethods_dsp_reset$self$$.$dma_autoinit$ = !1;
  $JSCompiler_StaticMethods_dsp_reset$self$$.$u$.fill(0);
  $JSCompiler_StaticMethods_dsp_reset$self$$.$s$ = !1;
  $JSCompiler_StaticMethods_dsp_reset$self$$.$dma_paused$ = !1;
  $JSCompiler_StaticMethods_dsp_reset$self$$.$D$ = 170;
  $JSCompiler_StaticMethods_dsp_reset$self$$.$C$ = 0;
  $JSCompiler_StaticMethods_dsp_reset$self$$.$sampling_rate$ = 22050;
  $JSCompiler_StaticMethods_dsp_reset$self$$.$h$ = 1;
  $JSCompiler_StaticMethods_JSC$1720_lower_irq$$($JSCompiler_StaticMethods_dsp_reset$self$$, 1);
  $JSCompiler_StaticMethods_dsp_reset$self$$.$irq_triggered$.fill(0);
  $JSCompiler_StaticMethods_dsp_reset$self$$.$asp_registers$.fill(0);
  $JSCompiler_StaticMethods_dsp_reset$self$$.$asp_registers$[5] = 1;
  $JSCompiler_StaticMethods_dsp_reset$self$$.$asp_registers$[9] = 248;
}
$JSCompiler_prototypeAlias$$ = $SB16$$module$src$sb16$$.prototype;
$JSCompiler_prototypeAlias$$.$get_state$ = function() {
  var $state$jscomp$5$$ = [];
  $state$jscomp$5$$[2] = this.$B$;
  $state$jscomp$5$$[3] = this.$command$;
  $state$jscomp$5$$[4] = this.$o$;
  $state$jscomp$5$$[5] = this.$i$;
  $state$jscomp$5$$[6] = this.$mixer_registers$;
  $state$jscomp$5$$[7] = this.$dummy_speaker_enabled$;
  $state$jscomp$5$$[8] = this.$test_register$;
  $state$jscomp$5$$[9] = this.$dsp_highspeed$;
  $state$jscomp$5$$[10] = this.$dsp_stereo$;
  $state$jscomp$5$$[11] = this.$dsp_16bit$;
  $state$jscomp$5$$[12] = this.$dsp_signed$;
  $state$jscomp$5$$[15] = this.$v$;
  $state$jscomp$5$$[16] = this.$l$;
  $state$jscomp$5$$[17] = this.$dma_bytes_left$;
  $state$jscomp$5$$[18] = this.$j$;
  $state$jscomp$5$$[19] = this.$dma_irq$;
  $state$jscomp$5$$[20] = this.$dma_channel$;
  $state$jscomp$5$$[21] = this.$dma_channel_8bit$;
  $state$jscomp$5$$[22] = this.$dma_channel_16bit$;
  $state$jscomp$5$$[23] = this.$dma_autoinit$;
  $state$jscomp$5$$[24] = this.$u$;
  $state$jscomp$5$$[25] = this.$s$;
  $state$jscomp$5$$[26] = this.$dma_paused$;
  $state$jscomp$5$$[27] = this.$sampling_rate$;
  $state$jscomp$5$$[28] = this.$h$;
  $state$jscomp$5$$[29] = this.$D$;
  $state$jscomp$5$$[30] = this.$C$;
  $state$jscomp$5$$[31] = this.$asp_registers$;
  $state$jscomp$5$$[33] = this.$R$;
  $state$jscomp$5$$[34] = this.$irq$;
  $state$jscomp$5$$[35] = this.$irq_triggered$;
  return $state$jscomp$5$$;
};
$JSCompiler_prototypeAlias$$.$set_state$ = function($state$jscomp$6$$) {
  this.$B$ = $state$jscomp$6$$[2];
  this.$command$ = $state$jscomp$6$$[3];
  this.$o$ = $state$jscomp$6$$[4];
  this.$i$ = $state$jscomp$6$$[5];
  this.$mixer_registers$ = $state$jscomp$6$$[6];
  $JSCompiler_StaticMethods_mixer_full_update$$(this);
  this.$dummy_speaker_enabled$ = $state$jscomp$6$$[7];
  this.$test_register$ = $state$jscomp$6$$[8];
  this.$dsp_highspeed$ = $state$jscomp$6$$[9];
  this.$dsp_stereo$ = $state$jscomp$6$$[10];
  this.$dsp_16bit$ = $state$jscomp$6$$[11];
  this.$dsp_signed$ = $state$jscomp$6$$[12];
  this.$v$ = $state$jscomp$6$$[15];
  this.$l$ = $state$jscomp$6$$[16];
  this.$dma_bytes_left$ = $state$jscomp$6$$[17];
  this.$j$ = $state$jscomp$6$$[18];
  this.$dma_irq$ = $state$jscomp$6$$[19];
  this.$dma_channel$ = $state$jscomp$6$$[20];
  this.$dma_channel_8bit$ = $state$jscomp$6$$[21];
  this.$dma_channel_16bit$ = $state$jscomp$6$$[22];
  this.$dma_autoinit$ = $state$jscomp$6$$[23];
  this.$u$ = $state$jscomp$6$$[24];
  this.$s$ = $state$jscomp$6$$[25];
  this.$dma_paused$ = $state$jscomp$6$$[26];
  this.$sampling_rate$ = $state$jscomp$6$$[27];
  this.$h$ = $state$jscomp$6$$[28];
  this.$D$ = $state$jscomp$6$$[29];
  this.$C$ = $state$jscomp$6$$[30];
  this.$asp_registers$ = $state$jscomp$6$$[31];
  this.$R$ = $state$jscomp$6$$[33];
  this.$irq$ = $state$jscomp$6$$[34];
  this.$irq_triggered$ = $state$jscomp$6$$[35];
  this.$g$ = this.$u$.buffer;
  this.$J$ = new Int8Array(this.$g$);
  this.$I$ = new Int16Array(this.$g$);
  this.$K$ = new Uint16Array(this.$g$);
  this.$M$ = new $SyncBuffer$$module$src$buffer$$(this.$g$);
  this.$dma_paused$ ? this.$bus$.send("dac-disable") : this.$bus$.send("dac-enable");
};
$JSCompiler_prototypeAlias$$.$port2x0_read$ = function() {
  return 255;
};
$JSCompiler_prototypeAlias$$.$port2x1_read$ = function() {
  return 255;
};
$JSCompiler_prototypeAlias$$.$port2x2_read$ = function() {
  return 255;
};
$JSCompiler_prototypeAlias$$.$port2x3_read$ = function() {
  return 255;
};
$JSCompiler_prototypeAlias$$.$port2x4_read$ = function() {
  return this.$i$;
};
$JSCompiler_prototypeAlias$$.$port2x5_read$ = function() {
  var $address$jscomp$inline_102$$ = this.$i$, $handler$jscomp$inline_103$$ = $MIXER_READ_HANDLERS$$module$src$sb16$$[$address$jscomp$inline_102$$];
  return $handler$jscomp$inline_103$$ ? $handler$jscomp$inline_103$$.call(this) : this.$mixer_registers$[$address$jscomp$inline_102$$];
};
$JSCompiler_prototypeAlias$$.$port2x6_read$ = function() {
  return 255;
};
$JSCompiler_prototypeAlias$$.$port2x7_read$ = function() {
  return 255;
};
$JSCompiler_prototypeAlias$$.$port2x8_read$ = function() {
  return 255;
};
$JSCompiler_prototypeAlias$$.$port2x9_read$ = function() {
  return 255;
};
$JSCompiler_prototypeAlias$$.$port2xA_read$ = function() {
  this.$read_buffer$.length && (this.$B$ = this.$read_buffer$.shift());
  return this.$B$;
};
$JSCompiler_prototypeAlias$$.$port2xB_read$ = function() {
  return 255;
};
$JSCompiler_prototypeAlias$$.$port2xC_read$ = function() {
  return 127;
};
$JSCompiler_prototypeAlias$$.$port2xD_read$ = function() {
  return 255;
};
$JSCompiler_prototypeAlias$$.$port2xE_read$ = function() {
  this.$irq_triggered$[1] && $JSCompiler_StaticMethods_JSC$1720_lower_irq$$(this, 1);
  return (this.$read_buffer$.length && !this.$dsp_highspeed$) << 7 | 127;
};
$JSCompiler_prototypeAlias$$.$port2xF_read$ = function() {
  $JSCompiler_StaticMethods_JSC$1720_lower_irq$$(this, 2);
  return 0;
};
$JSCompiler_prototypeAlias$$.$port2x0_write$ = function() {
  this.$F$ = 0;
};
$JSCompiler_prototypeAlias$$.$port2x1_write$ = function($value$jscomp$105$$) {
  var $handler$jscomp$3$$ = $FM_HANDLERS$$module$src$sb16$$[this.$F$];
  $handler$jscomp$3$$ || ($handler$jscomp$3$$ = this.$H$);
  $handler$jscomp$3$$.call(this, $value$jscomp$105$$, 0, this.$F$);
};
$JSCompiler_prototypeAlias$$.$port2x2_write$ = function() {
  this.$G$ = 0;
};
$JSCompiler_prototypeAlias$$.$port2x3_write$ = function($value$jscomp$107$$) {
  var $handler$jscomp$4$$ = $FM_HANDLERS$$module$src$sb16$$[this.$G$];
  $handler$jscomp$4$$ || ($handler$jscomp$4$$ = this.$H$);
  $handler$jscomp$4$$.call(this, $value$jscomp$107$$, 1, this.$G$);
};
$JSCompiler_prototypeAlias$$.$port2x4_write$ = function($value$jscomp$108$$) {
  this.$i$ = $value$jscomp$108$$;
};
$JSCompiler_prototypeAlias$$.$port2x5_write$ = function($value$jscomp$109$$) {
  $JSCompiler_StaticMethods_mixer_write$$(this, this.$i$, $value$jscomp$109$$);
};
$JSCompiler_prototypeAlias$$.$port2x6_write$ = function($yesplease$$) {
  this.$dsp_highspeed$ ? this.$dsp_highspeed$ = !1 : $yesplease$$ && $JSCompiler_StaticMethods_dsp_reset$$(this);
  this.$read_buffer$.clear();
  this.$read_buffer$.push(170);
};
$JSCompiler_prototypeAlias$$.$port2x7_write$ = function() {
};
$JSCompiler_prototypeAlias$$.$port2x8_write$ = function() {
};
$JSCompiler_prototypeAlias$$.$port2x9_write$ = function() {
};
$JSCompiler_prototypeAlias$$.$port2xA_write$ = function() {
};
$JSCompiler_prototypeAlias$$.$port2xB_write$ = function() {
};
$JSCompiler_prototypeAlias$$.$port2xC_write$ = function($handler$jscomp$inline_107_value$jscomp$115$$) {
  0 === this.$command$ ? (this.$command$ = $handler$jscomp$inline_107_value$jscomp$115$$, this.$write_buffer$.clear(), this.$o$ = $DSP_COMMAND_SIZES$$module$src$sb16$$[$handler$jscomp$inline_107_value$jscomp$115$$]) : this.$write_buffer$.push($handler$jscomp$inline_107_value$jscomp$115$$);
  this.$write_buffer$.length >= this.$o$ && ($handler$jscomp$inline_107_value$jscomp$115$$ = $DSP_COMMAND_HANDLERS$$module$src$sb16$$[this.$command$], $handler$jscomp$inline_107_value$jscomp$115$$ || ($handler$jscomp$inline_107_value$jscomp$115$$ = this.$dsp_default_handler$), $handler$jscomp$inline_107_value$jscomp$115$$.call(this), this.$o$ = this.$command$ = 0, this.$write_buffer$.clear());
};
$JSCompiler_prototypeAlias$$.$port2xD_write$ = function() {
};
$JSCompiler_prototypeAlias$$.$port2xE_write$ = function() {
};
$JSCompiler_prototypeAlias$$.$port2xF_write$ = function() {
};
$JSCompiler_prototypeAlias$$.$port3x0_read$ = function() {
  this.$A$.length && (this.$O$ = this.$A$.shift());
  return this.$O$;
};
$JSCompiler_prototypeAlias$$.$port3x0_write$ = function() {
};
$JSCompiler_prototypeAlias$$.$port3x1_read$ = function() {
  return 0 | 128 * !this.$A$.length;
};
$JSCompiler_prototypeAlias$$.$port3x1_write$ = function($value$jscomp$120$$) {
  255 === $value$jscomp$120$$ && (this.$A$.clear(), this.$A$.push(254));
};
$JSCompiler_prototypeAlias$$.$dsp_default_handler$ = function() {
};
function $register_dsp_command$$module$src$sb16$$($commands$$, $size$jscomp$28$$, $handler$jscomp$6$$) {
  $handler$jscomp$6$$ || ($handler$jscomp$6$$ = $SB16$$module$src$sb16$$.prototype.$dsp_default_handler$);
  for (var $i$jscomp$14$$ = 0; $i$jscomp$14$$ < $commands$$.length; $i$jscomp$14$$++) {
    $DSP_COMMAND_SIZES$$module$src$sb16$$[$commands$$[$i$jscomp$14$$]] = $size$jscomp$28$$, $DSP_COMMAND_HANDLERS$$module$src$sb16$$[$commands$$[$i$jscomp$14$$]] = $handler$jscomp$6$$;
  }
}
function $any_first_digit$$module$src$sb16$$($base$jscomp$3$$) {
  for (var $commands$jscomp$1$$ = [], $i$jscomp$15$$ = 0; 16 > $i$jscomp$15$$; $i$jscomp$15$$++) {
    $commands$jscomp$1$$.push($base$jscomp$3$$ + $i$jscomp$15$$);
  }
  return $commands$jscomp$1$$;
}
$register_dsp_command$$module$src$sb16$$([14], 2, function() {
  this.$asp_registers$[this.$write_buffer$.shift()] = this.$write_buffer$.shift();
});
$register_dsp_command$$module$src$sb16$$([15], 1, function() {
  this.$read_buffer$.clear();
  this.$read_buffer$.push(this.$asp_registers$[this.$write_buffer$.shift()]);
});
$register_dsp_command$$module$src$sb16$$([16], 1, function() {
  var $value$jscomp$121_value$jscomp$inline_896$$ = this.$write_buffer$.shift();
  $value$jscomp$121_value$jscomp$inline_896$$ = $audio_clip$$module$src$sb16$$($value$jscomp$121_value$jscomp$inline_896$$ / 127.5 + -1);
  this.$dac_buffers$[0].push($value$jscomp$121_value$jscomp$inline_896$$);
  this.$dac_buffers$[1].push($value$jscomp$121_value$jscomp$inline_896$$);
  this.$bus$.send("dac-enable");
});
$register_dsp_command$$module$src$sb16$$([20, 21], 2, function() {
  this.$dma_irq$ = 1;
  this.$dma_channel$ = this.$dma_channel_8bit$;
  this.$dsp_highspeed$ = this.$dsp_16bit$ = this.$dsp_signed$ = this.$dma_autoinit$ = !1;
  $JSCompiler_StaticMethods_dma_transfer_size_set$$(this);
  $JSCompiler_StaticMethods_dma_transfer_start$$(this);
});
$register_dsp_command$$module$src$sb16$$([22], 2);
$register_dsp_command$$module$src$sb16$$([23], 2);
$register_dsp_command$$module$src$sb16$$([28], 0, function() {
  this.$dma_irq$ = 1;
  this.$dma_channel$ = this.$dma_channel_8bit$;
  this.$dma_autoinit$ = !0;
  this.$dsp_highspeed$ = this.$dsp_16bit$ = this.$dsp_signed$ = !1;
  $JSCompiler_StaticMethods_dma_transfer_start$$(this);
});
$register_dsp_command$$module$src$sb16$$([31], 0);
$register_dsp_command$$module$src$sb16$$([32], 0, function() {
  this.$read_buffer$.clear();
  this.$read_buffer$.push(127);
});
$register_dsp_command$$module$src$sb16$$([36], 2);
$register_dsp_command$$module$src$sb16$$([44], 0);
$register_dsp_command$$module$src$sb16$$([48], 0);
$register_dsp_command$$module$src$sb16$$([49], 0);
$register_dsp_command$$module$src$sb16$$([52], 0);
$register_dsp_command$$module$src$sb16$$([53], 0);
$register_dsp_command$$module$src$sb16$$([54], 0);
$register_dsp_command$$module$src$sb16$$([55], 0);
$register_dsp_command$$module$src$sb16$$([56], 0);
$register_dsp_command$$module$src$sb16$$([64], 1, function() {
  $JSCompiler_StaticMethods_sampling_rate_change$$(this, 1000000 / (256 - this.$write_buffer$.shift()) / (this.$dsp_stereo$ ? 2 : 1));
});
$register_dsp_command$$module$src$sb16$$([65, 66], 2, function() {
  $JSCompiler_StaticMethods_sampling_rate_change$$(this, this.$write_buffer$.shift() << 8 | this.$write_buffer$.shift());
});
$register_dsp_command$$module$src$sb16$$([72], 2, function() {
  $JSCompiler_StaticMethods_dma_transfer_size_set$$(this);
});
$register_dsp_command$$module$src$sb16$$([116], 2);
$register_dsp_command$$module$src$sb16$$([117], 2);
$register_dsp_command$$module$src$sb16$$([118], 2);
$register_dsp_command$$module$src$sb16$$([119], 2);
$register_dsp_command$$module$src$sb16$$([125], 0);
$register_dsp_command$$module$src$sb16$$([127], 0);
$register_dsp_command$$module$src$sb16$$([128], 2);
$register_dsp_command$$module$src$sb16$$([144], 0, function() {
  this.$dma_irq$ = 1;
  this.$dma_channel$ = this.$dma_channel_8bit$;
  this.$dma_autoinit$ = !0;
  this.$dsp_signed$ = !1;
  this.$dsp_highspeed$ = !0;
  this.$dsp_16bit$ = !1;
  $JSCompiler_StaticMethods_dma_transfer_start$$(this);
});
$register_dsp_command$$module$src$sb16$$([145], 0);
$register_dsp_command$$module$src$sb16$$([152], 0);
$register_dsp_command$$module$src$sb16$$([153], 0);
$register_dsp_command$$module$src$sb16$$([160], 0);
$register_dsp_command$$module$src$sb16$$([168], 0);
$register_dsp_command$$module$src$sb16$$($any_first_digit$$module$src$sb16$$(176), 3, function() {
  if (!(this.$command$ & 8)) {
    var $mode$jscomp$15$$ = this.$write_buffer$.shift();
    this.$dma_irq$ = 2;
    this.$dma_channel$ = this.$dma_channel_16bit$;
    this.$dma_autoinit$ = !!(this.$command$ & 4);
    this.$dsp_signed$ = !!($mode$jscomp$15$$ & 16);
    this.$dsp_stereo$ = !!($mode$jscomp$15$$ & 32);
    this.$dsp_16bit$ = !0;
    $JSCompiler_StaticMethods_dma_transfer_size_set$$(this);
    $JSCompiler_StaticMethods_dma_transfer_start$$(this);
  }
});
$register_dsp_command$$module$src$sb16$$($any_first_digit$$module$src$sb16$$(192), 3, function() {
  if (!(this.$command$ & 8)) {
    var $mode$jscomp$16$$ = this.$write_buffer$.shift();
    this.$dma_irq$ = 1;
    this.$dma_channel$ = this.$dma_channel_8bit$;
    this.$dma_autoinit$ = !!(this.$command$ & 4);
    this.$dsp_signed$ = !!($mode$jscomp$16$$ & 16);
    this.$dsp_stereo$ = !!($mode$jscomp$16$$ & 32);
    this.$dsp_16bit$ = !1;
    $JSCompiler_StaticMethods_dma_transfer_size_set$$(this);
    $JSCompiler_StaticMethods_dma_transfer_start$$(this);
  }
});
$register_dsp_command$$module$src$sb16$$([208], 0, function() {
  this.$dma_paused$ = !0;
  this.$bus$.send("dac-disable");
});
$register_dsp_command$$module$src$sb16$$([209], 0, function() {
  this.$dummy_speaker_enabled$ = !0;
});
$register_dsp_command$$module$src$sb16$$([211], 0, function() {
  this.$dummy_speaker_enabled$ = !1;
});
$register_dsp_command$$module$src$sb16$$([212], 0, function() {
  this.$dma_paused$ = !1;
  this.$bus$.send("dac-enable");
});
$register_dsp_command$$module$src$sb16$$([213], 0, function() {
  this.$dma_paused$ = !0;
  this.$bus$.send("dac-disable");
});
$register_dsp_command$$module$src$sb16$$([214], 0, function() {
  this.$dma_paused$ = !1;
  this.$bus$.send("dac-enable");
});
$register_dsp_command$$module$src$sb16$$([216], 0, function() {
  this.$read_buffer$.clear();
  this.$read_buffer$.push(255 * this.$dummy_speaker_enabled$);
});
$register_dsp_command$$module$src$sb16$$([217, 218], 0, function() {
  this.$dma_autoinit$ = !1;
});
$register_dsp_command$$module$src$sb16$$([224], 1, function() {
  this.$read_buffer$.clear();
  this.$read_buffer$.push(~this.$write_buffer$.shift());
});
$register_dsp_command$$module$src$sb16$$([225], 0, function() {
  this.$read_buffer$.clear();
  this.$read_buffer$.push(4);
  this.$read_buffer$.push(5);
});
$register_dsp_command$$module$src$sb16$$([226], 1);
$register_dsp_command$$module$src$sb16$$([227], 0, function() {
  this.$read_buffer$.clear();
  for (var $i$jscomp$16$$ = 0; 44 > $i$jscomp$16$$; $i$jscomp$16$$++) {
    this.$read_buffer$.push("COPYRIGHT (C) CREATIVE TECHNOLOGY LTD, 1992.".charCodeAt($i$jscomp$16$$));
  }
  this.$read_buffer$.push(0);
});
$register_dsp_command$$module$src$sb16$$([228], 1, function() {
  this.$test_register$ = this.$write_buffer$.shift();
});
$register_dsp_command$$module$src$sb16$$([232], 0, function() {
  this.$read_buffer$.clear();
  this.$read_buffer$.push(this.$test_register$);
});
$register_dsp_command$$module$src$sb16$$([242, 243], 0, function() {
  this.$raise_irq$();
});
var $SB_F9$$module$src$sb16$$ = new Uint8Array(256);
$SB_F9$$module$src$sb16$$[14] = 255;
$SB_F9$$module$src$sb16$$[15] = 7;
$SB_F9$$module$src$sb16$$[55] = 56;
$register_dsp_command$$module$src$sb16$$([249], 1, function() {
  var $input$jscomp$9$$ = this.$write_buffer$.shift();
  this.$read_buffer$.clear();
  this.$read_buffer$.push($SB_F9$$module$src$sb16$$[$input$jscomp$9$$]);
});
function $JSCompiler_StaticMethods_mixer_write$$($JSCompiler_StaticMethods_mixer_write$self$$, $address$jscomp$1_handler$jscomp$8$$, $data$jscomp$90$$) {
  ($address$jscomp$1_handler$jscomp$8$$ = $MIXER_WRITE_HANDLERS$$module$src$sb16$$[$address$jscomp$1_handler$jscomp$8$$]) && $address$jscomp$1_handler$jscomp$8$$.call($JSCompiler_StaticMethods_mixer_write$self$$, $data$jscomp$90$$);
}
$SB16$$module$src$sb16$$.prototype.$N$ = function() {
  return this.$mixer_registers$[this.$i$];
};
$SB16$$module$src$sb16$$.prototype.$P$ = function($data$jscomp$91$$) {
  this.$mixer_registers$[this.$i$] = $data$jscomp$91$$;
};
function $JSCompiler_StaticMethods_mixer_reset$$($JSCompiler_StaticMethods_mixer_reset$self$$) {
  $JSCompiler_StaticMethods_mixer_reset$self$$.$mixer_registers$[4] = 204;
  $JSCompiler_StaticMethods_mixer_reset$self$$.$mixer_registers$[34] = 204;
  $JSCompiler_StaticMethods_mixer_reset$self$$.$mixer_registers$[38] = 204;
  $JSCompiler_StaticMethods_mixer_reset$self$$.$mixer_registers$[40] = 0;
  $JSCompiler_StaticMethods_mixer_reset$self$$.$mixer_registers$[46] = 0;
  $JSCompiler_StaticMethods_mixer_reset$self$$.$mixer_registers$[10] = 0;
  $JSCompiler_StaticMethods_mixer_reset$self$$.$mixer_registers$[48] = 192;
  $JSCompiler_StaticMethods_mixer_reset$self$$.$mixer_registers$[49] = 192;
  $JSCompiler_StaticMethods_mixer_reset$self$$.$mixer_registers$[50] = 192;
  $JSCompiler_StaticMethods_mixer_reset$self$$.$mixer_registers$[51] = 192;
  $JSCompiler_StaticMethods_mixer_reset$self$$.$mixer_registers$[52] = 192;
  $JSCompiler_StaticMethods_mixer_reset$self$$.$mixer_registers$[53] = 192;
  $JSCompiler_StaticMethods_mixer_reset$self$$.$mixer_registers$[54] = 0;
  $JSCompiler_StaticMethods_mixer_reset$self$$.$mixer_registers$[55] = 0;
  $JSCompiler_StaticMethods_mixer_reset$self$$.$mixer_registers$[56] = 0;
  $JSCompiler_StaticMethods_mixer_reset$self$$.$mixer_registers$[57] = 0;
  $JSCompiler_StaticMethods_mixer_reset$self$$.$mixer_registers$[59] = 0;
  $JSCompiler_StaticMethods_mixer_reset$self$$.$mixer_registers$[60] = 31;
  $JSCompiler_StaticMethods_mixer_reset$self$$.$mixer_registers$[61] = 21;
  $JSCompiler_StaticMethods_mixer_reset$self$$.$mixer_registers$[62] = 11;
  $JSCompiler_StaticMethods_mixer_reset$self$$.$mixer_registers$[63] = 0;
  $JSCompiler_StaticMethods_mixer_reset$self$$.$mixer_registers$[64] = 0;
  $JSCompiler_StaticMethods_mixer_reset$self$$.$mixer_registers$[65] = 0;
  $JSCompiler_StaticMethods_mixer_reset$self$$.$mixer_registers$[66] = 0;
  $JSCompiler_StaticMethods_mixer_reset$self$$.$mixer_registers$[67] = 0;
  $JSCompiler_StaticMethods_mixer_reset$self$$.$mixer_registers$[68] = 128;
  $JSCompiler_StaticMethods_mixer_reset$self$$.$mixer_registers$[69] = 128;
  $JSCompiler_StaticMethods_mixer_reset$self$$.$mixer_registers$[70] = 128;
  $JSCompiler_StaticMethods_mixer_reset$self$$.$mixer_registers$[71] = 128;
  $JSCompiler_StaticMethods_mixer_full_update$$($JSCompiler_StaticMethods_mixer_reset$self$$);
}
function $JSCompiler_StaticMethods_mixer_full_update$$($JSCompiler_StaticMethods_mixer_full_update$self$$) {
  for (var $i$jscomp$17$$ = 1; $i$jscomp$17$$ < $JSCompiler_StaticMethods_mixer_full_update$self$$.$mixer_registers$.length; $i$jscomp$17$$++) {
    $MIXER_REGISTER_IS_LEGACY$$module$src$sb16$$[$i$jscomp$17$$] || $JSCompiler_StaticMethods_mixer_write$$($JSCompiler_StaticMethods_mixer_full_update$self$$, $i$jscomp$17$$, $JSCompiler_StaticMethods_mixer_full_update$self$$.$mixer_registers$[$i$jscomp$17$$]);
  }
}
function $register_mixer_read$$module$src$sb16$$($address$jscomp$2$$, $handler$jscomp$9$$) {
  $handler$jscomp$9$$ || ($handler$jscomp$9$$ = $SB16$$module$src$sb16$$.prototype.$N$);
  $MIXER_READ_HANDLERS$$module$src$sb16$$[$address$jscomp$2$$] = $handler$jscomp$9$$;
}
function $register_mixer_write$$module$src$sb16$$($address$jscomp$3$$, $handler$jscomp$10$$) {
  $handler$jscomp$10$$ || ($handler$jscomp$10$$ = $SB16$$module$src$sb16$$.prototype.$P$);
  $MIXER_WRITE_HANDLERS$$module$src$sb16$$[$address$jscomp$3$$] = $handler$jscomp$10$$;
}
function $register_mixer_legacy$$module$src$sb16$$($address_old$$, $address_new_left$$, $address_new_right$$) {
  $MIXER_REGISTER_IS_LEGACY$$module$src$sb16$$[$address_old$$] = 1;
  $MIXER_READ_HANDLERS$$module$src$sb16$$[$address_old$$] = function() {
    return this.$mixer_registers$[$address_new_left$$] & 240 | this.$mixer_registers$[$address_new_right$$] >>> 4;
  };
  $MIXER_WRITE_HANDLERS$$module$src$sb16$$[$address_old$$] = function($data$jscomp$92$$) {
    this.$mixer_registers$[$address_old$$] = $data$jscomp$92$$;
    var $right$jscomp$3$$ = $data$jscomp$92$$ << 4 & 240 | this.$mixer_registers$[$address_new_right$$] & 15;
    $JSCompiler_StaticMethods_mixer_write$$(this, $address_new_left$$, $data$jscomp$92$$ & 240 | this.$mixer_registers$[$address_new_left$$] & 15);
    $JSCompiler_StaticMethods_mixer_write$$(this, $address_new_right$$, $right$jscomp$3$$);
  };
}
function $register_mixer_volume$$module$src$sb16$$($address$jscomp$4$$, $mixer_source$$, $channel$jscomp$16$$) {
  $MIXER_READ_HANDLERS$$module$src$sb16$$[$address$jscomp$4$$] = $SB16$$module$src$sb16$$.prototype.$N$;
  $MIXER_WRITE_HANDLERS$$module$src$sb16$$[$address$jscomp$4$$] = function($data$jscomp$93$$) {
    this.$mixer_registers$[$address$jscomp$4$$] = $data$jscomp$93$$;
    this.$bus$.send("mixer-volume", [$mixer_source$$, $channel$jscomp$16$$, ($data$jscomp$93$$ >>> 2) - 62]);
  };
}
$register_mixer_read$$module$src$sb16$$(0, function() {
  $JSCompiler_StaticMethods_mixer_reset$$(this);
  return 0;
});
$register_mixer_write$$module$src$sb16$$(0);
$register_mixer_legacy$$module$src$sb16$$(4, 50, 51);
$register_mixer_legacy$$module$src$sb16$$(34, 48, 49);
$register_mixer_legacy$$module$src$sb16$$(38, 52, 53);
$register_mixer_legacy$$module$src$sb16$$(40, 54, 55);
$register_mixer_legacy$$module$src$sb16$$(46, 56, 57);
$register_mixer_volume$$module$src$sb16$$(48, 0, 0);
$register_mixer_volume$$module$src$sb16$$(49, 0, 1);
$register_mixer_volume$$module$src$sb16$$(50, 2, 0);
$register_mixer_volume$$module$src$sb16$$(51, 2, 1);
$register_mixer_read$$module$src$sb16$$(59);
$register_mixer_write$$module$src$sb16$$(59, function($data$jscomp$94$$) {
  this.$mixer_registers$[59] = $data$jscomp$94$$;
  this.$bus$.send("mixer-volume", [1, 2, 6 * ($data$jscomp$94$$ >>> 6) - 18]);
});
$register_mixer_read$$module$src$sb16$$(65);
$register_mixer_write$$module$src$sb16$$(65, function($data$jscomp$95$$) {
  this.$mixer_registers$[65] = $data$jscomp$95$$;
  this.$bus$.send("mixer-gain-left", 6 * ($data$jscomp$95$$ >>> 6));
});
$register_mixer_read$$module$src$sb16$$(66);
$register_mixer_write$$module$src$sb16$$(66, function($data$jscomp$96$$) {
  this.$mixer_registers$[66] = $data$jscomp$96$$;
  this.$bus$.send("mixer-gain-right", 6 * ($data$jscomp$96$$ >>> 6));
});
$register_mixer_read$$module$src$sb16$$(68);
$register_mixer_write$$module$src$sb16$$(68, function($data$jscomp$97$$) {
  this.$mixer_registers$[68] = $data$jscomp$97$$;
  $data$jscomp$97$$ >>>= 3;
  this.$bus$.send("mixer-treble-left", $data$jscomp$97$$ - (16 > $data$jscomp$97$$ ? 14 : 16));
});
$register_mixer_read$$module$src$sb16$$(69);
$register_mixer_write$$module$src$sb16$$(69, function($data$jscomp$98$$) {
  this.$mixer_registers$[69] = $data$jscomp$98$$;
  $data$jscomp$98$$ >>>= 3;
  this.$bus$.send("mixer-treble-right", $data$jscomp$98$$ - (16 > $data$jscomp$98$$ ? 14 : 16));
});
$register_mixer_read$$module$src$sb16$$(70);
$register_mixer_write$$module$src$sb16$$(70, function($data$jscomp$99$$) {
  this.$mixer_registers$[70] = $data$jscomp$99$$;
  $data$jscomp$99$$ >>>= 3;
  this.$bus$.send("mixer-bass-right", $data$jscomp$99$$ - (16 > $data$jscomp$99$$ ? 14 : 16));
});
$register_mixer_read$$module$src$sb16$$(71);
$register_mixer_write$$module$src$sb16$$(71, function($data$jscomp$100$$) {
  this.$mixer_registers$[71] = $data$jscomp$100$$;
  $data$jscomp$100$$ >>>= 3;
  this.$bus$.send("mixer-bass-right", $data$jscomp$100$$ - (16 > $data$jscomp$100$$ ? 14 : 16));
});
$register_mixer_read$$module$src$sb16$$(128, function() {
  switch(this.$irq$) {
    case 2:
      return 1;
    case 5:
      return 2;
    case 7:
      return 4;
    case 10:
      return 8;
    default:
      return 0;
  }
});
$register_mixer_write$$module$src$sb16$$(128, function($bits$$) {
  $bits$$ & 1 && (this.$irq$ = 2);
  $bits$$ & 2 && (this.$irq$ = 5);
  $bits$$ & 4 && (this.$irq$ = 7);
  $bits$$ & 8 && (this.$irq$ = 10);
});
$register_mixer_read$$module$src$sb16$$(129, function() {
  var $ret$$ = 0;
  switch(this.$dma_channel_8bit$) {
    case 0:
      $ret$$ |= 1;
      break;
    case 1:
      $ret$$ |= 2;
      break;
    case 3:
      $ret$$ |= 8;
  }
  switch(this.$dma_channel_16bit$) {
    case 5:
      $ret$$ |= 32;
      break;
    case 6:
      $ret$$ |= 64;
      break;
    case 7:
      $ret$$ |= 128;
  }
  return $ret$$;
});
$register_mixer_write$$module$src$sb16$$(129, function($bits$jscomp$1$$) {
  $bits$jscomp$1$$ & 1 && (this.$dma_channel_8bit$ = 0);
  $bits$jscomp$1$$ & 2 && (this.$dma_channel_8bit$ = 1);
  $bits$jscomp$1$$ & 8 && (this.$dma_channel_8bit$ = 3);
  $bits$jscomp$1$$ & 32 && (this.$dma_channel_16bit$ = 5);
  $bits$jscomp$1$$ & 64 && (this.$dma_channel_16bit$ = 6);
  $bits$jscomp$1$$ & 128 && (this.$dma_channel_16bit$ = 7);
});
$register_mixer_read$$module$src$sb16$$(130, function() {
  for (var $ret$jscomp$1$$ = 32, $i$jscomp$18$$ = 0; 16 > $i$jscomp$18$$; $i$jscomp$18$$++) {
    $ret$jscomp$1$$ |= $i$jscomp$18$$ * this.$irq_triggered$[$i$jscomp$18$$];
  }
  return $ret$jscomp$1$$;
});
$SB16$$module$src$sb16$$.prototype.$H$ = function() {
};
function $register_fm_write$$module$src$sb16$$($addresses$$, $handler$jscomp$11$$) {
  $handler$jscomp$11$$ || ($handler$jscomp$11$$ = $SB16$$module$src$sb16$$.prototype.$H$);
  for (var $i$jscomp$19$$ = 0; $i$jscomp$19$$ < $addresses$$.length; $i$jscomp$19$$++) {
    $FM_HANDLERS$$module$src$sb16$$[$addresses$$[$i$jscomp$19$$]] = $handler$jscomp$11$$;
  }
}
function $between$$module$src$sb16$$($i$jscomp$20_start$jscomp$22$$, $end$jscomp$12$$) {
  for (var $a$jscomp$3$$ = []; $i$jscomp$20_start$jscomp$22$$ <= $end$jscomp$12$$; $i$jscomp$20_start$jscomp$22$$++) {
    $a$jscomp$3$$.push($i$jscomp$20_start$jscomp$22$$);
  }
  return $a$jscomp$3$$;
}
const $SB_FM_OPERATORS_BY_OFFSET$$module$src$sb16$$ = new Uint8Array(32);
$SB_FM_OPERATORS_BY_OFFSET$$module$src$sb16$$[0] = 0;
$SB_FM_OPERATORS_BY_OFFSET$$module$src$sb16$$[1] = 1;
$SB_FM_OPERATORS_BY_OFFSET$$module$src$sb16$$[2] = 2;
$SB_FM_OPERATORS_BY_OFFSET$$module$src$sb16$$[3] = 3;
$SB_FM_OPERATORS_BY_OFFSET$$module$src$sb16$$[4] = 4;
$SB_FM_OPERATORS_BY_OFFSET$$module$src$sb16$$[5] = 5;
$SB_FM_OPERATORS_BY_OFFSET$$module$src$sb16$$[8] = 6;
$SB_FM_OPERATORS_BY_OFFSET$$module$src$sb16$$[9] = 7;
$SB_FM_OPERATORS_BY_OFFSET$$module$src$sb16$$[10] = 8;
$SB_FM_OPERATORS_BY_OFFSET$$module$src$sb16$$[11] = 9;
$SB_FM_OPERATORS_BY_OFFSET$$module$src$sb16$$[12] = 10;
$SB_FM_OPERATORS_BY_OFFSET$$module$src$sb16$$[13] = 11;
$SB_FM_OPERATORS_BY_OFFSET$$module$src$sb16$$[16] = 12;
$SB_FM_OPERATORS_BY_OFFSET$$module$src$sb16$$[17] = 13;
$SB_FM_OPERATORS_BY_OFFSET$$module$src$sb16$$[18] = 14;
$SB_FM_OPERATORS_BY_OFFSET$$module$src$sb16$$[19] = 15;
$SB_FM_OPERATORS_BY_OFFSET$$module$src$sb16$$[20] = 16;
$SB_FM_OPERATORS_BY_OFFSET$$module$src$sb16$$[21] = 17;
$register_fm_write$$module$src$sb16$$([1], function($bits$jscomp$2$$, $register$jscomp$2$$) {
  this.$fm_waveform_select_enable$[$register$jscomp$2$$] = $bits$jscomp$2$$ & 1;
});
$register_fm_write$$module$src$sb16$$([2]);
$register_fm_write$$module$src$sb16$$([3]);
$register_fm_write$$module$src$sb16$$([4], function() {
});
$register_fm_write$$module$src$sb16$$([5], function() {
});
$register_fm_write$$module$src$sb16$$([8], function() {
});
$register_fm_write$$module$src$sb16$$($between$$module$src$sb16$$(32, 53), function() {
});
$register_fm_write$$module$src$sb16$$($between$$module$src$sb16$$(64, 85), function() {
});
$register_fm_write$$module$src$sb16$$($between$$module$src$sb16$$(96, 117), function() {
});
$register_fm_write$$module$src$sb16$$($between$$module$src$sb16$$(128, 149), function() {
});
$register_fm_write$$module$src$sb16$$($between$$module$src$sb16$$(160, 168), function() {
});
$register_fm_write$$module$src$sb16$$($between$$module$src$sb16$$(176, 184), function() {
});
$register_fm_write$$module$src$sb16$$([189], function() {
});
$register_fm_write$$module$src$sb16$$($between$$module$src$sb16$$(192, 200), function() {
});
$register_fm_write$$module$src$sb16$$($between$$module$src$sb16$$(224, 245), function() {
});
function $JSCompiler_StaticMethods_sampling_rate_change$$($JSCompiler_StaticMethods_sampling_rate_change$self$$, $rate$jscomp$1$$) {
  $JSCompiler_StaticMethods_sampling_rate_change$self$$.$sampling_rate$ = $rate$jscomp$1$$;
  $JSCompiler_StaticMethods_sampling_rate_change$self$$.$bus$.send("dac-tell-sampling-rate", $rate$jscomp$1$$);
}
function $JSCompiler_StaticMethods_dma_transfer_size_set$$($JSCompiler_StaticMethods_dma_transfer_size_set$self$$) {
  $JSCompiler_StaticMethods_dma_transfer_size_set$self$$.$v$ = 1 + ($JSCompiler_StaticMethods_dma_transfer_size_set$self$$.$write_buffer$.shift() << 0) + ($JSCompiler_StaticMethods_dma_transfer_size_set$self$$.$write_buffer$.shift() << 8);
}
function $JSCompiler_StaticMethods_dma_transfer_start$$($JSCompiler_StaticMethods_dma_transfer_start$self$$) {
  $JSCompiler_StaticMethods_dma_transfer_start$self$$.$h$ = 1;
  $JSCompiler_StaticMethods_dma_transfer_start$self$$.$dsp_16bit$ && ($JSCompiler_StaticMethods_dma_transfer_start$self$$.$h$ *= 2);
  $JSCompiler_StaticMethods_dma_transfer_start$self$$.$l$ = $JSCompiler_StaticMethods_dma_transfer_start$self$$.$v$ * $JSCompiler_StaticMethods_dma_transfer_start$self$$.$h$;
  $JSCompiler_StaticMethods_dma_transfer_start$self$$.$j$ = 1024 * $JSCompiler_StaticMethods_dma_transfer_start$self$$.$h$;
  $JSCompiler_StaticMethods_dma_transfer_start$self$$.$j$ = Math.min(Math.max($JSCompiler_StaticMethods_dma_transfer_start$self$$.$l$ >> 2 & -4, 32), $JSCompiler_StaticMethods_dma_transfer_start$self$$.$j$);
  $JSCompiler_StaticMethods_dma_transfer_start$self$$.$s$ = !0;
  $JSCompiler_StaticMethods_dma_transfer_start$self$$.$dma$.$channel_mask$[$JSCompiler_StaticMethods_dma_transfer_start$self$$.$dma_channel$] || $JSCompiler_StaticMethods_dma_transfer_start$self$$.$L$($JSCompiler_StaticMethods_dma_transfer_start$self$$.$dma_channel$);
}
$SB16$$module$src$sb16$$.prototype.$L$ = function($channel$jscomp$18$$) {
  $channel$jscomp$18$$ === this.$dma_channel$ && this.$s$ && (this.$s$ = !1, this.$dma_bytes_left$ = this.$l$, this.$dma_paused$ = !1, this.$bus$.send("dac-enable"));
};
function $JSCompiler_StaticMethods_dma_transfer_next$$($JSCompiler_StaticMethods_dma_transfer_next$self$$) {
  var $size$jscomp$29$$ = Math.min($JSCompiler_StaticMethods_dma_transfer_next$self$$.$dma_bytes_left$, $JSCompiler_StaticMethods_dma_transfer_next$self$$.$j$), $samples$jscomp$2$$ = Math.floor($size$jscomp$29$$ / $JSCompiler_StaticMethods_dma_transfer_next$self$$.$h$);
  $JSCompiler_StaticMethods_dma_transfer_next$self$$.$dma$.$do_write$($JSCompiler_StaticMethods_dma_transfer_next$self$$.$M$, 0, $size$jscomp$29$$, $JSCompiler_StaticMethods_dma_transfer_next$self$$.$dma_channel$, $amplitude$jscomp$inline_111_error$jscomp$3$$ => {
    if (!$amplitude$jscomp$inline_111_error$jscomp$3$$) {
      $amplitude$jscomp$inline_111_error$jscomp$3$$ = $JSCompiler_StaticMethods_dma_transfer_next$self$$.$dsp_16bit$ ? 32767.5 : 127.5;
      var $offset$jscomp$inline_112$$ = $JSCompiler_StaticMethods_dma_transfer_next$self$$.$dsp_signed$ ? 0 : -1, $repeats$jscomp$inline_113$$ = $JSCompiler_StaticMethods_dma_transfer_next$self$$.$dsp_stereo$ ? 1 : 2, $buffer$jscomp$inline_114$$;
      $JSCompiler_StaticMethods_dma_transfer_next$self$$.$dsp_16bit$ ? $buffer$jscomp$inline_114$$ = $JSCompiler_StaticMethods_dma_transfer_next$self$$.$dsp_signed$ ? $JSCompiler_StaticMethods_dma_transfer_next$self$$.$I$ : $JSCompiler_StaticMethods_dma_transfer_next$self$$.$K$ : $buffer$jscomp$inline_114$$ = $JSCompiler_StaticMethods_dma_transfer_next$self$$.$dsp_signed$ ? $JSCompiler_StaticMethods_dma_transfer_next$self$$.$J$ : $JSCompiler_StaticMethods_dma_transfer_next$self$$.$u$;
      for (var $channel$jscomp$inline_115$$ = 0, $i$jscomp$inline_116$$ = 0; $i$jscomp$inline_116$$ < $samples$jscomp$2$$; $i$jscomp$inline_116$$++) {
        for (var $sample$jscomp$inline_117$$ = $audio_clip$$module$src$sb16$$($buffer$jscomp$inline_114$$[$i$jscomp$inline_116$$] / $amplitude$jscomp$inline_111_error$jscomp$3$$ + $offset$jscomp$inline_112$$), $j$jscomp$inline_118$$ = 0; $j$jscomp$inline_118$$ < $repeats$jscomp$inline_113$$; $j$jscomp$inline_118$$++) {
          $JSCompiler_StaticMethods_dma_transfer_next$self$$.$dac_buffers$[$channel$jscomp$inline_115$$].push($sample$jscomp$inline_117$$), $channel$jscomp$inline_115$$ ^= 1;
        }
      }
      $JSCompiler_StaticMethods_dac_send$$($JSCompiler_StaticMethods_dma_transfer_next$self$$);
      $JSCompiler_StaticMethods_dma_transfer_next$self$$.$dma_bytes_left$ -= $size$jscomp$29$$;
      $JSCompiler_StaticMethods_dma_transfer_next$self$$.$dma_bytes_left$ || ($JSCompiler_StaticMethods_dma_transfer_next$self$$.$raise_irq$($JSCompiler_StaticMethods_dma_transfer_next$self$$.$dma_irq$), $JSCompiler_StaticMethods_dma_transfer_next$self$$.$dma_autoinit$ && ($JSCompiler_StaticMethods_dma_transfer_next$self$$.$dma_bytes_left$ = $JSCompiler_StaticMethods_dma_transfer_next$self$$.$l$));
    }
  });
}
function $JSCompiler_StaticMethods_dac_send$$($JSCompiler_StaticMethods_dac_send$self$$) {
  if ($JSCompiler_StaticMethods_dac_send$self$$.$dac_buffers$[0].length) {
    var $out0$$ = $JSCompiler_StaticMethods_shift_block$$($JSCompiler_StaticMethods_dac_send$self$$.$dac_buffers$[0], $JSCompiler_StaticMethods_dac_send$self$$.$dac_buffers$[0].length), $out1$$ = $JSCompiler_StaticMethods_shift_block$$($JSCompiler_StaticMethods_dac_send$self$$.$dac_buffers$[1], $JSCompiler_StaticMethods_dac_send$self$$.$dac_buffers$[1].length);
    $JSCompiler_StaticMethods_dac_send$self$$.$bus$.send("dac-send-data", [$out0$$, $out1$$], [$out0$$.buffer, $out1$$.buffer]);
  }
}
$SB16$$module$src$sb16$$.prototype.$raise_irq$ = function($type$jscomp$148$$) {
  this.$irq_triggered$[$type$jscomp$148$$] = 1;
  this.$cpu$.$device_raise_irq$(this.$irq$);
};
function $JSCompiler_StaticMethods_JSC$1720_lower_irq$$($JSCompiler_StaticMethods_JSC$1720_lower_irq$self$$, $type$jscomp$149$$) {
  $JSCompiler_StaticMethods_JSC$1720_lower_irq$self$$.$irq_triggered$[$type$jscomp$149$$] = 0;
  $JSCompiler_StaticMethods_JSC$1720_lower_irq$self$$.$cpu$.$device_lower_irq$($JSCompiler_StaticMethods_JSC$1720_lower_irq$self$$.$irq$);
}
function $audio_clip$$module$src$sb16$$($value$jscomp$123$$) {
  return -1 * (-1 > $value$jscomp$123$$) + 1 * (1 < $value$jscomp$123$$) + (-1 <= $value$jscomp$123$$ && 1 >= $value$jscomp$123$$) * $value$jscomp$123$$;
}
;function $StateLoadError$$module$src$state$$($msg$jscomp$2$$) {
  this.message = $msg$jscomp$2$$;
}
$StateLoadError$$module$src$state$$.prototype = Error();
const $CONSTRUCTOR_TABLE$$module$src$state$$ = {Uint8Array, Int8Array, Uint16Array, Int16Array, Uint32Array, Int32Array, Float32Array, Float64Array, };
function $save_object$$module$src$state$$($obj$jscomp$27_state$jscomp$7$$, $saved_buffers$$) {
  if ("object" !== typeof $obj$jscomp$27_state$jscomp$7$$ || null === $obj$jscomp$27_state$jscomp$7$$) {
    return $obj$jscomp$27_state$jscomp$7$$;
  }
  if (Array.isArray($obj$jscomp$27_state$jscomp$7$$)) {
    return $obj$jscomp$27_state$jscomp$7$$.map($x$jscomp$97$$ => $save_object$$module$src$state$$($x$jscomp$97$$, $saved_buffers$$));
  }
  $obj$jscomp$27_state$jscomp$7$$.constructor === Object && console.log($obj$jscomp$27_state$jscomp$7$$);
  if ($obj$jscomp$27_state$jscomp$7$$.BYTES_PER_ELEMENT) {
    var $buffer$jscomp$28_result$jscomp$5$$ = new Uint8Array($obj$jscomp$27_state$jscomp$7$$.buffer, $obj$jscomp$27_state$jscomp$7$$.byteOffset, $obj$jscomp$27_state$jscomp$7$$.length * $obj$jscomp$27_state$jscomp$7$$.BYTES_PER_ELEMENT);
    return {__state_type__:$obj$jscomp$27_state$jscomp$7$$.constructor.name.replace("bound ", ""), buffer_id:$saved_buffers$$.push($buffer$jscomp$28_result$jscomp$5$$) - 1, };
  }
  $obj$jscomp$27_state$jscomp$7$$ = $obj$jscomp$27_state$jscomp$7$$.$get_state$();
  $buffer$jscomp$28_result$jscomp$5$$ = [];
  for (var $i$jscomp$22$$ = 0; $i$jscomp$22$$ < $obj$jscomp$27_state$jscomp$7$$.length; $i$jscomp$22$$++) {
    $buffer$jscomp$28_result$jscomp$5$$[$i$jscomp$22$$] = $save_object$$module$src$state$$($obj$jscomp$27_state$jscomp$7$$[$i$jscomp$22$$], $saved_buffers$$);
  }
  return $buffer$jscomp$28_result$jscomp$5$$;
}
function $restore_buffers$$module$src$state$$($obj$jscomp$28$$, $buffers$jscomp$2$$) {
  if ("object" !== typeof $obj$jscomp$28$$ || null === $obj$jscomp$28$$) {
    return $obj$jscomp$28$$;
  }
  if (Array.isArray($obj$jscomp$28$$)) {
    for (let $i$jscomp$23$$ = 0; $i$jscomp$23$$ < $obj$jscomp$28$$.length; $i$jscomp$23$$++) {
      $obj$jscomp$28$$[$i$jscomp$23$$] = $restore_buffers$$module$src$state$$($obj$jscomp$28$$[$i$jscomp$23$$], $buffers$jscomp$2$$);
    }
    return $obj$jscomp$28$$;
  }
  return new $CONSTRUCTOR_TABLE$$module$src$state$$[$obj$jscomp$28$$.__state_type__]($buffers$jscomp$2$$[$obj$jscomp$28$$.buffer_id]);
}
function $restore_state$$module$src$state$$($cpu$jscomp$5$$, $state$jscomp$9$$) {
  function $read_state_header$$($header_block$jscomp$1_state$jscomp$10$$, $check_length$$) {
    const $len$jscomp$15$$ = $header_block$jscomp$1_state$jscomp$10$$.length;
    if (16 > $len$jscomp$15$$) {
      throw new $StateLoadError$$module$src$state$$("Invalid length: " + $len$jscomp$15$$);
    }
    $header_block$jscomp$1_state$jscomp$10$$ = new Int32Array($header_block$jscomp$1_state$jscomp$10$$.buffer, $header_block$jscomp$1_state$jscomp$10$$.byteOffset, 4);
    if (-2039052682 !== $header_block$jscomp$1_state$jscomp$10$$[0]) {
      throw new $StateLoadError$$module$src$state$$("Invalid header: " + $h$$module$src$lib$$($header_block$jscomp$1_state$jscomp$10$$[0] >>> 0));
    }
    if (6 !== $header_block$jscomp$1_state$jscomp$10$$[1]) {
      throw new $StateLoadError$$module$src$state$$("Version mismatch: dump=" + $header_block$jscomp$1_state$jscomp$10$$[1] + " we=6");
    }
    if ($check_length$$ && $header_block$jscomp$1_state$jscomp$10$$[2] !== $len$jscomp$15$$) {
      throw new $StateLoadError$$module$src$state$$("Length doesn't match header: real=" + $len$jscomp$15$$ + " header=" + $header_block$jscomp$1_state$jscomp$10$$[2]);
    }
    return $header_block$jscomp$1_state$jscomp$10$$[3];
  }
  function $read_info_block$$($info_block$jscomp$1_info_block_buffer$$) {
    $info_block$jscomp$1_info_block_buffer$$ = (new TextDecoder).decode($info_block$jscomp$1_info_block_buffer$$);
    return JSON.parse($info_block$jscomp$1_info_block_buffer$$);
  }
  $state$jscomp$9$$ = new Uint8Array($state$jscomp$9$$);
  if (4247762216 === (new Uint32Array($state$jscomp$9$$.buffer, 0, 1))[0]) {
    var $ctx_state_object$jscomp$1$$ = $cpu$jscomp$5$$.$zstd_create_ctx$($state$jscomp$9$$.length);
    (new Uint8Array($cpu$jscomp$5$$.$wasm_memory$.buffer, $cpu$jscomp$5$$.$zstd_get_src_ptr$($ctx_state_object$jscomp$1$$), $state$jscomp$9$$.length)).set($state$jscomp$9$$);
    var $buffer_infos$jscomp$2_info_block_obj$jscomp$1_ptr_state_object$$ = $cpu$jscomp$5$$.$zstd_read$($ctx_state_object$jscomp$1$$, 16), $buffers$jscomp$3_header_block$jscomp$2_info_block_buffer$jscomp$1_info_block_obj$$ = new Uint8Array($cpu$jscomp$5$$.$wasm_memory$.buffer, $buffer_infos$jscomp$2_info_block_obj$jscomp$1_ptr_state_object$$, 16), $info_block_len_position$jscomp$1$$ = $read_state_header$$($buffers$jscomp$3_header_block$jscomp$2_info_block_buffer$jscomp$1_info_block_obj$$, !1);
    $cpu$jscomp$5$$.$zstd_read_free$($buffer_infos$jscomp$2_info_block_obj$jscomp$1_ptr_state_object$$, 16);
    $buffer_infos$jscomp$2_info_block_obj$jscomp$1_ptr_state_object$$ = $cpu$jscomp$5$$.$zstd_read$($ctx_state_object$jscomp$1$$, $info_block_len_position$jscomp$1$$);
    $buffers$jscomp$3_header_block$jscomp$2_info_block_buffer$jscomp$1_info_block_obj$$ = new Uint8Array($cpu$jscomp$5$$.$wasm_memory$.buffer, $buffer_infos$jscomp$2_info_block_obj$jscomp$1_ptr_state_object$$, $info_block_len_position$jscomp$1$$);
    $buffers$jscomp$3_header_block$jscomp$2_info_block_buffer$jscomp$1_info_block_obj$$ = $read_info_block$$($buffers$jscomp$3_header_block$jscomp$2_info_block_buffer$jscomp$1_info_block_obj$$);
    $cpu$jscomp$5$$.$zstd_read_free$($buffer_infos$jscomp$2_info_block_obj$jscomp$1_ptr_state_object$$, $info_block_len_position$jscomp$1$$);
    $buffer_infos$jscomp$2_info_block_obj$jscomp$1_ptr_state_object$$ = $buffers$jscomp$3_header_block$jscomp$2_info_block_buffer$jscomp$1_info_block_obj$$.state;
    var $buffer_infos$jscomp$1_front_padding$$ = $buffers$jscomp$3_header_block$jscomp$2_info_block_buffer$jscomp$1_info_block_obj$$.buffer_infos;
    $buffers$jscomp$3_header_block$jscomp$2_info_block_buffer$jscomp$1_info_block_obj$$ = [];
    $info_block_len_position$jscomp$1$$ = 16 + $info_block_len_position$jscomp$1$$;
    for (var $buffer_info_buffers$jscomp$4_info_block_len$jscomp$1$$ of $buffer_infos$jscomp$1_front_padding$$) {
      $buffer_infos$jscomp$1_front_padding$$ = ($info_block_len_position$jscomp$1$$ + 3 & -4) - $info_block_len_position$jscomp$1$$;
      if (1048576 < $buffer_info_buffers$jscomp$4_info_block_len$jscomp$1$$.length) {
        var $buffer$jscomp$31_ptr$jscomp$1_ptr$jscomp$3$$ = $cpu$jscomp$5$$.$zstd_read$($ctx_state_object$jscomp$1$$, $buffer_infos$jscomp$1_front_padding$$);
        $cpu$jscomp$5$$.$zstd_read_free$($buffer$jscomp$31_ptr$jscomp$1_ptr$jscomp$3$$, $buffer_infos$jscomp$1_front_padding$$);
        $buffer$jscomp$31_ptr$jscomp$1_ptr$jscomp$3$$ = new Uint8Array($buffer_info_buffers$jscomp$4_info_block_len$jscomp$1$$.length);
        $buffers$jscomp$3_header_block$jscomp$2_info_block_buffer$jscomp$1_info_block_obj$$.push($buffer$jscomp$31_ptr$jscomp$1_ptr$jscomp$3$$.buffer);
        for (var $have_offset$jscomp$38$$ = 0; $have_offset$jscomp$38$$ < $buffer_info_buffers$jscomp$4_info_block_len$jscomp$1$$.length;) {
          const $to_read$$ = Math.min($buffer_info_buffers$jscomp$4_info_block_len$jscomp$1$$.length - $have_offset$jscomp$38$$, 1048576), $ptr$jscomp$2$$ = $cpu$jscomp$5$$.$zstd_read$($ctx_state_object$jscomp$1$$, $to_read$$);
          $buffer$jscomp$31_ptr$jscomp$1_ptr$jscomp$3$$.set(new Uint8Array($cpu$jscomp$5$$.$wasm_memory$.buffer, $ptr$jscomp$2$$, $to_read$$), $have_offset$jscomp$38$$);
          $cpu$jscomp$5$$.$zstd_read_free$($ptr$jscomp$2$$, $to_read$$);
          $have_offset$jscomp$38$$ += $to_read$$;
        }
      } else {
        $buffer$jscomp$31_ptr$jscomp$1_ptr$jscomp$3$$ = $cpu$jscomp$5$$.$zstd_read$($ctx_state_object$jscomp$1$$, $buffer_infos$jscomp$1_front_padding$$ + $buffer_info_buffers$jscomp$4_info_block_len$jscomp$1$$.length), $have_offset$jscomp$38$$ = $buffer$jscomp$31_ptr$jscomp$1_ptr$jscomp$3$$ + $buffer_infos$jscomp$1_front_padding$$, $buffers$jscomp$3_header_block$jscomp$2_info_block_buffer$jscomp$1_info_block_obj$$.push($cpu$jscomp$5$$.$wasm_memory$.buffer.slice($have_offset$jscomp$38$$, $have_offset$jscomp$38$$ + 
        $buffer_info_buffers$jscomp$4_info_block_len$jscomp$1$$.length)), $cpu$jscomp$5$$.$zstd_read_free$($buffer$jscomp$31_ptr$jscomp$1_ptr$jscomp$3$$, $buffer_infos$jscomp$1_front_padding$$ + $buffer_info_buffers$jscomp$4_info_block_len$jscomp$1$$.length);
      }
      $info_block_len_position$jscomp$1$$ += $buffer_infos$jscomp$1_front_padding$$ + $buffer_info_buffers$jscomp$4_info_block_len$jscomp$1$$.length;
    }
    $buffer_infos$jscomp$2_info_block_obj$jscomp$1_ptr_state_object$$ = $restore_buffers$$module$src$state$$($buffer_infos$jscomp$2_info_block_obj$jscomp$1_ptr_state_object$$, $buffers$jscomp$3_header_block$jscomp$2_info_block_buffer$jscomp$1_info_block_obj$$);
    $cpu$jscomp$5$$.$set_state$($buffer_infos$jscomp$2_info_block_obj$jscomp$1_ptr_state_object$$);
    $cpu$jscomp$5$$.$zstd_free_ctx$($ctx_state_object$jscomp$1$$);
  } else {
    $buffer_info_buffers$jscomp$4_info_block_len$jscomp$1$$ = $read_state_header$$($state$jscomp$9$$, !0);
    if (0 > $buffer_info_buffers$jscomp$4_info_block_len$jscomp$1$$ || $buffer_info_buffers$jscomp$4_info_block_len$jscomp$1$$ + 12 >= $state$jscomp$9$$.length) {
      throw new $StateLoadError$$module$src$state$$("Invalid info block length: " + $buffer_info_buffers$jscomp$4_info_block_len$jscomp$1$$);
    }
    $buffer_infos$jscomp$2_info_block_obj$jscomp$1_ptr_state_object$$ = $read_info_block$$($state$jscomp$9$$.subarray(16, 16 + $buffer_info_buffers$jscomp$4_info_block_len$jscomp$1$$));
    $ctx_state_object$jscomp$1$$ = $buffer_infos$jscomp$2_info_block_obj$jscomp$1_ptr_state_object$$.state;
    $buffer_infos$jscomp$2_info_block_obj$jscomp$1_ptr_state_object$$ = $buffer_infos$jscomp$2_info_block_obj$jscomp$1_ptr_state_object$$.buffer_infos;
    let $buffer_block_start$jscomp$1$$ = 16 + $buffer_info_buffers$jscomp$4_info_block_len$jscomp$1$$;
    $buffer_block_start$jscomp$1$$ = $buffer_block_start$jscomp$1$$ + 3 & -4;
    $buffer_info_buffers$jscomp$4_info_block_len$jscomp$1$$ = $buffer_infos$jscomp$2_info_block_obj$jscomp$1_ptr_state_object$$.map($buffer_info$jscomp$1$$ => {
      const $offset$jscomp$39$$ = $buffer_block_start$jscomp$1$$ + $buffer_info$jscomp$1$$.offset;
      return $state$jscomp$9$$.buffer.slice($offset$jscomp$39$$, $offset$jscomp$39$$ + $buffer_info$jscomp$1$$.length);
    });
    $ctx_state_object$jscomp$1$$ = $restore_buffers$$module$src$state$$($ctx_state_object$jscomp$1$$, $buffer_info_buffers$jscomp$4_info_block_len$jscomp$1$$);
    $cpu$jscomp$5$$.$set_state$($ctx_state_object$jscomp$1$$);
  }
}
;function $print_instruction_counts_offset$$module$src$browser$print_stats$$($cpu$jscomp$9_total$$, $compiled_per_opcode0f_prefixes$$, $jit_exit_per_opcode$$, $max_count_pad_length_unguarded_register$$, $i$jscomp$26_wasm_size$$) {
  let $text$jscomp$11$$ = "";
  var $counts_top_counts$$ = [], $i$jscomp$27_label$jscomp$9$$ = $compiled_per_opcode0f_prefixes$$ ? "compiled" : $jit_exit_per_opcode$$ ? "jit exit" : $max_count_pad_length_unguarded_register$$ ? "unguarded register" : $i$jscomp$26_wasm_size$$ ? "wasm size" : "executed";
  for (let $opcode$$ = 0; 256 > $opcode$$; $opcode$$++) {
    for (let $fixed_g$$ = 0; 8 > $fixed_g$$; $fixed_g$$++) {
      for (const $is_mem$$ of [!1, !0]) {
        var $count$jscomp$41_count_0f$$ = $cpu$jscomp$9_total$$.$wm$.exports.get_opstats_buffer($compiled_per_opcode0f_prefixes$$, $jit_exit_per_opcode$$, $max_count_pad_length_unguarded_register$$, $i$jscomp$26_wasm_size$$, $opcode$$, !1, $is_mem$$, $fixed_g$$);
        $counts_top_counts$$.push({$opcode$:$opcode$$, count:$count$jscomp$41_count_0f$$, $is_mem$:$is_mem$$, $fixed_g$:$fixed_g$$});
        $count$jscomp$41_count_0f$$ = $cpu$jscomp$9_total$$.$wm$.exports.get_opstats_buffer($compiled_per_opcode0f_prefixes$$, $jit_exit_per_opcode$$, $max_count_pad_length_unguarded_register$$, $i$jscomp$26_wasm_size$$, $opcode$$, !0, $is_mem$$, $fixed_g$$);
        $counts_top_counts$$.push({$opcode$:3840 | $opcode$$, count:$count$jscomp$41_count_0f$$, $is_mem$:$is_mem$$, $fixed_g$:$fixed_g$$});
      }
    }
  }
  $cpu$jscomp$9_total$$ = 0;
  $compiled_per_opcode0f_prefixes$$ = new Set([38, 46, 54, 62, 100, 101, 102, 103, 240, 242, 243, ]);
  for (const {count:$count$jscomp$42$$, $opcode$:$opcode$jscomp$1$$} of $counts_top_counts$$) {
    $compiled_per_opcode0f_prefixes$$.has($opcode$jscomp$1$$) || ($cpu$jscomp$9_total$$ += $count$jscomp$42$$);
  }
  if (0 === $cpu$jscomp$9_total$$) {
    return "";
  }
  $jit_exit_per_opcode$$ = new Uint32Array(256);
  $compiled_per_opcode0f_prefixes$$ = new Uint32Array(256);
  for (const {$opcode$:$opcode$jscomp$2$$, count:$count$jscomp$43$$} of $counts_top_counts$$) {
    3840 === ($opcode$jscomp$2$$ & 65280) ? $compiled_per_opcode0f_prefixes$$[$opcode$jscomp$2$$ & 255] += $count$jscomp$43$$ : $jit_exit_per_opcode$$[$opcode$jscomp$2$$ & 255] += $count$jscomp$43$$;
  }
  $text$jscomp$11$$ = $text$jscomp$11$$ + "------------------\nTotal: " + ($cpu$jscomp$9_total$$ + "\n");
  const $factor$jscomp$1$$ = 1e7 < $cpu$jscomp$9_total$$ ? 1000 : 1;
  $max_count_pad_length_unguarded_register$$ = Math.max.apply(Math, $counts_top_counts$$.map(({count:$count$jscomp$44$$}) => Math.round($count$jscomp$44$$ / $factor$jscomp$1$$)));
  $max_count_pad_length_unguarded_register$$ = String($max_count_pad_length_unguarded_register$$).length;
  $text$jscomp$11$$ += `Instruction counts ${$i$jscomp$27_label$jscomp$9$$} (in ${$factor$jscomp$1$$}):\n`;
  for ($i$jscomp$26_wasm_size$$ = 0; 256 > $i$jscomp$26_wasm_size$$; $i$jscomp$26_wasm_size$$++) {
    $text$jscomp$11$$ += $i$jscomp$26_wasm_size$$.toString(16).padStart(2, "0") + ":" + $pads$$module$src$lib$$(Math.round($jit_exit_per_opcode$$[$i$jscomp$26_wasm_size$$] / $factor$jscomp$1$$), $max_count_pad_length_unguarded_register$$), $text$jscomp$11$$ = 15 === $i$jscomp$26_wasm_size$$ % 16 ? $text$jscomp$11$$ + "\n" : $text$jscomp$11$$ + " ";
  }
  $text$jscomp$11$$ = $text$jscomp$11$$ + "\n" + `Instruction counts ${$i$jscomp$27_label$jscomp$9$$} (0f, in ${$factor$jscomp$1$$}):\n`;
  for ($i$jscomp$27_label$jscomp$9$$ = 0; 256 > $i$jscomp$27_label$jscomp$9$$; $i$jscomp$27_label$jscomp$9$$++) {
    $text$jscomp$11$$ += ($i$jscomp$27_label$jscomp$9$$ & 255).toString(16).padStart(2, "0") + ":" + $pads$$module$src$lib$$(Math.round($compiled_per_opcode0f_prefixes$$[$i$jscomp$27_label$jscomp$9$$] / $factor$jscomp$1$$), $max_count_pad_length_unguarded_register$$), $text$jscomp$11$$ = 15 === $i$jscomp$27_label$jscomp$9$$ % 16 ? $text$jscomp$11$$ + "\n" : $text$jscomp$11$$ + " ";
  }
  $text$jscomp$11$$ += "\n";
  $counts_top_counts$$ = $counts_top_counts$$.filter(({count:$count$jscomp$45$$}) => $count$jscomp$45$$).sort(({count:$count1$$}, {count:$count2$$}) => $count2$$ - $count1$$);
  for (const {$opcode$:$opcode$jscomp$3$$, $is_mem$:$is_mem$jscomp$1$$, $fixed_g$:$fixed_g$jscomp$1$$, count:$count$jscomp$46$$} of $counts_top_counts$$.slice(0, 200)) {
    $text$jscomp$11$$ += $opcode$jscomp$3$$.toString(16) + "_" + $fixed_g$jscomp$1$$ + ($is_mem$jscomp$1$$ ? "_m" : "_r") + ":" + ($count$jscomp$46$$ / $cpu$jscomp$9_total$$ * 100).toFixed(2) + " ";
  }
  return $text$jscomp$11$$ + "\n";
}
;function $RTC$$module$src$rtc$$($cpu$jscomp$10$$) {
  this.$cpu$ = $cpu$jscomp$10$$;
  this.$cmos_index$ = 0;
  this.$cmos_data$ = new Uint8Array(128);
  this.$B$ = this.$h$ = Date.now();
  this.$o$ = this.$j$ = 0;
  this.$u$ = !1;
  this.$v$ = .9765625;
  this.$l$ = 38;
  this.$g$ = 2;
  this.$nmi_disabled$ = this.$C$ = this.$i$ = 0;
  this.$A$ = !1;
  this.$s$ = 0;
  $JSCompiler_StaticMethods_register_write$$($cpu$jscomp$10$$.$io$, 112, this, function($out_byte$$) {
    this.$cmos_index$ = $out_byte$$ & 127;
    this.$nmi_disabled$ = $out_byte$$ >> 7;
  });
  $JSCompiler_StaticMethods_register_write$$($cpu$jscomp$10$$.$io$, 113, this, this.$cmos_port_write$);
  $JSCompiler_StaticMethods_register_read$$($cpu$jscomp$10$$.$io$, 113, this, this.$cmos_port_read$);
}
$JSCompiler_prototypeAlias$$ = $RTC$$module$src$rtc$$.prototype;
$JSCompiler_prototypeAlias$$.$get_state$ = function() {
  var $state$jscomp$11$$ = [];
  $state$jscomp$11$$[0] = this.$cmos_index$;
  $state$jscomp$11$$[1] = this.$cmos_data$;
  $state$jscomp$11$$[2] = this.$h$;
  $state$jscomp$11$$[3] = this.$B$;
  $state$jscomp$11$$[4] = this.$j$;
  $state$jscomp$11$$[5] = this.$o$;
  $state$jscomp$11$$[6] = this.$u$;
  $state$jscomp$11$$[7] = this.$v$;
  $state$jscomp$11$$[8] = this.$l$;
  $state$jscomp$11$$[9] = this.$g$;
  $state$jscomp$11$$[10] = this.$i$;
  $state$jscomp$11$$[11] = this.$nmi_disabled$;
  $state$jscomp$11$$[12] = this.$A$;
  $state$jscomp$11$$[13] = this.$s$;
  $state$jscomp$11$$[14] = this.$C$;
  return $state$jscomp$11$$;
};
$JSCompiler_prototypeAlias$$.$set_state$ = function($state$jscomp$12$$) {
  this.$cmos_index$ = $state$jscomp$12$$[0];
  this.$cmos_data$ = $state$jscomp$12$$[1];
  this.$h$ = $state$jscomp$12$$[2];
  this.$B$ = $state$jscomp$12$$[3];
  this.$j$ = $state$jscomp$12$$[4];
  this.$o$ = $state$jscomp$12$$[5];
  this.$u$ = $state$jscomp$12$$[6];
  this.$v$ = $state$jscomp$12$$[7];
  this.$l$ = $state$jscomp$12$$[8];
  this.$g$ = $state$jscomp$12$$[9];
  this.$i$ = $state$jscomp$12$$[10];
  this.$nmi_disabled$ = $state$jscomp$12$$[11];
  this.$A$ = $state$jscomp$12$$[12] || !1;
  this.$s$ = $state$jscomp$12$$[13] || 0;
  this.$C$ = $state$jscomp$12$$[14] || 0;
};
$JSCompiler_prototypeAlias$$.$timer$ = function($time$$) {
  $time$$ = Date.now();
  this.$h$ += $time$$ - this.$B$;
  this.$B$ = $time$$;
  this.$u$ && this.$j$ < $time$$ ? (this.$cpu$.$device_raise_irq$(8), this.$i$ |= 192, this.$j$ += this.$v$ * Math.ceil(($time$$ - this.$j$) / this.$v$)) : this.$o$ && this.$o$ < $time$$ ? (this.$cpu$.$device_raise_irq$(8), this.$i$ |= 160, this.$o$ = 0) : this.$A$ && this.$s$ < $time$$ && (this.$cpu$.$device_raise_irq$(8), this.$i$ |= 144, this.$s$ = $time$$ + 1000);
  let $t$jscomp$1$$ = 100;
  this.$u$ && this.$j$ && ($t$jscomp$1$$ = Math.min($t$jscomp$1$$, Math.max(0, this.$j$ - $time$$)));
  this.$o$ && ($t$jscomp$1$$ = Math.min($t$jscomp$1$$, Math.max(0, this.$o$ - $time$$)));
  this.$A$ && ($t$jscomp$1$$ = Math.min($t$jscomp$1$$, Math.max(0, this.$s$ - $time$$)));
  return $t$jscomp$1$$;
};
function $JSCompiler_StaticMethods_encode_time$$($JSCompiler_StaticMethods_encode_time$self_JSCompiler_temp$jscomp$24_n$jscomp$inline_121$$, $i$jscomp$inline_122_t$jscomp$2$$) {
  if ($JSCompiler_StaticMethods_encode_time$self_JSCompiler_temp$jscomp$24_n$jscomp$inline_121$$.$g$ & 4) {
    $JSCompiler_StaticMethods_encode_time$self_JSCompiler_temp$jscomp$24_n$jscomp$inline_121$$ = $i$jscomp$inline_122_t$jscomp$2$$;
  } else {
    $JSCompiler_StaticMethods_encode_time$self_JSCompiler_temp$jscomp$24_n$jscomp$inline_121$$ = $i$jscomp$inline_122_t$jscomp$2$$;
    for (var $result$jscomp$inline_123$$ = $i$jscomp$inline_122_t$jscomp$2$$ = 0, $digit$jscomp$inline_124$$; $JSCompiler_StaticMethods_encode_time$self_JSCompiler_temp$jscomp$24_n$jscomp$inline_121$$;) {
      $digit$jscomp$inline_124$$ = $JSCompiler_StaticMethods_encode_time$self_JSCompiler_temp$jscomp$24_n$jscomp$inline_121$$ % 10, $result$jscomp$inline_123$$ |= $digit$jscomp$inline_124$$ << 4 * $i$jscomp$inline_122_t$jscomp$2$$, $i$jscomp$inline_122_t$jscomp$2$$++, $JSCompiler_StaticMethods_encode_time$self_JSCompiler_temp$jscomp$24_n$jscomp$inline_121$$ = ($JSCompiler_StaticMethods_encode_time$self_JSCompiler_temp$jscomp$24_n$jscomp$inline_121$$ - $digit$jscomp$inline_124$$) / 10;
    }
    $JSCompiler_StaticMethods_encode_time$self_JSCompiler_temp$jscomp$24_n$jscomp$inline_121$$ = $result$jscomp$inline_123$$;
  }
  return $JSCompiler_StaticMethods_encode_time$self_JSCompiler_temp$jscomp$24_n$jscomp$inline_121$$;
}
function $JSCompiler_StaticMethods_decode_time$$($JSCompiler_StaticMethods_decode_time$self$$, $t$jscomp$3$$) {
  var $JSCompiler_temp$jscomp$25$$;
  $JSCompiler_StaticMethods_decode_time$self$$.$g$ & 4 ? $JSCompiler_temp$jscomp$25$$ = $t$jscomp$3$$ : $JSCompiler_temp$jscomp$25$$ = ($t$jscomp$3$$ & 15) + 10 * ($t$jscomp$3$$ >> 4 & 15);
  return $JSCompiler_temp$jscomp$25$$;
}
$JSCompiler_prototypeAlias$$.$cmos_port_read$ = function() {
  switch(this.$cmos_index$) {
    case 0:
      return $JSCompiler_StaticMethods_encode_time$$(this, (new Date(this.$h$)).getUTCSeconds());
    case 2:
      return $JSCompiler_StaticMethods_encode_time$$(this, (new Date(this.$h$)).getUTCMinutes());
    case 4:
      return $JSCompiler_StaticMethods_encode_time$$(this, (new Date(this.$h$)).getUTCHours());
    case 6:
      return $JSCompiler_StaticMethods_encode_time$$(this, (new Date(this.$h$)).getUTCDay() + 1);
    case 7:
      return $JSCompiler_StaticMethods_encode_time$$(this, (new Date(this.$h$)).getUTCDate());
    case 8:
      return $JSCompiler_StaticMethods_encode_time$$(this, (new Date(this.$h$)).getUTCMonth() + 1);
    case 9:
      return $JSCompiler_StaticMethods_encode_time$$(this, (new Date(this.$h$)).getUTCFullYear() % 100);
    case 10:
      return 999 <= $v86$$module$src$main$microtick$$() % 1000 ? this.$l$ | 128 : this.$l$;
    case 11:
      return this.$g$;
    case 12:
      this.$cpu$.$device_lower_irq$(8);
      var $c$jscomp$1$$ = this.$i$;
      this.$i$ &= -241;
      return $c$jscomp$1$$;
    case 13:
      return 128;
    case 14:
      return this.$C$;
    case 50:
    case 55:
      return $JSCompiler_StaticMethods_encode_time$$(this, (new Date(this.$h$)).getUTCFullYear() / 100 | 0);
    default:
      return this.$cmos_data$[this.$cmos_index$];
  }
};
$JSCompiler_prototypeAlias$$.$cmos_port_write$ = function($data_byte$jscomp$8_now$jscomp$1$$) {
  switch(this.$cmos_index$) {
    case 10:
      this.$l$ = $data_byte$jscomp$8_now$jscomp$1$$ & 127;
      this.$v$ = 1000 / (32768 >> (this.$l$ & 15) - 1);
      break;
    case 11:
      this.$g$ = $data_byte$jscomp$8_now$jscomp$1$$;
      this.$g$ & 128 && (this.$g$ &= 239);
      this.$g$ & 64 && (this.$j$ = Date.now());
      if (this.$g$ & 32) {
        $data_byte$jscomp$8_now$jscomp$1$$ = new Date;
        const $seconds$$ = $JSCompiler_StaticMethods_decode_time$$(this, this.$cmos_data$[1]), $minutes$$ = $JSCompiler_StaticMethods_decode_time$$(this, this.$cmos_data$[3]), $hours$$ = $JSCompiler_StaticMethods_decode_time$$(this, this.$cmos_data$[5]);
        this.$o$ = +new Date(Date.UTC($data_byte$jscomp$8_now$jscomp$1$$.getUTCFullYear(), $data_byte$jscomp$8_now$jscomp$1$$.getUTCMonth(), $data_byte$jscomp$8_now$jscomp$1$$.getUTCDate(), $hours$$, $minutes$$, $seconds$$));
      }
      this.$g$ & 16 && (this.$s$ = Date.now());
      break;
    case 14:
      this.$C$ = $data_byte$jscomp$8_now$jscomp$1$$;
      break;
    case 1:
    case 3:
    case 5:
      this.$cmos_data$[this.$cmos_index$] = $data_byte$jscomp$8_now$jscomp$1$$;
  }
  this.$A$ = 16 === (this.$g$ & 16) && 0 < (this.$l$ & 15);
  this.$u$ = 64 === (this.$g$ & 64) && 0 < (this.$l$ & 15);
};
function $PIT$$module$src$pit$$($cpu$jscomp$11$$, $bus$jscomp$1$$) {
  this.$cpu$ = $cpu$jscomp$11$$;
  this.$bus$ = $bus$jscomp$1$$;
  this.$i$ = new Float64Array(3);
  this.$j$ = new Uint16Array(3);
  this.$g$ = new Uint8Array(4);
  this.$h$ = new Uint8Array(4);
  this.$counter_mode$ = new Uint8Array(4);
  this.$s$ = new Uint8Array(4);
  this.$l$ = new Uint8Array(4);
  this.$o$ = new Uint16Array(3);
  this.$counter_reload$ = new Uint16Array(3);
  $JSCompiler_StaticMethods_register_read$$($cpu$jscomp$11$$.$io$, 97, this, function() {
    var $counter2_out_now$jscomp$2$$ = $v86$$module$src$main$microtick$$(), $ref_toggle$$ = 66.66666666666667 * $counter2_out_now$jscomp$2$$ & 1;
    $counter2_out_now$jscomp$2$$ = $JSCompiler_StaticMethods_did_rollover$$(this, 2, $counter2_out_now$jscomp$2$$);
    return $ref_toggle$$ << 4 | $counter2_out_now$jscomp$2$$ << 5;
  });
  $JSCompiler_StaticMethods_register_write$$($cpu$jscomp$11$$.$io$, 97, this, function($data$jscomp$102$$) {
    $data$jscomp$102$$ & 1 ? this.$bus$.send("pcspeaker-enable") : this.$bus$.send("pcspeaker-disable");
  });
  $JSCompiler_StaticMethods_register_read$$($cpu$jscomp$11$$.$io$, 64, this, function() {
    return $JSCompiler_StaticMethods_counter_read$$(this, 0);
  });
  $JSCompiler_StaticMethods_register_read$$($cpu$jscomp$11$$.$io$, 65, this, function() {
    return $JSCompiler_StaticMethods_counter_read$$(this, 1);
  });
  $JSCompiler_StaticMethods_register_read$$($cpu$jscomp$11$$.$io$, 66, this, function() {
    return $JSCompiler_StaticMethods_counter_read$$(this, 2);
  });
  $JSCompiler_StaticMethods_register_write$$($cpu$jscomp$11$$.$io$, 64, this, function($data$jscomp$103$$) {
    $JSCompiler_StaticMethods_counter_write$$(this, 0, $data$jscomp$103$$);
  });
  $JSCompiler_StaticMethods_register_write$$($cpu$jscomp$11$$.$io$, 65, this, function($data$jscomp$104$$) {
    $JSCompiler_StaticMethods_counter_write$$(this, 1, $data$jscomp$104$$);
  });
  $JSCompiler_StaticMethods_register_write$$($cpu$jscomp$11$$.$io$, 66, this, function($data$jscomp$105$$) {
    $JSCompiler_StaticMethods_counter_write$$(this, 2, $data$jscomp$105$$);
    this.$bus$.send("pcspeaker-update", [this.$counter_mode$[2], this.$counter_reload$[2]]);
  });
  $JSCompiler_StaticMethods_register_write$$($cpu$jscomp$11$$.$io$, 67, this, this.$u$);
}
$PIT$$module$src$pit$$.prototype.$get_state$ = function() {
  var $state$jscomp$13$$ = [];
  $state$jscomp$13$$[0] = this.$g$;
  $state$jscomp$13$$[1] = this.$h$;
  $state$jscomp$13$$[2] = this.$counter_mode$;
  $state$jscomp$13$$[3] = this.$s$;
  $state$jscomp$13$$[4] = this.$l$;
  $state$jscomp$13$$[5] = this.$o$;
  $state$jscomp$13$$[6] = this.$counter_reload$;
  $state$jscomp$13$$[7] = this.$i$;
  $state$jscomp$13$$[8] = this.$j$;
  return $state$jscomp$13$$;
};
$PIT$$module$src$pit$$.prototype.$set_state$ = function($state$jscomp$14$$) {
  this.$g$ = $state$jscomp$14$$[0];
  this.$h$ = $state$jscomp$14$$[1];
  this.$counter_mode$ = $state$jscomp$14$$[2];
  this.$s$ = $state$jscomp$14$$[3];
  this.$l$ = $state$jscomp$14$$[4];
  this.$o$ = $state$jscomp$14$$[5];
  this.$counter_reload$ = $state$jscomp$14$$[6];
  this.$i$ = $state$jscomp$14$$[7];
  this.$j$ = $state$jscomp$14$$[8];
};
$PIT$$module$src$pit$$.prototype.$timer$ = function($now$jscomp$3$$, $no_irq$$) {
  var $time_to_next_interrupt$$ = 100;
  $no_irq$$ || (this.$h$[0] && $JSCompiler_StaticMethods_did_rollover$$(this, 0, $now$jscomp$3$$) ? (this.$j$[0] = $JSCompiler_StaticMethods_get_counter_value$$(this, 0, $now$jscomp$3$$), this.$i$[0] = $now$jscomp$3$$, this.$cpu$.$device_lower_irq$(0), this.$cpu$.$device_raise_irq$(0), 0 === this.$counter_mode$[0] && (this.$h$[0] = 0)) : this.$cpu$.$device_lower_irq$(0), this.$h$[0] && ($time_to_next_interrupt$$ = (this.$j$[0] - Math.floor(1193.1816666 * ($now$jscomp$3$$ - this.$i$[0]))) / 1193.1816666));
  return $time_to_next_interrupt$$;
};
function $JSCompiler_StaticMethods_get_counter_value$$($JSCompiler_StaticMethods_get_counter_value$self_reload$$, $i$jscomp$29$$, $now$jscomp$4_value$jscomp$127$$) {
  if (!$JSCompiler_StaticMethods_get_counter_value$self_reload$$.$h$[$i$jscomp$29$$]) {
    return 0;
  }
  $now$jscomp$4_value$jscomp$127$$ = $JSCompiler_StaticMethods_get_counter_value$self_reload$$.$j$[$i$jscomp$29$$] - Math.floor(1193.1816666 * ($now$jscomp$4_value$jscomp$127$$ - $JSCompiler_StaticMethods_get_counter_value$self_reload$$.$i$[$i$jscomp$29$$]));
  $JSCompiler_StaticMethods_get_counter_value$self_reload$$ = $JSCompiler_StaticMethods_get_counter_value$self_reload$$.$counter_reload$[$i$jscomp$29$$];
  $now$jscomp$4_value$jscomp$127$$ >= $JSCompiler_StaticMethods_get_counter_value$self_reload$$ ? $now$jscomp$4_value$jscomp$127$$ %= $JSCompiler_StaticMethods_get_counter_value$self_reload$$ : 0 > $now$jscomp$4_value$jscomp$127$$ && ($now$jscomp$4_value$jscomp$127$$ = $now$jscomp$4_value$jscomp$127$$ % $JSCompiler_StaticMethods_get_counter_value$self_reload$$ + $JSCompiler_StaticMethods_get_counter_value$self_reload$$);
  return $now$jscomp$4_value$jscomp$127$$;
}
function $JSCompiler_StaticMethods_did_rollover$$($JSCompiler_StaticMethods_did_rollover$self$$, $i$jscomp$30$$, $diff$jscomp$2_now$jscomp$5$$) {
  $diff$jscomp$2_now$jscomp$5$$ -= $JSCompiler_StaticMethods_did_rollover$self$$.$i$[$i$jscomp$30$$];
  return 0 > $diff$jscomp$2_now$jscomp$5$$ ? !0 : $JSCompiler_StaticMethods_did_rollover$self$$.$j$[$i$jscomp$30$$] < Math.floor(1193.1816666 * $diff$jscomp$2_now$jscomp$5$$);
}
function $JSCompiler_StaticMethods_counter_read$$($JSCompiler_StaticMethods_counter_read$self_value$jscomp$128$$, $i$jscomp$31$$) {
  var $latch_next_low$$ = $JSCompiler_StaticMethods_counter_read$self_value$jscomp$128$$.$l$[$i$jscomp$31$$];
  if ($latch_next_low$$) {
    return $JSCompiler_StaticMethods_counter_read$self_value$jscomp$128$$.$l$[$i$jscomp$31$$]--, 2 === $latch_next_low$$ ? $JSCompiler_StaticMethods_counter_read$self_value$jscomp$128$$.$o$[$i$jscomp$31$$] & 255 : $JSCompiler_StaticMethods_counter_read$self_value$jscomp$128$$.$o$[$i$jscomp$31$$] >> 8;
  }
  $latch_next_low$$ = $JSCompiler_StaticMethods_counter_read$self_value$jscomp$128$$.$g$[$i$jscomp$31$$];
  3 === $JSCompiler_StaticMethods_counter_read$self_value$jscomp$128$$.$counter_mode$[$i$jscomp$31$$] && ($JSCompiler_StaticMethods_counter_read$self_value$jscomp$128$$.$g$[$i$jscomp$31$$] ^= 1);
  $JSCompiler_StaticMethods_counter_read$self_value$jscomp$128$$ = $JSCompiler_StaticMethods_get_counter_value$$($JSCompiler_StaticMethods_counter_read$self_value$jscomp$128$$, $i$jscomp$31$$, $v86$$module$src$main$microtick$$());
  return $latch_next_low$$ ? $JSCompiler_StaticMethods_counter_read$self_value$jscomp$128$$ & 255 : $JSCompiler_StaticMethods_counter_read$self_value$jscomp$128$$ >> 8;
}
function $JSCompiler_StaticMethods_counter_write$$($JSCompiler_StaticMethods_counter_write$self$$, $i$jscomp$32$$, $value$jscomp$129$$) {
  $JSCompiler_StaticMethods_counter_write$self$$.$counter_reload$[$i$jscomp$32$$] = $JSCompiler_StaticMethods_counter_write$self$$.$g$[$i$jscomp$32$$] ? $JSCompiler_StaticMethods_counter_write$self$$.$counter_reload$[$i$jscomp$32$$] & -256 | $value$jscomp$129$$ : $JSCompiler_StaticMethods_counter_write$self$$.$counter_reload$[$i$jscomp$32$$] & 255 | $value$jscomp$129$$ << 8;
  3 === $JSCompiler_StaticMethods_counter_write$self$$.$s$[$i$jscomp$32$$] && $JSCompiler_StaticMethods_counter_write$self$$.$g$[$i$jscomp$32$$] || ($JSCompiler_StaticMethods_counter_write$self$$.$counter_reload$[$i$jscomp$32$$] || ($JSCompiler_StaticMethods_counter_write$self$$.$counter_reload$[$i$jscomp$32$$] = 65535), $JSCompiler_StaticMethods_counter_write$self$$.$j$[$i$jscomp$32$$] = $JSCompiler_StaticMethods_counter_write$self$$.$counter_reload$[$i$jscomp$32$$], $JSCompiler_StaticMethods_counter_write$self$$.$h$[$i$jscomp$32$$] = 
  !0, $JSCompiler_StaticMethods_counter_write$self$$.$i$[$i$jscomp$32$$] = $v86$$module$src$main$microtick$$());
  3 === $JSCompiler_StaticMethods_counter_write$self$$.$s$[$i$jscomp$32$$] && ($JSCompiler_StaticMethods_counter_write$self$$.$g$[$i$jscomp$32$$] ^= 1);
}
$PIT$$module$src$pit$$.prototype.$u$ = function($read_mode_reg_byte$$) {
  var $mode$jscomp$18_value$jscomp$130$$ = $read_mode_reg_byte$$ >> 1 & 7, $i$jscomp$33$$ = $read_mode_reg_byte$$ >> 6 & 3;
  $read_mode_reg_byte$$ = $read_mode_reg_byte$$ >> 4 & 3;
  3 !== $i$jscomp$33$$ && (0 === $read_mode_reg_byte$$ ? (this.$l$[$i$jscomp$33$$] = 2, $mode$jscomp$18_value$jscomp$130$$ = $JSCompiler_StaticMethods_get_counter_value$$(this, $i$jscomp$33$$, $v86$$module$src$main$microtick$$()), this.$o$[$i$jscomp$33$$] = $mode$jscomp$18_value$jscomp$130$$ ? $mode$jscomp$18_value$jscomp$130$$ - 1 : 0) : (6 <= $mode$jscomp$18_value$jscomp$130$$ && ($mode$jscomp$18_value$jscomp$130$$ &= -5), this.$g$[$i$jscomp$33$$] = 1 === $read_mode_reg_byte$$ ? 1 : 2 === $read_mode_reg_byte$$ ? 
  0 : 1, 0 === $i$jscomp$33$$ && this.$cpu$.$device_lower_irq$(0), this.$counter_mode$[$i$jscomp$33$$] = $mode$jscomp$18_value$jscomp$130$$, this.$s$[$i$jscomp$33$$] = $read_mode_reg_byte$$, 2 === $i$jscomp$33$$ && this.$bus$.send("pcspeaker-update", [this.$counter_mode$[2], this.$counter_reload$[2]])));
};
function $SpeakerAdapter$$module$src$browser$speaker$$($bus$jscomp$2$$) {
  if ("undefined" !== typeof window) {
    if (window.AudioContext || window.webkitAudioContext) {
      var $SpeakerDAC$$ = window.AudioWorklet ? $SpeakerWorkletDAC$$module$src$browser$speaker$$ : $SpeakerBufferSourceDAC$$module$src$browser$speaker$$;
      this.$bus$ = $bus$jscomp$2$$;
      this.$audio_context$ = window.AudioContext ? new AudioContext : new webkitAudioContext;
      this.$mixer$ = new $SpeakerMixer$$module$src$browser$speaker$$($bus$jscomp$2$$, this.$audio_context$);
      this.$h$ = new $PCSpeaker$$module$src$browser$speaker$$($bus$jscomp$2$$, this.$audio_context$, this.$mixer$);
      this.$g$ = new $SpeakerDAC$$($bus$jscomp$2$$, this.$audio_context$, this.$mixer$);
      this.$h$.start();
      $bus$jscomp$2$$.register("emulator-stopped", function() {
        this.$audio_context$.suspend();
      }, this);
      $bus$jscomp$2$$.register("emulator-started", function() {
        this.$audio_context$.resume();
      }, this);
      $bus$jscomp$2$$.register("speaker-confirm-initialized", function() {
        $bus$jscomp$2$$.send("speaker-has-initialized");
      }, this);
      $bus$jscomp$2$$.send("speaker-has-initialized");
    } else {
      console.warn("Web browser doesn't support Web Audio API");
    }
  }
}
$SpeakerAdapter$$module$src$browser$speaker$$.prototype.$destroy$ = function() {
  this.$audio_context$ && this.$audio_context$.close();
  this.$audio_context$ = null;
  this.$g$ && this.$g$.$node_processor$ && this.$g$.$node_processor$.port.close();
  this.$g$ = null;
};
function $SpeakerMixer$$module$src$browser$speaker$$($bus$jscomp$3$$, $audio_context$$) {
  function $create_gain_handler$$($audio_node$$) {
    return function($decibels$jscomp$3$$) {
      $audio_node$$.gain.setValueAtTime($decibels$jscomp$3$$, this.$audio_context$.currentTime);
    };
  }
  this.$audio_context$ = $audio_context$$;
  this.sources = new Map;
  this.$gain_right$ = this.$gain_left$ = this.$A$ = this.$v$ = this.$s$ = 1;
  this.$i$ = this.$audio_context$.createBiquadFilter();
  this.$j$ = this.$audio_context$.createBiquadFilter();
  this.$i$.type = "highshelf";
  this.$j$.type = "highshelf";
  this.$i$.frequency.setValueAtTime(2000, this.$audio_context$.currentTime);
  this.$j$.frequency.setValueAtTime(2000, this.$audio_context$.currentTime);
  this.$g$ = this.$audio_context$.createBiquadFilter();
  this.$h$ = this.$audio_context$.createBiquadFilter();
  this.$g$.type = "lowshelf";
  this.$h$.type = "lowshelf";
  this.$g$.frequency.setValueAtTime(200, this.$audio_context$.currentTime);
  this.$h$.frequency.setValueAtTime(200, this.$audio_context$.currentTime);
  this.$l$ = this.$audio_context$.createGain();
  this.$o$ = this.$audio_context$.createGain();
  this.$u$ = this.$audio_context$.createChannelMerger(2);
  this.$B$ = this.$i$;
  this.$C$ = this.$j$;
  this.$i$.connect(this.$g$);
  this.$g$.connect(this.$l$);
  this.$l$.connect(this.$u$, 0, 0);
  this.$j$.connect(this.$h$);
  this.$h$.connect(this.$o$);
  this.$o$.connect(this.$u$, 0, 1);
  this.$u$.connect(this.$audio_context$.destination);
  $bus$jscomp$3$$.register("mixer-connect", function($data$jscomp$106_source$jscomp$inline_134$$) {
    var $channel$jscomp$inline_133$$ = $data$jscomp$106_source$jscomp$inline_134$$[1];
    $data$jscomp$106_source$jscomp$inline_134$$ = this.sources.get($data$jscomp$106_source$jscomp$inline_134$$[0]);
    void 0 === $data$jscomp$106_source$jscomp$inline_134$$ || $data$jscomp$106_source$jscomp$inline_134$$.connect($channel$jscomp$inline_133$$);
  }, this);
  $bus$jscomp$3$$.register("mixer-disconnect", function($data$jscomp$107_source$jscomp$inline_139$$) {
    var $channel$jscomp$inline_138$$ = $data$jscomp$107_source$jscomp$inline_139$$[1];
    $data$jscomp$107_source$jscomp$inline_139$$ = this.sources.get($data$jscomp$107_source$jscomp$inline_139$$[0]);
    void 0 === $data$jscomp$107_source$jscomp$inline_139$$ || $data$jscomp$107_source$jscomp$inline_139$$.disconnect($channel$jscomp$inline_138$$);
  }, this);
  $bus$jscomp$3$$.register("mixer-volume", function($data$jscomp$108_gain$$) {
    var $source$jscomp$16_source_id$jscomp$2$$ = $data$jscomp$108_gain$$[0], $channel$jscomp$22$$ = $data$jscomp$108_gain$$[1];
    $data$jscomp$108_gain$$ = Math.pow(10, $data$jscomp$108_gain$$[2] / 20);
    $source$jscomp$16_source_id$jscomp$2$$ = 0 === $source$jscomp$16_source_id$jscomp$2$$ ? this : this.sources.get($source$jscomp$16_source_id$jscomp$2$$);
    void 0 === $source$jscomp$16_source_id$jscomp$2$$ || $source$jscomp$16_source_id$jscomp$2$$.$set_volume$($data$jscomp$108_gain$$, $channel$jscomp$22$$);
  }, this);
  $bus$jscomp$3$$.register("mixer-gain-left", function($decibels$jscomp$1$$) {
    this.$gain_left$ = Math.pow(10, $decibels$jscomp$1$$ / 20);
    this.update();
  }, this);
  $bus$jscomp$3$$.register("mixer-gain-right", function($decibels$jscomp$2$$) {
    this.$gain_right$ = Math.pow(10, $decibels$jscomp$2$$ / 20);
    this.update();
  }, this);
  $bus$jscomp$3$$.register("mixer-treble-left", $create_gain_handler$$(this.$i$), this);
  $bus$jscomp$3$$.register("mixer-treble-right", $create_gain_handler$$(this.$j$), this);
  $bus$jscomp$3$$.register("mixer-bass-left", $create_gain_handler$$(this.$g$), this);
  $bus$jscomp$3$$.register("mixer-bass-right", $create_gain_handler$$(this.$h$), this);
}
function $JSCompiler_StaticMethods_add_source$$($JSCompiler_StaticMethods_add_source$self$$, $source$jscomp$17_source_node$$, $source_id$jscomp$3$$) {
  $source$jscomp$17_source_node$$ = new $SpeakerMixerSource$$module$src$browser$speaker$$($JSCompiler_StaticMethods_add_source$self$$.$audio_context$, $source$jscomp$17_source_node$$, $JSCompiler_StaticMethods_add_source$self$$.$B$, $JSCompiler_StaticMethods_add_source$self$$.$C$);
  $JSCompiler_StaticMethods_add_source$self$$.sources.has($source_id$jscomp$3$$);
  $JSCompiler_StaticMethods_add_source$self$$.sources.set($source_id$jscomp$3$$, $source$jscomp$17_source_node$$);
  return $source$jscomp$17_source_node$$;
}
$SpeakerMixer$$module$src$browser$speaker$$.prototype.$set_volume$ = function($value$jscomp$131$$, $channel$jscomp$25$$) {
  void 0 === $channel$jscomp$25$$ && ($channel$jscomp$25$$ = 2);
  switch($channel$jscomp$25$$) {
    case 0:
      this.$v$ = $value$jscomp$131$$;
      break;
    case 1:
      this.$A$ = $value$jscomp$131$$;
      break;
    case 2:
      this.$s$ = $value$jscomp$131$$;
      break;
    default:
      return;
  }
  this.update();
};
$SpeakerMixer$$module$src$browser$speaker$$.prototype.update = function() {
  var $net_gain_right$$ = this.$s$ * this.$A$ * this.$gain_right$;
  this.$l$.gain.setValueAtTime(this.$s$ * this.$v$ * this.$gain_left$, this.$audio_context$.currentTime);
  this.$o$.gain.setValueAtTime($net_gain_right$$, this.$audio_context$.currentTime);
};
function $SpeakerMixerSource$$module$src$browser$speaker$$($audio_context$jscomp$1$$, $source_node$jscomp$1$$, $destination_left$$, $destination_right$$) {
  this.$audio_context$ = $audio_context$jscomp$1$$;
  this.$o$ = this.$l$ = !0;
  this.$v$ = this.$u$ = this.$j$ = this.$g$ = 1;
  this.$s$ = $audio_context$jscomp$1$$.createChannelSplitter(2);
  this.$h$ = $audio_context$jscomp$1$$.createGain();
  this.$i$ = $audio_context$jscomp$1$$.createGain();
  $source_node$jscomp$1$$.connect(this.$s$);
  this.$s$.connect(this.$h$, 0);
  this.$h$.connect($destination_left$$);
  this.$s$.connect(this.$i$, 1);
  this.$i$.connect($destination_right$$);
}
$SpeakerMixerSource$$module$src$browser$speaker$$.prototype.update = function() {
  var $net_gain_right$jscomp$1$$ = this.$o$ * this.$g$ * this.$j$ * this.$v$;
  this.$h$.gain.setValueAtTime(this.$l$ * this.$g$ * this.$j$ * this.$u$, this.$audio_context$.currentTime);
  this.$i$.gain.setValueAtTime($net_gain_right$jscomp$1$$, this.$audio_context$.currentTime);
};
$SpeakerMixerSource$$module$src$browser$speaker$$.prototype.connect = function($channel$jscomp$26$$) {
  var $both$$ = !$channel$jscomp$26$$ || 2 === $channel$jscomp$26$$;
  if ($both$$ || 0 === $channel$jscomp$26$$) {
    this.$l$ = !0;
  }
  if ($both$$ || 1 === $channel$jscomp$26$$) {
    this.$o$ = !0;
  }
  this.update();
};
$SpeakerMixerSource$$module$src$browser$speaker$$.prototype.disconnect = function($channel$jscomp$27$$) {
  var $both$jscomp$1$$ = !$channel$jscomp$27$$ || 2 === $channel$jscomp$27$$;
  if ($both$jscomp$1$$ || 0 === $channel$jscomp$27$$) {
    this.$l$ = !1;
  }
  if ($both$jscomp$1$$ || 1 === $channel$jscomp$27$$) {
    this.$o$ = !1;
  }
  this.update();
};
$SpeakerMixerSource$$module$src$browser$speaker$$.prototype.$set_volume$ = function($value$jscomp$132$$, $channel$jscomp$28$$) {
  void 0 === $channel$jscomp$28$$ && ($channel$jscomp$28$$ = 2);
  switch($channel$jscomp$28$$) {
    case 0:
      this.$u$ = $value$jscomp$132$$;
      break;
    case 1:
      this.$v$ = $value$jscomp$132$$;
      break;
    case 2:
      this.$j$ = $value$jscomp$132$$;
      break;
    default:
      return;
  }
  this.update();
};
function $PCSpeaker$$module$src$browser$speaker$$($bus$jscomp$4$$, $audio_context$jscomp$2$$, $mixer$$) {
  this.$node_oscillator$ = $audio_context$jscomp$2$$.createOscillator();
  this.$node_oscillator$.type = "square";
  this.$node_oscillator$.frequency.setValueAtTime(440, $audio_context$jscomp$2$$.currentTime);
  this.$g$ = $JSCompiler_StaticMethods_add_source$$($mixer$$, this.$node_oscillator$, 1);
  this.$g$.disconnect();
  $bus$jscomp$4$$.register("pcspeaker-enable", function() {
    var $source$jscomp$inline_146$$ = $mixer$$.sources.get(1);
    void 0 === $source$jscomp$inline_146$$ || $source$jscomp$inline_146$$.connect(void 0);
  }, this);
  $bus$jscomp$4$$.register("pcspeaker-disable", function() {
    var $source$jscomp$inline_151$$ = $mixer$$.sources.get(1);
    void 0 === $source$jscomp$inline_151$$ || $source$jscomp$inline_151$$.disconnect(void 0);
  }, this);
  $bus$jscomp$4$$.register("pcspeaker-update", function($data$jscomp$109$$) {
    var $counter_reload$$ = $data$jscomp$109$$[1], $frequency$$ = 0;
    3 === $data$jscomp$109$$[0] && ($frequency$$ = Math.min(1193181.6665999999 / $counter_reload$$, this.$node_oscillator$.frequency.maxValue), $frequency$$ = Math.max($frequency$$, 0));
    this.$node_oscillator$.frequency.setValueAtTime($frequency$$, $audio_context$jscomp$2$$.currentTime);
  }, this);
}
$PCSpeaker$$module$src$browser$speaker$$.prototype.start = function() {
  this.$node_oscillator$.start();
};
function $SpeakerWorkletDAC$$module$src$browser$speaker$$($bus$jscomp$5$$, $audio_context$jscomp$3_worklet_string$$, $mixer$jscomp$1$$) {
  this.$bus$ = $bus$jscomp$5$$;
  this.$audio_context$ = $audio_context$jscomp$3_worklet_string$$;
  this.enabled = !1;
  this.$sampling_rate$ = 48000;
  $audio_context$jscomp$3_worklet_string$$ = function() {
    function $sinc$$($x$jscomp$98$$) {
      if (0 === $x$jscomp$98$$) {
        return 1;
      }
      $x$jscomp$98$$ *= Math.PI;
      return Math.sin($x$jscomp$98$$) / $x$jscomp$98$$;
    }
    function $DACProcessor$$() {
      var $self$jscomp$1$$ = Reflect.construct(AudioWorkletProcessor, [], $DACProcessor$$);
      $self$jscomp$1$$.$v$ = 3;
      $self$jscomp$1$$.$l$ = Array(1024);
      $self$jscomp$1$$.$s$ = 0;
      $self$jscomp$1$$.$B$ = 0;
      $self$jscomp$1$$.$o$ = 0;
      $self$jscomp$1$$.$A$ = $self$jscomp$1$$.$l$.length;
      $self$jscomp$1$$.$u$ = 0;
      $self$jscomp$1$$.$C$ = $EMPTY_BUFFER$$;
      $self$jscomp$1$$.$g$ = $EMPTY_BUFFER$$;
      $self$jscomp$1$$.$D$ = 1.0;
      $self$jscomp$1$$.$j$ = 0;
      $self$jscomp$1$$.$i$ = 0.0;
      $self$jscomp$1$$.$h$ = 0;
      $self$jscomp$1$$.port.onmessage = $event$jscomp$4$$ => {
        switch($event$jscomp$4$$.data.type) {
          case "queue":
            $self$jscomp$1$$.$K$($event$jscomp$4$$.data.value);
            break;
          case "sampling-rate":
            $self$jscomp$1$$.$D$ = $event$jscomp$4$$.data.value / sampleRate;
        }
      };
      return $self$jscomp$1$$;
    }
    var $EMPTY_BUFFER$$ = [new Float32Array(256), new Float32Array(256), ];
    Reflect.setPrototypeOf($DACProcessor$$.prototype, AudioWorkletProcessor.prototype);
    Reflect.setPrototypeOf($DACProcessor$$, AudioWorkletProcessor);
    $DACProcessor$$.prototype.process = $DACProcessor$$.prototype.process = function($i$jscomp$34_inputs$jscomp$1$$, $outputs$jscomp$1_samples_needed_per_block$$) {
      for ($i$jscomp$34_inputs$jscomp$1$$ = 0; $i$jscomp$34_inputs$jscomp$1$$ < $outputs$jscomp$1_samples_needed_per_block$$[0][0].length; $i$jscomp$34_inputs$jscomp$1$$++) {
        for (var $sum0$$ = 0, $sum1$$ = 0, $end$jscomp$13$$ = this.$h$ + this.$v$, $j$jscomp$5$$ = this.$h$ - this.$v$ + 1; $j$jscomp$5$$ <= $end$jscomp$13$$; $j$jscomp$5$$++) {
          var $convolute_index$$ = this.$j$ + $j$jscomp$5$$;
          $sum0$$ += this.$F$($convolute_index$$, 0) * this.$G$(this.$i$ - $j$jscomp$5$$);
          $sum1$$ += this.$F$($convolute_index$$, 1) * this.$G$(this.$i$ - $j$jscomp$5$$);
        }
        if (isNaN($sum0$$) || isNaN($sum1$$)) {
          $sum0$$ = $sum1$$ = 0;
        }
        $outputs$jscomp$1_samples_needed_per_block$$[0][0][$i$jscomp$34_inputs$jscomp$1$$] = $sum0$$;
        $outputs$jscomp$1_samples_needed_per_block$$[0][1][$i$jscomp$34_inputs$jscomp$1$$] = $sum1$$;
        this.$i$ += this.$D$;
        this.$h$ = Math.floor(this.$i$);
      }
      $outputs$jscomp$1_samples_needed_per_block$$ = this.$h$;
      $outputs$jscomp$1_samples_needed_per_block$$ += this.$v$ + 2;
      this.$i$ -= this.$h$;
      this.$j$ += this.$h$;
      this.$h$ = 0;
      this.$I$($outputs$jscomp$1_samples_needed_per_block$$);
      return !0;
    };
    $DACProcessor$$.prototype.$G$ = function($x$jscomp$99$$) {
      return $sinc$$($x$jscomp$99$$) * $sinc$$($x$jscomp$99$$ / this.$v$);
    };
    $DACProcessor$$.prototype.$F$ = function($index$jscomp$80$$, $channel$jscomp$29$$) {
      return 0 > $index$jscomp$80$$ ? ($index$jscomp$80$$ += this.$C$[0].length, this.$C$[$channel$jscomp$29$$][$index$jscomp$80$$]) : this.$g$[$channel$jscomp$29$$][$index$jscomp$80$$];
    };
    $DACProcessor$$.prototype.$I$ = function($needed$$) {
      var $current_length$$ = this.$g$[0].length;
      $current_length$$ - this.$j$ < $needed$$ && (this.$J$(), this.$j$ -= $current_length$$);
    };
    $DACProcessor$$.prototype.$J$ = function() {
      this.$C$ = this.$g$;
      this.$g$ = this.$H$();
      var $new_big_buffer_new_big_buffer_size_sample_count$jscomp$1$$ = this.$g$[0].length;
      if (256 > $new_big_buffer_new_big_buffer_size_sample_count$jscomp$1$$) {
        for (var $new_big_buffer_pos_queue_pos$$ = this.$s$, $buffer_count$$ = 0; 256 > $new_big_buffer_new_big_buffer_size_sample_count$jscomp$1$$ && $buffer_count$$ < this.$o$;) {
          $new_big_buffer_new_big_buffer_size_sample_count$jscomp$1$$ += this.$l$[$new_big_buffer_pos_queue_pos$$][0].length, $new_big_buffer_pos_queue_pos$$ = $new_big_buffer_pos_queue_pos$$ + 1 & this.$A$ - 1, $buffer_count$$++;
        }
        $new_big_buffer_new_big_buffer_size_sample_count$jscomp$1$$ = Math.max($new_big_buffer_new_big_buffer_size_sample_count$jscomp$1$$, 256);
        $new_big_buffer_new_big_buffer_size_sample_count$jscomp$1$$ = [new Float32Array($new_big_buffer_new_big_buffer_size_sample_count$jscomp$1$$), new Float32Array($new_big_buffer_new_big_buffer_size_sample_count$jscomp$1$$), ];
        $new_big_buffer_new_big_buffer_size_sample_count$jscomp$1$$[0].set(this.$g$[0]);
        $new_big_buffer_new_big_buffer_size_sample_count$jscomp$1$$[1].set(this.$g$[1]);
        $new_big_buffer_pos_queue_pos$$ = this.$g$[0].length;
        for (var $i$jscomp$35$$ = 0; $i$jscomp$35$$ < $buffer_count$$; $i$jscomp$35$$++) {
          var $small_buffer$$ = this.$H$();
          $new_big_buffer_new_big_buffer_size_sample_count$jscomp$1$$[0].set($small_buffer$$[0], $new_big_buffer_pos_queue_pos$$);
          $new_big_buffer_new_big_buffer_size_sample_count$jscomp$1$$[1].set($small_buffer$$[1], $new_big_buffer_pos_queue_pos$$);
          $new_big_buffer_pos_queue_pos$$ += $small_buffer$$[0].length;
        }
        this.$g$ = $new_big_buffer_new_big_buffer_size_sample_count$jscomp$1$$;
      }
      this.$pump$();
    };
    $DACProcessor$$.prototype.$pump$ = function() {
      1024 > this.$u$ / this.$D$ && this.port.postMessage({type:"pump", });
    };
    $DACProcessor$$.prototype.$K$ = function($item$jscomp$6$$) {
      this.$o$ < this.$A$ && (this.$l$[this.$B$] = $item$jscomp$6$$, this.$B$ = this.$B$ + 1 & this.$A$ - 1, this.$o$++, this.$u$ += $item$jscomp$6$$[0].length, this.$pump$());
    };
    $DACProcessor$$.prototype.$H$ = function() {
      if (!this.$o$) {
        return $EMPTY_BUFFER$$;
      }
      var $item$jscomp$7$$ = this.$l$[this.$s$];
      this.$l$[this.$s$] = null;
      this.$s$ = this.$s$ + 1 & this.$A$ - 1;
      this.$o$--;
      this.$u$ -= $item$jscomp$7$$[0].length;
      return $item$jscomp$7$$;
    };
    registerProcessor("dac-processor", $DACProcessor$$);
  }.toString();
  var $worklet_url$$ = URL.createObjectURL(new Blob([$audio_context$jscomp$3_worklet_string$$.substring($audio_context$jscomp$3_worklet_string$$.indexOf("{") + 1, $audio_context$jscomp$3_worklet_string$$.lastIndexOf("}"))], {type:"application/javascript"}));
  this.$node_processor$ = null;
  this.$g$ = this.$audio_context$.createGain();
  this.$audio_context$.audioWorklet.addModule($worklet_url$$).then(() => {
    URL.revokeObjectURL($worklet_url$$);
    this.$node_processor$ = new AudioWorkletNode(this.$audio_context$, "dac-processor", {numberOfInputs:0, numberOfOutputs:1, outputChannelCount:[2], parameterData:{}, processorOptions:{}, });
    this.$node_processor$.port.postMessage({type:"sampling-rate", value:this.$sampling_rate$, });
    this.$node_processor$.port.onmessage = $event$jscomp$5$$ => {
      switch($event$jscomp$5$$.data.type) {
        case "pump":
          this.$pump$();
      }
    };
    this.$node_processor$.connect(this.$g$);
  });
  this.$h$ = $JSCompiler_StaticMethods_add_source$$($mixer$jscomp$1$$, this.$g$, 2);
  this.$h$.$g$ = 3;
  $bus$jscomp$5$$.register("dac-send-data", function($data$jscomp$110$$) {
    this.$queue$($data$jscomp$110$$);
  }, this);
  $bus$jscomp$5$$.register("dac-enable", function() {
    this.enabled = !0;
  }, this);
  $bus$jscomp$5$$.register("dac-disable", function() {
    this.enabled = !1;
  }, this);
  $bus$jscomp$5$$.register("dac-tell-sampling-rate", function($rate$jscomp$2$$) {
    this.$sampling_rate$ = $rate$jscomp$2$$;
    this.$node_processor$ && this.$node_processor$.port.postMessage({type:"sampling-rate", value:$rate$jscomp$2$$, });
  }, this);
}
$SpeakerWorkletDAC$$module$src$browser$speaker$$.prototype.$queue$ = function($data$jscomp$111$$) {
  this.$node_processor$ && this.$node_processor$.port.postMessage({type:"queue", value:$data$jscomp$111$$, }, [$data$jscomp$111$$[0].buffer, $data$jscomp$111$$[1].buffer]);
};
$SpeakerWorkletDAC$$module$src$browser$speaker$$.prototype.$pump$ = function() {
  this.enabled && this.$bus$.send("dac-request-data");
};
function $SpeakerBufferSourceDAC$$module$src$browser$speaker$$($bus$jscomp$6$$, $audio_context$jscomp$4$$, $mixer$jscomp$2$$) {
  this.$bus$ = $bus$jscomp$6$$;
  this.$audio_context$ = $audio_context$jscomp$4$$;
  this.enabled = !1;
  this.$sampling_rate$ = 22050;
  this.$g$ = 0;
  this.$rate_ratio$ = 1;
  this.$node_lowpass$ = this.$audio_context$.createBiquadFilter();
  this.$node_lowpass$.type = "lowpass";
  this.$i$ = this.$node_lowpass$;
  this.$h$ = $JSCompiler_StaticMethods_add_source$$($mixer$jscomp$2$$, this.$i$, 2);
  this.$h$.$g$ = 3;
  $bus$jscomp$6$$.register("dac-send-data", function($data$jscomp$112$$) {
    this.$queue$($data$jscomp$112$$);
  }, this);
  $bus$jscomp$6$$.register("dac-enable", function() {
    this.enabled = !0;
    this.$pump$();
  }, this);
  $bus$jscomp$6$$.register("dac-disable", function() {
    this.enabled = !1;
  }, this);
  $bus$jscomp$6$$.register("dac-tell-sampling-rate", function($rate$jscomp$3$$) {
    this.$sampling_rate$ = $rate$jscomp$3$$;
    this.$rate_ratio$ = Math.ceil(8000 / $rate$jscomp$3$$);
    this.$node_lowpass$.frequency.setValueAtTime($rate$jscomp$3$$ / 2, this.$audio_context$.currentTime);
  }, this);
}
$SpeakerBufferSourceDAC$$module$src$browser$speaker$$.prototype.$queue$ = function($data$jscomp$113_source$jscomp$20$$) {
  var $current_silence_duration_sample_count$jscomp$2$$ = $data$jscomp$113_source$jscomp$20$$[0].length, $block_duration$$ = $current_silence_duration_sample_count$jscomp$2$$ / this.$sampling_rate$;
  if (1 < this.$rate_ratio$) {
    var $buffer$jscomp$32_current_time_target_silence_duration$$ = this.$audio_context$.createBuffer(2, $current_silence_duration_sample_count$jscomp$2$$ * this.$rate_ratio$, this.$sampling_rate$ * this.$rate_ratio$);
    for (var $buffer_data0$$ = $buffer$jscomp$32_current_time_target_silence_duration$$.getChannelData(0), $buffer_data1$$ = $buffer$jscomp$32_current_time_target_silence_duration$$.getChannelData(1), $buffer_index$$ = 0, $i$jscomp$36$$ = 0; $i$jscomp$36$$ < $current_silence_duration_sample_count$jscomp$2$$; $i$jscomp$36$$++) {
      for (var $j$jscomp$6$$ = 0; $j$jscomp$6$$ < this.$rate_ratio$; $j$jscomp$6$$++, $buffer_index$$++) {
        $buffer_data0$$[$buffer_index$$] = $data$jscomp$113_source$jscomp$20$$[0][$i$jscomp$36$$], $buffer_data1$$[$buffer_index$$] = $data$jscomp$113_source$jscomp$20$$[1][$i$jscomp$36$$];
      }
    }
  } else {
    $buffer$jscomp$32_current_time_target_silence_duration$$ = this.$audio_context$.createBuffer(2, $current_silence_duration_sample_count$jscomp$2$$, this.$sampling_rate$), $buffer$jscomp$32_current_time_target_silence_duration$$.copyToChannel ? ($buffer$jscomp$32_current_time_target_silence_duration$$.copyToChannel($data$jscomp$113_source$jscomp$20$$[0], 0), $buffer$jscomp$32_current_time_target_silence_duration$$.copyToChannel($data$jscomp$113_source$jscomp$20$$[1], 1)) : ($buffer$jscomp$32_current_time_target_silence_duration$$.getChannelData(0).set($data$jscomp$113_source$jscomp$20$$[0]), 
    $buffer$jscomp$32_current_time_target_silence_duration$$.getChannelData(1).set($data$jscomp$113_source$jscomp$20$$[1]));
  }
  $data$jscomp$113_source$jscomp$20$$ = this.$audio_context$.createBufferSource();
  $data$jscomp$113_source$jscomp$20$$.buffer = $buffer$jscomp$32_current_time_target_silence_duration$$;
  $data$jscomp$113_source$jscomp$20$$.connect(this.$node_lowpass$);
  $data$jscomp$113_source$jscomp$20$$.addEventListener("ended", this.$pump$.bind(this));
  $buffer$jscomp$32_current_time_target_silence_duration$$ = this.$audio_context$.currentTime;
  if (this.$g$ < $buffer$jscomp$32_current_time_target_silence_duration$$) {
    for (this.$g$ = $buffer$jscomp$32_current_time_target_silence_duration$$, $buffer$jscomp$32_current_time_target_silence_duration$$ = 0.2 - $block_duration$$, $current_silence_duration_sample_count$jscomp$2$$ = 0; $current_silence_duration_sample_count$jscomp$2$$ <= $buffer$jscomp$32_current_time_target_silence_duration$$;) {
      $current_silence_duration_sample_count$jscomp$2$$ += $block_duration$$, this.$g$ += $block_duration$$, setTimeout(() => this.$pump$(), 1000 * $current_silence_duration_sample_count$jscomp$2$$);
    }
  }
  $data$jscomp$113_source$jscomp$20$$.start(this.$g$);
  this.$g$ += $block_duration$$;
  setTimeout(() => this.$pump$(), 0);
};
$SpeakerBufferSourceDAC$$module$src$browser$speaker$$.prototype.$pump$ = function() {
  this.enabled && (0.2 < this.$g$ - this.$audio_context$.currentTime || this.$bus$.send("dac-request-data"));
};
function $NetworkAdapter$$module$src$browser$network$$($url$jscomp$23$$, $bus$jscomp$7$$) {
  this.$bus$ = $bus$jscomp$7$$;
  this.$g$ = void 0;
  this.id = 0;
  this.$h$ = [];
  this.url = $url$jscomp$23$$;
  this.$j$ = Date.now() - 10000;
  this.$i$ = !1;
  this.$bus$.register("net" + this.id + "-send", function($data$jscomp$115$$) {
    this.send($data$jscomp$115$$);
  }, this);
}
$JSCompiler_prototypeAlias$$ = $NetworkAdapter$$module$src$browser$network$$.prototype;
$JSCompiler_prototypeAlias$$.$JSC$1778_handle_message$ = function($e$jscomp$12$$) {
  this.$bus$ && this.$bus$.send("net" + this.id + "-receive", new Uint8Array($e$jscomp$12$$.data));
};
$JSCompiler_prototypeAlias$$.$JSC$1778_handle_close$ = function() {
  this.$i$ || (this.connect(), setTimeout(this.connect.bind(this), 10000));
};
$JSCompiler_prototypeAlias$$.$JSC$1778_handle_open$ = function() {
  for (var $i$jscomp$38$$ = 0; $i$jscomp$38$$ < this.$h$.length; $i$jscomp$38$$++) {
    this.send(this.$h$[$i$jscomp$38$$]);
  }
  this.$h$ = [];
};
$JSCompiler_prototypeAlias$$.$JSC$1778_handle_error$ = function() {
};
$JSCompiler_prototypeAlias$$.$destroy$ = function() {
  this.$i$ = !0;
  this.$g$ && this.$g$.close();
};
$JSCompiler_prototypeAlias$$.connect = function() {
  if ("undefined" !== typeof WebSocket) {
    if (this.$g$) {
      var $state$jscomp$15$$ = this.$g$.readyState;
      if (0 === $state$jscomp$15$$ || 1 === $state$jscomp$15$$) {
        return;
      }
    }
    if (!(this.$j$ + 10000 > Date.now())) {
      this.$j$ = Date.now();
      try {
        this.$g$ = new WebSocket(this.url);
      } catch ($e$jscomp$16$$) {
        console.error($e$jscomp$16$$);
        return;
      }
      this.$g$.binaryType = "arraybuffer";
      this.$g$.onopen = this.$JSC$1778_handle_open$.bind(this);
      this.$g$.onmessage = this.$JSC$1778_handle_message$.bind(this);
      this.$g$.onclose = this.$JSC$1778_handle_close$.bind(this);
      this.$g$.onerror = this.$JSC$1778_handle_error$.bind(this);
    }
  }
};
$JSCompiler_prototypeAlias$$.send = function($data$jscomp$116$$) {
  this.$g$ && 1 === this.$g$.readyState ? this.$g$.send($data$jscomp$116$$) : (this.$h$.push($data$jscomp$116$$), 128 < this.$h$.length && (this.$h$ = this.$h$.slice(-64)), this.connect());
};
const $NTP_EPOC_DIFF$$module$src$browser$fake_network$$ = (new Date("1970-01-01T00:00:00Z")).getTime() - (new Date("1900-01-01T00:00:00Z")).getTime(), $TWO_TO_32$$module$src$browser$fake_network$$ = Math.pow(2, 32), $V86_ASCII$$module$src$browser$fake_network$$ = [118, 56, 54];
function $a2ethaddr$$module$src$browser$fake_network$$($bytes$jscomp$3$$) {
  return [0, 1, 2, 3, 4, 5].map($i$jscomp$39$$ => $bytes$jscomp$3$$[$i$jscomp$39$$].toString(16)).map($x$jscomp$100$$ => 1 === $x$jscomp$100$$.length ? "0" + $x$jscomp$100$$ : $x$jscomp$100$$).join(":");
}
function $iptolong$$module$src$browser$fake_network$$($parts$jscomp$2$$) {
  return $parts$jscomp$2$$[0] << 24 | $parts$jscomp$2$$[1] << 16 | $parts$jscomp$2$$[2] << 8 | $parts$jscomp$2$$[3];
}
function $JSCompiler_StaticMethods_JSC$1787_peek$$($JSCompiler_StaticMethods_JSC$1787_peek$self$$, $dst_array$$) {
  const $length$jscomp$19$$ = Math.min($JSCompiler_StaticMethods_JSC$1787_peek$self$$.length, $dst_array$$.length);
  if ($length$jscomp$19$$) {
    const $buffer$jscomp$34$$ = $JSCompiler_StaticMethods_JSC$1787_peek$self$$.buffer;
    var $buf_len_right_capacity$jscomp$1$$ = $buffer$jscomp$34$$.length, $buf_len_left_new_tail$$ = $JSCompiler_StaticMethods_JSC$1787_peek$self$$.$g$ + $length$jscomp$19$$;
    $buf_len_left_new_tail$$ > $buf_len_right_capacity$jscomp$1$$ ? ($buf_len_left_new_tail$$ %= $buf_len_right_capacity$jscomp$1$$, $buf_len_right_capacity$jscomp$1$$ -= $JSCompiler_StaticMethods_JSC$1787_peek$self$$.$g$, $dst_array$$.set($buffer$jscomp$34$$.subarray($JSCompiler_StaticMethods_JSC$1787_peek$self$$.$g$)), $dst_array$$.set($buffer$jscomp$34$$.subarray(0, $buf_len_left_new_tail$$), $buf_len_right_capacity$jscomp$1$$)) : $dst_array$$.set($buffer$jscomp$34$$.subarray($JSCompiler_StaticMethods_JSC$1787_peek$self$$.$g$, 
    $buf_len_left_new_tail$$));
  }
  return $length$jscomp$19$$;
}
class $GrowableRingbuffer$$module$src$browser$fake_network$$ {
  constructor() {
    var $initial_capacity$$ = Math.min(2048, 16);
    this.length = this.head = this.$g$ = 0;
    this.buffer = new Uint8Array($initial_capacity$$);
  }
  write($src_array$$) {
    const $src_length$$ = $src_array$$.length;
    var $buffer$jscomp$33_new_buffer_total_length$$ = this.length + $src_length$$;
    let $capacity$$ = this.buffer.length;
    if ($capacity$$ < $buffer$jscomp$33_new_buffer_total_length$$) {
      for (; $capacity$$ < $buffer$jscomp$33_new_buffer_total_length$$;) {
        $capacity$$ *= 2;
      }
      $buffer$jscomp$33_new_buffer_total_length$$ = new Uint8Array($capacity$$);
      $JSCompiler_StaticMethods_JSC$1787_peek$$(this, $buffer$jscomp$33_new_buffer_total_length$$);
      this.$g$ = 0;
      this.head = this.length;
      this.buffer = $buffer$jscomp$33_new_buffer_total_length$$;
    }
    $buffer$jscomp$33_new_buffer_total_length$$ = this.buffer;
    const $new_head$$ = this.head + $src_length$$;
    if ($new_head$$ > $capacity$$) {
      const $i_split$$ = $capacity$$ - this.head;
      $buffer$jscomp$33_new_buffer_total_length$$.set($src_array$$.subarray(0, $i_split$$), this.head);
      $buffer$jscomp$33_new_buffer_total_length$$.set($src_array$$.subarray($i_split$$));
    } else {
      $buffer$jscomp$33_new_buffer_total_length$$.set($src_array$$, this.head);
    }
    this.head = $new_head$$ % $capacity$$;
    this.length += $src_length$$;
  }
  remove($length$jscomp$20$$) {
    $length$jscomp$20$$ > this.length && ($length$jscomp$20$$ = this.length);
    $length$jscomp$20$$ && (this.$g$ = (this.$g$ + $length$jscomp$20$$) % this.buffer.length, this.length -= $length$jscomp$20$$);
    return $length$jscomp$20$$;
  }
}
function $create_eth_encoder_buf$$module$src$browser$fake_network$$() {
  const $eth_frame$$ = new Uint8Array(1518), $buffer$jscomp$35$$ = $eth_frame$$.buffer, $offset$jscomp$40$$ = $eth_frame$$.byteOffset;
  return {$eth_frame$:$eth_frame$$, $eth_frame_view$:new DataView($buffer$jscomp$35$$), $eth_payload_view$:new DataView($buffer$jscomp$35$$, $offset$jscomp$40$$ + 14, 1500), $ipv4_payload_view$:new DataView($buffer$jscomp$35$$, $offset$jscomp$40$$ + 34, 1480), $udp_payload_view$:new DataView($buffer$jscomp$35$$, $offset$jscomp$40$$ + 42, 1472), $text_encoder$:new TextEncoder};
}
function $view_set_array$$module$src$browser$fake_network$$($offset$jscomp$41$$, $data$jscomp$117$$, $view$jscomp$5$$, $out$$) {
  $out$$.$eth_frame$.set($data$jscomp$117$$, $view$jscomp$5$$.byteOffset + $offset$jscomp$41$$);
  return $data$jscomp$117$$.length;
}
function $calc_inet_checksum$$module$src$browser$fake_network$$($length$jscomp$21$$, $checksum$$, $i$jscomp$40_view$jscomp$7$$, $eth_frame$jscomp$1_out$jscomp$2$$) {
  const $uint16_end$$ = $i$jscomp$40_view$jscomp$7$$.byteOffset + ($length$jscomp$21$$ & -2);
  $eth_frame$jscomp$1_out$jscomp$2$$ = $eth_frame$jscomp$1_out$jscomp$2$$.$eth_frame$;
  for ($i$jscomp$40_view$jscomp$7$$ = $i$jscomp$40_view$jscomp$7$$.byteOffset; $i$jscomp$40_view$jscomp$7$$ < $uint16_end$$; $i$jscomp$40_view$jscomp$7$$ += 2) {
    $checksum$$ += $eth_frame$jscomp$1_out$jscomp$2$$[$i$jscomp$40_view$jscomp$7$$] << 8 | $eth_frame$jscomp$1_out$jscomp$2$$[$i$jscomp$40_view$jscomp$7$$ + 1];
  }
  for ($length$jscomp$21$$ & 1 && ($checksum$$ += $eth_frame$jscomp$1_out$jscomp$2$$[$uint16_end$$] << 8); $checksum$$ >>> 16;) {
    $checksum$$ = ($checksum$$ & 65535) + ($checksum$$ >>> 16);
  }
  return ~$checksum$$ & 65535;
}
function $make_packet$$module$src$browser$fake_network$$($out$jscomp$3$$, $spec$$) {
  $out$jscomp$3$$.$eth_frame$.fill(0);
  var $JSCompiler_temp_const$jscomp$35$$ = $out$jscomp$3$$.$eth_frame$, $JSCompiler_temp_const$jscomp$34$$ = $JSCompiler_temp_const$jscomp$35$$.subarray, $JSCompiler_temp_const$jscomp$887_JSCompiler_temp_const$jscomp$890_len$jscomp$inline_156_view$jscomp$inline_155$$ = $out$jscomp$3$$.$eth_frame_view$;
  $view_set_array$$module$src$browser$fake_network$$(0, $spec$$.$eth$.$dest$, $JSCompiler_temp_const$jscomp$887_JSCompiler_temp_const$jscomp$890_len$jscomp$inline_156_view$jscomp$inline_155$$, $out$jscomp$3$$);
  $view_set_array$$module$src$browser$fake_network$$(6, $spec$$.$eth$.src, $JSCompiler_temp_const$jscomp$887_JSCompiler_temp_const$jscomp$890_len$jscomp$inline_156_view$jscomp$inline_155$$, $out$jscomp$3$$);
  $JSCompiler_temp_const$jscomp$887_JSCompiler_temp_const$jscomp$890_len$jscomp$inline_156_view$jscomp$inline_155$$.setUint16(12, $spec$$.$eth$.$ethertype$);
  $JSCompiler_temp_const$jscomp$887_JSCompiler_temp_const$jscomp$890_len$jscomp$inline_156_view$jscomp$inline_155$$ = 14;
  if ($spec$$.$arp$) {
    var $view$jscomp$inline_906_view$jscomp$inline_910$$ = $out$jscomp$3$$.$eth_payload_view$;
    $view$jscomp$inline_906_view$jscomp$inline_910$$.setUint16(0, $spec$$.$arp$.$htype$);
    $view$jscomp$inline_906_view$jscomp$inline_910$$.setUint16(2, $spec$$.$arp$.$ptype$);
    $view$jscomp$inline_906_view$jscomp$inline_910$$.setUint8(4, $spec$$.$arp$.$sha$.length);
    $view$jscomp$inline_906_view$jscomp$inline_910$$.setUint8(5, $spec$$.$arp$.$spa$.length);
    $view$jscomp$inline_906_view$jscomp$inline_910$$.setUint16(6, $spec$$.$arp$.$oper$);
    $view_set_array$$module$src$browser$fake_network$$(8, $spec$$.$arp$.$sha$, $view$jscomp$inline_906_view$jscomp$inline_910$$, $out$jscomp$3$$);
    $view_set_array$$module$src$browser$fake_network$$(14, $spec$$.$arp$.$spa$, $view$jscomp$inline_906_view$jscomp$inline_910$$, $out$jscomp$3$$);
    $view_set_array$$module$src$browser$fake_network$$(18, $spec$$.$arp$.$tha$, $view$jscomp$inline_906_view$jscomp$inline_910$$, $out$jscomp$3$$);
    $view_set_array$$module$src$browser$fake_network$$(24, $spec$$.$arp$.$tpa$, $view$jscomp$inline_906_view$jscomp$inline_910$$, $out$jscomp$3$$);
    $JSCompiler_temp_const$jscomp$887_JSCompiler_temp_const$jscomp$890_len$jscomp$inline_156_view$jscomp$inline_155$$ += 28;
  } else {
    if ($spec$$.$ipv4$) {
      $view$jscomp$inline_906_view$jscomp$inline_910$$ = $out$jscomp$3$$.$eth_payload_view$;
      $JSCompiler_temp_const$jscomp$inline_912_JSCompiler_temp_const$jscomp$inline_914_JSCompiler_temp_const$jscomp$inline_916_len$jscomp$inline_911$$ = 20;
      if ($spec$$.$icmp$) {
        var $JSCompiler_temp_const$jscomp$inline_912_JSCompiler_temp_const$jscomp$inline_914_JSCompiler_temp_const$jscomp$inline_916_len$jscomp$inline_911$$ = $JSCompiler_temp_const$jscomp$inline_912_JSCompiler_temp_const$jscomp$inline_914_JSCompiler_temp_const$jscomp$inline_916_len$jscomp$inline_911$$, $view$jscomp$inline_918_view$jscomp$inline_920_view$jscomp$inline_922$$ = $out$jscomp$3$$.$ipv4_payload_view$;
        $view$jscomp$inline_918_view$jscomp$inline_920_view$jscomp$inline_922$$.setUint8(0, $spec$$.$icmp$.type);
        $view$jscomp$inline_918_view$jscomp$inline_920_view$jscomp$inline_922$$.setUint8(1, $spec$$.$icmp$.code);
        $view$jscomp$inline_918_view$jscomp$inline_920_view$jscomp$inline_922$$.setUint16(2, 0);
        var $JSCompiler_temp$jscomp$1079_JSCompiler_temp$jscomp$1080_JSCompiler_temp$jscomp$1088_JSCompiler_temp_const$jscomp$1084_JSCompiler_temp_const$jscomp$1089_flags$jscomp$inline_923_s$jscomp$inline_1111_total_length$jscomp$inline_919_total_length$jscomp$inline_925$$ = 4 + $view_set_array$$module$src$browser$fake_network$$(4, $spec$$.$icmp$.data, $view$jscomp$inline_918_view$jscomp$inline_920_view$jscomp$inline_922$$, $out$jscomp$3$$);
        $view$jscomp$inline_918_view$jscomp$inline_920_view$jscomp$inline_922$$.setUint16(2, $calc_inet_checksum$$module$src$browser$fake_network$$($JSCompiler_temp$jscomp$1079_JSCompiler_temp$jscomp$1080_JSCompiler_temp$jscomp$1088_JSCompiler_temp_const$jscomp$1084_JSCompiler_temp_const$jscomp$1089_flags$jscomp$inline_923_s$jscomp$inline_1111_total_length$jscomp$inline_919_total_length$jscomp$inline_925$$, 0, $view$jscomp$inline_918_view$jscomp$inline_920_view$jscomp$inline_922$$, $out$jscomp$3$$));
        $JSCompiler_temp_const$jscomp$inline_912_JSCompiler_temp_const$jscomp$inline_914_JSCompiler_temp_const$jscomp$inline_916_len$jscomp$inline_911$$ += $JSCompiler_temp$jscomp$1079_JSCompiler_temp$jscomp$1080_JSCompiler_temp$jscomp$1088_JSCompiler_temp_const$jscomp$1084_JSCompiler_temp_const$jscomp$1089_flags$jscomp$inline_923_s$jscomp$inline_1111_total_length$jscomp$inline_919_total_length$jscomp$inline_925$$;
      } else {
        if ($spec$$.$udp$) {
          $view$jscomp$inline_918_view$jscomp$inline_920_view$jscomp$inline_922$$ = $out$jscomp$3$$.$ipv4_payload_view$;
          var $offset$jscomp$inline_1098_total_length$jscomp$inline_921_view$jscomp$inline_1103$$ = 8;
          if ($spec$$.$dhcp$) {
            $JSCompiler_temp$jscomp$1079_JSCompiler_temp$jscomp$1080_JSCompiler_temp$jscomp$1088_JSCompiler_temp_const$jscomp$1084_JSCompiler_temp_const$jscomp$1089_flags$jscomp$inline_923_s$jscomp$inline_1111_total_length$jscomp$inline_919_total_length$jscomp$inline_925$$ = $offset$jscomp$inline_1098_total_length$jscomp$inline_921_view$jscomp$inline_1103$$;
            $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$ = $out$jscomp$3$$.$udp_payload_view$;
            $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.setUint8(0, $spec$$.$dhcp$.$op$);
            $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.setUint8(1, $spec$$.$dhcp$.$htype$);
            $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.setUint8(2, $spec$$.$dhcp$.$hlen$);
            $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.setUint8(3, $spec$$.$dhcp$.$hops$);
            $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.setUint32(4, $spec$$.$dhcp$.$xid$);
            $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.setUint16(8, $spec$$.$dhcp$.$secs$);
            $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.setUint16(10, $spec$$.$dhcp$.flags);
            $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.setUint32(12, $spec$$.$dhcp$.$ciaddr$);
            $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.setUint32(16, $spec$$.$dhcp$.$yiaddr$);
            $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.setUint32(20, $spec$$.$dhcp$.$siaddr$);
            $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.setUint32(24, $spec$$.$dhcp$.$giaddr$);
            $view_set_array$$module$src$browser$fake_network$$(28, $spec$$.$dhcp$.$chaddr$, $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$, $out$jscomp$3$$);
            $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.setUint32(236, 1669485411);
            $offset$jscomp$inline_1098_total_length$jscomp$inline_921_view$jscomp$inline_1103$$ = 240;
            for ($JSCompiler_temp_const$jscomp$1081_o$jscomp$inline_1099$$ of $spec$$.$dhcp$.options) {
              $offset$jscomp$inline_1098_total_length$jscomp$inline_921_view$jscomp$inline_1103$$ += $view_set_array$$module$src$browser$fake_network$$($offset$jscomp$inline_1098_total_length$jscomp$inline_921_view$jscomp$inline_1103$$, $JSCompiler_temp_const$jscomp$1081_o$jscomp$inline_1099$$, $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$, $out$jscomp$3$$);
            }
            $JSCompiler_temp$jscomp$1079_JSCompiler_temp$jscomp$1080_JSCompiler_temp$jscomp$1088_JSCompiler_temp_const$jscomp$1084_JSCompiler_temp_const$jscomp$1089_flags$jscomp$inline_923_s$jscomp$inline_1111_total_length$jscomp$inline_919_total_length$jscomp$inline_925$$ += $offset$jscomp$inline_1098_total_length$jscomp$inline_921_view$jscomp$inline_1103$$;
          } else {
            if ($spec$$.$dns$) {
              var $JSCompiler_temp_const$jscomp$1081_o$jscomp$inline_1099$$ = $offset$jscomp$inline_1098_total_length$jscomp$inline_921_view$jscomp$inline_1103$$;
              $offset$jscomp$inline_1098_total_length$jscomp$inline_921_view$jscomp$inline_1103$$ = $out$jscomp$3$$.$udp_payload_view$;
              $offset$jscomp$inline_1098_total_length$jscomp$inline_921_view$jscomp$inline_1103$$.setUint16(0, $spec$$.$dns$.id);
              $offset$jscomp$inline_1098_total_length$jscomp$inline_921_view$jscomp$inline_1103$$.setUint16(2, $spec$$.$dns$.flags);
              $offset$jscomp$inline_1098_total_length$jscomp$inline_921_view$jscomp$inline_1103$$.setUint16(4, $spec$$.$dns$.$questions$.length);
              $offset$jscomp$inline_1098_total_length$jscomp$inline_921_view$jscomp$inline_1103$$.setUint16(6, $spec$$.$dns$.$answers$.length);
              let $offset$jscomp$inline_1104$$ = 12;
              for (var $i$jscomp$inline_1106_i$jscomp$inline_1110$$ = 0; $i$jscomp$inline_1106_i$jscomp$inline_1110$$ < $spec$$.$dns$.$questions$.length; ++$i$jscomp$inline_1106_i$jscomp$inline_1110$$) {
                var $n_written$jscomp$inline_1112_q$jscomp$inline_1107$$ = $spec$$.$dns$.$questions$[$i$jscomp$inline_1106_i$jscomp$inline_1110$$];
                for ($a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$ of $n_written$jscomp$inline_1112_q$jscomp$inline_1107$$.name) {
                  const $n_written$jscomp$inline_1109$$ = $out$jscomp$3$$.$text_encoder$.encodeInto($a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$, $out$jscomp$3$$.$eth_frame$.subarray($offset$jscomp$inline_1098_total_length$jscomp$inline_921_view$jscomp$inline_1103$$.byteOffset + ($offset$jscomp$inline_1104$$ + 1))).written;
                  $offset$jscomp$inline_1098_total_length$jscomp$inline_921_view$jscomp$inline_1103$$.setUint8($offset$jscomp$inline_1104$$, $n_written$jscomp$inline_1109$$);
                  $offset$jscomp$inline_1104$$ += 1 + $n_written$jscomp$inline_1109$$;
                }
                $offset$jscomp$inline_1098_total_length$jscomp$inline_921_view$jscomp$inline_1103$$.setUint16($offset$jscomp$inline_1104$$, $n_written$jscomp$inline_1112_q$jscomp$inline_1107$$.type);
                $offset$jscomp$inline_1104$$ += 2;
                $offset$jscomp$inline_1098_total_length$jscomp$inline_921_view$jscomp$inline_1103$$.setUint16($offset$jscomp$inline_1104$$, $n_written$jscomp$inline_1112_q$jscomp$inline_1107$$.$class$);
                $offset$jscomp$inline_1104$$ += 2;
              }
              for ($i$jscomp$inline_1106_i$jscomp$inline_1110$$ = 0; $i$jscomp$inline_1106_i$jscomp$inline_1110$$ < $spec$$.$dns$.$answers$.length; ++$i$jscomp$inline_1106_i$jscomp$inline_1110$$) {
                var $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$ = $spec$$.$dns$.$answers$[$i$jscomp$inline_1106_i$jscomp$inline_1110$$];
                for ($JSCompiler_temp$jscomp$1079_JSCompiler_temp$jscomp$1080_JSCompiler_temp$jscomp$1088_JSCompiler_temp_const$jscomp$1084_JSCompiler_temp_const$jscomp$1089_flags$jscomp$inline_923_s$jscomp$inline_1111_total_length$jscomp$inline_919_total_length$jscomp$inline_925$$ of $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.name) {
                  $n_written$jscomp$inline_1112_q$jscomp$inline_1107$$ = $out$jscomp$3$$.$text_encoder$.encodeInto($JSCompiler_temp$jscomp$1079_JSCompiler_temp$jscomp$1080_JSCompiler_temp$jscomp$1088_JSCompiler_temp_const$jscomp$1084_JSCompiler_temp_const$jscomp$1089_flags$jscomp$inline_923_s$jscomp$inline_1111_total_length$jscomp$inline_919_total_length$jscomp$inline_925$$, $out$jscomp$3$$.$eth_frame$.subarray($offset$jscomp$inline_1098_total_length$jscomp$inline_921_view$jscomp$inline_1103$$.byteOffset + 
                  ($offset$jscomp$inline_1104$$ + 1))).written, $offset$jscomp$inline_1098_total_length$jscomp$inline_921_view$jscomp$inline_1103$$.setUint8($offset$jscomp$inline_1104$$, $n_written$jscomp$inline_1112_q$jscomp$inline_1107$$), $offset$jscomp$inline_1104$$ += 1 + $n_written$jscomp$inline_1112_q$jscomp$inline_1107$$;
                }
                $offset$jscomp$inline_1098_total_length$jscomp$inline_921_view$jscomp$inline_1103$$.setUint16($offset$jscomp$inline_1104$$, $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.type);
                $offset$jscomp$inline_1104$$ += 2;
                $offset$jscomp$inline_1098_total_length$jscomp$inline_921_view$jscomp$inline_1103$$.setUint16($offset$jscomp$inline_1104$$, $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.$class$);
                $offset$jscomp$inline_1104$$ += 2;
                $offset$jscomp$inline_1098_total_length$jscomp$inline_921_view$jscomp$inline_1103$$.setUint32($offset$jscomp$inline_1104$$, $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.$ttl$);
                $offset$jscomp$inline_1104$$ += 4;
                $offset$jscomp$inline_1098_total_length$jscomp$inline_921_view$jscomp$inline_1103$$.setUint16($offset$jscomp$inline_1104$$, $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.data.length);
                $offset$jscomp$inline_1104$$ += 2;
                $offset$jscomp$inline_1104$$ += $view_set_array$$module$src$browser$fake_network$$($offset$jscomp$inline_1104$$, $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.data, $offset$jscomp$inline_1098_total_length$jscomp$inline_921_view$jscomp$inline_1103$$, $out$jscomp$3$$);
              }
              $JSCompiler_temp$jscomp$1079_JSCompiler_temp$jscomp$1080_JSCompiler_temp$jscomp$1088_JSCompiler_temp_const$jscomp$1084_JSCompiler_temp_const$jscomp$1089_flags$jscomp$inline_923_s$jscomp$inline_1111_total_length$jscomp$inline_919_total_length$jscomp$inline_925$$ = $JSCompiler_temp_const$jscomp$1081_o$jscomp$inline_1099$$ + $offset$jscomp$inline_1104$$;
            } else {
              $spec$$.$ntp$ ? ($JSCompiler_temp$jscomp$1079_JSCompiler_temp$jscomp$1080_JSCompiler_temp$jscomp$1088_JSCompiler_temp_const$jscomp$1084_JSCompiler_temp_const$jscomp$1089_flags$jscomp$inline_923_s$jscomp$inline_1111_total_length$jscomp$inline_919_total_length$jscomp$inline_925$$ = $offset$jscomp$inline_1098_total_length$jscomp$inline_921_view$jscomp$inline_1103$$, $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$ = $out$jscomp$3$$.$udp_payload_view$, 
              $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.setUint8(0, $spec$$.$ntp$.flags), $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.setUint8(1, $spec$$.$ntp$.$stratum$), $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.setUint8(2, $spec$$.$ntp$.$poll$), $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.setUint8(3, 
              $spec$$.$ntp$.precision), $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.setUint32(4, $spec$$.$ntp$.$root_delay$), $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.setUint32(8, $spec$$.$ntp$.$root_disp$), $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.setUint32(12, $spec$$.$ntp$.$ref_id$), 
              $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.setUint32(16, $spec$$.$ntp$.$ref_ts_i$), $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.setUint32(20, $spec$$.$ntp$.$ref_ts_f$), $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.setUint32(24, $spec$$.$ntp$.$ori_ts_i$), $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.setUint32(28, 
              $spec$$.$ntp$.$ori_ts_f$), $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.setUint32(32, $spec$$.$ntp$.$rec_ts_i$), $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.setUint32(36, $spec$$.$ntp$.$rec_ts_f$), $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.setUint32(40, $spec$$.$ntp$.$trans_ts_i$), 
              $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.setUint32(44, $spec$$.$ntp$.$trans_ts_f$), $JSCompiler_temp$jscomp$1079_JSCompiler_temp$jscomp$1080_JSCompiler_temp$jscomp$1088_JSCompiler_temp_const$jscomp$1084_JSCompiler_temp_const$jscomp$1089_flags$jscomp$inline_923_s$jscomp$inline_1111_total_length$jscomp$inline_919_total_length$jscomp$inline_925$$ += 48) : $JSCompiler_temp$jscomp$1079_JSCompiler_temp$jscomp$1080_JSCompiler_temp$jscomp$1088_JSCompiler_temp_const$jscomp$1084_JSCompiler_temp_const$jscomp$1089_flags$jscomp$inline_923_s$jscomp$inline_1111_total_length$jscomp$inline_919_total_length$jscomp$inline_925$$ = 
              $offset$jscomp$inline_1098_total_length$jscomp$inline_921_view$jscomp$inline_1103$$ + $view_set_array$$module$src$browser$fake_network$$(0, $spec$$.$udp$.data, $out$jscomp$3$$.$udp_payload_view$, $out$jscomp$3$$);
            }
          }
          $offset$jscomp$inline_1098_total_length$jscomp$inline_921_view$jscomp$inline_1103$$ = $JSCompiler_temp$jscomp$1079_JSCompiler_temp$jscomp$1080_JSCompiler_temp$jscomp$1088_JSCompiler_temp_const$jscomp$1084_JSCompiler_temp_const$jscomp$1089_flags$jscomp$inline_923_s$jscomp$inline_1111_total_length$jscomp$inline_919_total_length$jscomp$inline_925$$;
          $view$jscomp$inline_918_view$jscomp$inline_920_view$jscomp$inline_922$$.setUint16(0, $spec$$.$udp$.$sport$);
          $view$jscomp$inline_918_view$jscomp$inline_920_view$jscomp$inline_922$$.setUint16(2, $spec$$.$udp$.$dport$);
          $view$jscomp$inline_918_view$jscomp$inline_920_view$jscomp$inline_922$$.setUint16(4, $offset$jscomp$inline_1098_total_length$jscomp$inline_921_view$jscomp$inline_1103$$);
          $view$jscomp$inline_918_view$jscomp$inline_920_view$jscomp$inline_922$$.setUint16(6, 0);
          $view$jscomp$inline_918_view$jscomp$inline_920_view$jscomp$inline_922$$.setUint16(6, $calc_inet_checksum$$module$src$browser$fake_network$$($offset$jscomp$inline_1098_total_length$jscomp$inline_921_view$jscomp$inline_1103$$, ($spec$$.$ipv4$.src[0] << 8 | $spec$$.$ipv4$.src[1]) + ($spec$$.$ipv4$.src[2] << 8 | $spec$$.$ipv4$.src[3]) + ($spec$$.$ipv4$.$dest$[0] << 8 | $spec$$.$ipv4$.$dest$[1]) + ($spec$$.$ipv4$.$dest$[2] << 8 | $spec$$.$ipv4$.$dest$[3]) + 17 + $offset$jscomp$inline_1098_total_length$jscomp$inline_921_view$jscomp$inline_1103$$, 
          $view$jscomp$inline_918_view$jscomp$inline_920_view$jscomp$inline_922$$, $out$jscomp$3$$));
          $JSCompiler_temp_const$jscomp$inline_912_JSCompiler_temp_const$jscomp$inline_914_JSCompiler_temp_const$jscomp$inline_916_len$jscomp$inline_911$$ += $offset$jscomp$inline_1098_total_length$jscomp$inline_921_view$jscomp$inline_1103$$;
        } else {
          $spec$$.$tcp$ && ($view$jscomp$inline_918_view$jscomp$inline_920_view$jscomp$inline_922$$ = $out$jscomp$3$$.$ipv4_payload_view$, $JSCompiler_temp$jscomp$1079_JSCompiler_temp$jscomp$1080_JSCompiler_temp$jscomp$1088_JSCompiler_temp_const$jscomp$1084_JSCompiler_temp_const$jscomp$1089_flags$jscomp$inline_923_s$jscomp$inline_1111_total_length$jscomp$inline_919_total_length$jscomp$inline_925$$ = 0, $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$ = 
          $spec$$.$tcp$, $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.$fin$ && ($JSCompiler_temp$jscomp$1079_JSCompiler_temp$jscomp$1080_JSCompiler_temp$jscomp$1088_JSCompiler_temp_const$jscomp$1084_JSCompiler_temp_const$jscomp$1089_flags$jscomp$inline_923_s$jscomp$inline_1111_total_length$jscomp$inline_919_total_length$jscomp$inline_925$$ |= 1), $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.$syn$ && 
          ($JSCompiler_temp$jscomp$1079_JSCompiler_temp$jscomp$1080_JSCompiler_temp$jscomp$1088_JSCompiler_temp_const$jscomp$1084_JSCompiler_temp_const$jscomp$1089_flags$jscomp$inline_923_s$jscomp$inline_1111_total_length$jscomp$inline_919_total_length$jscomp$inline_925$$ |= 2), $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.$rst$ && ($JSCompiler_temp$jscomp$1079_JSCompiler_temp$jscomp$1080_JSCompiler_temp$jscomp$1088_JSCompiler_temp_const$jscomp$1084_JSCompiler_temp_const$jscomp$1089_flags$jscomp$inline_923_s$jscomp$inline_1111_total_length$jscomp$inline_919_total_length$jscomp$inline_925$$ |= 
          4), $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.$psh$ && ($JSCompiler_temp$jscomp$1079_JSCompiler_temp$jscomp$1080_JSCompiler_temp$jscomp$1088_JSCompiler_temp_const$jscomp$1084_JSCompiler_temp_const$jscomp$1089_flags$jscomp$inline_923_s$jscomp$inline_1111_total_length$jscomp$inline_919_total_length$jscomp$inline_925$$ |= 8), $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.$ack$ && 
          ($JSCompiler_temp$jscomp$1079_JSCompiler_temp$jscomp$1080_JSCompiler_temp$jscomp$1088_JSCompiler_temp_const$jscomp$1084_JSCompiler_temp_const$jscomp$1089_flags$jscomp$inline_923_s$jscomp$inline_1111_total_length$jscomp$inline_919_total_length$jscomp$inline_925$$ |= 16), $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.$urg$ && ($JSCompiler_temp$jscomp$1079_JSCompiler_temp$jscomp$1080_JSCompiler_temp$jscomp$1088_JSCompiler_temp_const$jscomp$1084_JSCompiler_temp_const$jscomp$1089_flags$jscomp$inline_923_s$jscomp$inline_1111_total_length$jscomp$inline_919_total_length$jscomp$inline_925$$ |= 
          32), $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.$ece$ && ($JSCompiler_temp$jscomp$1079_JSCompiler_temp$jscomp$1080_JSCompiler_temp$jscomp$1088_JSCompiler_temp_const$jscomp$1084_JSCompiler_temp_const$jscomp$1089_flags$jscomp$inline_923_s$jscomp$inline_1111_total_length$jscomp$inline_919_total_length$jscomp$inline_925$$ |= 64), $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.$cwr$ && 
          ($JSCompiler_temp$jscomp$1079_JSCompiler_temp$jscomp$1080_JSCompiler_temp$jscomp$1088_JSCompiler_temp_const$jscomp$1084_JSCompiler_temp_const$jscomp$1089_flags$jscomp$inline_923_s$jscomp$inline_1111_total_length$jscomp$inline_919_total_length$jscomp$inline_925$$ |= 128), $view$jscomp$inline_918_view$jscomp$inline_920_view$jscomp$inline_922$$.setUint16(0, $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.$sport$), $view$jscomp$inline_918_view$jscomp$inline_920_view$jscomp$inline_922$$.setUint16(2, 
          $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.$dport$), $view$jscomp$inline_918_view$jscomp$inline_920_view$jscomp$inline_922$$.setUint32(4, $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.$seq$), $view$jscomp$inline_918_view$jscomp$inline_920_view$jscomp$inline_922$$.setUint32(8, $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.$ackn$), 
          $view$jscomp$inline_918_view$jscomp$inline_920_view$jscomp$inline_922$$.setUint8(12, 80), $view$jscomp$inline_918_view$jscomp$inline_920_view$jscomp$inline_922$$.setUint8(13, $JSCompiler_temp$jscomp$1079_JSCompiler_temp$jscomp$1080_JSCompiler_temp$jscomp$1088_JSCompiler_temp_const$jscomp$1084_JSCompiler_temp_const$jscomp$1089_flags$jscomp$inline_923_s$jscomp$inline_1111_total_length$jscomp$inline_919_total_length$jscomp$inline_925$$), $view$jscomp$inline_918_view$jscomp$inline_920_view$jscomp$inline_922$$.setUint16(14, 
          $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.$winsize$), $view$jscomp$inline_918_view$jscomp$inline_920_view$jscomp$inline_922$$.setUint16(16, 0), $view$jscomp$inline_918_view$jscomp$inline_920_view$jscomp$inline_922$$.setUint16(18, $a$jscomp$inline_1105_s$jscomp$inline_1108_tcp$jscomp$inline_924_view$jscomp$inline_1097_view$jscomp$inline_1116$$.$urgent$ || 0), $JSCompiler_temp$jscomp$1079_JSCompiler_temp$jscomp$1080_JSCompiler_temp$jscomp$1088_JSCompiler_temp_const$jscomp$1084_JSCompiler_temp_const$jscomp$1089_flags$jscomp$inline_923_s$jscomp$inline_1111_total_length$jscomp$inline_919_total_length$jscomp$inline_925$$ = 
          20, $spec$$.$tcp_data$ && ($JSCompiler_temp$jscomp$1079_JSCompiler_temp$jscomp$1080_JSCompiler_temp$jscomp$1088_JSCompiler_temp_const$jscomp$1084_JSCompiler_temp_const$jscomp$1089_flags$jscomp$inline_923_s$jscomp$inline_1111_total_length$jscomp$inline_919_total_length$jscomp$inline_925$$ += $view_set_array$$module$src$browser$fake_network$$(20, $spec$$.$tcp_data$, $view$jscomp$inline_918_view$jscomp$inline_920_view$jscomp$inline_922$$, $out$jscomp$3$$)), $view$jscomp$inline_918_view$jscomp$inline_920_view$jscomp$inline_922$$.setUint16(16, 
          $calc_inet_checksum$$module$src$browser$fake_network$$($JSCompiler_temp$jscomp$1079_JSCompiler_temp$jscomp$1080_JSCompiler_temp$jscomp$1088_JSCompiler_temp_const$jscomp$1084_JSCompiler_temp_const$jscomp$1089_flags$jscomp$inline_923_s$jscomp$inline_1111_total_length$jscomp$inline_919_total_length$jscomp$inline_925$$, ($spec$$.$ipv4$.src[0] << 8 | $spec$$.$ipv4$.src[1]) + ($spec$$.$ipv4$.src[2] << 8 | $spec$$.$ipv4$.src[3]) + ($spec$$.$ipv4$.$dest$[0] << 8 | $spec$$.$ipv4$.$dest$[1]) + ($spec$$.$ipv4$.$dest$[2] << 
          8 | $spec$$.$ipv4$.$dest$[3]) + 6 + $JSCompiler_temp$jscomp$1079_JSCompiler_temp$jscomp$1080_JSCompiler_temp$jscomp$1088_JSCompiler_temp_const$jscomp$1084_JSCompiler_temp_const$jscomp$1089_flags$jscomp$inline_923_s$jscomp$inline_1111_total_length$jscomp$inline_919_total_length$jscomp$inline_925$$, $view$jscomp$inline_918_view$jscomp$inline_920_view$jscomp$inline_922$$, $out$jscomp$3$$)), $JSCompiler_temp_const$jscomp$inline_912_JSCompiler_temp_const$jscomp$inline_914_JSCompiler_temp_const$jscomp$inline_916_len$jscomp$inline_911$$ += 
          $JSCompiler_temp$jscomp$1079_JSCompiler_temp$jscomp$1080_JSCompiler_temp$jscomp$1088_JSCompiler_temp_const$jscomp$1084_JSCompiler_temp_const$jscomp$1089_flags$jscomp$inline_923_s$jscomp$inline_1111_total_length$jscomp$inline_919_total_length$jscomp$inline_925$$);
        }
      }
      $view$jscomp$inline_906_view$jscomp$inline_910$$.setUint8(0, 69);
      $view$jscomp$inline_906_view$jscomp$inline_910$$.setUint8(1, $spec$$.$ipv4$.$tos$ || 0);
      $view$jscomp$inline_906_view$jscomp$inline_910$$.setUint16(2, $JSCompiler_temp_const$jscomp$inline_912_JSCompiler_temp_const$jscomp$inline_914_JSCompiler_temp_const$jscomp$inline_916_len$jscomp$inline_911$$);
      $view$jscomp$inline_906_view$jscomp$inline_910$$.setUint16(4, $spec$$.$ipv4$.id || 0);
      $view$jscomp$inline_906_view$jscomp$inline_910$$.setUint8(6, 64);
      $view$jscomp$inline_906_view$jscomp$inline_910$$.setUint8(8, $spec$$.$ipv4$.$ttl$ || 32);
      $view$jscomp$inline_906_view$jscomp$inline_910$$.setUint8(9, $spec$$.$ipv4$.$proto$);
      $view$jscomp$inline_906_view$jscomp$inline_910$$.setUint16(10, 0);
      $view_set_array$$module$src$browser$fake_network$$(12, $spec$$.$ipv4$.src, $view$jscomp$inline_906_view$jscomp$inline_910$$, $out$jscomp$3$$);
      $view_set_array$$module$src$browser$fake_network$$(16, $spec$$.$ipv4$.$dest$, $view$jscomp$inline_906_view$jscomp$inline_910$$, $out$jscomp$3$$);
      $view$jscomp$inline_906_view$jscomp$inline_910$$.setUint16(10, $calc_inet_checksum$$module$src$browser$fake_network$$(20, 0, $view$jscomp$inline_906_view$jscomp$inline_910$$, $out$jscomp$3$$));
      $JSCompiler_temp_const$jscomp$887_JSCompiler_temp_const$jscomp$890_len$jscomp$inline_156_view$jscomp$inline_155$$ += $JSCompiler_temp_const$jscomp$inline_912_JSCompiler_temp_const$jscomp$inline_914_JSCompiler_temp_const$jscomp$inline_916_len$jscomp$inline_911$$;
    }
  }
  return $JSCompiler_temp_const$jscomp$34$$.call($JSCompiler_temp_const$jscomp$35$$, 0, $JSCompiler_temp_const$jscomp$887_JSCompiler_temp_const$jscomp$890_len$jscomp$inline_156_view$jscomp$inline_155$$);
}
function $handle_fake_dns_doh$$module$src$browser$fake_network$$($packet$jscomp$2$$, $adapter$jscomp$2$$) {
  fetch(`https://${$adapter$jscomp$2$$.$doh_server$ || "cloudflare-dns.com"}/dns-query`, {method:"POST", headers:[["content-type", "application/dns-message"]], body:$packet$jscomp$2$$.$udp$.data}).then(async $reply$jscomp$2_resp$$ => {
    $reply$jscomp$2_resp$$ = {$eth$:{$ethertype$:2048, src:$adapter$jscomp$2$$.$router_mac$, $dest$:$packet$jscomp$2$$.$eth$.src}, $ipv4$:{$proto$:17, src:$adapter$jscomp$2$$.$router_ip$, $dest$:$packet$jscomp$2$$.$ipv4$.src}, $udp$:{$sport$:53, $dport$:$packet$jscomp$2$$.$udp$.$sport$, data:new Uint8Array(await $reply$jscomp$2_resp$$.arrayBuffer())}};
    $adapter$jscomp$2$$.$receive$($make_packet$$module$src$browser$fake_network$$($adapter$jscomp$2$$.$eth_encoder_buf$, $reply$jscomp$2_resp$$));
  });
}
function $handle_fake_dhcp$$module$src$browser$fake_network$$($packet$jscomp$5_router_ip$$, $adapter$jscomp$5$$) {
  let $reply$jscomp$4$$ = {};
  $reply$jscomp$4$$.$eth$ = {$ethertype$:2048, src:$adapter$jscomp$5$$.$router_mac$, $dest$:$packet$jscomp$5_router_ip$$.$eth$.src};
  $reply$jscomp$4$$.$ipv4$ = {$proto$:17, src:$adapter$jscomp$5$$.$router_ip$, $dest$:$adapter$jscomp$5$$.$vm_ip$, };
  $reply$jscomp$4$$.$udp$ = {$sport$:67, $dport$:68, };
  $reply$jscomp$4$$.$dhcp$ = {$htype$:1, $hlen$:6, $hops$:0, $xid$:$packet$jscomp$5_router_ip$$.$dhcp$.$xid$, $secs$:0, flags:0, $ciaddr$:0, $yiaddr$:$iptolong$$module$src$browser$fake_network$$($adapter$jscomp$5$$.$vm_ip$), $siaddr$:$iptolong$$module$src$browser$fake_network$$($adapter$jscomp$5$$.$router_ip$), $giaddr$:$iptolong$$module$src$browser$fake_network$$($adapter$jscomp$5$$.$router_ip$), $chaddr$:$packet$jscomp$5_router_ip$$.$dhcp$.$chaddr$, };
  let $options$jscomp$36$$ = [], $fix$$ = $packet$jscomp$5_router_ip$$.$dhcp$.options.find(function($x$jscomp$101$$) {
    return 53 === $x$jscomp$101$$[0];
  });
  $fix$$ && 3 === $fix$$[2] && ($packet$jscomp$5_router_ip$$.$dhcp$.$op$ = 3);
  1 === $packet$jscomp$5_router_ip$$.$dhcp$.$op$ && ($reply$jscomp$4$$.$dhcp$.$op$ = 2, $options$jscomp$36$$.push(new Uint8Array([53, 1, 2])));
  3 === $packet$jscomp$5_router_ip$$.$dhcp$.$op$ && ($reply$jscomp$4$$.$dhcp$.$op$ = 2, $options$jscomp$36$$.push(new Uint8Array([53, 1, 5])), $options$jscomp$36$$.push(new Uint8Array([51, 4, 8, 0, 0, 0])));
  $packet$jscomp$5_router_ip$$ = [$adapter$jscomp$5$$.$router_ip$[0], $adapter$jscomp$5$$.$router_ip$[1], $adapter$jscomp$5$$.$router_ip$[2], $adapter$jscomp$5$$.$router_ip$[3]];
  $options$jscomp$36$$.push(new Uint8Array([1, 4, 255, 255, 255, 0]));
  $adapter$jscomp$5$$.$masquerade$ && ($options$jscomp$36$$.push(new Uint8Array([3, 4].concat($packet$jscomp$5_router_ip$$))), $options$jscomp$36$$.push(new Uint8Array([6, 4].concat($packet$jscomp$5_router_ip$$))));
  $options$jscomp$36$$.push(new Uint8Array([54, 4].concat($packet$jscomp$5_router_ip$$)));
  $options$jscomp$36$$.push(new Uint8Array([60, 3].concat($V86_ASCII$$module$src$browser$fake_network$$)));
  $options$jscomp$36$$.push(new Uint8Array([255, 0]));
  $reply$jscomp$4$$.$dhcp$.options = $options$jscomp$36$$;
  $adapter$jscomp$5$$.$receive$($make_packet$$module$src$browser$fake_network$$($adapter$jscomp$5$$.$eth_encoder_buf$, $reply$jscomp$4$$));
}
function $handle_fake_networking$$module$src$browser$fake_network$$($arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$, $adapter$jscomp$6$$) {
  let $packet$jscomp$6$$ = {};
  var $answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$ = (new DataView($arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.buffer, 
  $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.byteOffset, $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.byteLength)).getUint16(12), 
  $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$ = {$ethertype$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$, 
  $dest$:$arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.subarray(0, 6), $dest_s$:$a2ethaddr$$module$src$browser$fake_network$$($arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.subarray(0, 
  6)), src:$arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.subarray(6, 12), $src_s$:$a2ethaddr$$module$src$browser$fake_network$$($arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.subarray(6, 
  12)), };
  $packet$jscomp$6$$.$eth$ = $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$;
  $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$ = $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.subarray(14, 
  $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.length);
  if (2048 === $answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$) {
    var $ip_checksum$jscomp$inline_936_view$jscomp$inline_929$$ = new DataView($arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.buffer, $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.byteOffset, 
    $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.byteLength);
    $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$ = $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$[0] >> 
    4 & 15;
    var $i$jscomp$inline_1123_ihl$jscomp$inline_931_q$jscomp$inline_958$$ = $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$[0] & 15, $start$jscomp$inline_1124_tos$jscomp$inline_932$$ = 
    $ip_checksum$jscomp$inline_936_view$jscomp$inline_929$$.getUint8(1), $len$jscomp$inline_1125_len$jscomp$inline_933$$ = $ip_checksum$jscomp$inline_936_view$jscomp$inline_929$$.getUint16(2);
    let $ttl$jscomp$inline_934$$ = $ip_checksum$jscomp$inline_936_view$jscomp$inline_929$$.getUint8(8);
    $answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$ = $ip_checksum$jscomp$inline_936_view$jscomp$inline_929$$.getUint8(9);
    $ip_checksum$jscomp$inline_936_view$jscomp$inline_929$$ = $ip_checksum$jscomp$inline_936_view$jscomp$inline_929$$.getUint16(10);
    $packet$jscomp$6$$.$ipv4$ = {version:$data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$, $ihl$:$i$jscomp$inline_1123_ihl$jscomp$inline_931_q$jscomp$inline_958$$, $tos$:$start$jscomp$inline_1124_tos$jscomp$inline_932$$, $len$:$len$jscomp$inline_1125_len$jscomp$inline_933$$, $ttl$:$ttl$jscomp$inline_934$$, $proto$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$, 
    $ip_checksum$:$ip_checksum$jscomp$inline_936_view$jscomp$inline_929$$, src:$arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.subarray(12, 16), $dest$:$arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.subarray(16, 
    20), };
    $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$ = $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.subarray(4 * 
    $i$jscomp$inline_1123_ihl$jscomp$inline_931_q$jscomp$inline_958$$, $len$jscomp$inline_1125_len$jscomp$inline_933$$);
    if (1 === $answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$) {
      $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$ = new DataView($data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.buffer, 
      $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.byteOffset, $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.byteLength), $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$ = 
      {type:$arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.getUint8(0), code:$arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.getUint8(1), 
      $checksum$:$arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.getUint16(2), data:$data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.subarray(4)}, 
      $packet$jscomp$6$$.$icmp$ = $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$;
    } else {
      if (6 === $answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$) {
        $answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$ = new DataView($data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.buffer, 
        $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.byteOffset, $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.byteLength), $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$ = 
        {$sport$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint16(0), $dport$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint16(2), 
        $seq$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint32(4), $ackn$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint32(8), 
        $doff$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint8(12) >> 4, $winsize$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint16(14), 
        $checksum$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint16(16), $urgent$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint16(18), 
        }, $answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$ = $answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint8(13), 
        $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.$fin$ = !!($answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$ & 
        1), $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.$syn$ = !!($answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$ & 
        2), $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.$rst$ = !!($answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$ & 
        4), $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.$psh$ = !!($answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$ & 
        8), $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.$ack$ = !!($answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$ & 
        16), $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.$urg$ = !!($answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$ & 
        32), $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.$ece$ = !!($answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$ & 
        64), $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.$cwr$ = !!($answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$ & 
        128), $packet$jscomp$6$$.$tcp$ = $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$, $packet$jscomp$6$$.$tcp_data$ = $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.subarray(4 * 
        $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.$doff$);
      } else {
        if (17 === $answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$) {
          $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$ = new DataView($data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.buffer, 
          $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.byteOffset, $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.byteLength);
          $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$ = {$sport$:$arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.getUint16(0), 
          $dport$:$arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.getUint16(2), $len$:$arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.getUint16(4), 
          $checksum$:$arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.getUint16(6), data:$data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.subarray(8), 
          $data_s$:(new TextDecoder).decode($data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.subarray(8))};
          if (67 === $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.$dport$ || 67 === $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.$sport$) {
            $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$ = $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.subarray(8);
            $answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$ = new DataView($data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.buffer, 
            $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.byteOffset, $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.byteLength);
            $answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$ = {$op$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint8(0), 
            $htype$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint8(1), $hlen$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint8(2), 
            $hops$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint8(3), $xid$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint32(4), 
            $secs$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint16(8), flags:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint16(10), 
            $ciaddr$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint32(12), $yiaddr$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint32(16), 
            $siaddr$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint32(20), $giaddr$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint32(24), 
            $chaddr$:$data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.subarray(28, 44), $magic$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint32(236), 
            options:[], };
            $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$ = $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.subarray(240);
            for ($i$jscomp$inline_1123_ihl$jscomp$inline_931_q$jscomp$inline_958$$ = 0; $i$jscomp$inline_1123_ihl$jscomp$inline_931_q$jscomp$inline_958$$ < $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.length; ++$i$jscomp$inline_1123_ihl$jscomp$inline_931_q$jscomp$inline_958$$) {
              $start$jscomp$inline_1124_tos$jscomp$inline_932$$ = $i$jscomp$inline_1123_ihl$jscomp$inline_931_q$jscomp$inline_958$$, 0 !== $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$[$i$jscomp$inline_1123_ihl$jscomp$inline_931_q$jscomp$inline_958$$] && (++$i$jscomp$inline_1123_ihl$jscomp$inline_931_q$jscomp$inline_958$$, $len$jscomp$inline_1125_len$jscomp$inline_933$$ = $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$[$i$jscomp$inline_1123_ihl$jscomp$inline_931_q$jscomp$inline_958$$], 
              $i$jscomp$inline_1123_ihl$jscomp$inline_931_q$jscomp$inline_958$$ += $len$jscomp$inline_1125_len$jscomp$inline_933$$, $answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.options.push($data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.subarray($start$jscomp$inline_1124_tos$jscomp$inline_932$$, 
              $start$jscomp$inline_1124_tos$jscomp$inline_932$$ + $len$jscomp$inline_1125_len$jscomp$inline_933$$ + 2)));
            }
            $packet$jscomp$6$$.$dhcp$ = $answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$;
            $packet$jscomp$6$$.$dhcp_options$ = $answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.options;
          } else {
            53 === $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.$dport$ || 53 === $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.$sport$ ? 
            $parse_dns$$module$src$browser$fake_network$$($data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.subarray(8), $packet$jscomp$6$$) : 123 === $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.$dport$ && 
            ($answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$ = $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.subarray(8), 
            $answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$ = new DataView($answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.buffer, 
            $answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.byteOffset, $answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.byteLength), 
            $packet$jscomp$6$$.$ntp$ = {flags:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint8(0), $stratum$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint8(1), 
            $poll$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint8(2), precision:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint8(3), 
            $root_delay$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint32(4), $root_disp$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint32(8), 
            $ref_id$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint32(12), $ref_ts_i$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint32(16), 
            $ref_ts_f$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint32(20), $ori_ts_i$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint32(24), 
            $ori_ts_f$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint32(28), $rec_ts_i$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint32(32), 
            $rec_ts_f$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint32(36), $trans_ts_i$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint32(40), 
            $trans_ts_f$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint32(44), });
          }
          $packet$jscomp$6$$.$udp$ = $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$;
        }
      }
    }
  } else {
    2054 === $answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$ && ($answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$ = 
    new DataView($arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.buffer, $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.byteOffset, 
    $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.byteLength), $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$ = 
    {$htype$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint16(0), $ptype$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint16(2), 
    $oper$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.getUint16(6), $sha$:$arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.subarray(8, 
    14), $spa$:$arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.subarray(14, 18), $tha$:$arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.subarray(18, 
    24), $tpa$:$arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.subarray(24, 28), }, $packet$jscomp$6$$.$arp$ = $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$);
  }
  if ($packet$jscomp$6$$.$ipv4$) {
    if ($packet$jscomp$6$$.$tcp$) {
      if ($arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$ = `${$packet$jscomp$6$$.$ipv4$.src.join(".")}:${$packet$jscomp$6$$.$tcp$.$sport$}:${$packet$jscomp$6$$.$ipv4$.$dest$.join(".")}:${$packet$jscomp$6$$.$tcp$.$dport$}`, 
      !$packet$jscomp$6$$.$tcp$.$syn$ || !$adapter$jscomp$6$$.$on_tcp_connection$($packet$jscomp$6$$, $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$)) {
        if ($adapter$jscomp$6$$.$tcp_conn$[$arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$]) {
          $adapter$jscomp$6$$.$tcp_conn$[$arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$].process($packet$jscomp$6$$);
        } else {
          $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$ = $packet$jscomp$6$$.$tcp$.$ackn$;
          if ($packet$jscomp$6$$.$tcp$.$fin$ || $packet$jscomp$6$$.$tcp$.$syn$) {
            $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$ += 1;
          }
          $answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$ = {};
          $answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.$eth$ = {$ethertype$:2048, src:$adapter$jscomp$6$$.$router_mac$, $dest$:$packet$jscomp$6$$.$eth$.src};
          $answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.$ipv4$ = {$proto$:6, src:$packet$jscomp$6$$.$ipv4$.$dest$, $dest$:$packet$jscomp$6$$.$ipv4$.src};
          $answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.$tcp$ = {$sport$:$packet$jscomp$6$$.$tcp$.$dport$, $dport$:$packet$jscomp$6$$.$tcp$.$sport$, $seq$:$arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$, 
          $ackn$:$packet$jscomp$6$$.$tcp$.$seq$ + ($packet$jscomp$6$$.$tcp$.$syn$ ? 1 : 0), $winsize$:$packet$jscomp$6$$.$tcp$.$winsize$, $rst$:!0, $ack$:$packet$jscomp$6$$.$tcp$.$syn$};
          $adapter$jscomp$6$$.$receive$($make_packet$$module$src$browser$fake_network$$($adapter$jscomp$6$$.$eth_encoder_buf$, $answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$));
        }
      }
    } else {
      if ($packet$jscomp$6$$.$udp$) {
        if ($packet$jscomp$6$$.$dns$) {
          if ("static" === $adapter$jscomp$6$$.$dns_method$) {
            $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$ = {};
            $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.$eth$ = {$ethertype$:2048, src:$adapter$jscomp$6$$.$router_mac$, $dest$:$packet$jscomp$6$$.$eth$.src};
            $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.$ipv4$ = {$proto$:17, src:$adapter$jscomp$6$$.$router_ip$, $dest$:$packet$jscomp$6$$.$ipv4$.src, };
            $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.$udp$ = {$sport$:53, $dport$:$packet$jscomp$6$$.$udp$.$sport$};
            $answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$ = [];
            for ($data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$ = 0; $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$ < $packet$jscomp$6$$.$dns$.$questions$.length; ++$data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$) {
              switch($i$jscomp$inline_1123_ihl$jscomp$inline_931_q$jscomp$inline_958$$ = $packet$jscomp$6$$.$dns$.$questions$[$data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$], $i$jscomp$inline_1123_ihl$jscomp$inline_931_q$jscomp$inline_958$$.type) {
                case 1:
                  $answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$.push({name:$i$jscomp$inline_1123_ihl$jscomp$inline_931_q$jscomp$inline_958$$.name, type:$i$jscomp$inline_1123_ihl$jscomp$inline_931_q$jscomp$inline_958$$.type, 
                  $class$:$i$jscomp$inline_1123_ihl$jscomp$inline_931_q$jscomp$inline_958$$.$class$, $ttl$:600, data:[192, 168, 87, 1]});
              }
            }
            $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.$dns$ = {id:$packet$jscomp$6$$.$dns$.id, flags:33152, $questions$:$packet$jscomp$6$$.$dns$.$questions$, $answers$:$answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$};
            $adapter$jscomp$6$$.$receive$($make_packet$$module$src$browser$fake_network$$($adapter$jscomp$6$$.$eth_encoder_buf$, $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$));
          } else {
            $handle_fake_dns_doh$$module$src$browser$fake_network$$($packet$jscomp$6$$, $adapter$jscomp$6$$);
          }
        } else {
          $packet$jscomp$6$$.$dhcp$ ? $handle_fake_dhcp$$module$src$browser$fake_network$$($packet$jscomp$6$$, $adapter$jscomp$6$$) : $packet$jscomp$6$$.$ntp$ ? ($arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$ = 
          Date.now() + $NTP_EPOC_DIFF$$module$src$browser$fake_network$$, $answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$ = $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$ % 
          1000 / 1000 * $TWO_TO_32$$module$src$browser$fake_network$$, $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$ = {}, $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.$eth$ = {$ethertype$:2048, src:$adapter$jscomp$6$$.$router_mac$, $dest$:$packet$jscomp$6$$.$eth$.src}, 
          $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.$ipv4$ = {$proto$:17, src:$packet$jscomp$6$$.$ipv4$.$dest$, $dest$:$packet$jscomp$6$$.$ipv4$.src, }, $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.$udp$ = {$sport$:123, $dport$:$packet$jscomp$6$$.$udp$.$sport$}, 
          $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.$ntp$ = Object.assign({}, $packet$jscomp$6$$.$ntp$), $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.$ntp$.flags = 36, $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.$ntp$.$poll$ = 
          10, $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.$ntp$.$ori_ts_i$ = $packet$jscomp$6$$.$ntp$.$trans_ts_i$, $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.$ntp$.$ori_ts_f$ = $packet$jscomp$6$$.$ntp$.$trans_ts_f$, $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.$ntp$.$rec_ts_i$ = 
          $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$ / 1000, $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.$ntp$.$rec_ts_f$ = 
          $answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$, $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.$ntp$.$trans_ts_i$ = 
          $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$ / 1000, $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.$ntp$.$trans_ts_f$ = 
          $answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$, $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$.$ntp$.$stratum$ = 
          2, $adapter$jscomp$6$$.$receive$($make_packet$$module$src$browser$fake_network$$($adapter$jscomp$6$$.$eth_encoder_buf$, $data$jscomp$inline_1118_eth$jscomp$inline_161_i$jscomp$inline_957_ipdata$jscomp$inline_938_options$jscomp$inline_1122_reply$jscomp$inline_177_version$jscomp$inline_930$$))) : 8 === $packet$jscomp$6$$.$udp$.$dport$ && ($arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$ = 
          {}, $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.$eth$ = {$ethertype$:2048, src:$adapter$jscomp$6$$.$router_mac$, $dest$:$packet$jscomp$6$$.$eth$.src}, $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.$ipv4$ = 
          {$proto$:17, src:$packet$jscomp$6$$.$ipv4$.$dest$, $dest$:$packet$jscomp$6$$.$ipv4$.src, }, $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.$udp$ = {$sport$:$packet$jscomp$6$$.$udp$.$dport$, 
          $dport$:$packet$jscomp$6$$.$udp$.$sport$, data:(new TextEncoder).encode($packet$jscomp$6$$.$udp$.$data_s$)}, $adapter$jscomp$6$$.$receive$($make_packet$$module$src$browser$fake_network$$($adapter$jscomp$6$$.$eth_encoder_buf$, $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$)));
        }
      } else {
        $packet$jscomp$6$$.$icmp$ && 8 === $packet$jscomp$6$$.$icmp$.type && ($arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$ = {}, $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.$eth$ = 
        {$ethertype$:2048, src:$adapter$jscomp$6$$.$router_mac$, $dest$:$packet$jscomp$6$$.$eth$.src}, $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.$ipv4$ = {$proto$:1, 
        src:$packet$jscomp$6$$.$ipv4$.$dest$, $dest$:$packet$jscomp$6$$.$ipv4$.src, }, $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.$icmp$ = {type:0, code:$packet$jscomp$6$$.$icmp$.code, 
        data:$packet$jscomp$6$$.$icmp$.data}, $adapter$jscomp$6$$.$receive$($make_packet$$module$src$browser$fake_network$$($adapter$jscomp$6$$.$eth_encoder_buf$, $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$)));
      }
    }
  } else {
    $packet$jscomp$6$$.$arp$ && 1 === $packet$jscomp$6$$.$arp$.$oper$ && 2048 === $packet$jscomp$6$$.$arp$.$ptype$ && ($arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$ = $iptolong$$module$src$browser$fake_network$$($packet$jscomp$6$$.$arp$.$tpa$) & 
    4294967040, $answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$ = $iptolong$$module$src$browser$fake_network$$($adapter$jscomp$6$$.$router_ip$) & 4294967040, !$adapter$jscomp$6$$.$masquerade$ && $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$ !== 
    $answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$ || $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$ === 
    $answers$jscomp$inline_955_data$jscomp$inline_1127_dhcp$jscomp$inline_1121_ethertype$jscomp$inline_160_flags$jscomp$inline_943_now_n_f$jscomp$inline_176_proto$jscomp$inline_935_reply$jscomp$inline_168_router_subnet$jscomp$inline_190_view$jscomp$inline_1120_view$jscomp$inline_1129_view$jscomp$inline_941_view$jscomp$inline_949$$ && 99 < $packet$jscomp$6$$.$arp$.$tpa$[3] || ($arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$ = 
    {}, $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.$eth$ = {$ethertype$:2054, src:$adapter$jscomp$6$$.$router_mac$, $dest$:$packet$jscomp$6$$.$eth$.src}, $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$.$arp$ = 
    {$htype$:1, $ptype$:2048, $oper$:2, $sha$:$adapter$jscomp$6$$.$router_mac$, $spa$:$packet$jscomp$6$$.$arp$.$tpa$, $tha$:$packet$jscomp$6$$.$eth$.src, $tpa$:$packet$jscomp$6$$.$arp$.$spa$}, $adapter$jscomp$6$$.$receive$($make_packet$$module$src$browser$fake_network$$($adapter$jscomp$6$$.$eth_encoder_buf$, $arp$jscomp$inline_950_bop$jscomp$inline_167_data$jscomp$118_icmp$jscomp$inline_940_now_n$jscomp$inline_175_packet_subnet$jscomp$inline_189_payload$jscomp$inline_162_reply$jscomp$inline_181_reply$jscomp$inline_185_reply$jscomp$inline_191_reply$jscomp$inline_954_tcp$jscomp$inline_942_tuple$jscomp$inline_166_udp$jscomp$inline_945_view$jscomp$inline_939_view$jscomp$inline_944$$))));
  }
}
function $parse_dns$$module$src$browser$fake_network$$($data$jscomp$124$$, $o$jscomp$6$$) {
  function $read_dstr$$() {
    let $o$jscomp$7$$ = [], $len$jscomp$19$$;
    do {
      $len$jscomp$19$$ = $view$jscomp$18$$.getUint8($offset$jscomp$43$$), $o$jscomp$7$$.push((new TextDecoder).decode($data$jscomp$124$$.subarray($offset$jscomp$43$$ + 1, $offset$jscomp$43$$ + 1 + $len$jscomp$19$$))), $offset$jscomp$43$$ += $len$jscomp$19$$ + 1;
    } while (0 < $len$jscomp$19$$);
    return $o$jscomp$7$$;
  }
  let $view$jscomp$18$$ = new DataView($data$jscomp$124$$.buffer, $data$jscomp$124$$.byteOffset, $data$jscomp$124$$.byteLength), $dns$$ = {id:$view$jscomp$18$$.getUint16(0), flags:$view$jscomp$18$$.getUint16(2), $questions$:[], $answers$:[]};
  var $i$jscomp$43_qdcount$$ = $view$jscomp$18$$.getUint16(4);
  let $ancount$$ = $view$jscomp$18$$.getUint16(6);
  $view$jscomp$18$$.getUint16(8);
  $view$jscomp$18$$.getUint16(10);
  let $offset$jscomp$43$$ = 12;
  for (var $ans_i$jscomp$42$$ = 0; $ans_i$jscomp$42$$ < $i$jscomp$43_qdcount$$; $ans_i$jscomp$42$$++) {
    $dns$$.$questions$.push({name:$read_dstr$$(), type:$view$jscomp$18$$.getInt16($offset$jscomp$43$$), $class$:$view$jscomp$18$$.getInt16($offset$jscomp$43$$ + 2)}), $offset$jscomp$43$$ += 4;
  }
  for ($i$jscomp$43_qdcount$$ = 0; $i$jscomp$43_qdcount$$ < $ancount$$; $i$jscomp$43_qdcount$$++) {
    $ans_i$jscomp$42$$ = {name:$read_dstr$$(), type:$view$jscomp$18$$.getInt16($offset$jscomp$43$$), $class$:$view$jscomp$18$$.getUint16($offset$jscomp$43$$ + 2), $ttl$:$view$jscomp$18$$.getUint32($offset$jscomp$43$$ + 4)};
    $offset$jscomp$43$$ += 8;
    let $rdlen$$ = $view$jscomp$18$$.getUint16($offset$jscomp$43$$);
    $offset$jscomp$43$$ += 2;
    $ans_i$jscomp$42$$.data = $data$jscomp$124$$.subarray($offset$jscomp$43$$, $offset$jscomp$43$$ + $rdlen$$);
    $offset$jscomp$43$$ += $rdlen$$;
    $dns$$.$answers$.push($ans_i$jscomp$42$$);
  }
  $o$jscomp$6$$.$dns$ = $dns$$;
}
function $TCPConnection$$module$src$browser$fake_network$$() {
  this.state = "closed";
  this.$net$ = null;
  this.$send_buffer$ = new $GrowableRingbuffer$$module$src$browser$fake_network$$;
  this.$A$ = new Uint8Array(1460);
  this.$i$ = this.$in_active_close$ = !1;
  this.$l$ = void 0;
  this.$j$ = {};
}
function $JSCompiler_StaticMethods_on$$($JSCompiler_StaticMethods_on$self$$, $handler$jscomp$12$$) {
  $JSCompiler_StaticMethods_on$self$$.$j$.data = $handler$jscomp$12$$;
}
function $JSCompiler_StaticMethods_emit$$($JSCompiler_StaticMethods_emit$self$$, $event$jscomp$8$$, ...$args$$) {
  $JSCompiler_StaticMethods_emit$self$$.$j$[$event$jscomp$8$$] && $JSCompiler_StaticMethods_emit$self$$.$j$[$event$jscomp$8$$].apply($JSCompiler_StaticMethods_emit$self$$, $args$$);
}
function $JSCompiler_StaticMethods_ipv4_reply$$($JSCompiler_StaticMethods_ipv4_reply$self$$) {
  let $reply$jscomp$5$$ = {};
  $reply$jscomp$5$$.$eth$ = {$ethertype$:2048, src:$JSCompiler_StaticMethods_ipv4_reply$self$$.$s$, $dest$:$JSCompiler_StaticMethods_ipv4_reply$self$$.$o$};
  $reply$jscomp$5$$.$ipv4$ = {$proto$:6, src:$JSCompiler_StaticMethods_ipv4_reply$self$$.$v$, $dest$:$JSCompiler_StaticMethods_ipv4_reply$self$$.$u$};
  $reply$jscomp$5$$.$tcp$ = {$sport$:$JSCompiler_StaticMethods_ipv4_reply$self$$.$sport$, $dport$:$JSCompiler_StaticMethods_ipv4_reply$self$$.$dport$, $winsize$:$JSCompiler_StaticMethods_ipv4_reply$self$$.$winsize$, $ackn$:$JSCompiler_StaticMethods_ipv4_reply$self$$.$ack$, $seq$:$JSCompiler_StaticMethods_ipv4_reply$self$$.$seq$, $ack$:!0};
  return $reply$jscomp$5$$;
}
function $JSCompiler_StaticMethods_packet_reply$$($JSCompiler_StaticMethods_packet_reply$self_reply$jscomp$6$$, $packet$jscomp$7_reply_tcp$$, $tcp_options$$) {
  $packet$jscomp$7_reply_tcp$$ = {$sport$:$packet$jscomp$7_reply_tcp$$.$tcp$.$dport$, $dport$:$packet$jscomp$7_reply_tcp$$.$tcp$.$sport$, $winsize$:$packet$jscomp$7_reply_tcp$$.$tcp$.$winsize$, $ackn$:$JSCompiler_StaticMethods_packet_reply$self_reply$jscomp$6$$.$ack$, $seq$:$JSCompiler_StaticMethods_packet_reply$self_reply$jscomp$6$$.$seq$};
  if ($tcp_options$$) {
    for (const $opt$jscomp$1$$ in $tcp_options$$) {
      $packet$jscomp$7_reply_tcp$$[$opt$jscomp$1$$] = $tcp_options$$[$opt$jscomp$1$$];
    }
  }
  $JSCompiler_StaticMethods_packet_reply$self_reply$jscomp$6$$ = $JSCompiler_StaticMethods_ipv4_reply$$($JSCompiler_StaticMethods_packet_reply$self_reply$jscomp$6$$);
  $JSCompiler_StaticMethods_packet_reply$self_reply$jscomp$6$$.$tcp$ = $packet$jscomp$7_reply_tcp$$;
  return $JSCompiler_StaticMethods_packet_reply$self_reply$jscomp$6$$;
}
$JSCompiler_prototypeAlias$$ = $TCPConnection$$module$src$browser$fake_network$$.prototype;
$JSCompiler_prototypeAlias$$.connect = function() {
  this.$seq$ = 1338;
  this.$ack$ = 1;
  this.$winsize$ = 64240;
  this.state = "syn-sent";
  let $reply$jscomp$7$$ = $JSCompiler_StaticMethods_ipv4_reply$$(this);
  $reply$jscomp$7$$.$ipv4$.id = 2345;
  $reply$jscomp$7$$.$tcp$ = {$sport$:this.$sport$, $dport$:this.$dport$, $seq$:1337, $ackn$:0, $winsize$:0, $syn$:!0, };
  this.$net$.$receive$($make_packet$$module$src$browser$fake_network$$(this.$net$.$eth_encoder_buf$, $reply$jscomp$7$$));
};
$JSCompiler_prototypeAlias$$.accept = function($packet$jscomp$8$$) {
  this.$seq$ = 1338;
  this.$ack$ = $packet$jscomp$8$$.$tcp$.$seq$ + 1;
  this.$s$ = this.$net$.$router_mac$;
  this.$v$ = $packet$jscomp$8$$.$ipv4$.$dest$;
  this.$sport$ = $packet$jscomp$8$$.$tcp$.$dport$;
  this.$o$ = $packet$jscomp$8$$.$eth$.src;
  this.$dport$ = $packet$jscomp$8$$.$tcp$.$sport$;
  this.$u$ = $packet$jscomp$8$$.$ipv4$.src;
  this.$winsize$ = $packet$jscomp$8$$.$tcp$.$winsize$;
  let $reply$jscomp$8$$ = $JSCompiler_StaticMethods_ipv4_reply$$(this);
  $reply$jscomp$8$$.$tcp$ = {$sport$:this.$sport$, $dport$:this.$dport$, $seq$:1337, $ackn$:this.$ack$, $winsize$:$packet$jscomp$8$$.$tcp$.$winsize$, $syn$:!0, $ack$:!0};
  this.state = "established";
  this.$net$.$receive$($make_packet$$module$src$browser$fake_network$$(this.$net$.$eth_encoder_buf$, $reply$jscomp$8$$));
};
$JSCompiler_prototypeAlias$$.process = function($packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$) {
  if ("closed" === this.state) {
    $packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$ = $JSCompiler_StaticMethods_packet_reply$$(this, $packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$, {$rst$:!0}), this.$net$.$receive$($make_packet$$module$src$browser$fake_network$$(this.$net$.$eth_encoder_buf$, $packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$));
  } else {
    if ($packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$.$tcp$.$rst$) {
      "syn-probe" === this.state ? $JSCompiler_StaticMethods_emit$$(this, "probe", !1) : this.$on_close$(), $JSCompiler_StaticMethods_JSC$1818_release$$(this);
    } else {
      if ($packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$.$tcp$.$syn$) {
        "syn-sent" === this.state && $packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$.$tcp$.$ack$ ? (this.$ack$ = $packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$.$tcp$.$seq$ + 1, this.$g$ = $packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$.$tcp$.$ackn$, this.$net$.$receive$($make_packet$$module$src$browser$fake_network$$(this.$net$.$eth_encoder_buf$, $JSCompiler_StaticMethods_ipv4_reply$$(this))), 
        this.state = "established", $JSCompiler_StaticMethods_emit$$(this, "connect")) : "syn-probe" === this.state && $packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$.$tcp$.$ack$ && ($JSCompiler_StaticMethods_emit$$(this, "probe", !0), $packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$ = $JSCompiler_StaticMethods_packet_reply$$(this, $packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$, 
        {$rst$:!0}), this.$net$.$receive$($make_packet$$module$src$browser$fake_network$$(this.$net$.$eth_encoder_buf$, $packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$)), $JSCompiler_StaticMethods_JSC$1818_release$$(this));
      } else {
        if ($packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$.$tcp$.$ack$) {
          if ("syn-received" === this.state) {
            this.state = "established";
          } else {
            if ("fin-wait-1" === this.state) {
              $packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$.$tcp$.$fin$ || (this.state = "fin-wait-2");
            } else {
              if ("closing" === this.state || "last-ack" === this.state) {
                $JSCompiler_StaticMethods_JSC$1818_release$$(this);
                return;
              }
            }
          }
        }
        if (void 0 === this.$g$) {
          this.$g$ = $packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$.$tcp$.$ackn$;
        } else {
          var $n_ack_reply$jscomp$14$$ = $packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$.$tcp$.$ackn$ - this.$g$;
          if (0 < $n_ack_reply$jscomp$14$$) {
            if (this.$g$ = $packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$.$tcp$.$ackn$, this.$send_buffer$.remove($n_ack_reply$jscomp$14$$), this.$seq$ += $n_ack_reply$jscomp$14$$, this.pending = !1, this.$i$ && !this.$send_buffer$.length) {
              this.$i$ = !1;
              this.state = this.$l$;
              $packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$ = $JSCompiler_StaticMethods_ipv4_reply$$(this);
              $packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$.$tcp$.$fin$ = !0;
              this.$net$.$receive$($make_packet$$module$src$browser$fake_network$$(this.$net$.$eth_encoder_buf$, $packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$));
              return;
            }
          } else {
            if (0 > $n_ack_reply$jscomp$14$$) {
              $packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$ = $JSCompiler_StaticMethods_packet_reply$$(this, $packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$, {$rst$:!0});
              this.$net$.$receive$($make_packet$$module$src$browser$fake_network$$(this.$net$.$eth_encoder_buf$, $packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$));
              this.$on_close$();
              $JSCompiler_StaticMethods_JSC$1818_release$$(this);
              return;
            }
          }
        }
        $packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$.$tcp$.$fin$ ? (++this.$ack$, $n_ack_reply$jscomp$14$$ = $JSCompiler_StaticMethods_packet_reply$$(this, $packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$, {}), "established" === this.state ? ($n_ack_reply$jscomp$14$$.$tcp$.$ack$ = !0, this.state = "close-wait", this.$on_shutdown$()) : "fin-wait-1" === this.state ? ($packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$.$tcp$.$ack$ ? 
        $JSCompiler_StaticMethods_JSC$1818_release$$(this) : this.state = "closing", $n_ack_reply$jscomp$14$$.$tcp$.$ack$ = !0) : "fin-wait-2" === this.state ? ($JSCompiler_StaticMethods_JSC$1818_release$$(this), $n_ack_reply$jscomp$14$$.$tcp$.$ack$ = !0) : ($JSCompiler_StaticMethods_JSC$1818_release$$(this), this.$on_close$(), $n_ack_reply$jscomp$14$$.$tcp$.$rst$ = !0), this.$net$.$receive$($make_packet$$module$src$browser$fake_network$$(this.$net$.$eth_encoder_buf$, $n_ack_reply$jscomp$14$$))) : 
        this.$ack$ !== $packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$.$tcp$.$seq$ ? ($packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$ = $JSCompiler_StaticMethods_packet_reply$$(this, $packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$, {$ack$:!0}), this.$net$.$receive$($make_packet$$module$src$browser$fake_network$$(this.$net$.$eth_encoder_buf$, $packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$))) : 
        $packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$.$tcp$.$ack$ && 0 < $packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$.$tcp_data$.length && (this.$ack$ += $packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$.$tcp_data$.length, this.$net$.$receive$($make_packet$$module$src$browser$fake_network$$(this.$net$.$eth_encoder_buf$, $JSCompiler_StaticMethods_ipv4_reply$$(this))), 
        $JSCompiler_StaticMethods_emit$$(this, "data", $packet$jscomp$9_reply$jscomp$11_reply$jscomp$12_reply$jscomp$13_reply$jscomp$15_reply$jscomp$9$$.$tcp_data$));
        this.$pump$();
      }
    }
  }
};
$JSCompiler_prototypeAlias$$.write = function($data$jscomp$128$$) {
  this.$in_active_close$ || this.$send_buffer$.write($data$jscomp$128$$);
  this.$pump$();
};
$JSCompiler_prototypeAlias$$.close = function() {
  if (!this.$in_active_close$) {
    this.$in_active_close$ = !0;
    if ("established" === this.state || "syn-received" === this.state) {
      var $next_state_reply$jscomp$17$$ = "fin-wait-1";
    } else {
      if ("close-wait" === this.state) {
        $next_state_reply$jscomp$17$$ = "last-ack";
      } else {
        $JSCompiler_StaticMethods_JSC$1818_release$$(this);
        return;
      }
    }
    this.$send_buffer$.length || this.pending ? (this.$i$ = !0, this.$l$ = $next_state_reply$jscomp$17$$) : (this.state = $next_state_reply$jscomp$17$$, $next_state_reply$jscomp$17$$ = $JSCompiler_StaticMethods_ipv4_reply$$(this), $next_state_reply$jscomp$17$$.$tcp$.$fin$ = !0, this.$net$.$receive$($make_packet$$module$src$browser$fake_network$$(this.$net$.$eth_encoder_buf$, $next_state_reply$jscomp$17$$)));
  }
  this.$pump$();
};
$JSCompiler_prototypeAlias$$.$on_shutdown$ = function() {
  $JSCompiler_StaticMethods_emit$$(this, "shutdown");
};
$JSCompiler_prototypeAlias$$.$on_close$ = function() {
  $JSCompiler_StaticMethods_emit$$(this, "close");
};
function $JSCompiler_StaticMethods_JSC$1818_release$$($JSCompiler_StaticMethods_JSC$1818_release$self$$) {
  $JSCompiler_StaticMethods_JSC$1818_release$self$$.$net$.$tcp_conn$[$JSCompiler_StaticMethods_JSC$1818_release$self$$.$h$] && ($JSCompiler_StaticMethods_JSC$1818_release$self$$.state = "closed", delete $JSCompiler_StaticMethods_JSC$1818_release$self$$.$net$.$tcp_conn$[$JSCompiler_StaticMethods_JSC$1818_release$self$$.$h$]);
}
$JSCompiler_prototypeAlias$$.$pump$ = function() {
  if (this.$send_buffer$.length && !this.pending) {
    const $data$jscomp$130$$ = this.$A$, $n_ready$$ = $JSCompiler_StaticMethods_JSC$1787_peek$$(this.$send_buffer$, $data$jscomp$130$$), $reply$jscomp$18$$ = $JSCompiler_StaticMethods_ipv4_reply$$(this);
    $reply$jscomp$18$$.$tcp$.$psh$ = !0;
    $reply$jscomp$18$$.$tcp_data$ = $data$jscomp$130$$.subarray(0, $n_ready$$);
    this.$net$.$receive$($make_packet$$module$src$browser$fake_network$$(this.$net$.$eth_encoder_buf$, $reply$jscomp$18$$));
    this.pending = !0;
  }
};
function $FetchNetworkAdapter$$module$src$browser$fetch_network$$($bus$jscomp$8$$, $config$jscomp$2$$) {
  $config$jscomp$2$$ = $config$jscomp$2$$ || {};
  this.$bus$ = $bus$jscomp$8$$;
  this.id = $config$jscomp$2$$.id || 0;
  this.$router_mac$ = new Uint8Array(($config$jscomp$2$$.$router_mac$ || "52:54:0:1:2:3").split(":").map(function($x$jscomp$102$$) {
    return parseInt($x$jscomp$102$$, 16);
  }));
  this.$router_ip$ = new Uint8Array(($config$jscomp$2$$.$router_ip$ || "192.168.86.1").split(".").map(function($x$jscomp$103$$) {
    return parseInt($x$jscomp$103$$, 10);
  }));
  this.$vm_ip$ = new Uint8Array(($config$jscomp$2$$.$vm_ip$ || "192.168.86.100").split(".").map(function($x$jscomp$104$$) {
    return parseInt($x$jscomp$104$$, 10);
  }));
  this.$masquerade$ = void 0 === $config$jscomp$2$$.$masquerade$ || !!$config$jscomp$2$$.$masquerade$;
  this.$vm_mac$ = new Uint8Array(6);
  this.$dns_method$ = $config$jscomp$2$$.$dns_method$ || "static";
  this.$doh_server$ = $config$jscomp$2$$.$doh_server$;
  this.$tcp_conn$ = {};
  this.$eth_encoder_buf$ = $create_eth_encoder_buf$$module$src$browser$fake_network$$();
  this.$JSC$1830_fetch$ = (...$args$jscomp$1$$) => fetch(...$args$jscomp$1$$);
  this.$cors_proxy$ = $config$jscomp$2$$.$cors_proxy$;
  this.$bus$.register("net" + this.id + "-mac", function($mac$$) {
    this.$vm_mac$ = new Uint8Array($mac$$.split(":").map(function($x$jscomp$105$$) {
      return parseInt($x$jscomp$105$$, 16);
    }));
  }, this);
  this.$bus$.register("net" + this.id + "-send", function($data$jscomp$131$$) {
    this.send($data$jscomp$131$$);
  }, this);
}
$JSCompiler_prototypeAlias$$ = $FetchNetworkAdapter$$module$src$browser$fetch_network$$.prototype;
$JSCompiler_prototypeAlias$$.$destroy$ = function() {
};
$JSCompiler_prototypeAlias$$.$on_tcp_connection$ = function($packet$jscomp$13$$, $tuple$jscomp$2$$) {
  if (80 === $packet$jscomp$13$$.$tcp$.$dport$) {
    let $conn$jscomp$1$$ = new $TCPConnection$$module$src$browser$fake_network$$;
    $conn$jscomp$1$$.state = "syn-received";
    $conn$jscomp$1$$.$net$ = this;
    $JSCompiler_StaticMethods_on$$($conn$jscomp$1$$, $on_data_http$$module$src$browser$fetch_network$$);
    $conn$jscomp$1$$.$h$ = $tuple$jscomp$2$$;
    $conn$jscomp$1$$.accept($packet$jscomp$13$$);
    this.$tcp_conn$[$tuple$jscomp$2$$] = $conn$jscomp$1$$;
    return !0;
  }
  return !1;
};
$JSCompiler_prototypeAlias$$.connect = function($port$$) {
  var $conn$jscomp$inline_238_vm_ip_str$jscomp$inline_232$$ = this.$vm_ip$.join(".");
  const $router_ip_str$jscomp$inline_233$$ = this.$router_ip$.join("."), $sport_0$jscomp$inline_234$$ = 16383 * Math.random() | 0;
  let $sport$jscomp$inline_235$$, $tuple$jscomp$inline_236$$, $sport_i$jscomp$inline_237$$ = 0;
  do {
    $sport$jscomp$inline_235$$ = 49152 + ($sport_0$jscomp$inline_234$$ + $sport_i$jscomp$inline_237$$) % 16383, $tuple$jscomp$inline_236$$ = `${$conn$jscomp$inline_238_vm_ip_str$jscomp$inline_232$$}:${$port$$}:${$router_ip_str$jscomp$inline_233$$}:${$sport$jscomp$inline_235$$}`;
  } while (16383 > ++$sport_i$jscomp$inline_237$$ && this.$tcp_conn$[$tuple$jscomp$inline_236$$]);
  if (this.$tcp_conn$[$tuple$jscomp$inline_236$$]) {
    throw Error("pool of dynamic TCP port numbers exhausted, connection aborted");
  }
  $conn$jscomp$inline_238_vm_ip_str$jscomp$inline_232$$ = new $TCPConnection$$module$src$browser$fake_network$$;
  $conn$jscomp$inline_238_vm_ip_str$jscomp$inline_232$$.$h$ = $tuple$jscomp$inline_236$$;
  $conn$jscomp$inline_238_vm_ip_str$jscomp$inline_232$$.$s$ = this.$router_mac$;
  $conn$jscomp$inline_238_vm_ip_str$jscomp$inline_232$$.$v$ = this.$router_ip$;
  $conn$jscomp$inline_238_vm_ip_str$jscomp$inline_232$$.$sport$ = $sport$jscomp$inline_235$$;
  $conn$jscomp$inline_238_vm_ip_str$jscomp$inline_232$$.$o$ = this.$vm_mac$;
  $conn$jscomp$inline_238_vm_ip_str$jscomp$inline_232$$.$dport$ = $port$$;
  $conn$jscomp$inline_238_vm_ip_str$jscomp$inline_232$$.$u$ = this.$vm_ip$;
  $conn$jscomp$inline_238_vm_ip_str$jscomp$inline_232$$.$net$ = this;
  this.$tcp_conn$[$tuple$jscomp$inline_236$$] = $conn$jscomp$inline_238_vm_ip_str$jscomp$inline_232$$;
  $conn$jscomp$inline_238_vm_ip_str$jscomp$inline_232$$.connect();
  return $conn$jscomp$inline_238_vm_ip_str$jscomp$inline_232$$;
};
async function $on_data_http$$module$src$browser$fetch_network$$($data$jscomp$132_data$jscomp$133_offset$jscomp$47$$) {
  this.read = this.read || "";
  if ((this.read += (new TextDecoder).decode($data$jscomp$132_data$jscomp$133_offset$jscomp$47$$)) && -1 !== this.read.indexOf("\r\n\r\n")) {
    $data$jscomp$132_data$jscomp$133_offset$jscomp$47$$ = this.read.indexOf("\r\n\r\n");
    var $headers_localport_opts$$ = this.read.substring(0, $data$jscomp$132_data$jscomp$133_offset$jscomp$47$$).split(/\r\n/);
    $data$jscomp$132_data$jscomp$133_offset$jscomp$47$$ = this.read.substring($data$jscomp$132_data$jscomp$133_offset$jscomp$47$$ + 4);
    this.read = "";
    let $first_line$$ = $headers_localport_opts$$[0].split(" "), $target$jscomp$93$$;
    $target$jscomp$93$$ = /^https?:/.test($first_line$$[1]) ? new URL($first_line$$[1]) : new URL("http://host" + $first_line$$[1]);
    "undefined" !== typeof window && "http:" === $target$jscomp$93$$.protocol && "https:" === window.location.protocol && ($target$jscomp$93$$.protocol = "https:");
    let $req_headers$$ = new Headers;
    for (let $i$jscomp$47$$ = 1; $i$jscomp$47$$ < $headers_localport_opts$$.length; ++$i$jscomp$47$$) {
      const $header$jscomp$3$$ = $JSCompiler_StaticMethods_parse_http_header$$($headers_localport_opts$$[$i$jscomp$47$$]);
      if (!$header$jscomp$3$$) {
        console.warn('The request contains an invalid header: "%s"', $headers_localport_opts$$[$i$jscomp$47$$]);
        $JSCompiler_StaticMethods_respond_text_and_close$$(this, 400, "Bad Request", `Invalid header in request: ${$headers_localport_opts$$[$i$jscomp$47$$]}`);
        return;
      }
      "host" === $header$jscomp$3$$.key.toLowerCase() ? $target$jscomp$93$$.host = $header$jscomp$3$$.value : $req_headers$$.append($header$jscomp$3$$.key, $header$jscomp$3$$.value);
    }
    if (!this.$net$.$cors_proxy$ && /^\d+\.external$/.test($target$jscomp$93$$.hostname)) {
      if ($headers_localport_opts$$ = parseInt($target$jscomp$93$$.hostname.split(".")[0], 10), !isNaN($headers_localport_opts$$) && 0 < $headers_localport_opts$$ && 65536 > $headers_localport_opts$$) {
        $target$jscomp$93$$.protocol = "http:", $target$jscomp$93$$.hostname = "localhost", $target$jscomp$93$$.port = $headers_localport_opts$$.toString(10);
      } else {
        console.warn('Unknown port for localhost: "%s"', $target$jscomp$93$$.href);
        $JSCompiler_StaticMethods_respond_text_and_close$$(this, 400, "Bad Request", `Unknown port for localhost: ${$target$jscomp$93$$.href}`);
        return;
      }
    }
    this.name = $target$jscomp$93$$.href;
    $headers_localport_opts$$ = {method:$first_line$$[0], headers:$req_headers$$, };
    -1 !== ["put", "post"].indexOf($headers_localport_opts$$.method.toLowerCase()) && ($headers_localport_opts$$.body = $data$jscomp$132_data$jscomp$133_offset$jscomp$47$$);
    const $fetch_url$jscomp$1$$ = this.$net$.$cors_proxy$ ? this.$net$.$cors_proxy$ + encodeURIComponent($target$jscomp$93$$.href) : $target$jscomp$93$$.href;
    new TextEncoder;
    let $response_started$$ = !1;
    this.$net$.$JSC$1830_fetch$($fetch_url$jscomp$1$$, $headers_localport_opts$$).then($resp$jscomp$1$$ => {
      let $resp_headers$$ = new Headers($resp$jscomp$1$$.headers);
      $resp_headers$$.delete("content-encoding");
      $resp_headers$$.delete("keep-alive");
      $resp_headers$$.delete("content-length");
      $resp_headers$$.delete("transfer-encoding");
      $resp_headers$$.set("x-was-fetch-redirected", `${!!$resp$jscomp$1$$.redirected}`);
      $resp_headers$$.set("x-fetch-resp-url", $resp$jscomp$1$$.url);
      $resp_headers$$.set("connection", "close");
      this.write($JSCompiler_StaticMethods_form_response_head$$($resp$jscomp$1$$.status, $resp$jscomp$1$$.statusText, $resp_headers$$));
      $response_started$$ = !0;
      if ($resp$jscomp$1$$.body && $resp$jscomp$1$$.body.getReader) {
        const $resp_reader$$ = $resp$jscomp$1$$.body.getReader(), $pump$$ = ({value:$value$jscomp$134$$, done:$done$jscomp$3$$}) => {
          $value$jscomp$134$$ && this.write($value$jscomp$134$$);
          if ($done$jscomp$3$$) {
            this.close();
          } else {
            return $resp_reader$$.read().then($pump$$);
          }
        };
        $resp_reader$$.read().then($pump$$);
      } else {
        $resp$jscomp$1$$.arrayBuffer().then($buffer$jscomp$36$$ => {
          this.write(new Uint8Array($buffer$jscomp$36$$));
          this.close();
        });
      }
    }).catch($e$jscomp$17$$ => {
      console.warn("Fetch Failed: " + $fetch_url$jscomp$1$$ + "\n" + $e$jscomp$17$$);
      $response_started$$ || $JSCompiler_StaticMethods_respond_text_and_close$$(this, 502, "Fetch Error", `Fetch ${$fetch_url$jscomp$1$$} failed:\n\n${$e$jscomp$17$$.stack || $e$jscomp$17$$.message}`);
      this.close();
    });
  }
}
$JSCompiler_prototypeAlias$$.$JSC$1830_fetch$ = async function($url$jscomp$25$$, $options$jscomp$38$$) {
  this.$cors_proxy$ && ($url$jscomp$25$$ = this.$cors_proxy$ + encodeURIComponent($url$jscomp$25$$));
  try {
    const $resp$jscomp$2$$ = await fetch($url$jscomp$25$$, $options$jscomp$38$$), $ab$jscomp$1$$ = await $resp$jscomp$2$$.arrayBuffer();
    return [$resp$jscomp$2$$, $ab$jscomp$1$$];
  } catch ($e$jscomp$18$$) {
    return console.warn("Fetch Failed: " + $url$jscomp$25$$ + "\n" + $e$jscomp$18$$), [{status:502, statusText:"Fetch Error", headers:new Headers({"Content-Type":"text/plain"}), }, (new TextEncoder).encode(`Fetch ${$url$jscomp$25$$} failed:\n\n${$e$jscomp$18$$.stack}`).buffer];
  }
};
function $JSCompiler_StaticMethods_form_response_head$$($lines_status_code$$, $status_text$$, $headers$jscomp$1$$) {
  $lines_status_code$$ = [`HTTP/1.1 ${$lines_status_code$$} ${$status_text$$}`];
  for (const [$key$jscomp$37$$, $value$jscomp$135$$] of $headers$jscomp$1$$.entries()) {
    $lines_status_code$$.push(`${$key$jscomp$37$$}: ${$value$jscomp$135$$}`);
  }
  return (new TextEncoder).encode($lines_status_code$$.join("\r\n") + "\r\n\r\n");
}
function $JSCompiler_StaticMethods_respond_text_and_close$$($conn$jscomp$2$$, $data_array$jscomp$inline_241_status_code$jscomp$1$$, $status_text$jscomp$1$$, $body$jscomp$1$$) {
  const $headers$jscomp$2$$ = new Headers({"content-type":"text/plain", "content-length":$body$jscomp$1$$.length.toString(10), connection:"close"});
  $data_array$jscomp$inline_241_status_code$jscomp$1$$ = [$JSCompiler_StaticMethods_form_response_head$$($data_array$jscomp$inline_241_status_code$jscomp$1$$, $status_text$jscomp$1$$, $headers$jscomp$2$$), (new TextEncoder).encode($body$jscomp$1$$)];
  if (!$conn$jscomp$2$$.$in_active_close$) {
    for (const $data$jscomp$inline_242$$ of $data_array$jscomp$inline_241_status_code$jscomp$1$$) {
      $conn$jscomp$2$$.$send_buffer$.write($data$jscomp$inline_242$$);
    }
  }
  $conn$jscomp$2$$.$pump$();
  $conn$jscomp$2$$.close();
}
function $JSCompiler_StaticMethods_parse_http_header$$($header$jscomp$4_key$jscomp$38$$) {
  var $parts$jscomp$3_value$jscomp$136$$ = $header$jscomp$4_key$jscomp$38$$.match(/^([^:]*):(.*)$/);
  if ($parts$jscomp$3_value$jscomp$136$$ && ($header$jscomp$4_key$jscomp$38$$ = $parts$jscomp$3_value$jscomp$136$$[1], $parts$jscomp$3_value$jscomp$136$$ = $parts$jscomp$3_value$jscomp$136$$[2].trim(), 0 !== $header$jscomp$4_key$jscomp$38$$.length && 0 !== $parts$jscomp$3_value$jscomp$136$$.length && /^[\w-]+$/.test($header$jscomp$4_key$jscomp$38$$) && /^[\x20-\x7E]+$/.test($parts$jscomp$3_value$jscomp$136$$))) {
    return {key:$header$jscomp$4_key$jscomp$38$$, value:$parts$jscomp$3_value$jscomp$136$$};
  }
}
$JSCompiler_prototypeAlias$$.send = function($data$jscomp$134$$) {
  $handle_fake_networking$$module$src$browser$fake_network$$($data$jscomp$134$$, this);
};
$JSCompiler_prototypeAlias$$.$receive$ = function($data$jscomp$135$$) {
  this.$bus$.send("net" + this.id + "-receive", new Uint8Array($data$jscomp$135$$));
};
function $WispNetworkAdapter$$module$src$browser$wisp_network$$($wisp_url$$, $bus$jscomp$9$$, $config$jscomp$3$$) {
  $JSCompiler_StaticMethods_register_ws$$(this, $wisp_url$$);
  this.$j$ = 1;
  this.$g$ = {0:{$congestion$:0}};
  this.$i$ = [];
  $config$jscomp$3$$ = $config$jscomp$3$$ || {};
  this.$bus$ = $bus$jscomp$9$$;
  this.id = $config$jscomp$3$$.id || 0;
  this.$router_mac$ = new Uint8Array(($config$jscomp$3$$.$router_mac$ || "52:54:0:1:2:3").split(":").map(function($x$jscomp$106$$) {
    return parseInt($x$jscomp$106$$, 16);
  }));
  this.$router_ip$ = new Uint8Array(($config$jscomp$3$$.$router_ip$ || "192.168.86.1").split(".").map(function($x$jscomp$107$$) {
    return parseInt($x$jscomp$107$$, 10);
  }));
  this.$vm_ip$ = new Uint8Array(($config$jscomp$3$$.$vm_ip$ || "192.168.86.100").split(".").map(function($x$jscomp$108$$) {
    return parseInt($x$jscomp$108$$, 10);
  }));
  this.$masquerade$ = void 0 === $config$jscomp$3$$.$masquerade$ || !!$config$jscomp$3$$.$masquerade$;
  this.$vm_mac$ = new Uint8Array(6);
  this.$dns_method$ = $config$jscomp$3$$.$dns_method$ || "doh";
  this.$doh_server$ = $config$jscomp$3$$.$doh_server$;
  this.$tcp_conn$ = {};
  this.$eth_encoder_buf$ = $create_eth_encoder_buf$$module$src$browser$fake_network$$();
  this.$bus$.register("net" + this.id + "-mac", function($mac$jscomp$1$$) {
    this.$vm_mac$ = new Uint8Array($mac$jscomp$1$$.split(":").map(function($x$jscomp$109$$) {
      return parseInt($x$jscomp$109$$, 16);
    }));
  }, this);
  this.$bus$.register("net" + this.id + "-send", function($data$jscomp$136$$) {
    this.send($data$jscomp$136$$);
  }, this);
}
function $JSCompiler_StaticMethods_register_ws$$($JSCompiler_StaticMethods_register_ws$self$$, $wisp_url$jscomp$1$$) {
  $JSCompiler_StaticMethods_register_ws$self$$.$h$ = new WebSocket($wisp_url$jscomp$1$$.replace("wisp://", "ws://").replace("wisps://", "wss://"));
  $JSCompiler_StaticMethods_register_ws$self$$.$h$.binaryType = "arraybuffer";
  $JSCompiler_StaticMethods_register_ws$self$$.$h$.onmessage = $event$jscomp$9_frame$jscomp$inline_245$$ => {
    $event$jscomp$9_frame$jscomp$inline_245$$ = new Uint8Array($event$jscomp$9_frame$jscomp$inline_245$$.data);
    const $view$jscomp$inline_246$$ = new DataView($event$jscomp$9_frame$jscomp$inline_245$$.buffer), $stream_id$jscomp$inline_247$$ = $view$jscomp$inline_246$$.getUint32(1, !0);
    switch($event$jscomp$9_frame$jscomp$inline_245$$[0]) {
      case 2:
        if ($JSCompiler_StaticMethods_register_ws$self$$.$g$[$stream_id$jscomp$inline_247$$]) {
          $JSCompiler_StaticMethods_register_ws$self$$.$g$[$stream_id$jscomp$inline_247$$].$data_callback$($event$jscomp$9_frame$jscomp$inline_245$$.slice(5));
        } else {
          throw Error("Got a DATA packet but stream not registered. ID: " + $stream_id$jscomp$inline_247$$);
        }
        break;
      case 3:
        $JSCompiler_StaticMethods_register_ws$self$$.$g$[$stream_id$jscomp$inline_247$$] && ($JSCompiler_StaticMethods_register_ws$self$$.$g$[$stream_id$jscomp$inline_247$$].$congestion$ = $view$jscomp$inline_246$$.getUint32(5, !0));
        if ($JSCompiler_StaticMethods_register_ws$self$$.$g$[$stream_id$jscomp$inline_247$$].$congested$) {
          for (const $packet$jscomp$inline_248$$ of $JSCompiler_StaticMethods_register_ws$self$$.$i$) {
            $JSCompiler_StaticMethods_send_packet$$($JSCompiler_StaticMethods_register_ws$self$$, $packet$jscomp$inline_248$$.data, $packet$jscomp$inline_248$$.type, $stream_id$jscomp$inline_247$$);
          }
          $JSCompiler_StaticMethods_register_ws$self$$.$g$[$stream_id$jscomp$inline_247$$].$congested$ = !1;
        }
        break;
      case 4:
        $JSCompiler_StaticMethods_register_ws$self$$.$g$[$stream_id$jscomp$inline_247$$] && $JSCompiler_StaticMethods_register_ws$self$$.$g$[$stream_id$jscomp$inline_247$$].$close_callback$($view$jscomp$inline_246$$.getUint8(5)), delete $JSCompiler_StaticMethods_register_ws$self$$.$g$[$stream_id$jscomp$inline_247$$];
    }
  };
  $JSCompiler_StaticMethods_register_ws$self$$.$h$.onclose = () => {
    setTimeout(() => {
      $JSCompiler_StaticMethods_register_ws$$($JSCompiler_StaticMethods_register_ws$self$$, $wisp_url$jscomp$1$$);
    }, 10000);
  };
}
function $JSCompiler_StaticMethods_send_packet$$($JSCompiler_StaticMethods_send_packet$self$$, $data$jscomp$137$$, $type$jscomp$151$$, $stream_id$$) {
  $JSCompiler_StaticMethods_send_packet$self$$.$g$[$stream_id$$] && (0 < $JSCompiler_StaticMethods_send_packet$self$$.$g$[$stream_id$$].$congestion$ ? ("DATA" === $type$jscomp$151$$ && $JSCompiler_StaticMethods_send_packet$self$$.$g$[$stream_id$$].$congestion$--, $JSCompiler_StaticMethods_send_packet$self$$.$h$.send($data$jscomp$137$$)) : ($JSCompiler_StaticMethods_send_packet$self$$.$g$[$stream_id$$].$congested$ = !0, $JSCompiler_StaticMethods_send_packet$self$$.$i$.push({data:$data$jscomp$137$$, 
  type:$type$jscomp$151$$})));
}
function $JSCompiler_StaticMethods_send_wisp_frame$$($JSCompiler_StaticMethods_send_wisp_frame$self$$, $frame_obj$$) {
  let $full_packet$$, $view$jscomp$27$$;
  switch($frame_obj$$.type) {
    case "CONNECT":
      const $hostname_buffer$$ = (new TextEncoder).encode($frame_obj$$.hostname);
      $full_packet$$ = new Uint8Array(8 + $hostname_buffer$$.length);
      $view$jscomp$27$$ = new DataView($full_packet$$.buffer);
      $view$jscomp$27$$.setUint8(0, 1);
      $view$jscomp$27$$.setUint32(1, $frame_obj$$.$stream_id$, !0);
      $view$jscomp$27$$.setUint8(5, 1);
      $view$jscomp$27$$.setUint16(6, $frame_obj$$.port, !0);
      $full_packet$$.set($hostname_buffer$$, 8);
      $JSCompiler_StaticMethods_send_wisp_frame$self$$.$g$[$frame_obj$$.$stream_id$] = {$data_callback$:$frame_obj$$.$data_callback$, $close_callback$:$frame_obj$$.$close_callback$, $congestion$:$JSCompiler_StaticMethods_send_wisp_frame$self$$.$g$[0].$congestion$};
      break;
    case "DATA":
      $full_packet$$ = new Uint8Array(5 + $frame_obj$$.data.length);
      $view$jscomp$27$$ = new DataView($full_packet$$.buffer);
      $view$jscomp$27$$.setUint8(0, 2);
      $view$jscomp$27$$.setUint32(1, $frame_obj$$.$stream_id$, !0);
      $full_packet$$.set($frame_obj$$.data, 5);
      break;
    case "CLOSE":
      $full_packet$$ = new Uint8Array(6), $view$jscomp$27$$ = new DataView($full_packet$$.buffer), $view$jscomp$27$$.setUint8(0, 4), $view$jscomp$27$$.setUint32(1, $frame_obj$$.$stream_id$, !0), $view$jscomp$27$$.setUint8(5, $frame_obj$$.reason);
  }
  $JSCompiler_StaticMethods_send_packet$$($JSCompiler_StaticMethods_send_wisp_frame$self$$, $full_packet$$, $frame_obj$$.type, $frame_obj$$.$stream_id$);
}
$WispNetworkAdapter$$module$src$browser$wisp_network$$.prototype.$destroy$ = function() {
  this.$h$ && (this.$h$.onmessage = null, this.$h$.onclose = null, this.$h$.close(), this.$h$ = null);
};
$WispNetworkAdapter$$module$src$browser$wisp_network$$.prototype.$on_tcp_connection$ = function($packet$jscomp$15$$, $tuple$jscomp$3$$) {
  let $conn$jscomp$3$$ = new $TCPConnection$$module$src$browser$fake_network$$;
  $conn$jscomp$3$$.state = "syn-received";
  $conn$jscomp$3$$.$net$ = this;
  $conn$jscomp$3$$.$h$ = $tuple$jscomp$3$$;
  $conn$jscomp$3$$.$stream_id$ = this.$j$++;
  this.$tcp_conn$[$tuple$jscomp$3$$] = $conn$jscomp$3$$;
  $JSCompiler_StaticMethods_on$$($conn$jscomp$3$$, $data$jscomp$138$$ => {
    0 !== $data$jscomp$138$$.length && $JSCompiler_StaticMethods_send_wisp_frame$$(this, {type:"DATA", $stream_id$:$conn$jscomp$3$$.$stream_id$, data:$data$jscomp$138$$});
  });
  $conn$jscomp$3$$.$on_close$ = () => {
    $JSCompiler_StaticMethods_send_wisp_frame$$(this, {type:"CLOSE", $stream_id$:$conn$jscomp$3$$.$stream_id$, reason:2});
  };
  $conn$jscomp$3$$.$on_shutdown$ = $conn$jscomp$3$$.$on_close$;
  $JSCompiler_StaticMethods_send_wisp_frame$$(this, {type:"CONNECT", $stream_id$:$conn$jscomp$3$$.$stream_id$, hostname:$packet$jscomp$15$$.$ipv4$.$dest$.join("."), port:$packet$jscomp$15$$.$tcp$.$dport$, $data_callback$:$data$jscomp$139$$ => {
    $conn$jscomp$3$$.write($data$jscomp$139$$);
  }, $close_callback$:() => {
    $conn$jscomp$3$$.close();
  }});
  $conn$jscomp$3$$.accept($packet$jscomp$15$$);
  return !0;
};
$WispNetworkAdapter$$module$src$browser$wisp_network$$.prototype.send = function($data$jscomp$141$$) {
  $handle_fake_networking$$module$src$browser$fake_network$$($data$jscomp$141$$, this);
};
$WispNetworkAdapter$$module$src$browser$wisp_network$$.prototype.$receive$ = function($data$jscomp$142$$) {
  this.$bus$.send("net" + this.id + "-receive", new Uint8Array($data$jscomp$142$$));
};
const $PLATFOM_WINDOWS$$module$src$browser$keyboard$$ = "undefined" !== typeof window && 0 <= window.navigator.platform.toString().toLowerCase().search("win");
function $KeyboardAdapter$$module$src$browser$keyboard$$($bus$jscomp$10$$) {
  function $may_handle$$($e$jscomp$19$$) {
    return $e$jscomp$19$$.shiftKey && $e$jscomp$19$$.ctrlKey && (73 === $e$jscomp$19$$.keyCode || 74 === $e$jscomp$19$$.keyCode || 75 === $e$jscomp$19$$.keyCode) || !$keyboard$$.$emu_enabled$ ? !1 : $e$jscomp$19$$.target ? $e$jscomp$19$$.target.classList.contains("phone_keyboard") || "INPUT" !== $e$jscomp$19$$.target.nodeName && "TEXTAREA" !== $e$jscomp$19$$.target.nodeName : !0;
  }
  function $keyup_handler$$($e$jscomp$21$$) {
    !$e$jscomp$21$$.altKey && $keys_pressed$$[56] && $handle_code$$(56, !1);
    return $handler$jscomp$13$$($e$jscomp$21$$, !1);
  }
  function $keydown_handler$$($e$jscomp$22$$) {
    !$e$jscomp$22$$.altKey && $keys_pressed$$[56] && $handle_code$$(56, !1);
    return $handler$jscomp$13$$($e$jscomp$22$$, !0);
  }
  function $blur_handler$$() {
    for (var $keys$$ = Object.keys($keys_pressed$$), $key$jscomp$39$$, $i$jscomp$48$$ = 0; $i$jscomp$48$$ < $keys$$.length; $i$jscomp$48$$++) {
      $key$jscomp$39$$ = +$keys$$[$i$jscomp$48$$], $keys_pressed$$[$key$jscomp$39$$] && $handle_code$$($key$jscomp$39$$, !1);
    }
    $keys_pressed$$ = {};
  }
  function $input_handler$$($e$jscomp$24$$) {
    if ($keyboard$$.$bus$ && $may_handle$$($e$jscomp$24$$)) {
      switch($e$jscomp$24$$.inputType) {
        case "insertText":
          for (var $i$jscomp$49$$ = 0; $i$jscomp$49$$ < $e$jscomp$24$$.data.length; $i$jscomp$49$$++) {
            $keyboard$$.$simulate_char$($e$jscomp$24$$.data[$i$jscomp$49$$]);
          }
          break;
        case "insertLineBreak":
          $keyboard$$.$g$(13);
          break;
        case "deleteContentBackward":
          $keyboard$$.$g$(8);
      }
    }
  }
  function $handler$jscomp$13$$($e$jscomp$25$$, $keydown$$) {
    if ($keyboard$$.$bus$ && $may_handle$$($e$jscomp$25$$) && "" !== $e$jscomp$25$$.code && "Process" !== $e$jscomp$25$$.key && "Unidentified" !== $e$jscomp$25$$.key && 229 !== $e$jscomp$25$$.keyCode) {
      $e$jscomp$25$$.preventDefault && $e$jscomp$25$$.preventDefault();
      if ($PLATFOM_WINDOWS$$module$src$browser$keyboard$$ && ($deferred_event$$ && (clearTimeout($deferred_timeout_id$$), $e$jscomp$25$$.getModifierState && $e$jscomp$25$$.getModifierState("AltGraph") && $deferred_keydown$$ === $keydown$$ && "ControlLeft" === $deferred_event$$.code && "AltRight" === $e$jscomp$25$$.code || $handle_event$$($deferred_event$$, $deferred_keydown$$), $deferred_event$$ = null), "ControlLeft" === $e$jscomp$25$$.code)) {
        return $deferred_event$$ = $e$jscomp$25$$, $deferred_keydown$$ = $keydown$$, $deferred_timeout_id$$ = setTimeout(() => {
          $handle_event$$($deferred_event$$, $deferred_keydown$$);
          $deferred_event$$ = null;
        }, 10), !1;
      }
      $handle_event$$($e$jscomp$25$$, $keydown$$);
      return !1;
    }
  }
  function $handle_event$$($e$jscomp$26$$, $keydown$jscomp$1$$) {
    a: {
      if (void 0 !== $e$jscomp$26$$.code) {
        var $code$jscomp$4_code$jscomp$inline_251$$ = $codemap$$[$e$jscomp$26$$.code];
        if (void 0 !== $code$jscomp$4_code$jscomp$inline_251$$) {
          break a;
        }
      }
      $code$jscomp$4_code$jscomp$inline_251$$ = $charmap$$[$e$jscomp$26$$.keyCode];
    }
    $code$jscomp$4_code$jscomp$inline_251$$ ? $handle_code$$($code$jscomp$4_code$jscomp$inline_251$$, $keydown$jscomp$1$$, $e$jscomp$26$$.repeat) : console.log("Missing char in map: keyCode=" + ($e$jscomp$26$$.keyCode || -1).toString(16) + " code=" + $e$jscomp$26$$.code);
  }
  function $handle_code$$($code$jscomp$5$$, $keydown$jscomp$2$$, $is_repeat$$) {
    if ($keydown$jscomp$2$$) {
      $keys_pressed$$[$code$jscomp$5$$] && !$is_repeat$$ && $handle_code$$($code$jscomp$5$$, !1);
    } else {
      if (!$keys_pressed$$[$code$jscomp$5$$]) {
        return;
      }
    }
    ($keys_pressed$$[$code$jscomp$5$$] = $keydown$jscomp$2$$) || ($code$jscomp$5$$ |= 128);
    255 < $code$jscomp$5$$ ? ($send_to_controller$$($code$jscomp$5$$ >> 8), $send_to_controller$$($code$jscomp$5$$ & 255)) : $send_to_controller$$($code$jscomp$5$$);
  }
  function $send_to_controller$$($code$jscomp$6$$) {
    $keyboard$$.$bus$.send("keyboard-code", $code$jscomp$6$$);
  }
  var $keys_pressed$$ = {}, $deferred_event$$ = null, $deferred_keydown$$ = !1, $deferred_timeout_id$$ = 0, $keyboard$$ = this;
  this.$emu_enabled$ = !0;
  const $charmap$$ = new Uint16Array([0, 0, 0, 0, 0, 0, 0, 0, 14, 15, 0, 0, 0, 28, 0, 0, 42, 29, 56, 0, 58, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 57, 57417, 57425, 57423, 57415, 57419, 57416, 57421, 80, 0, 0, 0, 0, 82, 83, 0, 11, 2, 3, 4, 5, 6, 7, 8, 9, 10, 0, 39, 0, 13, 0, 0, 0, 30, 48, 46, 32, 18, 33, 34, 35, 23, 36, 37, 38, 50, 49, 24, 25, 16, 19, 31, 20, 22, 47, 17, 45, 21, 44, 57435, 57436, 57437, 0, 0, 82, 79, 80, 81, 75, 76, 77, 71, 72, 73, 0, 0, 0, 0, 0, 0, 59, 60, 61, 62, 63, 64, 65, 66, 67, 
  68, 87, 88, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 69, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 12, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 39, 13, 51, 12, 52, 53, 41, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 26, 43, 27, 40, 0, 57435, 57400, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ]), $asciimap$$ = {8:8, 10:13, 32:32, 39:222, 44:188, 45:189, 46:190, 47:191, 48:48, 49:49, 50:50, 51:51, 52:52, 53:53, 
  54:54, 55:55, 56:56, 57:57, 59:186, 61:187, 91:219, 92:220, 93:221, 96:192, 97:65, 98:66, 99:67, 100:68, 101:69, 102:70, 103:71, 104:72, 105:73, 106:74, 107:75, 108:76, 109:77, 110:78, 111:79, 112:80, 113:81, 114:82, 115:83, 116:84, 117:85, 118:86, 119:87, 120:88, 121:89, 122:90}, $asciimap_shift$$ = {33:49, 34:222, 35:51, 36:52, 37:53, 38:55, 40:57, 41:48, 42:56, 43:187, 58:186, 60:188, 62:190, 63:191, 64:50, 65:65, 66:66, 67:67, 68:68, 69:69, 70:70, 71:71, 72:72, 73:73, 74:74, 75:75, 76:76, 77:77, 
  78:78, 79:79, 80:80, 81:81, 82:82, 83:83, 84:84, 85:85, 86:86, 87:87, 88:88, 89:89, 90:90, 94:54, 95:189, 123:219, 124:220, 125:221, 126:192};
  var $codemap$$ = {Escape:1, Digit1:2, Digit2:3, Digit3:4, Digit4:5, Digit5:6, Digit6:7, Digit7:8, Digit8:9, Digit9:10, Digit0:11, Minus:12, Equal:13, Backspace:14, Tab:15, KeyQ:16, KeyW:17, KeyE:18, KeyR:19, KeyT:20, KeyY:21, KeyU:22, KeyI:23, KeyO:24, KeyP:25, BracketLeft:26, BracketRight:27, Enter:28, ControlLeft:29, KeyA:30, KeyS:31, KeyD:32, KeyF:33, KeyG:34, KeyH:35, KeyJ:36, KeyK:37, KeyL:38, Semicolon:39, Quote:40, Backquote:41, ShiftLeft:42, Backslash:43, KeyZ:44, KeyX:45, KeyC:46, KeyV:47, 
  KeyB:48, KeyN:49, KeyM:50, Comma:51, Period:52, Slash:53, IntlRo:53, ShiftRight:54, NumpadMultiply:55, AltLeft:56, Space:57, CapsLock:58, F1:59, F2:60, F3:61, F4:62, F5:63, F6:64, F7:65, F8:66, F9:67, F10:68, NumLock:69, ScrollLock:70, Numpad7:71, Numpad8:72, Numpad9:73, NumpadSubtract:74, Numpad4:75, Numpad5:76, Numpad6:77, NumpadAdd:78, Numpad1:79, Numpad2:80, Numpad3:81, Numpad0:82, NumpadDecimal:83, IntlBackslash:86, F11:87, F12:88, NumpadEnter:57372, ControlRight:57373, NumpadDivide:57397, 
  AltRight:57400, Home:57415, ArrowUp:57416, PageUp:57417, ArrowLeft:57419, ArrowRight:57421, End:57423, ArrowDown:57424, PageDown:57425, Insert:57426, Delete:57427, MetaLeft:57435, OSLeft:57435, MetaRight:57436, OSRight:57436, ContextMenu:57437, };
  this.$bus$ = $bus$jscomp$10$$;
  this.$destroy$ = function() {
    "undefined" !== typeof window && (window.removeEventListener("keyup", $keyup_handler$$, !1), window.removeEventListener("keydown", $keydown_handler$$, !1), window.removeEventListener("blur", $blur_handler$$, !1), window.removeEventListener("input", $input_handler$$, !1));
  };
  this.$init$ = function() {
    "undefined" !== typeof window && (this.$destroy$(), window.addEventListener("keyup", $keyup_handler$$, !1), window.addEventListener("keydown", $keydown_handler$$, !1), window.addEventListener("blur", $blur_handler$$, !1), window.addEventListener("input", $input_handler$$, !1));
  };
  this.$init$();
  this.$g$ = function($code$jscomp$1_ev$jscomp$1$$) {
    $code$jscomp$1_ev$jscomp$1$$ = {keyCode:$code$jscomp$1_ev$jscomp$1$$};
    $handler$jscomp$13$$($code$jscomp$1_ev$jscomp$1$$, !0);
    $handler$jscomp$13$$($code$jscomp$1_ev$jscomp$1$$, !1);
  };
  this.$simulate_char$ = function($chr$$) {
    var $code$jscomp$2$$ = $chr$$.charCodeAt(0);
    $code$jscomp$2$$ in $asciimap$$ ? this.$g$($asciimap$$[$code$jscomp$2$$]) : $code$jscomp$2$$ in $asciimap_shift$$ ? ($send_to_controller$$(42), this.$g$($asciimap_shift$$[$code$jscomp$2$$]), $send_to_controller$$(170)) : console.log("ascii -> keyCode not found: ", $code$jscomp$2$$, $chr$$);
  };
}
;function $MouseAdapter$$module$src$browser$mouse$$($bus$jscomp$11$$, $screen_container$$) {
  function $may_handle$jscomp$1$$($child$jscomp$inline_253_e$jscomp$27$$) {
    if (!$mouse$$.enabled || !$mouse$$.$emu_enabled$) {
      return !1;
    }
    var $parent$jscomp$5$$ = $screen_container$$ || document.body, $JSCompiler_temp$jscomp$53$$;
    if (!($JSCompiler_temp$jscomp$53$$ = document.pointerLockElement)) {
      a: {
        for ($child$jscomp$inline_253_e$jscomp$27$$ = $child$jscomp$inline_253_e$jscomp$27$$.target; $child$jscomp$inline_253_e$jscomp$27$$.parentNode;) {
          if ($child$jscomp$inline_253_e$jscomp$27$$ === $parent$jscomp$5$$) {
            $JSCompiler_temp$jscomp$53$$ = !0;
            break a;
          }
          $child$jscomp$inline_253_e$jscomp$27$$ = $child$jscomp$inline_253_e$jscomp$27$$.parentNode;
        }
        $JSCompiler_temp$jscomp$53$$ = !1;
      }
    }
    return $JSCompiler_temp$jscomp$53$$;
  }
  function $touch_start_handler$$($e$jscomp$28_touch_touches$jscomp$2$$) {
    $may_handle$jscomp$1$$($e$jscomp$28_touch_touches$jscomp$2$$) && ($e$jscomp$28_touch_touches$jscomp$2$$ = $e$jscomp$28_touch_touches$jscomp$2$$.changedTouches) && $e$jscomp$28_touch_touches$jscomp$2$$.length && ($e$jscomp$28_touch_touches$jscomp$2$$ = $e$jscomp$28_touch_touches$jscomp$2$$[$e$jscomp$28_touch_touches$jscomp$2$$.length - 1], $last_x$$ = $e$jscomp$28_touch_touches$jscomp$2$$.clientX, $last_y$$ = $e$jscomp$28_touch_touches$jscomp$2$$.clientY);
  }
  function $touch_end_handler$$() {
    if ($left_down$$ || $middle_down$$ || $right_down$$) {
      $mouse$$.$bus$.send("mouse-click", [!1, !1, !1]), $left_down$$ = $middle_down$$ = $right_down$$ = !1;
    }
  }
  function $mousemove_handler$$($e$jscomp$30$$) {
    if ($mouse$$.$bus$ && $may_handle$jscomp$1$$($e$jscomp$30$$) && $mouse$$.$is_running$) {
      var $delta_x$$ = 0, $delta_y$$ = 0, $touch$jscomp$1_touches$jscomp$3$$ = $e$jscomp$30$$.changedTouches;
      $touch$jscomp$1_touches$jscomp$3$$ ? $touch$jscomp$1_touches$jscomp$3$$.length && ($touch$jscomp$1_touches$jscomp$3$$ = $touch$jscomp$1_touches$jscomp$3$$[$touch$jscomp$1_touches$jscomp$3$$.length - 1], $delta_x$$ = $touch$jscomp$1_touches$jscomp$3$$.clientX - $last_x$$, $delta_y$$ = $touch$jscomp$1_touches$jscomp$3$$.clientY - $last_y$$, $last_x$$ = $touch$jscomp$1_touches$jscomp$3$$.clientX, $last_y$$ = $touch$jscomp$1_touches$jscomp$3$$.clientY, $e$jscomp$30$$.preventDefault()) : "number" === 
      typeof $e$jscomp$30$$.movementX ? ($delta_x$$ = $e$jscomp$30$$.movementX, $delta_y$$ = $e$jscomp$30$$.movementY) : "number" === typeof $e$jscomp$30$$.webkitMovementX ? ($delta_x$$ = $e$jscomp$30$$.webkitMovementX, $delta_y$$ = $e$jscomp$30$$.webkitMovementY) : "number" === typeof $e$jscomp$30$$.mozMovementX ? ($delta_x$$ = $e$jscomp$30$$.mozMovementX, $delta_y$$ = $e$jscomp$30$$.mozMovementY) : ($delta_x$$ = $e$jscomp$30$$.clientX - $last_x$$, $delta_y$$ = $e$jscomp$30$$.clientY - $last_y$$, 
      $last_x$$ = $e$jscomp$30$$.clientX, $last_y$$ = $e$jscomp$30$$.clientY);
      $mouse$$.$bus$.send("mouse-delta", [1 * $delta_x$$, -(1 * $delta_y$$)]);
      $screen_container$$ && $mouse$$.$bus$.send("mouse-absolute", [$e$jscomp$30$$.pageX - $screen_container$$.offsetLeft, $e$jscomp$30$$.pageY - $screen_container$$.offsetTop, $screen_container$$.offsetWidth, $screen_container$$.offsetHeight]);
    }
  }
  function $mousedown_handler$$($e$jscomp$31$$) {
    $may_handle$jscomp$1$$($e$jscomp$31$$) && $click_event$$($e$jscomp$31$$, !0);
  }
  function $mouseup_handler$$($e$jscomp$32$$) {
    $may_handle$jscomp$1$$($e$jscomp$32$$) && $click_event$$($e$jscomp$32$$, !1);
  }
  function $click_event$$($e$jscomp$33$$, $down$$) {
    $mouse$$.$bus$ && (1 === $e$jscomp$33$$.which ? $left_down$$ = $down$$ : 2 === $e$jscomp$33$$.which ? $middle_down$$ = $down$$ : 3 === $e$jscomp$33$$.which && ($right_down$$ = $down$$), $mouse$$.$bus$.send("mouse-click", [$left_down$$, $middle_down$$, $right_down$$]), $e$jscomp$33$$.preventDefault());
  }
  function $mousewheel_handler$$($e$jscomp$34$$) {
    if ($may_handle$jscomp$1$$($e$jscomp$34$$)) {
      var $delta_x$jscomp$1$$ = $e$jscomp$34$$.wheelDelta || -$e$jscomp$34$$.detail;
      0 > $delta_x$jscomp$1$$ ? $delta_x$jscomp$1$$ = -1 : 0 < $delta_x$jscomp$1$$ && ($delta_x$jscomp$1$$ = 1);
      $mouse$$.$bus$.send("mouse-wheel", [$delta_x$jscomp$1$$, 0]);
      $e$jscomp$34$$.preventDefault();
    }
  }
  var $left_down$$ = !1, $right_down$$ = !1, $middle_down$$ = !1, $last_x$$ = 0, $last_y$$ = 0, $mouse$$ = this;
  this.enabled = !1;
  this.$emu_enabled$ = !0;
  this.$bus$ = $bus$jscomp$11$$;
  this.$bus$.register("mouse-enable", function($enabled$jscomp$2$$) {
    this.enabled = $enabled$jscomp$2$$;
  }, this);
  this.$is_running$ = !1;
  this.$bus$.register("emulator-stopped", function() {
    this.$is_running$ = !1;
  }, this);
  this.$bus$.register("emulator-started", function() {
    this.$is_running$ = !0;
  }, this);
  this.$destroy$ = function() {
    "undefined" !== typeof window && (window.removeEventListener("touchstart", $touch_start_handler$$, !1), window.removeEventListener("touchend", $touch_end_handler$$, !1), window.removeEventListener("touchmove", $mousemove_handler$$, !1), window.removeEventListener("mousemove", $mousemove_handler$$, !1), window.removeEventListener("mousedown", $mousedown_handler$$, !1), window.removeEventListener("mouseup", $mouseup_handler$$, !1), window.removeEventListener("wheel", $mousewheel_handler$$, {passive:!1}));
  };
  this.$init$ = function() {
    "undefined" !== typeof window && (this.$destroy$(), window.addEventListener("touchstart", $touch_start_handler$$, !1), window.addEventListener("touchend", $touch_end_handler$$, !1), window.addEventListener("touchmove", $mousemove_handler$$, !1), window.addEventListener("mousemove", $mousemove_handler$$, !1), window.addEventListener("mousedown", $mousedown_handler$$, !1), window.addEventListener("mouseup", $mouseup_handler$$, !1), window.addEventListener("wheel", $mousewheel_handler$$, {passive:!1}));
  };
  this.$init$();
}
;function $ScreenAdapter$$module$src$browser$screen$$($options$jscomp$39$$, $screen_fill_buffer$$) {
  function $number_as_color$$($n$jscomp$8$$) {
    $n$jscomp$8$$ = $n$jscomp$8$$.toString(16);
    return "#" + "0".repeat(6 - $n$jscomp$8$$.length) + $n$jscomp$8$$;
  }
  function $render_font_bitmap$$($vga_bitmap$$) {
    var $bitmap_width_dst_inc_col$$ = 256 * $font_width$$, $bitmap_height_put_bit$$ = 8 * $font_height$$, $font_canvas_vga_inc_chr$$ = $font_context$$ ? $font_context$$.canvas : null;
    $font_canvas_vga_inc_chr$$ && $font_canvas_vga_inc_chr$$.width === $bitmap_width_dst_inc_col$$ && $font_canvas_vga_inc_chr$$.height === $bitmap_height_put_bit$$ || ($font_canvas_vga_inc_chr$$ ? ($font_canvas_vga_inc_chr$$.width = $bitmap_width_dst_inc_col$$, $font_canvas_vga_inc_chr$$.height = $bitmap_height_put_bit$$) : ($font_canvas_vga_inc_chr$$ = new OffscreenCanvas($bitmap_width_dst_inc_col$$, $bitmap_height_put_bit$$), $font_context$$ = $font_canvas_vga_inc_chr$$.getContext("2d")), $font_image_data$$ = 
    $font_context$$.createImageData($bitmap_width_dst_inc_col$$, $bitmap_height_put_bit$$));
    const $font_bitmap$$ = $font_image_data$$.data;
    let $i_dst$$ = 0, $is_visible$$;
    $bitmap_height_put_bit$$ = $font_width_dbl$$ ? function($value$jscomp$137$$) {
      $is_visible$$ = $is_visible$$ || $value$jscomp$137$$;
      $font_bitmap$$[$i_dst$$ + 3] = $value$jscomp$137$$;
      $font_bitmap$$[$i_dst$$ + 7] = $value$jscomp$137$$;
      $i_dst$$ += 8;
    } : function($value$jscomp$138$$) {
      $is_visible$$ = $is_visible$$ || $value$jscomp$138$$;
      $font_bitmap$$[$i_dst$$ + 3] = $value$jscomp$138$$;
      $i_dst$$ += 4;
    };
    $font_canvas_vga_inc_chr$$ = 32 - $font_height$$;
    const $dst_inc_row$$ = $bitmap_width_dst_inc_col$$ * ($font_height$$ - 1) * 4;
    $bitmap_width_dst_inc_col$$ = 4 * ($font_width$$ - $bitmap_width_dst_inc_col$$ * $font_height$$);
    const $dst_inc_line$$ = 1020 * $font_width$$;
    for (let $i_chr_all$$ = 0, $i_vga$$ = 0; 2048 > $i_chr_all$$; ++$i_chr_all$$, $i_vga$$ += $font_canvas_vga_inc_chr$$, $i_dst$$ += $bitmap_width_dst_inc_col$$) {
      const $i_chr$$ = $i_chr_all$$ % 256;
      $i_chr_all$$ && !$i_chr$$ && ($i_dst$$ += $dst_inc_row$$);
      $is_visible$$ = !1;
      for (let $i_line$$ = 0; $i_line$$ < $font_height$$; ++$i_line$$, ++$i_vga$$, $i_dst$$ += $dst_inc_line$$) {
        const $line_bits$$ = $vga_bitmap$$[$i_vga$$];
        for (let $i_bit$$ = 128; 0 < $i_bit$$; $i_bit$$ >>= 1) {
          $bitmap_height_put_bit$$($line_bits$$ & $i_bit$$ ? 255 : 0);
        }
        $font_width_9px$$ && $bitmap_height_put_bit$$($font_copy_8th_col$$ && 192 <= $i_chr$$ && 223 >= $i_chr$$ && $line_bits$$ & 1 ? 255 : 0);
      }
      $font_is_visible$$[$i_chr_all$$] = $is_visible$$ ? 1 : 0;
    }
    $font_context$$.putImageData($font_image_data$$, 0, 0);
  }
  function $elem_set_scale$$($elem$jscomp$1$$, $scale_x$jscomp$1$$, $scale_y$jscomp$1$$, $device_pixel_ratio_use_scale$$) {
    if ($scale_x$jscomp$1$$ && $scale_y$jscomp$1$$) {
      $elem$jscomp$1$$.style.width = "";
      $elem$jscomp$1$$.style.height = "";
      $device_pixel_ratio_use_scale$$ && ($elem$jscomp$1$$.style.transform = "");
      var $rectangle$$ = $elem$jscomp$1$$.getBoundingClientRect();
      $device_pixel_ratio_use_scale$$ ? $elem$jscomp$1$$.style.transform = (1 === $scale_x$jscomp$1$$ ? "" : " scaleX(" + $scale_x$jscomp$1$$ + ")") + (1 === $scale_y$jscomp$1$$ ? "" : " scaleY(" + $scale_y$jscomp$1$$ + ")") : (0 === $scale_x$jscomp$1$$ % 1 && 0 === $scale_y$jscomp$1$$ % 1 ? ($graphic_screen$$.style.imageRendering = "crisp-edges", $graphic_screen$$.style.imageRendering = "pixelated", $graphic_screen$$.style["-ms-interpolation-mode"] = "nearest-neighbor") : ($graphic_screen$$.style.imageRendering = 
      "", $graphic_screen$$.style["-ms-interpolation-mode"] = ""), $device_pixel_ratio_use_scale$$ = window.devicePixelRatio || 1, 0 !== $device_pixel_ratio_use_scale$$ % 1 && ($scale_x$jscomp$1$$ /= $device_pixel_ratio_use_scale$$, $scale_y$jscomp$1$$ /= $device_pixel_ratio_use_scale$$));
      1 !== $scale_x$jscomp$1$$ && ($elem$jscomp$1$$.style.width = $rectangle$$.width * $scale_x$jscomp$1$$ + "px");
      1 !== $scale_y$jscomp$1$$ && ($elem$jscomp$1$$.style.height = $rectangle$$.height * $scale_y$jscomp$1$$ + "px");
    }
  }
  const $screen_container$jscomp$1$$ = $options$jscomp$39$$.$container$;
  this.$screen_fill_buffer$ = $screen_fill_buffer$$;
  console.assert($screen_container$jscomp$1$$, "options.container must be provided");
  this.$o$ = 1;
  this.$s$ = 2;
  var $graphic_screen$$ = $screen_container$jscomp$1$$.getElementsByTagName("canvas")[0], $graphic_context$$ = $graphic_screen$$.getContext("2d", {alpha:!1}), $text_screen$$ = $screen_container$jscomp$1$$.getElementsByTagName("div")[0], $cursor_element$$ = document.createElement("div"), $cursor_row$$, $cursor_col$$, $scale_x$$ = void 0 !== $options$jscomp$39$$.scale ? $options$jscomp$39$$.scale : 1, $scale_y$$ = void 0 !== $options$jscomp$39$$.scale ? $options$jscomp$39$$.scale : 1, $base_scale$$ = 
  1, $changed_rows$$, $mode$jscomp$19$$, $text_mode_data$$, $text_mode_width$$, $text_mode_height$$, $offscreen_context$$, $offscreen_extra_context$$, $font_context$$, $font_image_data$$, $font_is_visible$$ = new Int8Array(2048), $font_height$$, $font_width$$, $font_width_9px$$, $font_width_dbl$$, $font_copy_8th_col$$, $font_page_a$$ = 0, $font_page_b$$ = 0, $blink_visible$$, $tm_last_update$$ = 0, $cursor_start$$, $cursor_end$$, $cursor_enabled$$, $charmap$jscomp$1$$ = $get_charmap$$module$src$lib$$($options$jscomp$39$$.encoding), 
  $timer_id$$ = 0, $paused$$ = !1;
  this.$init$ = function() {
    $cursor_element$$.classList.add("cursor");
    $cursor_element$$.style.position = "absolute";
    $cursor_element$$.style.backgroundColor = "#ccc";
    $cursor_element$$.style.width = "7px";
    $cursor_element$$.style.display = "inline-block";
    this.$g$(!1);
    this.$i$(80, 25);
    2 === $mode$jscomp$19$$ && this.$h$(720, 400);
    this.$set_scale$($scale_x$$, $scale_y$$);
    this.$timer$();
  };
  this.$make_screenshot$ = function() {
    const $image$jscomp$3$$ = new Image;
    if (1 === $mode$jscomp$19$$ || 2 === $mode$jscomp$19$$) {
      $image$jscomp$3$$.src = $graphic_screen$$.toDataURL("image/png");
    } else {
      const $char_size$$ = [9, 16], $canvas$$ = document.createElement("canvas");
      $canvas$$.width = $text_mode_width$$ * $char_size$$[0];
      $canvas$$.height = $text_mode_height$$ * $char_size$$[1];
      const $context$jscomp$2$$ = $canvas$$.getContext("2d");
      $context$jscomp$2$$.imageSmoothingEnabled = !1;
      $context$jscomp$2$$.font = window.getComputedStyle($text_screen$$).font;
      $context$jscomp$2$$.textBaseline = "top";
      for (let $y$jscomp$74$$ = 0; $y$jscomp$74$$ < $text_mode_height$$; $y$jscomp$74$$++) {
        for (let $x$jscomp$110$$ = 0; $x$jscomp$110$$ < $text_mode_width$$; $x$jscomp$110$$++) {
          const $index$jscomp$81$$ = 4 * ($y$jscomp$74$$ * $text_mode_width$$ + $x$jscomp$110$$), $character$$ = $text_mode_data$$[$index$jscomp$81$$], $fg_color$$ = $text_mode_data$$[$index$jscomp$81$$ + 3];
          $context$jscomp$2$$.fillStyle = $number_as_color$$($text_mode_data$$[$index$jscomp$81$$ + 2]);
          $context$jscomp$2$$.fillRect($x$jscomp$110$$ * $char_size$$[0], $y$jscomp$74$$ * $char_size$$[1], $char_size$$[0], $char_size$$[1]);
          $context$jscomp$2$$.fillStyle = $number_as_color$$($fg_color$$);
          $context$jscomp$2$$.fillText($charmap$jscomp$1$$[$character$$], $x$jscomp$110$$ * $char_size$$[0], $y$jscomp$74$$ * $char_size$$[1]);
        }
      }
      "none" !== $cursor_element$$.style.display && $cursor_row$$ < $text_mode_height$$ && $cursor_col$$ < $text_mode_width$$ && ($context$jscomp$2$$.fillStyle = $cursor_element$$.style.backgroundColor, $context$jscomp$2$$.fillRect($cursor_col$$ * $char_size$$[0], $cursor_row$$ * $char_size$$[1] + parseInt($cursor_element$$.style.marginTop, 10), parseInt($cursor_element$$.style.width, 10), parseInt($cursor_element$$.style.height, 10)));
      $image$jscomp$3$$.src = $canvas$$.toDataURL("image/png");
    }
    return $image$jscomp$3$$;
  };
  this.$j$ = function($row$$, $col_p$$, $chr$jscomp$2$$, $flags$jscomp$9$$, $bg_color$jscomp$1$$, $fg_color$jscomp$1$$) {
    $col_p$$ = 4 * ($row$$ * $text_mode_width$$ + $col_p$$);
    $text_mode_data$$[$col_p$$] = $chr$jscomp$2$$;
    $text_mode_data$$[$col_p$$ + 1] = $flags$jscomp$9$$;
    $text_mode_data$$[$col_p$$ + 2] = $bg_color$jscomp$1$$;
    $text_mode_data$$[$col_p$$ + 3] = $fg_color$jscomp$1$$;
    $changed_rows$$[$row$$] = 1;
  };
  this.$timer$ = function() {
    $timer_id$$ = requestAnimationFrame(() => this.$I$());
  };
  this.$I$ = function() {
    $paused$$ || (0 === $mode$jscomp$19$$ ? this.$J$() : 1 === $mode$jscomp$19$$ ? this.$G$() : this.$H$());
    this.$timer$();
  };
  this.$J$ = function() {
    for (var $i$jscomp$50$$ = 0; $i$jscomp$50$$ < $text_mode_height$$; $i$jscomp$50$$++) {
      $changed_rows$$[$i$jscomp$50$$] && (this.$F$($i$jscomp$50$$), $changed_rows$$[$i$jscomp$50$$] = 0);
    }
  };
  this.$G$ = function() {
    this.$screen_fill_buffer$();
  };
  this.$H$ = function() {
    if ($offscreen_context$$) {
      var $font_canvas$jscomp$inline_261_tm_now$$ = performance.now();
      if (266 < $font_canvas$jscomp$inline_261_tm_now$$ - $tm_last_update$$) {
        $blink_visible$$ = !$blink_visible$$;
        $cursor_enabled$$ && ($changed_rows$$[$cursor_row$$] = 1);
        $offscreen_extra_canvas$jscomp$inline_262_txt_row_size$jscomp$inline_256$$ = 4 * $text_mode_width$$;
        for (let $row_i$jscomp$inline_257$$ = 0, $txt_i$jscomp$inline_258$$ = 0; $row_i$jscomp$inline_257$$ < $text_mode_height$$; ++$row_i$jscomp$inline_257$$) {
          if ($changed_rows$$[$row_i$jscomp$inline_257$$]) {
            $txt_i$jscomp$inline_258$$ += $offscreen_extra_canvas$jscomp$inline_262_txt_row_size$jscomp$inline_256$$;
          } else {
            for ($col_i$jscomp$inline_259_txt_row_size$jscomp$inline_263$$ = 0; $col_i$jscomp$inline_259_txt_row_size$jscomp$inline_263$$ < $text_mode_width$$; ++$col_i$jscomp$inline_259_txt_row_size$jscomp$inline_263$$, $txt_i$jscomp$inline_258$$ += 4) {
              if ($text_mode_data$$[$txt_i$jscomp$inline_258$$ + 1] & 1) {
                $changed_rows$$[$row_i$jscomp$inline_257$$] = 1;
                $txt_i$jscomp$inline_258$$ += $offscreen_extra_canvas$jscomp$inline_262_txt_row_size$jscomp$inline_256$$ - 4 * $col_i$jscomp$inline_259_txt_row_size$jscomp$inline_263$$;
                break;
              }
            }
          }
        }
        $tm_last_update$$ = $font_canvas$jscomp$inline_261_tm_now$$;
      }
      $font_canvas$jscomp$inline_261_tm_now$$ = $font_context$$.canvas;
      var $offscreen_extra_canvas$jscomp$inline_262_txt_row_size$jscomp$inline_256$$ = $offscreen_extra_context$$.canvas, $col_i$jscomp$inline_259_txt_row_size$jscomp$inline_263$$ = 4 * $text_mode_width$$;
      const $gfx_width$jscomp$inline_264$$ = $text_mode_width$$ * $font_width$$, $row_extra_2_y$jscomp$inline_265$$ = $font_height$$;
      let $n_rows_rendered$jscomp$inline_266$$ = 0;
      for (let $row_i$jscomp$inline_267$$ = 0, $row_y$jscomp$inline_268$$ = 0, $txt_i$jscomp$inline_269$$ = 0; $row_i$jscomp$inline_267$$ < $text_mode_height$$; ++$row_i$jscomp$inline_267$$, $row_y$jscomp$inline_268$$ += $font_height$$) {
        if (!$changed_rows$$[$row_i$jscomp$inline_267$$]) {
          $txt_i$jscomp$inline_269$$ += $col_i$jscomp$inline_259_txt_row_size$jscomp$inline_263$$;
          continue;
        }
        ++$n_rows_rendered$jscomp$inline_266$$;
        $offscreen_extra_context$$.clearRect(0, $row_extra_2_y$jscomp$inline_265$$, $gfx_width$jscomp$inline_264$$, $font_height$$);
        let $fg_rgba$jscomp$inline_270$$, $fg_x$jscomp$inline_271$$, $bg_rgba$jscomp$inline_272$$, $bg_x$jscomp$inline_273$$;
        for (let $col_x$jscomp$inline_274$$ = 0; $col_x$jscomp$inline_274$$ < $gfx_width$jscomp$inline_264$$; $col_x$jscomp$inline_274$$ += $font_width$$, $txt_i$jscomp$inline_269$$ += 4) {
          const $chr$jscomp$inline_275$$ = $text_mode_data$$[$txt_i$jscomp$inline_269$$];
          var $chr_flags$jscomp$inline_276_chr_visible$jscomp$inline_280$$ = $text_mode_data$$[$txt_i$jscomp$inline_269$$ + 1];
          const $chr_bg_rgba$jscomp$inline_277$$ = $text_mode_data$$[$txt_i$jscomp$inline_269$$ + 2], $chr_fg_rgba$jscomp$inline_278$$ = $text_mode_data$$[$txt_i$jscomp$inline_269$$ + 3], $chr_font_page$jscomp$inline_279$$ = $chr_flags$jscomp$inline_276_chr_visible$jscomp$inline_280$$ & 2 ? $font_page_b$$ : $font_page_a$$;
          $chr_flags$jscomp$inline_276_chr_visible$jscomp$inline_280$$ = (!($chr_flags$jscomp$inline_276_chr_visible$jscomp$inline_280$$ & 1) || $blink_visible$$) && $font_is_visible$$[($chr_font_page$jscomp$inline_279$$ << 8) + $chr$jscomp$inline_275$$];
          $bg_rgba$jscomp$inline_272$$ !== $chr_bg_rgba$jscomp$inline_277$$ && (void 0 !== $bg_rgba$jscomp$inline_272$$ && ($offscreen_context$$.fillStyle = $number_as_color$$($bg_rgba$jscomp$inline_272$$), $offscreen_context$$.fillRect($bg_x$jscomp$inline_273$$, $row_y$jscomp$inline_268$$, $col_x$jscomp$inline_274$$ - $bg_x$jscomp$inline_273$$, $font_height$$)), $bg_rgba$jscomp$inline_272$$ = $chr_bg_rgba$jscomp$inline_277$$, $bg_x$jscomp$inline_273$$ = $col_x$jscomp$inline_274$$);
          $fg_rgba$jscomp$inline_270$$ !== $chr_fg_rgba$jscomp$inline_278$$ && (void 0 !== $fg_rgba$jscomp$inline_270$$ && ($offscreen_extra_context$$.fillStyle = $number_as_color$$($fg_rgba$jscomp$inline_270$$), $offscreen_extra_context$$.fillRect($fg_x$jscomp$inline_271$$, 0, $col_x$jscomp$inline_274$$ - $fg_x$jscomp$inline_271$$, $font_height$$)), $fg_rgba$jscomp$inline_270$$ = $chr_fg_rgba$jscomp$inline_278$$, $fg_x$jscomp$inline_271$$ = $col_x$jscomp$inline_274$$);
          $chr_flags$jscomp$inline_276_chr_visible$jscomp$inline_280$$ && $offscreen_extra_context$$.drawImage($font_canvas$jscomp$inline_261_tm_now$$, $chr$jscomp$inline_275$$ * $font_width$$, $chr_font_page$jscomp$inline_279$$ * $font_height$$, $font_width$$, $font_height$$, $col_x$jscomp$inline_274$$, $row_extra_2_y$jscomp$inline_265$$, $font_width$$, $font_height$$);
        }
        $offscreen_extra_context$$.fillStyle = $number_as_color$$($fg_rgba$jscomp$inline_270$$);
        $offscreen_extra_context$$.fillRect($fg_x$jscomp$inline_271$$, 0, $gfx_width$jscomp$inline_264$$ - $fg_x$jscomp$inline_271$$, $font_height$$);
        $offscreen_extra_context$$.globalCompositeOperation = "destination-in";
        $offscreen_extra_context$$.drawImage($offscreen_extra_canvas$jscomp$inline_262_txt_row_size$jscomp$inline_256$$, 0, $row_extra_2_y$jscomp$inline_265$$, $gfx_width$jscomp$inline_264$$, $font_height$$, 0, 0, $gfx_width$jscomp$inline_264$$, $font_height$$);
        $offscreen_extra_context$$.globalCompositeOperation = "source-over";
        $offscreen_context$$.fillStyle = $number_as_color$$($bg_rgba$jscomp$inline_272$$);
        $offscreen_context$$.fillRect($bg_x$jscomp$inline_273$$, $row_y$jscomp$inline_268$$, $gfx_width$jscomp$inline_264$$ - $bg_x$jscomp$inline_273$$, $font_height$$);
        $offscreen_context$$.drawImage($offscreen_extra_canvas$jscomp$inline_262_txt_row_size$jscomp$inline_256$$, 0, 0, $gfx_width$jscomp$inline_264$$, $font_height$$, 0, $row_y$jscomp$inline_268$$, $gfx_width$jscomp$inline_264$$, $font_height$$);
      }
      $n_rows_rendered$jscomp$inline_266$$ && ($blink_visible$$ && $cursor_enabled$$ && $changed_rows$$[$cursor_row$$] && ($offscreen_context$$.fillStyle = $number_as_color$$($text_mode_data$$[4 * ($cursor_row$$ * $text_mode_width$$ + $cursor_col$$) + 3]), $offscreen_context$$.fillRect($cursor_col$$ * $font_width$$, $cursor_row$$ * $font_height$$ + $cursor_start$$, $font_width$$, $cursor_end$$ - $cursor_start$$ + 1)), $changed_rows$$.fill(0));
      $n_rows_rendered$jscomp$inline_266$$ && $graphic_context$$.drawImage($offscreen_context$$.canvas, 0, 0);
    }
  };
  this.$destroy$ = function() {
    $timer_id$$ && (cancelAnimationFrame($timer_id$$), $timer_id$$ = 0);
  };
  this.pause = function() {
    $paused$$ = !0;
    $cursor_element$$.classList.remove("blinking-cursor");
  };
  this.continue = function() {
    $paused$$ = !1;
    $cursor_element$$.classList.add("blinking-cursor");
  };
  this.$g$ = function($graphical$$) {
    $mode$jscomp$19$$ = $graphical$$ ? 1 : $options$jscomp$39$$.$use_graphical_text$ ? 2 : 0;
    0 === $mode$jscomp$19$$ ? ($text_screen$$.style.display = "block", $graphic_screen$$.style.display = "none") : ($text_screen$$.style.display = "none", $graphic_screen$$.style.display = "block", 2 === $mode$jscomp$19$$ && $changed_rows$$ && $changed_rows$$.fill(1));
  };
  this.$u$ = function($height$jscomp$25$$, $width_9px$$, $width_dbl$$, $copy_8th_col$$, $vga_bitmap$jscomp$1$$, $size_changed_vga_bitmap_changed$$) {
    const $width$jscomp$28$$ = $width_dbl$$ ? 16 : $width_9px$$ ? 9 : 8;
    if ($font_height$$ !== $height$jscomp$25$$ || $font_width$$ !== $width$jscomp$28$$ || $font_width_9px$$ !== $width_9px$$ || $font_width_dbl$$ !== $width_dbl$$ || $font_copy_8th_col$$ !== $copy_8th_col$$ || $size_changed_vga_bitmap_changed$$) {
      $size_changed_vga_bitmap_changed$$ = $font_width$$ !== $width$jscomp$28$$ || $font_height$$ !== $height$jscomp$25$$, $font_height$$ = $height$jscomp$25$$, $font_width$$ = $width$jscomp$28$$, $font_width_9px$$ = $width_9px$$, $font_width_dbl$$ = $width_dbl$$, $font_copy_8th_col$$ = $copy_8th_col$$, 2 === $mode$jscomp$19$$ && ($render_font_bitmap$$($vga_bitmap$jscomp$1$$), $changed_rows$$.fill(1), $size_changed_vga_bitmap_changed$$ && this.$D$());
    }
  };
  this.$v$ = function($page_a$$, $page_b$$) {
    if ($font_page_a$$ !== $page_a$$ || $font_page_b$$ !== $page_b$$) {
      $font_page_a$$ = $page_a$$, $font_page_b$$ = $page_b$$, $changed_rows$$.fill(1);
    }
  };
  this.$C$ = function() {
    $graphic_context$$.fillStyle = "#000";
    $graphic_context$$.fillRect(0, 0, $graphic_screen$$.width, $graphic_screen$$.height);
  };
  this.$D$ = function() {
    if ($font_context$$) {
      var $gfx_width$jscomp$1$$ = $font_width$$ * $text_mode_width$$, $gfx_height$$ = $font_height$$ * $text_mode_height$$, $offscreen_extra_height$$ = 2 * $font_height$$;
      $offscreen_context$$ && $offscreen_context$$.canvas.width === $gfx_width$jscomp$1$$ && $offscreen_context$$.canvas.height === $gfx_height$$ && $offscreen_extra_context$$.canvas.height === $offscreen_extra_height$$ || ($offscreen_context$$ ? ($offscreen_context$$.canvas.width = $gfx_width$jscomp$1$$, $offscreen_context$$.canvas.height = $gfx_height$$, $offscreen_extra_context$$.canvas.width = $gfx_width$jscomp$1$$, $offscreen_extra_context$$.canvas.height = $offscreen_extra_height$$) : ($offscreen_context$$ = 
      (new OffscreenCanvas($gfx_width$jscomp$1$$, $gfx_height$$)).getContext("2d", {alpha:!1}), $offscreen_extra_context$$ = (new OffscreenCanvas($gfx_width$jscomp$1$$, $offscreen_extra_height$$)).getContext("2d")), this.$h$($gfx_width$jscomp$1$$, $gfx_height$$), $changed_rows$$.fill(1));
    }
  };
  this.$i$ = function($cols_i$jscomp$51$$, $rows$$) {
    if ($cols_i$jscomp$51$$ !== $text_mode_width$$ || $rows$$ !== $text_mode_height$$) {
      if ($changed_rows$$ = new Int8Array($rows$$), $text_mode_data$$ = new Int32Array($cols_i$jscomp$51$$ * $rows$$ * 4), $text_mode_width$$ = $cols_i$jscomp$51$$, $text_mode_height$$ = $rows$$, 0 === $mode$jscomp$19$$) {
        for (; $text_screen$$.childNodes.length > $rows$$;) {
          $text_screen$$.removeChild($text_screen$$.firstChild);
        }
        for (; $text_screen$$.childNodes.length < $rows$$;) {
          $text_screen$$.appendChild(document.createElement("div"));
        }
        for ($cols_i$jscomp$51$$ = 0; $cols_i$jscomp$51$$ < $rows$$; $cols_i$jscomp$51$$++) {
          this.$F$($cols_i$jscomp$51$$);
        }
        $elem_set_scale$$($text_screen$$, $scale_x$$, $scale_y$$, !0);
      } else {
        2 === $mode$jscomp$19$$ && this.$D$();
      }
    }
  };
  this.$h$ = function($width$jscomp$29$$, $height$jscomp$26$$) {
    $graphic_screen$$.style.display = "block";
    $graphic_screen$$.width = $width$jscomp$29$$;
    $graphic_screen$$.height = $height$jscomp$26$$;
    $graphic_context$$.imageSmoothingEnabled = !1;
    $base_scale$$ = 640 >= $width$jscomp$29$$ && 2 * $width$jscomp$29$$ < window.innerWidth * window.devicePixelRatio && 2 * $height$jscomp$26$$ < window.innerHeight * window.devicePixelRatio ? 2 : 1;
    $elem_set_scale$$($graphic_screen$$, $scale_x$$ * $base_scale$$, $scale_y$$ * $base_scale$$, !1);
  };
  this.$set_scale$ = function($s_x$$, $s_y$$) {
    $scale_x$$ = $s_x$$;
    $scale_y$$ = $s_y$$;
    $elem_set_scale$$($text_screen$$, $scale_x$$, $scale_y$$, !0);
    $elem_set_scale$$($graphic_screen$$, $scale_x$$ * $base_scale$$, $scale_y$$ * $base_scale$$, !1);
  };
  this.$B$ = function($start$jscomp$25$$, $end$jscomp$14$$, $enabled$jscomp$3$$) {
    if ($start$jscomp$25$$ !== $cursor_start$$ || $end$jscomp$14$$ !== $cursor_end$$ || $enabled$jscomp$3$$ !== $cursor_enabled$$) {
      0 === $mode$jscomp$19$$ ? $enabled$jscomp$3$$ ? ($cursor_element$$.style.display = "inline", $cursor_element$$.style.height = $end$jscomp$14$$ - $start$jscomp$25$$ + "px", $cursor_element$$.style.marginTop = $start$jscomp$25$$ + "px") : $cursor_element$$.style.display = "none" : 2 === $mode$jscomp$19$$ && $cursor_row$$ < $text_mode_height$$ && ($changed_rows$$[$cursor_row$$] = 1), $cursor_start$$ = $start$jscomp$25$$, $cursor_end$$ = $end$jscomp$14$$, $cursor_enabled$$ = $enabled$jscomp$3$$;
    }
  };
  this.$A$ = function($row$jscomp$1$$, $col$jscomp$1$$) {
    if ($row$jscomp$1$$ !== $cursor_row$$ || $col$jscomp$1$$ !== $cursor_col$$) {
      $row$jscomp$1$$ < $text_mode_height$$ && ($changed_rows$$[$row$jscomp$1$$] = 1), $cursor_row$$ < $text_mode_height$$ && ($changed_rows$$[$cursor_row$$] = 1), $cursor_row$$ = $row$jscomp$1$$, $cursor_col$$ = $col$jscomp$1$$;
    }
  };
  this.$F$ = function($row$jscomp$2$$) {
    var $offset$jscomp$48$$ = 4 * $row$jscomp$2$$ * $text_mode_width$$, $text$jscomp$12$$;
    var $row_element$$ = $text_screen$$.childNodes[$row$jscomp$2$$];
    var $fragment$$ = document.createElement("div");
    for (var $i$jscomp$52$$ = 0; $i$jscomp$52$$ < $text_mode_width$$;) {
      var $color_element$$ = document.createElement("span");
      var $blinking$$ = $text_mode_data$$[$offset$jscomp$48$$ + 1] & 1;
      var $bg_color$jscomp$2$$ = $text_mode_data$$[$offset$jscomp$48$$ + 2];
      var $fg_color$jscomp$2$$ = $text_mode_data$$[$offset$jscomp$48$$ + 3];
      $blinking$$ && $color_element$$.classList.add("blink");
      $color_element$$.style.backgroundColor = $number_as_color$$($bg_color$jscomp$2$$);
      $color_element$$.style.color = $number_as_color$$($fg_color$jscomp$2$$);
      for ($text$jscomp$12$$ = ""; $i$jscomp$52$$ < $text_mode_width$$ && ($text_mode_data$$[$offset$jscomp$48$$ + 1] & 1) === $blinking$$ && $text_mode_data$$[$offset$jscomp$48$$ + 2] === $bg_color$jscomp$2$$ && $text_mode_data$$[$offset$jscomp$48$$ + 3] === $fg_color$jscomp$2$$;) {
        if ($text$jscomp$12$$ += $charmap$jscomp$1$$[$text_mode_data$$[$offset$jscomp$48$$]], $i$jscomp$52$$++, $offset$jscomp$48$$ += 4, $row$jscomp$2$$ === $cursor_row$$) {
          if ($i$jscomp$52$$ === $cursor_col$$) {
            break;
          } else {
            if ($i$jscomp$52$$ === $cursor_col$$ + 1) {
              $cursor_element$$.style.backgroundColor = $color_element$$.style.color;
              $fragment$$.appendChild($cursor_element$$);
              break;
            }
          }
        }
      }
      $color_element$$.textContent = $text$jscomp$12$$;
      $fragment$$.appendChild($color_element$$);
    }
    $row_element$$.parentNode.replaceChild($fragment$$, $row_element$$);
  };
  this.$l$ = function($layers$$) {
    for (const $layer$jscomp$3$$ of $layers$$) {
      $graphic_context$$.putImageData($layer$jscomp$3$$.$image_data$, $layer$jscomp$3$$.$screen_x$ - $layer$jscomp$3$$.$buffer_x$, $layer$jscomp$3$$.$screen_y$ - $layer$jscomp$3$$.$buffer_y$, $layer$jscomp$3$$.$buffer_x$, $layer$jscomp$3$$.$buffer_y$, $layer$jscomp$3$$.$buffer_width$, $layer$jscomp$3$$.$buffer_height$);
    }
  };
  this.$init$();
}
;function $DummyScreenAdapter$$module$src$browser$dummy_screen$$() {
  var $text_mode_data$jscomp$1$$, $text_mode_width$jscomp$1$$ = 0, $text_mode_height$jscomp$1$$ = 0;
  this.$j$ = function($row$jscomp$4$$, $col$jscomp$2$$, $chr$jscomp$4$$) {
    $text_mode_data$jscomp$1$$[$row$jscomp$4$$ * $text_mode_width$jscomp$1$$ + $col$jscomp$2$$] = $chr$jscomp$4$$;
  };
  this.$destroy$ = function() {
  };
  this.pause = function() {
  };
  this.continue = function() {
  };
  this.$g$ = function() {
  };
  this.$u$ = function() {
  };
  this.$v$ = function() {
  };
  this.$C$ = function() {
  };
  this.$i$ = function($cols$jscomp$1$$, $rows$jscomp$1$$) {
    if ($cols$jscomp$1$$ !== $text_mode_width$jscomp$1$$ || $rows$jscomp$1$$ !== $text_mode_height$jscomp$1$$) {
      $text_mode_data$jscomp$1$$ = new Uint8Array($cols$jscomp$1$$ * $rows$jscomp$1$$), $text_mode_width$jscomp$1$$ = $cols$jscomp$1$$, $text_mode_height$jscomp$1$$ = $rows$jscomp$1$$;
    }
  };
  this.$h$ = function() {
  };
  this.$set_scale$ = function() {
  };
  this.$B$ = function() {
  };
  this.$A$ = function() {
  };
  this.$l$ = function() {
  };
  this.$i$(80, 25);
}
;function $SerialAdapter$$module$src$browser$serial$$($element$jscomp$8$$, $bus$jscomp$12$$) {
  function $keypress_handler$$($e$jscomp$36$$) {
    $serial$$.$bus$ && $serial$$.enabled && ($serial$$.$h$($e$jscomp$36$$.which), $e$jscomp$36$$.preventDefault());
  }
  function $keydown_handler$jscomp$1$$($e$jscomp$37$$) {
    var $chr$jscomp$9$$ = $e$jscomp$37$$.which;
    8 === $chr$jscomp$9$$ ? ($serial$$.$h$(127), $e$jscomp$37$$.preventDefault()) : 9 === $chr$jscomp$9$$ && ($serial$$.$h$(9), $e$jscomp$37$$.preventDefault());
  }
  function $paste_handler$$($e$jscomp$38$$) {
    if ($serial$$.enabled) {
      for (var $data$jscomp$143$$ = $e$jscomp$38$$.clipboardData.getData("text/plain"), $i$jscomp$56$$ = 0; $i$jscomp$56$$ < $data$jscomp$143$$.length; $i$jscomp$56$$++) {
        $serial$$.$h$($data$jscomp$143$$.charCodeAt($i$jscomp$56$$));
      }
      $e$jscomp$38$$.preventDefault();
    }
  }
  function $window_click_handler$$($e$jscomp$39$$) {
    $e$jscomp$39$$.target !== $element$jscomp$8$$ && $element$jscomp$8$$.blur();
  }
  var $serial$$ = this;
  this.enabled = !0;
  this.$bus$ = $bus$jscomp$12$$;
  this.text = "";
  this.$j$ = !1;
  this.$i$ = 0;
  this.$bus$.register("serial0-output-byte", function($byte$$) {
    this.$show_char$(String.fromCharCode($byte$$));
  }, this);
  this.$destroy$ = function() {
    $element$jscomp$8$$.removeEventListener("keypress", $keypress_handler$$, !1);
    $element$jscomp$8$$.removeEventListener("keydown", $keydown_handler$jscomp$1$$, !1);
    $element$jscomp$8$$.removeEventListener("paste", $paste_handler$$, !1);
    window.removeEventListener("mousedown", $window_click_handler$$, !1);
  };
  this.$init$ = function() {
    this.$destroy$();
    $element$jscomp$8$$.style.display = "block";
    $element$jscomp$8$$.addEventListener("keypress", $keypress_handler$$, !1);
    $element$jscomp$8$$.addEventListener("keydown", $keydown_handler$jscomp$1$$, !1);
    $element$jscomp$8$$.addEventListener("paste", $paste_handler$$, !1);
    window.addEventListener("mousedown", $window_click_handler$$, !1);
  };
  this.$init$();
  this.$show_char$ = function($chr$jscomp$7$$) {
    "\b" === $chr$jscomp$7$$ ? (this.text = this.text.slice(0, -1), this.update()) : "\r" !== $chr$jscomp$7$$ && (this.text += $chr$jscomp$7$$, "\n" === $chr$jscomp$7$$ && (this.$j$ = !0), this.update());
  };
  this.update = function() {
    var $now$jscomp$8$$ = Date.now(), $delta$jscomp$3$$ = $now$jscomp$8$$ - this.$i$;
    16 > $delta$jscomp$3$$ ? void 0 === this.$g$ && (this.$g$ = setTimeout(() => {
      this.$g$ = void 0;
      this.$i$ = Date.now();
      this.$l$();
    }, 16 - $delta$jscomp$3$$)) : (void 0 !== this.$g$ && (clearTimeout(this.$g$), this.$g$ = void 0), this.$i$ = $now$jscomp$8$$, this.$l$());
  };
  this.$l$ = function() {
    $element$jscomp$8$$.value = this.text;
    this.$j$ && (this.$j$ = !1, $element$jscomp$8$$.scrollTop = 1e9);
  };
  this.$h$ = function($chr_code$$) {
    $serial$$.$bus$ && $serial$$.$bus$.send("serial0-input", $chr_code$$);
  };
}
function $SerialAdapterXtermJS$$module$src$browser$serial$$($element$jscomp$9$$, $bus$jscomp$14$$) {
  this.element = $element$jscomp$9$$;
  if (window.Terminal) {
    var $term$$ = this.$g$ = new window.Terminal({logLevel:"off", convertEol:"true", });
    $term$$.write("This is the serial console. Whatever you type or paste here will be sent to COM1");
    var $on_data_disposable$$ = $term$$.onData(function($data$jscomp$144$$) {
      for (let $i$jscomp$57$$ = 0; $i$jscomp$57$$ < $data$jscomp$144$$.length; $i$jscomp$57$$++) {
        $bus$jscomp$14$$.send("serial0-input", $data$jscomp$144$$.charCodeAt($i$jscomp$57$$));
      }
    });
    $bus$jscomp$14$$.register("serial0-output-byte", function($byte$jscomp$2$$) {
      $term$$.write(Uint8Array.of($byte$jscomp$2$$));
    }, this);
    this.$destroy$ = function() {
      $on_data_disposable$$.dispose();
      $term$$.dispose();
    };
  }
}
$SerialAdapterXtermJS$$module$src$browser$serial$$.prototype.show = function() {
  this.$g$ && this.$g$.open(this.element);
};
function $InBrowserNetworkAdapter$$module$src$browser$inbrowser_network$$($bus$jscomp$15$$, $config$jscomp$4_id$jscomp$6$$) {
  $config$jscomp$4_id$jscomp$6$$ = $config$jscomp$4_id$jscomp$6$$.id || 0;
  this.$bus$ = $bus$jscomp$15$$;
  this.$h$ = `net${$config$jscomp$4_id$jscomp$6$$}-send`;
  this.$o$ = `net${$config$jscomp$4_id$jscomp$6$$}-receive`;
  this.$g$ = new BroadcastChannel(`v86-inbrowser-${$config$jscomp$4_id$jscomp$6$$}`);
  this.$j$ = !0;
  this.$l$ = $eth_frame$jscomp$2$$ => {
    this.$g$.postMessage($eth_frame$jscomp$2$$);
  };
  this.$bus$.register(this.$h$, this.$l$, this);
  this.$i$ = $ev$jscomp$2$$ => {
    this.$bus$.send(this.$o$, $ev$jscomp$2$$.data);
  };
  this.$g$.addEventListener("message", this.$i$);
}
$InBrowserNetworkAdapter$$module$src$browser$inbrowser_network$$.prototype.$destroy$ = function() {
  this.$j$ && (this.$bus$.unregister(this.$h$, this.$l$), this.$g$.removeEventListener("message", this.$i$), this.$g$.close(), this.$j$ = !1);
};
function $MemoryFileStorage$$module$src$browser$filestorage$$() {
  this.$h$ = new Map;
}
$MemoryFileStorage$$module$src$browser$filestorage$$.prototype.read = async function($data$jscomp$146_sha256sum$jscomp$3$$, $offset$jscomp$50$$, $count$jscomp$48$$) {
  return ($data$jscomp$146_sha256sum$jscomp$3$$ = this.$h$.get($data$jscomp$146_sha256sum$jscomp$3$$)) ? $data$jscomp$146_sha256sum$jscomp$3$$.subarray($offset$jscomp$50$$, $offset$jscomp$50$$ + $count$jscomp$48$$) : null;
};
$MemoryFileStorage$$module$src$browser$filestorage$$.prototype.cache = async function($sha256sum$jscomp$4$$, $data$jscomp$147$$) {
  this.$h$.set($sha256sum$jscomp$4$$, $data$jscomp$147$$);
};
$MemoryFileStorage$$module$src$browser$filestorage$$.prototype.$g$ = function($sha256sum$jscomp$5$$) {
  this.$h$.delete($sha256sum$jscomp$5$$);
};
function $ServerFileStorageWrapper$$module$src$browser$filestorage$$($file_storage$$, $baseurl$$) {
  $baseurl$$.endsWith("/") || ($baseurl$$ += "/");
  this.$h$ = $file_storage$$;
  this.$baseurl$ = $baseurl$$;
}
function $JSCompiler_StaticMethods_load_from_server$$($JSCompiler_StaticMethods_load_from_server$self$$, $sha256sum$jscomp$6$$) {
  return new Promise($resolve$jscomp$1$$ => {
    $load_file$$module$src$lib$$($JSCompiler_StaticMethods_load_from_server$self$$.$baseurl$ + $sha256sum$jscomp$6$$, {done:async $buffer$jscomp$37_data$jscomp$148$$ => {
      $buffer$jscomp$37_data$jscomp$148$$ = new Uint8Array($buffer$jscomp$37_data$jscomp$148$$);
      await $JSCompiler_StaticMethods_load_from_server$self$$.cache($sha256sum$jscomp$6$$, $buffer$jscomp$37_data$jscomp$148$$);
      $resolve$jscomp$1$$($buffer$jscomp$37_data$jscomp$148$$);
    }});
  });
}
$ServerFileStorageWrapper$$module$src$browser$filestorage$$.prototype.read = async function($sha256sum$jscomp$7$$, $offset$jscomp$51$$, $count$jscomp$49$$) {
  const $data$jscomp$149$$ = await this.$h$.read($sha256sum$jscomp$7$$, $offset$jscomp$51$$, $count$jscomp$49$$);
  return $data$jscomp$149$$ ? $data$jscomp$149$$ : (await $JSCompiler_StaticMethods_load_from_server$$(this, $sha256sum$jscomp$7$$)).subarray($offset$jscomp$51$$, $offset$jscomp$51$$ + $count$jscomp$49$$);
};
$ServerFileStorageWrapper$$module$src$browser$filestorage$$.prototype.cache = async function($sha256sum$jscomp$8$$, $data$jscomp$150$$) {
  return await this.$h$.cache($sha256sum$jscomp$8$$, $data$jscomp$150$$);
};
$ServerFileStorageWrapper$$module$src$browser$filestorage$$.prototype.$g$ = function($sha256sum$jscomp$9$$) {
  this.$h$.$g$($sha256sum$jscomp$9$$);
};
const $textde$$module$lib$marshall$$ = new TextDecoder, $texten$$module$lib$marshall$$ = new TextEncoder;
function $Marshall$$module$lib$marshall$$($typelist$$, $input$jscomp$10$$, $struct$$, $offset$jscomp$52$$) {
  for (var $item$jscomp$8_stringBytes$$, $size$jscomp$30$$ = 0, $i$jscomp$58$$ = 0; $i$jscomp$58$$ < $typelist$$.length; $i$jscomp$58$$++) {
    switch($item$jscomp$8_stringBytes$$ = $input$jscomp$10$$[$i$jscomp$58$$], $typelist$$[$i$jscomp$58$$]) {
      case "w":
        $struct$$[$offset$jscomp$52$$++] = $item$jscomp$8_stringBytes$$ & 255;
        $struct$$[$offset$jscomp$52$$++] = $item$jscomp$8_stringBytes$$ >> 8 & 255;
        $struct$$[$offset$jscomp$52$$++] = $item$jscomp$8_stringBytes$$ >> 16 & 255;
        $struct$$[$offset$jscomp$52$$++] = $item$jscomp$8_stringBytes$$ >> 24 & 255;
        $size$jscomp$30$$ += 4;
        break;
      case "d":
        $struct$$[$offset$jscomp$52$$++] = $item$jscomp$8_stringBytes$$ & 255;
        $struct$$[$offset$jscomp$52$$++] = $item$jscomp$8_stringBytes$$ >> 8 & 255;
        $struct$$[$offset$jscomp$52$$++] = $item$jscomp$8_stringBytes$$ >> 16 & 255;
        $struct$$[$offset$jscomp$52$$++] = $item$jscomp$8_stringBytes$$ >> 24 & 255;
        $struct$$[$offset$jscomp$52$$++] = 0;
        $struct$$[$offset$jscomp$52$$++] = 0;
        $struct$$[$offset$jscomp$52$$++] = 0;
        $struct$$[$offset$jscomp$52$$++] = 0;
        $size$jscomp$30$$ += 8;
        break;
      case "h":
        $struct$$[$offset$jscomp$52$$++] = $item$jscomp$8_stringBytes$$ & 255;
        $struct$$[$offset$jscomp$52$$++] = $item$jscomp$8_stringBytes$$ >> 8;
        $size$jscomp$30$$ += 2;
        break;
      case "b":
        $struct$$[$offset$jscomp$52$$++] = $item$jscomp$8_stringBytes$$;
        $size$jscomp$30$$ += 1;
        break;
      case "s":
        var $lengthoffset$$ = $offset$jscomp$52$$, $length$jscomp$22$$ = 0;
        $struct$$[$offset$jscomp$52$$++] = 0;
        $struct$$[$offset$jscomp$52$$++] = 0;
        $size$jscomp$30$$ += 2;
        $item$jscomp$8_stringBytes$$ = $texten$$module$lib$marshall$$.encode($item$jscomp$8_stringBytes$$);
        $size$jscomp$30$$ += $item$jscomp$8_stringBytes$$.byteLength;
        $length$jscomp$22$$ += $item$jscomp$8_stringBytes$$.byteLength;
        $struct$$.set($item$jscomp$8_stringBytes$$, $offset$jscomp$52$$);
        $offset$jscomp$52$$ += $item$jscomp$8_stringBytes$$.byteLength;
        $struct$$[$lengthoffset$$ + 0] = $length$jscomp$22$$ & 255;
        $struct$$[$lengthoffset$$ + 1] = $length$jscomp$22$$ >> 8 & 255;
        break;
      case "Q":
        $Marshall$$module$lib$marshall$$(["b", "w", "d"], [$item$jscomp$8_stringBytes$$.type, $item$jscomp$8_stringBytes$$.version, $item$jscomp$8_stringBytes$$.path], $struct$$, $offset$jscomp$52$$), $offset$jscomp$52$$ += 13, $size$jscomp$30$$ += 13;
    }
  }
  return $size$jscomp$30$$;
}
function $Unmarshall$$module$lib$marshall$$($typelist$jscomp$1$$, $struct$jscomp$1$$, $state$jscomp$16$$) {
  let $offset$jscomp$53$$ = $state$jscomp$16$$.offset;
  for (var $output$jscomp$2$$ = [], $i$jscomp$59$$ = 0; $i$jscomp$59$$ < $typelist$jscomp$1$$.length; $i$jscomp$59$$++) {
    switch($typelist$jscomp$1$$[$i$jscomp$59$$]) {
      case "w":
        var $len$jscomp$21_qid_val$$ = $struct$jscomp$1$$[$offset$jscomp$53$$++];
        $len$jscomp$21_qid_val$$ += $struct$jscomp$1$$[$offset$jscomp$53$$++] << 8;
        $len$jscomp$21_qid_val$$ += $struct$jscomp$1$$[$offset$jscomp$53$$++] << 16;
        $len$jscomp$21_qid_val$$ += $struct$jscomp$1$$[$offset$jscomp$53$$++] << 24 >>> 0;
        $output$jscomp$2$$.push($len$jscomp$21_qid_val$$);
        break;
      case "d":
        $len$jscomp$21_qid_val$$ = $struct$jscomp$1$$[$offset$jscomp$53$$++];
        $len$jscomp$21_qid_val$$ += $struct$jscomp$1$$[$offset$jscomp$53$$++] << 8;
        $len$jscomp$21_qid_val$$ += $struct$jscomp$1$$[$offset$jscomp$53$$++] << 16;
        $len$jscomp$21_qid_val$$ += $struct$jscomp$1$$[$offset$jscomp$53$$++] << 24 >>> 0;
        $offset$jscomp$53$$ += 4;
        $output$jscomp$2$$.push($len$jscomp$21_qid_val$$);
        break;
      case "h":
        $len$jscomp$21_qid_val$$ = $struct$jscomp$1$$[$offset$jscomp$53$$++];
        $output$jscomp$2$$.push($len$jscomp$21_qid_val$$ + ($struct$jscomp$1$$[$offset$jscomp$53$$++] << 8));
        break;
      case "b":
        $output$jscomp$2$$.push($struct$jscomp$1$$[$offset$jscomp$53$$++]);
        break;
      case "s":
        $len$jscomp$21_qid_val$$ = $struct$jscomp$1$$[$offset$jscomp$53$$++];
        $len$jscomp$21_qid_val$$ += $struct$jscomp$1$$[$offset$jscomp$53$$++] << 8;
        var $stringBytes$jscomp$1$$ = $struct$jscomp$1$$.slice($offset$jscomp$53$$, $offset$jscomp$53$$ + $len$jscomp$21_qid_val$$);
        $offset$jscomp$53$$ += $len$jscomp$21_qid_val$$;
        $output$jscomp$2$$.push($textde$$module$lib$marshall$$.decode($stringBytes$jscomp$1$$));
        break;
      case "Q":
        $state$jscomp$16$$.offset = $offset$jscomp$53$$, $len$jscomp$21_qid_val$$ = $Unmarshall$$module$lib$marshall$$(["b", "w", "d"], $struct$jscomp$1$$, $state$jscomp$16$$), $offset$jscomp$53$$ = $state$jscomp$16$$.offset, $output$jscomp$2$$.push({type:$len$jscomp$21_qid_val$$[0], version:$len$jscomp$21_qid_val$$[1], path:$len$jscomp$21_qid_val$$[2], });
    }
  }
  $state$jscomp$16$$.offset = $offset$jscomp$53$$;
  return $output$jscomp$2$$;
}
;const $texten$$module$lib$filesystem$$ = new TextEncoder;
function $FS$$module$lib$filesystem$$($storage$$) {
  this.$g$ = [];
  this.$j$ = $storage$$;
  this.$s$ = {$last_qidnumber$:0};
  this.$h$ = {};
  this.$l$ = 274877906944;
  this.$o$ = 0;
  this.$i$ = [];
  $JSCompiler_StaticMethods_CreateDirectory$$(this, "", -1);
}
$FS$$module$lib$filesystem$$.prototype.$get_state$ = function() {
  let $state$jscomp$17$$ = [];
  $state$jscomp$17$$[0] = this.$g$;
  $state$jscomp$17$$[1] = this.$s$.$last_qidnumber$;
  $state$jscomp$17$$[2] = [];
  for (const [$id$jscomp$7$$, $data$jscomp$151$$] of Object.entries(this.$h$)) {
    0 === (this.$g$[$id$jscomp$7$$].mode & 16384) && $state$jscomp$17$$[2].push([$id$jscomp$7$$, $data$jscomp$151$$]);
  }
  $state$jscomp$17$$[3] = this.$l$;
  $state$jscomp$17$$[4] = this.$o$;
  return $state$jscomp$17$$ = $state$jscomp$17$$.concat(this.$i$);
};
$FS$$module$lib$filesystem$$.prototype.$set_state$ = function($state$jscomp$18$$) {
  this.$g$ = $state$jscomp$18$$[0].map($state$jscomp$19$$ => {
    const $inode$$ = new $Inode$$module$lib$filesystem$$(0);
    $inode$$.$set_state$($state$jscomp$19$$);
    return $inode$$;
  });
  this.$s$.$last_qidnumber$ = $state$jscomp$18$$[1];
  this.$h$ = {};
  for (let [$key$jscomp$40$$, $value$jscomp$139$$] of $state$jscomp$18$$[2]) {
    $value$jscomp$139$$.buffer.byteLength !== $value$jscomp$139$$.byteLength && ($value$jscomp$139$$ = $value$jscomp$139$$.slice()), this.$h$[$key$jscomp$40$$] = $value$jscomp$139$$;
  }
  this.$l$ = $state$jscomp$18$$[3];
  this.$o$ = $state$jscomp$18$$[4];
  this.$i$ = $state$jscomp$18$$.slice(5);
};
function $JSCompiler_StaticMethods_LoadRecursive$$($JSCompiler_StaticMethods_LoadRecursive$self$$, $children$jscomp$inline_290_data$jscomp$152$$, $parentid_parentid$jscomp$inline_289$$) {
  var $i$jscomp$inline_291_inode$jscomp$1$$ = $JSCompiler_StaticMethods_CreateInode$$($JSCompiler_StaticMethods_LoadRecursive$self$$);
  const $name$jscomp$83$$ = $children$jscomp$inline_290_data$jscomp$152$$[0];
  $i$jscomp$inline_291_inode$jscomp$1$$.size = $children$jscomp$inline_290_data$jscomp$152$$[1];
  $i$jscomp$inline_291_inode$jscomp$1$$.$mtime$ = $children$jscomp$inline_290_data$jscomp$152$$[2];
  $i$jscomp$inline_291_inode$jscomp$1$$.$ctime$ = $i$jscomp$inline_291_inode$jscomp$1$$.$mtime$;
  $i$jscomp$inline_291_inode$jscomp$1$$.$atime$ = $i$jscomp$inline_291_inode$jscomp$1$$.$mtime$;
  $i$jscomp$inline_291_inode$jscomp$1$$.mode = $children$jscomp$inline_290_data$jscomp$152$$[3];
  $i$jscomp$inline_291_inode$jscomp$1$$.uid = $children$jscomp$inline_290_data$jscomp$152$$[4];
  $i$jscomp$inline_291_inode$jscomp$1$$.$gid$ = $children$jscomp$inline_290_data$jscomp$152$$[5];
  var $ifmt$$ = $i$jscomp$inline_291_inode$jscomp$1$$.mode & 61440;
  if (16384 === $ifmt$$) {
    for ($JSCompiler_StaticMethods_PushInode$$($JSCompiler_StaticMethods_LoadRecursive$self$$, $i$jscomp$inline_291_inode$jscomp$1$$, $parentid_parentid$jscomp$inline_289$$, $name$jscomp$83$$), $parentid_parentid$jscomp$inline_289$$ = $JSCompiler_StaticMethods_LoadRecursive$self$$.$g$.length - 1, $children$jscomp$inline_290_data$jscomp$152$$ = $children$jscomp$inline_290_data$jscomp$152$$[6], $i$jscomp$inline_291_inode$jscomp$1$$ = 0; $i$jscomp$inline_291_inode$jscomp$1$$ < $children$jscomp$inline_290_data$jscomp$152$$.length; $i$jscomp$inline_291_inode$jscomp$1$$++) {
      $JSCompiler_StaticMethods_LoadRecursive$$($JSCompiler_StaticMethods_LoadRecursive$self$$, $children$jscomp$inline_290_data$jscomp$152$$[$i$jscomp$inline_291_inode$jscomp$1$$], $parentid_parentid$jscomp$inline_289$$);
    }
  } else {
    32768 === $ifmt$$ ? ($i$jscomp$inline_291_inode$jscomp$1$$.status = 2, $i$jscomp$inline_291_inode$jscomp$1$$.$sha256sum$ = $children$jscomp$inline_290_data$jscomp$152$$[6], $JSCompiler_StaticMethods_PushInode$$($JSCompiler_StaticMethods_LoadRecursive$self$$, $i$jscomp$inline_291_inode$jscomp$1$$, $parentid_parentid$jscomp$inline_289$$, $name$jscomp$83$$)) : 40960 === $ifmt$$ && ($i$jscomp$inline_291_inode$jscomp$1$$.$symlink$ = $children$jscomp$inline_290_data$jscomp$152$$[6], $JSCompiler_StaticMethods_PushInode$$($JSCompiler_StaticMethods_LoadRecursive$self$$, 
    $i$jscomp$inline_291_inode$jscomp$1$$, $parentid_parentid$jscomp$inline_289$$, $name$jscomp$83$$));
  }
}
function $JSCompiler_StaticMethods_link_under_dir$$($JSCompiler_StaticMethods_link_under_dir$self$$, $parentid$jscomp$2$$, $idx$$, $name$jscomp$84$$) {
  const $inode$jscomp$3$$ = $JSCompiler_StaticMethods_link_under_dir$self$$.$g$[$idx$$], $parent_inode$$ = $JSCompiler_StaticMethods_link_under_dir$self$$.$g$[$parentid$jscomp$2$$];
  $JSCompiler_StaticMethods_IsDirectory$$($JSCompiler_StaticMethods_link_under_dir$self$$, $parentid$jscomp$2$$);
  $parent_inode$$.$direntries$.has($name$jscomp$84$$);
  $parent_inode$$.$direntries$.set($name$jscomp$84$$, $idx$$);
  $inode$jscomp$3$$.$nlinks$++;
  $JSCompiler_StaticMethods_IsDirectory$$($JSCompiler_StaticMethods_link_under_dir$self$$, $idx$$) && ($inode$jscomp$3$$.$direntries$.has(".."), $inode$jscomp$3$$.$direntries$.has(".") || $inode$jscomp$3$$.$nlinks$++, $inode$jscomp$3$$.$direntries$.set(".", $idx$$), $inode$jscomp$3$$.$direntries$.set("..", $parentid$jscomp$2$$), $parent_inode$$.$nlinks$++);
}
function $JSCompiler_StaticMethods_unlink_from_dir$$($JSCompiler_StaticMethods_unlink_from_dir$self$$, $parentid$jscomp$3$$, $name$jscomp$85$$) {
  const $idx$jscomp$1$$ = $JSCompiler_StaticMethods_Search$$($JSCompiler_StaticMethods_unlink_from_dir$self$$, $parentid$jscomp$3$$, $name$jscomp$85$$), $inode$jscomp$4$$ = $JSCompiler_StaticMethods_unlink_from_dir$self$$.$g$[$idx$jscomp$1$$], $parent_inode$jscomp$1$$ = $JSCompiler_StaticMethods_unlink_from_dir$self$$.$g$[$parentid$jscomp$3$$];
  $JSCompiler_StaticMethods_IsDirectory$$($JSCompiler_StaticMethods_unlink_from_dir$self$$, $parentid$jscomp$3$$);
  $parent_inode$jscomp$1$$.$direntries$.delete($name$jscomp$85$$) && ($inode$jscomp$4$$.$nlinks$--, $JSCompiler_StaticMethods_IsDirectory$$($JSCompiler_StaticMethods_unlink_from_dir$self$$, $idx$jscomp$1$$) && ($inode$jscomp$4$$.$direntries$.get(".."), $inode$jscomp$4$$.$direntries$.delete(".."), $parent_inode$jscomp$1$$.$nlinks$--));
}
function $JSCompiler_StaticMethods_PushInode$$($JSCompiler_StaticMethods_PushInode$self$$, $inode$jscomp$5$$, $parentid$jscomp$4$$, $name$jscomp$86$$) {
  -1 !== $parentid$jscomp$4$$ ? ($JSCompiler_StaticMethods_PushInode$self$$.$g$.push($inode$jscomp$5$$), $inode$jscomp$5$$.$fid$ = $JSCompiler_StaticMethods_PushInode$self$$.$g$.length - 1, $JSCompiler_StaticMethods_link_under_dir$$($JSCompiler_StaticMethods_PushInode$self$$, $parentid$jscomp$4$$, $inode$jscomp$5$$.$fid$, $name$jscomp$86$$)) : 0 === $JSCompiler_StaticMethods_PushInode$self$$.$g$.length && ($JSCompiler_StaticMethods_PushInode$self$$.$g$.push($inode$jscomp$5$$), $inode$jscomp$5$$.$direntries$.set(".", 
  0), $inode$jscomp$5$$.$direntries$.set("..", 0), $inode$jscomp$5$$.$nlinks$ = 2);
}
function $Inode$$module$lib$filesystem$$($qidnumber$$) {
  this.$direntries$ = new Map;
  this.$minor$ = this.$major$ = this.$mtime$ = this.$atime$ = this.$ctime$ = this.$fid$ = this.$gid$ = this.uid = this.size = this.status = 0;
  this.$symlink$ = "";
  this.mode = 493;
  this.$qid$ = {type:0, version:0, path:$qidnumber$$, };
  this.$nlinks$ = 0;
  this.$sha256sum$ = "";
  this.$h$ = [];
  this.$g$ = this.$i$ = -1;
}
$Inode$$module$lib$filesystem$$.prototype.$get_state$ = function() {
  const $state$jscomp$20$$ = [];
  $state$jscomp$20$$[0] = this.mode;
  $state$jscomp$20$$[1] = 16384 === (this.mode & 61440) ? [...this.$direntries$] : 32768 === (this.mode & 61440) ? this.$sha256sum$ : 40960 === (this.mode & 61440) ? this.$symlink$ : 49152 === (this.mode & 61440) ? [this.$minor$, this.$major$] : null;
  $state$jscomp$20$$[2] = this.$h$;
  $state$jscomp$20$$[3] = this.status;
  $state$jscomp$20$$[4] = this.size;
  $state$jscomp$20$$[5] = this.uid;
  $state$jscomp$20$$[6] = this.$gid$;
  $state$jscomp$20$$[7] = this.$fid$;
  $state$jscomp$20$$[8] = this.$ctime$;
  $state$jscomp$20$$[9] = this.$atime$;
  $state$jscomp$20$$[10] = this.$mtime$;
  $state$jscomp$20$$[11] = this.$qid$.version;
  $state$jscomp$20$$[12] = this.$qid$.path;
  $state$jscomp$20$$[13] = this.$nlinks$;
  return $state$jscomp$20$$;
};
$Inode$$module$lib$filesystem$$.prototype.$set_state$ = function($state$jscomp$21$$) {
  this.mode = $state$jscomp$21$$[0];
  if (16384 === (this.mode & 61440)) {
    this.$direntries$ = new Map;
    for (const [$name$jscomp$87$$, $entry$jscomp$6$$] of $state$jscomp$21$$[1]) {
      this.$direntries$.set($name$jscomp$87$$, $entry$jscomp$6$$);
    }
  } else {
    32768 === (this.mode & 61440) ? this.$sha256sum$ = $state$jscomp$21$$[1] : 40960 === (this.mode & 61440) ? this.$symlink$ = $state$jscomp$21$$[1] : 49152 === (this.mode & 61440) && ([this.$minor$, this.$major$] = $state$jscomp$21$$[1]);
  }
  this.$h$ = [];
  for (const $lock_state$$ of $state$jscomp$21$$[2]) {
    const $lock$$ = new $FSLockRegion$$module$lib$filesystem$$;
    $lock$$.$set_state$($lock_state$$);
    this.$h$.push($lock$$);
  }
  this.status = $state$jscomp$21$$[3];
  this.size = $state$jscomp$21$$[4];
  this.uid = $state$jscomp$21$$[5];
  this.$gid$ = $state$jscomp$21$$[6];
  this.$fid$ = $state$jscomp$21$$[7];
  this.$ctime$ = $state$jscomp$21$$[8];
  this.$atime$ = $state$jscomp$21$$[9];
  this.$mtime$ = $state$jscomp$21$$[10];
  this.$qid$.type = (this.mode & 61440) >> 8;
  this.$qid$.version = $state$jscomp$21$$[11];
  this.$qid$.path = $state$jscomp$21$$[12];
  this.$nlinks$ = $state$jscomp$21$$[13];
};
function $JSCompiler_StaticMethods_copy_inode$$($src_inode$$, $dest_inode$$) {
  Object.assign($dest_inode$$, $src_inode$$, {$fid$:$dest_inode$$.$fid$, $direntries$:$dest_inode$$.$direntries$, $nlinks$:$dest_inode$$.$nlinks$, });
}
function $JSCompiler_StaticMethods_CreateInode$$($JSCompiler_StaticMethods_CreateInode$self_inode$jscomp$6$$) {
  const $now$jscomp$10$$ = Math.round(Date.now() / 1000);
  $JSCompiler_StaticMethods_CreateInode$self_inode$jscomp$6$$ = new $Inode$$module$lib$filesystem$$(++$JSCompiler_StaticMethods_CreateInode$self_inode$jscomp$6$$.$s$.$last_qidnumber$);
  $JSCompiler_StaticMethods_CreateInode$self_inode$jscomp$6$$.$atime$ = $JSCompiler_StaticMethods_CreateInode$self_inode$jscomp$6$$.$ctime$ = $JSCompiler_StaticMethods_CreateInode$self_inode$jscomp$6$$.$mtime$ = $now$jscomp$10$$;
  return $JSCompiler_StaticMethods_CreateInode$self_inode$jscomp$6$$;
}
function $JSCompiler_StaticMethods_CreateDirectory$$($JSCompiler_StaticMethods_CreateDirectory$self$$, $foreign_id_name$jscomp$89$$, $foreign_parentid_parentid$jscomp$6$$) {
  var $parent_inode$jscomp$2_x$jscomp$111$$ = $JSCompiler_StaticMethods_CreateDirectory$self$$.$g$[$foreign_parentid_parentid$jscomp$6$$];
  if (0 <= $foreign_parentid_parentid$jscomp$6$$ && 5 === $parent_inode$jscomp$2_x$jscomp$111$$.status) {
    return $foreign_parentid_parentid$jscomp$6$$ = $parent_inode$jscomp$2_x$jscomp$111$$.$g$, $foreign_id_name$jscomp$89$$ = $JSCompiler_StaticMethods_CreateDirectory$$($JSCompiler_StaticMethods_follow_fs$$($JSCompiler_StaticMethods_CreateDirectory$self$$, $parent_inode$jscomp$2_x$jscomp$111$$), $foreign_id_name$jscomp$89$$, $foreign_parentid_parentid$jscomp$6$$), $JSCompiler_StaticMethods_create_forwarder$$($JSCompiler_StaticMethods_CreateDirectory$self$$, $parent_inode$jscomp$2_x$jscomp$111$$.$i$, 
    $foreign_id_name$jscomp$89$$);
  }
  $parent_inode$jscomp$2_x$jscomp$111$$ = $JSCompiler_StaticMethods_CreateInode$$($JSCompiler_StaticMethods_CreateDirectory$self$$);
  $parent_inode$jscomp$2_x$jscomp$111$$.mode = 16895;
  0 <= $foreign_parentid_parentid$jscomp$6$$ && ($parent_inode$jscomp$2_x$jscomp$111$$.uid = $JSCompiler_StaticMethods_CreateDirectory$self$$.$g$[$foreign_parentid_parentid$jscomp$6$$].uid, $parent_inode$jscomp$2_x$jscomp$111$$.$gid$ = $JSCompiler_StaticMethods_CreateDirectory$self$$.$g$[$foreign_parentid_parentid$jscomp$6$$].$gid$, $parent_inode$jscomp$2_x$jscomp$111$$.mode = $JSCompiler_StaticMethods_CreateDirectory$self$$.$g$[$foreign_parentid_parentid$jscomp$6$$].mode & 511 | 16384);
  $parent_inode$jscomp$2_x$jscomp$111$$.$qid$.type = 64;
  $JSCompiler_StaticMethods_PushInode$$($JSCompiler_StaticMethods_CreateDirectory$self$$, $parent_inode$jscomp$2_x$jscomp$111$$, $foreign_parentid_parentid$jscomp$6$$, $foreign_id_name$jscomp$89$$);
  return $JSCompiler_StaticMethods_CreateDirectory$self$$.$g$.length - 1;
}
function $JSCompiler_StaticMethods_CreateFile$$($JSCompiler_StaticMethods_CreateFile$self$$, $filename$jscomp$7_foreign_id$jscomp$1$$, $foreign_parentid$jscomp$1_parentid$jscomp$7$$) {
  var $parent_inode$jscomp$3_x$jscomp$112$$ = $JSCompiler_StaticMethods_CreateFile$self$$.$g$[$foreign_parentid$jscomp$1_parentid$jscomp$7$$];
  if (5 === $parent_inode$jscomp$3_x$jscomp$112$$.status) {
    return $foreign_parentid$jscomp$1_parentid$jscomp$7$$ = $parent_inode$jscomp$3_x$jscomp$112$$.$g$, $filename$jscomp$7_foreign_id$jscomp$1$$ = $JSCompiler_StaticMethods_CreateFile$$($JSCompiler_StaticMethods_follow_fs$$($JSCompiler_StaticMethods_CreateFile$self$$, $parent_inode$jscomp$3_x$jscomp$112$$), $filename$jscomp$7_foreign_id$jscomp$1$$, $foreign_parentid$jscomp$1_parentid$jscomp$7$$), $JSCompiler_StaticMethods_create_forwarder$$($JSCompiler_StaticMethods_CreateFile$self$$, $parent_inode$jscomp$3_x$jscomp$112$$.$i$, 
    $filename$jscomp$7_foreign_id$jscomp$1$$);
  }
  $parent_inode$jscomp$3_x$jscomp$112$$ = $JSCompiler_StaticMethods_CreateInode$$($JSCompiler_StaticMethods_CreateFile$self$$);
  $parent_inode$jscomp$3_x$jscomp$112$$.uid = $JSCompiler_StaticMethods_CreateFile$self$$.$g$[$foreign_parentid$jscomp$1_parentid$jscomp$7$$].uid;
  $parent_inode$jscomp$3_x$jscomp$112$$.$gid$ = $JSCompiler_StaticMethods_CreateFile$self$$.$g$[$foreign_parentid$jscomp$1_parentid$jscomp$7$$].$gid$;
  $parent_inode$jscomp$3_x$jscomp$112$$.$qid$.type = 128;
  $parent_inode$jscomp$3_x$jscomp$112$$.mode = $JSCompiler_StaticMethods_CreateFile$self$$.$g$[$foreign_parentid$jscomp$1_parentid$jscomp$7$$].mode & 438 | 32768;
  $JSCompiler_StaticMethods_PushInode$$($JSCompiler_StaticMethods_CreateFile$self$$, $parent_inode$jscomp$3_x$jscomp$112$$, $foreign_parentid$jscomp$1_parentid$jscomp$7$$, $filename$jscomp$7_foreign_id$jscomp$1$$);
  return $JSCompiler_StaticMethods_CreateFile$self$$.$g$.length - 1;
}
function $JSCompiler_StaticMethods_CreateNode$$($JSCompiler_StaticMethods_CreateNode$self$$, $filename$jscomp$8_foreign_id$jscomp$2$$, $foreign_parentid$jscomp$2_parentid$jscomp$8$$, $major$$, $minor$$) {
  var $parent_inode$jscomp$4_x$jscomp$113$$ = $JSCompiler_StaticMethods_CreateNode$self$$.$g$[$foreign_parentid$jscomp$2_parentid$jscomp$8$$];
  if (5 === $parent_inode$jscomp$4_x$jscomp$113$$.status) {
    return $foreign_parentid$jscomp$2_parentid$jscomp$8$$ = $parent_inode$jscomp$4_x$jscomp$113$$.$g$, $filename$jscomp$8_foreign_id$jscomp$2$$ = $JSCompiler_StaticMethods_CreateNode$$($JSCompiler_StaticMethods_follow_fs$$($JSCompiler_StaticMethods_CreateNode$self$$, $parent_inode$jscomp$4_x$jscomp$113$$), $filename$jscomp$8_foreign_id$jscomp$2$$, $foreign_parentid$jscomp$2_parentid$jscomp$8$$, $major$$, $minor$$), $JSCompiler_StaticMethods_create_forwarder$$($JSCompiler_StaticMethods_CreateNode$self$$, 
    $parent_inode$jscomp$4_x$jscomp$113$$.$i$, $filename$jscomp$8_foreign_id$jscomp$2$$);
  }
  $parent_inode$jscomp$4_x$jscomp$113$$ = $JSCompiler_StaticMethods_CreateInode$$($JSCompiler_StaticMethods_CreateNode$self$$);
  $parent_inode$jscomp$4_x$jscomp$113$$.$major$ = $major$$;
  $parent_inode$jscomp$4_x$jscomp$113$$.$minor$ = $minor$$;
  $parent_inode$jscomp$4_x$jscomp$113$$.uid = $JSCompiler_StaticMethods_CreateNode$self$$.$g$[$foreign_parentid$jscomp$2_parentid$jscomp$8$$].uid;
  $parent_inode$jscomp$4_x$jscomp$113$$.$gid$ = $JSCompiler_StaticMethods_CreateNode$self$$.$g$[$foreign_parentid$jscomp$2_parentid$jscomp$8$$].$gid$;
  $parent_inode$jscomp$4_x$jscomp$113$$.$qid$.type = 192;
  $parent_inode$jscomp$4_x$jscomp$113$$.mode = $JSCompiler_StaticMethods_CreateNode$self$$.$g$[$foreign_parentid$jscomp$2_parentid$jscomp$8$$].mode & 438;
  $JSCompiler_StaticMethods_PushInode$$($JSCompiler_StaticMethods_CreateNode$self$$, $parent_inode$jscomp$4_x$jscomp$113$$, $foreign_parentid$jscomp$2_parentid$jscomp$8$$, $filename$jscomp$8_foreign_id$jscomp$2$$);
  return $JSCompiler_StaticMethods_CreateNode$self$$.$g$.length - 1;
}
function $JSCompiler_StaticMethods_CreateSymlink$$($JSCompiler_StaticMethods_CreateSymlink$self$$, $filename$jscomp$9_foreign_id$jscomp$3$$, $foreign_parentid$jscomp$3_parentid$jscomp$9$$, $symlink$$) {
  var $parent_inode$jscomp$5_x$jscomp$114$$ = $JSCompiler_StaticMethods_CreateSymlink$self$$.$g$[$foreign_parentid$jscomp$3_parentid$jscomp$9$$];
  if (5 === $parent_inode$jscomp$5_x$jscomp$114$$.status) {
    return $foreign_parentid$jscomp$3_parentid$jscomp$9$$ = $parent_inode$jscomp$5_x$jscomp$114$$.$g$, $filename$jscomp$9_foreign_id$jscomp$3$$ = $JSCompiler_StaticMethods_CreateSymlink$$($JSCompiler_StaticMethods_follow_fs$$($JSCompiler_StaticMethods_CreateSymlink$self$$, $parent_inode$jscomp$5_x$jscomp$114$$), $filename$jscomp$9_foreign_id$jscomp$3$$, $foreign_parentid$jscomp$3_parentid$jscomp$9$$, $symlink$$), $JSCompiler_StaticMethods_create_forwarder$$($JSCompiler_StaticMethods_CreateSymlink$self$$, 
    $parent_inode$jscomp$5_x$jscomp$114$$.$i$, $filename$jscomp$9_foreign_id$jscomp$3$$);
  }
  $parent_inode$jscomp$5_x$jscomp$114$$ = $JSCompiler_StaticMethods_CreateInode$$($JSCompiler_StaticMethods_CreateSymlink$self$$);
  $parent_inode$jscomp$5_x$jscomp$114$$.uid = $JSCompiler_StaticMethods_CreateSymlink$self$$.$g$[$foreign_parentid$jscomp$3_parentid$jscomp$9$$].uid;
  $parent_inode$jscomp$5_x$jscomp$114$$.$gid$ = $JSCompiler_StaticMethods_CreateSymlink$self$$.$g$[$foreign_parentid$jscomp$3_parentid$jscomp$9$$].$gid$;
  $parent_inode$jscomp$5_x$jscomp$114$$.$qid$.type = 160;
  $parent_inode$jscomp$5_x$jscomp$114$$.$symlink$ = $symlink$$;
  $parent_inode$jscomp$5_x$jscomp$114$$.mode = 40960;
  $JSCompiler_StaticMethods_PushInode$$($JSCompiler_StaticMethods_CreateSymlink$self$$, $parent_inode$jscomp$5_x$jscomp$114$$, $foreign_parentid$jscomp$3_parentid$jscomp$9$$, $filename$jscomp$9_foreign_id$jscomp$3$$);
  return $JSCompiler_StaticMethods_CreateSymlink$self$$.$g$.length - 1;
}
async function $JSCompiler_StaticMethods_CreateBinaryFile$$($JSCompiler_StaticMethods_CreateBinaryFile$self$$, $filename$jscomp$11_x$jscomp$116$$, $data$jscomp$154_foreign_parentid$jscomp$5_parentid$jscomp$11$$, $buffer$jscomp$38_foreign_id$jscomp$5$$) {
  var $id$jscomp$9_parent_inode$jscomp$7$$ = $JSCompiler_StaticMethods_CreateBinaryFile$self$$.$g$[$data$jscomp$154_foreign_parentid$jscomp$5_parentid$jscomp$11$$];
  if (5 === $id$jscomp$9_parent_inode$jscomp$7$$.status) {
    return $data$jscomp$154_foreign_parentid$jscomp$5_parentid$jscomp$11$$ = $id$jscomp$9_parent_inode$jscomp$7$$.$g$, $buffer$jscomp$38_foreign_id$jscomp$5$$ = await $JSCompiler_StaticMethods_CreateBinaryFile$$($JSCompiler_StaticMethods_follow_fs$$($JSCompiler_StaticMethods_CreateBinaryFile$self$$, $id$jscomp$9_parent_inode$jscomp$7$$), $filename$jscomp$11_x$jscomp$116$$, $data$jscomp$154_foreign_parentid$jscomp$5_parentid$jscomp$11$$, $buffer$jscomp$38_foreign_id$jscomp$5$$), $JSCompiler_StaticMethods_create_forwarder$$($JSCompiler_StaticMethods_CreateBinaryFile$self$$, 
    $id$jscomp$9_parent_inode$jscomp$7$$.$i$, $buffer$jscomp$38_foreign_id$jscomp$5$$);
  }
  $id$jscomp$9_parent_inode$jscomp$7$$ = $JSCompiler_StaticMethods_CreateFile$$($JSCompiler_StaticMethods_CreateBinaryFile$self$$, $filename$jscomp$11_x$jscomp$116$$, $data$jscomp$154_foreign_parentid$jscomp$5_parentid$jscomp$11$$);
  $filename$jscomp$11_x$jscomp$116$$ = $JSCompiler_StaticMethods_CreateBinaryFile$self$$.$g$[$id$jscomp$9_parent_inode$jscomp$7$$];
  $data$jscomp$154_foreign_parentid$jscomp$5_parentid$jscomp$11$$ = new Uint8Array($buffer$jscomp$38_foreign_id$jscomp$5$$.length);
  $data$jscomp$154_foreign_parentid$jscomp$5_parentid$jscomp$11$$.set($buffer$jscomp$38_foreign_id$jscomp$5$$);
  await $JSCompiler_StaticMethods_set_data$$($JSCompiler_StaticMethods_CreateBinaryFile$self$$, $id$jscomp$9_parent_inode$jscomp$7$$, $data$jscomp$154_foreign_parentid$jscomp$5_parentid$jscomp$11$$);
  $filename$jscomp$11_x$jscomp$116$$.size = $buffer$jscomp$38_foreign_id$jscomp$5$$.length;
  return $id$jscomp$9_parent_inode$jscomp$7$$;
}
async function $JSCompiler_StaticMethods_OpenInode$$($JSCompiler_StaticMethods_OpenInode$self$$, $id$jscomp$10$$, $mode$jscomp$20$$) {
  var $inode$jscomp$7$$ = $JSCompiler_StaticMethods_OpenInode$self$$.$g$[$id$jscomp$10$$];
  if (5 === $inode$jscomp$7$$.status) {
    return await $JSCompiler_StaticMethods_OpenInode$$($JSCompiler_StaticMethods_follow_fs$$($JSCompiler_StaticMethods_OpenInode$self$$, $inode$jscomp$7$$), $inode$jscomp$7$$.$g$, $mode$jscomp$20$$);
  }
  16384 === ($inode$jscomp$7$$.mode & 61440) && $JSCompiler_StaticMethods_FillDirectory$$($JSCompiler_StaticMethods_OpenInode$self$$, $id$jscomp$10$$);
}
async function $JSCompiler_StaticMethods_CloseInode$$($JSCompiler_StaticMethods_CloseInode$self$$, $id$jscomp$11$$) {
  var $inode$jscomp$8$$ = $JSCompiler_StaticMethods_CloseInode$self$$.$g$[$id$jscomp$11$$];
  if (5 === $inode$jscomp$8$$.status) {
    return await $JSCompiler_StaticMethods_CloseInode$$($JSCompiler_StaticMethods_follow_fs$$($JSCompiler_StaticMethods_CloseInode$self$$, $inode$jscomp$8$$), $inode$jscomp$8$$.$g$);
  }
  2 === $inode$jscomp$8$$.status && $JSCompiler_StaticMethods_CloseInode$self$$.$j$.$g$($inode$jscomp$8$$.$sha256sum$);
  4 === $inode$jscomp$8$$.status && ($inode$jscomp$8$$.status = -1, await $JSCompiler_StaticMethods_DeleteData$$($JSCompiler_StaticMethods_CloseInode$self$$, $id$jscomp$11$$));
}
async function $JSCompiler_StaticMethods_Rename$$($JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$, $olddirid$$, $oldname$$, $foreign_fs_new_real_inode_newdirid$$, $foreign_id$jscomp$6_newname_ret$jscomp$5$$) {
  if ($olddirid$$ === $foreign_fs_new_real_inode_newdirid$$ && $oldname$$ === $foreign_id$jscomp$6_newname_ret$jscomp$5$$) {
    return 0;
  }
  var $oldid$$ = $JSCompiler_StaticMethods_Search$$($JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$, $olddirid$$, $oldname$$);
  if (-1 === $oldid$$) {
    return -2;
  }
  var $idx$jscomp$inline_306_newdir_ret$jscomp$2$$ = $olddirid$$;
  $JSCompiler_StaticMethods_IsDirectory$$($JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$, $idx$jscomp$inline_306_newdir_ret$jscomp$2$$);
  for (var $inode$jscomp$9_path$jscomp$inline_307$$ = ""; 0 !== $idx$jscomp$inline_306_newdir_ret$jscomp$2$$;) {
    $inode$jscomp$9_path$jscomp$inline_307$$ = "/" + $JSCompiler_StaticMethods_GetDirectoryName$$($JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$, $idx$jscomp$inline_306_newdir_ret$jscomp$2$$) + $inode$jscomp$9_path$jscomp$inline_307$$, $idx$jscomp$inline_306_newdir_ret$jscomp$2$$ = $JSCompiler_StaticMethods_GetParent$$($JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$, $idx$jscomp$inline_306_newdir_ret$jscomp$2$$);
  }
  if (-1 !== $JSCompiler_StaticMethods_Search$$($JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$, $foreign_fs_new_real_inode_newdirid$$, $foreign_id$jscomp$6_newname_ret$jscomp$5$$) && ($idx$jscomp$inline_306_newdir_ret$jscomp$2$$ = $JSCompiler_StaticMethods_Unlink$$($JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$, $foreign_fs_new_real_inode_newdirid$$, $foreign_id$jscomp$6_newname_ret$jscomp$5$$), 0 > $idx$jscomp$inline_306_newdir_ret$jscomp$2$$)) {
    return $idx$jscomp$inline_306_newdir_ret$jscomp$2$$;
  }
  $inode$jscomp$9_path$jscomp$inline_307$$ = $JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$.$g$[$oldid$$];
  var $JSCompiler_inline_result$jscomp$55_old_idx$jscomp$inline_312_olddir$$ = $JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$.$g$[$olddirid$$];
  $idx$jscomp$inline_306_newdir_ret$jscomp$2$$ = $JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$.$g$[$foreign_fs_new_real_inode_newdirid$$];
  if (5 === $JSCompiler_inline_result$jscomp$55_old_idx$jscomp$inline_312_olddir$$.status || 5 === $idx$jscomp$inline_306_newdir_ret$jscomp$2$$.status) {
    if (5 === $JSCompiler_inline_result$jscomp$55_old_idx$jscomp$inline_312_olddir$$.status && $JSCompiler_inline_result$jscomp$55_old_idx$jscomp$inline_312_olddir$$.$i$ === $idx$jscomp$inline_306_newdir_ret$jscomp$2$$.$i$) {
      if ($JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$ = await $JSCompiler_StaticMethods_Rename$$($JSCompiler_StaticMethods_follow_fs$$($JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$, $JSCompiler_inline_result$jscomp$55_old_idx$jscomp$inline_312_olddir$$), $JSCompiler_inline_result$jscomp$55_old_idx$jscomp$inline_312_olddir$$.$g$, $oldname$$, $idx$jscomp$inline_306_newdir_ret$jscomp$2$$.$g$, $foreign_id$jscomp$6_newname_ret$jscomp$5$$), 0 > $JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$) {
        return $JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$;
      }
    } else {
      if (0 === $JSCompiler_StaticMethods_GetInode$$($JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$, $oldid$$).$fid$ || !$JSCompiler_StaticMethods_IsDirectory$$($JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$, $oldid$$) && 1 < $JSCompiler_StaticMethods_GetInode$$($JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$, $oldid$$).$nlinks$) {
        return -1;
      }
      $JSCompiler_inline_result$jscomp$55_old_idx$jscomp$inline_312_olddir$$ = $JSCompiler_StaticMethods_Search$$($JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$, $olddirid$$, $oldname$$);
      var $old_inode$jscomp$inline_313_old_real_inode$$ = $JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$.$g$[$JSCompiler_inline_result$jscomp$55_old_idx$jscomp$inline_312_olddir$$], $data$jscomp$155_new_inode$jscomp$inline_314$$ = new $Inode$$module$lib$filesystem$$(-1);
      $JSCompiler_StaticMethods_IsDirectory$$($JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$, $JSCompiler_inline_result$jscomp$55_old_idx$jscomp$inline_312_olddir$$);
      Object.assign($data$jscomp$155_new_inode$jscomp$inline_314$$, $old_inode$jscomp$inline_313_old_real_inode$$);
      const $idx$jscomp$inline_315$$ = $JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$.$g$.length;
      $JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$.$g$.push($data$jscomp$155_new_inode$jscomp$inline_314$$);
      $data$jscomp$155_new_inode$jscomp$inline_314$$.$fid$ = $idx$jscomp$inline_315$$;
      5 === $old_inode$jscomp$inline_313_old_real_inode$$.status && $JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$.$i$[$old_inode$jscomp$inline_313_old_real_inode$$.$i$].$g$.set($old_inode$jscomp$inline_313_old_real_inode$$.$g$, $idx$jscomp$inline_315$$);
      if (5 !== $old_inode$jscomp$inline_313_old_real_inode$$.status || 0 === $old_inode$jscomp$inline_313_old_real_inode$$.$g$) {
        $JSCompiler_StaticMethods_unlink_from_dir$$($JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$, $olddirid$$, $oldname$$), $JSCompiler_StaticMethods_link_under_dir$$($JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$, $olddirid$$, $idx$jscomp$inline_315$$, $oldname$$);
      }
      if ($JSCompiler_StaticMethods_IsDirectory$$($JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$, $JSCompiler_inline_result$jscomp$55_old_idx$jscomp$inline_312_olddir$$) && 5 !== $old_inode$jscomp$inline_313_old_real_inode$$.status) {
        for (const [$name$jscomp$inline_316$$, $child_id$jscomp$inline_317$$] of $data$jscomp$155_new_inode$jscomp$inline_314$$.$direntries$) {
          "." !== $name$jscomp$inline_316$$ && ".." !== $name$jscomp$inline_316$$ && $JSCompiler_StaticMethods_IsDirectory$$($JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$, $child_id$jscomp$inline_317$$) && $JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$.$g$[$child_id$jscomp$inline_317$$].$direntries$.set("..", $idx$jscomp$inline_315$$);
        }
      }
      $JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$.$h$[$idx$jscomp$inline_315$$] = $JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$.$h$[$JSCompiler_inline_result$jscomp$55_old_idx$jscomp$inline_312_olddir$$];
      delete $JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$.$h$[$JSCompiler_inline_result$jscomp$55_old_idx$jscomp$inline_312_olddir$$];
      $old_inode$jscomp$inline_313_old_real_inode$$.$direntries$ = new Map;
      $old_inode$jscomp$inline_313_old_real_inode$$.$nlinks$ = 0;
      $JSCompiler_inline_result$jscomp$55_old_idx$jscomp$inline_312_olddir$$ = $idx$jscomp$inline_315$$;
      $old_inode$jscomp$inline_313_old_real_inode$$ = $JSCompiler_StaticMethods_GetInode$$($JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$, $oldid$$);
      $data$jscomp$155_new_inode$jscomp$inline_314$$ = await $JSCompiler_StaticMethods_Read$$($JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$, $JSCompiler_inline_result$jscomp$55_old_idx$jscomp$inline_312_olddir$$, 0, $old_inode$jscomp$inline_313_old_real_inode$$.size);
      5 === $idx$jscomp$inline_306_newdir_ret$jscomp$2$$.status ? ($foreign_fs_new_real_inode_newdirid$$ = $JSCompiler_StaticMethods_follow_fs$$($JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$, $idx$jscomp$inline_306_newdir_ret$jscomp$2$$), $foreign_id$jscomp$6_newname_ret$jscomp$5$$ = $JSCompiler_StaticMethods_IsDirectory$$($JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$, $JSCompiler_inline_result$jscomp$55_old_idx$jscomp$inline_312_olddir$$) ? $JSCompiler_StaticMethods_CreateDirectory$$($foreign_fs_new_real_inode_newdirid$$, 
      $foreign_id$jscomp$6_newname_ret$jscomp$5$$, $idx$jscomp$inline_306_newdir_ret$jscomp$2$$.$g$) : $JSCompiler_StaticMethods_CreateFile$$($foreign_fs_new_real_inode_newdirid$$, $foreign_id$jscomp$6_newname_ret$jscomp$5$$, $idx$jscomp$inline_306_newdir_ret$jscomp$2$$.$g$), $foreign_fs_new_real_inode_newdirid$$ = $JSCompiler_StaticMethods_GetInode$$($foreign_fs_new_real_inode_newdirid$$, $foreign_id$jscomp$6_newname_ret$jscomp$5$$), $JSCompiler_StaticMethods_copy_inode$$($old_inode$jscomp$inline_313_old_real_inode$$, 
      $foreign_fs_new_real_inode_newdirid$$), $JSCompiler_StaticMethods_set_forwarder$$($JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$, $oldid$$, $idx$jscomp$inline_306_newdir_ret$jscomp$2$$.$i$, $foreign_id$jscomp$6_newname_ret$jscomp$5$$)) : ($inode$jscomp$9_path$jscomp$inline_307$$.status = -1, $JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$.$i$[$inode$jscomp$9_path$jscomp$inline_307$$.$i$].$g$.delete($inode$jscomp$9_path$jscomp$inline_307$$.$g$), $JSCompiler_StaticMethods_copy_inode$$($old_inode$jscomp$inline_313_old_real_inode$$, 
      $inode$jscomp$9_path$jscomp$inline_307$$), $JSCompiler_StaticMethods_link_under_dir$$($JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$, $foreign_fs_new_real_inode_newdirid$$, $oldid$$, $foreign_id$jscomp$6_newname_ret$jscomp$5$$));
      await $JSCompiler_StaticMethods_ChangeSize$$($JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$, $oldid$$, $old_inode$jscomp$inline_313_old_real_inode$$.size);
      $data$jscomp$155_new_inode$jscomp$inline_314$$ && $data$jscomp$155_new_inode$jscomp$inline_314$$.length && await $JSCompiler_StaticMethods_Write$$($JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$, $oldid$$, 0, $data$jscomp$155_new_inode$jscomp$inline_314$$.length, $data$jscomp$155_new_inode$jscomp$inline_314$$);
      if ($JSCompiler_StaticMethods_IsDirectory$$($JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$, $oldid$$)) {
        for (const $child_filename$$ of $JSCompiler_StaticMethods_GetChildren$$($JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$, $JSCompiler_inline_result$jscomp$55_old_idx$jscomp$inline_312_olddir$$)) {
          if ($foreign_id$jscomp$6_newname_ret$jscomp$5$$ = await $JSCompiler_StaticMethods_Rename$$($JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$, $JSCompiler_inline_result$jscomp$55_old_idx$jscomp$inline_312_olddir$$, $child_filename$$, $oldid$$, $child_filename$$), 0 > $foreign_id$jscomp$6_newname_ret$jscomp$5$$) {
            return $foreign_id$jscomp$6_newname_ret$jscomp$5$$;
          }
        }
      }
      await $JSCompiler_StaticMethods_DeleteData$$($JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$, $JSCompiler_inline_result$jscomp$55_old_idx$jscomp$inline_312_olddir$$);
      $JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$ = $JSCompiler_StaticMethods_Unlink$$($JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$, $olddirid$$, $oldname$$);
      if (0 > $JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$) {
        return $JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$;
      }
    }
  } else {
    $JSCompiler_StaticMethods_unlink_from_dir$$($JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$, $olddirid$$, $oldname$$), $JSCompiler_StaticMethods_link_under_dir$$($JSCompiler_StaticMethods_Rename$self_ret$jscomp$3_ret$jscomp$4$$, $foreign_fs_new_real_inode_newdirid$$, $oldid$$, $foreign_id$jscomp$6_newname_ret$jscomp$5$$), $inode$jscomp$9_path$jscomp$inline_307$$.$qid$.version++;
  }
  return 0;
}
async function $JSCompiler_StaticMethods_Write$$($JSCompiler_StaticMethods_Write$self$$, $foreign_id$jscomp$7_id$jscomp$12$$, $offset$jscomp$54$$, $count$jscomp$50$$, $buffer$jscomp$39$$) {
  var $inode$jscomp$10$$ = $JSCompiler_StaticMethods_Write$self$$.$g$[$foreign_id$jscomp$7_id$jscomp$12$$];
  if (5 === $inode$jscomp$10$$.status) {
    $foreign_id$jscomp$7_id$jscomp$12$$ = $inode$jscomp$10$$.$g$, await $JSCompiler_StaticMethods_Write$$($JSCompiler_StaticMethods_follow_fs$$($JSCompiler_StaticMethods_Write$self$$, $inode$jscomp$10$$), $foreign_id$jscomp$7_id$jscomp$12$$, $offset$jscomp$54$$, $count$jscomp$50$$, $buffer$jscomp$39$$);
  } else {
    var $data$jscomp$156$$ = await $JSCompiler_StaticMethods_Write$self$$.$get_buffer$($foreign_id$jscomp$7_id$jscomp$12$$);
    !$data$jscomp$156$$ || $data$jscomp$156$$.length < $offset$jscomp$54$$ + $count$jscomp$50$$ ? (await $JSCompiler_StaticMethods_ChangeSize$$($JSCompiler_StaticMethods_Write$self$$, $foreign_id$jscomp$7_id$jscomp$12$$, Math.floor(3 * ($offset$jscomp$54$$ + $count$jscomp$50$$) / 2)), $inode$jscomp$10$$.size = $offset$jscomp$54$$ + $count$jscomp$50$$, $data$jscomp$156$$ = await $JSCompiler_StaticMethods_Write$self$$.$get_buffer$($foreign_id$jscomp$7_id$jscomp$12$$)) : $inode$jscomp$10$$.size < $offset$jscomp$54$$ + 
    $count$jscomp$50$$ && ($inode$jscomp$10$$.size = $offset$jscomp$54$$ + $count$jscomp$50$$);
    $buffer$jscomp$39$$ && $data$jscomp$156$$.set($buffer$jscomp$39$$.subarray(0, $count$jscomp$50$$), $offset$jscomp$54$$);
    await $JSCompiler_StaticMethods_set_data$$($JSCompiler_StaticMethods_Write$self$$, $foreign_id$jscomp$7_id$jscomp$12$$, $data$jscomp$156$$);
  }
}
async function $JSCompiler_StaticMethods_Read$$($JSCompiler_StaticMethods_Read$self$$, $foreign_id$jscomp$8_inodeid$$, $offset$jscomp$55$$, $count$jscomp$51$$) {
  const $inode$jscomp$11$$ = $JSCompiler_StaticMethods_Read$self$$.$g$[$foreign_id$jscomp$8_inodeid$$];
  return 5 === $inode$jscomp$11$$.status ? ($foreign_id$jscomp$8_inodeid$$ = $inode$jscomp$11$$.$g$, await $JSCompiler_StaticMethods_Read$$($JSCompiler_StaticMethods_follow_fs$$($JSCompiler_StaticMethods_Read$self$$, $inode$jscomp$11$$), $foreign_id$jscomp$8_inodeid$$, $offset$jscomp$55$$, $count$jscomp$51$$)) : await $JSCompiler_StaticMethods_get_data$$($JSCompiler_StaticMethods_Read$self$$, $foreign_id$jscomp$8_inodeid$$, $offset$jscomp$55$$, $count$jscomp$51$$);
}
function $JSCompiler_StaticMethods_Search$$($JSCompiler_StaticMethods_Search$self_childid$$, $parent_inode$jscomp$8_parentid$jscomp$12$$, $foreign_id$jscomp$9_name$jscomp$90$$) {
  $parent_inode$jscomp$8_parentid$jscomp$12$$ = $JSCompiler_StaticMethods_Search$self_childid$$.$g$[$parent_inode$jscomp$8_parentid$jscomp$12$$];
  if (5 === $parent_inode$jscomp$8_parentid$jscomp$12$$.status) {
    const $foreign_parentid$jscomp$6$$ = $parent_inode$jscomp$8_parentid$jscomp$12$$.$g$;
    $foreign_id$jscomp$9_name$jscomp$90$$ = $JSCompiler_StaticMethods_Search$$($JSCompiler_StaticMethods_follow_fs$$($JSCompiler_StaticMethods_Search$self_childid$$, $parent_inode$jscomp$8_parentid$jscomp$12$$), $foreign_parentid$jscomp$6$$, $foreign_id$jscomp$9_name$jscomp$90$$);
    return -1 === $foreign_id$jscomp$9_name$jscomp$90$$ ? -1 : $JSCompiler_StaticMethods_get_forwarder$$($JSCompiler_StaticMethods_Search$self_childid$$, $parent_inode$jscomp$8_parentid$jscomp$12$$.$i$, $foreign_id$jscomp$9_name$jscomp$90$$);
  }
  $JSCompiler_StaticMethods_Search$self_childid$$ = $parent_inode$jscomp$8_parentid$jscomp$12$$.$direntries$.get($foreign_id$jscomp$9_name$jscomp$90$$);
  return void 0 === $JSCompiler_StaticMethods_Search$self_childid$$ ? -1 : $JSCompiler_StaticMethods_Search$self_childid$$;
}
function $JSCompiler_StaticMethods_CountUsedInodes$$($JSCompiler_StaticMethods_CountUsedInodes$self$$) {
  let $count$jscomp$52$$ = $JSCompiler_StaticMethods_CountUsedInodes$self$$.$g$.length;
  for (const {$h$:$fs$jscomp$2$$, $g$:$backtrack$$} of $JSCompiler_StaticMethods_CountUsedInodes$self$$.$i$) {
    $count$jscomp$52$$ += $JSCompiler_StaticMethods_CountUsedInodes$$($fs$jscomp$2$$), $count$jscomp$52$$ -= $backtrack$$.size;
  }
  return $count$jscomp$52$$;
}
function $JSCompiler_StaticMethods_CountFreeInodes$$($JSCompiler_StaticMethods_CountFreeInodes$self$$) {
  let $count$jscomp$53$$ = 1048576;
  for (const {$h$:$fs$jscomp$3$$} of $JSCompiler_StaticMethods_CountFreeInodes$self$$.$i$) {
    $count$jscomp$53$$ += $JSCompiler_StaticMethods_CountFreeInodes$$($fs$jscomp$3$$);
  }
  return $count$jscomp$53$$;
}
function $JSCompiler_StaticMethods_GetTotalSize$$($JSCompiler_StaticMethods_GetTotalSize$self$$) {
  let $size$jscomp$31$$ = $JSCompiler_StaticMethods_GetTotalSize$self$$.$o$;
  for (const {$h$:$fs$jscomp$4$$} of $JSCompiler_StaticMethods_GetTotalSize$self$$.$i$) {
    $size$jscomp$31$$ += $JSCompiler_StaticMethods_GetTotalSize$$($fs$jscomp$4$$);
  }
  return $size$jscomp$31$$;
}
function $JSCompiler_StaticMethods_GetSpace$$($JSCompiler_StaticMethods_GetSpace$self$$) {
  let $size$jscomp$32$$ = $JSCompiler_StaticMethods_GetSpace$self$$.$l$;
  for (const {$h$:$fs$jscomp$5$$} of $JSCompiler_StaticMethods_GetSpace$self$$.$i$) {
    $size$jscomp$32$$ += $JSCompiler_StaticMethods_GetSpace$$($fs$jscomp$5$$);
  }
  return $JSCompiler_StaticMethods_GetSpace$self$$.$l$;
}
function $JSCompiler_StaticMethods_GetDirectoryName$$($JSCompiler_StaticMethods_GetDirectoryName$self$$, $idx$jscomp$4$$) {
  const $parent_inode$jscomp$9$$ = $JSCompiler_StaticMethods_GetDirectoryName$self$$.$g$[$JSCompiler_StaticMethods_GetParent$$($JSCompiler_StaticMethods_GetDirectoryName$self$$, $idx$jscomp$4$$)];
  if (5 === $parent_inode$jscomp$9$$.status) {
    return $JSCompiler_StaticMethods_GetDirectoryName$$($JSCompiler_StaticMethods_follow_fs$$($JSCompiler_StaticMethods_GetDirectoryName$self$$, $parent_inode$jscomp$9$$), $JSCompiler_StaticMethods_GetDirectoryName$self$$.$g$[$idx$jscomp$4$$].$g$);
  }
  if (!$parent_inode$jscomp$9$$) {
    return "";
  }
  for (const [$name$jscomp$91$$, $childid$jscomp$1$$] of $parent_inode$jscomp$9$$.$direntries$) {
    if ($childid$jscomp$1$$ === $idx$jscomp$4$$) {
      return $name$jscomp$91$$;
    }
  }
  return "";
}
function $JSCompiler_StaticMethods_Link$$($JSCompiler_StaticMethods_Link$self$$, $parentid$jscomp$13$$, $targetid$$, $name$jscomp$92$$) {
  if ($JSCompiler_StaticMethods_IsDirectory$$($JSCompiler_StaticMethods_Link$self$$, $targetid$$)) {
    return -1;
  }
  const $parent_inode$jscomp$10$$ = $JSCompiler_StaticMethods_Link$self$$.$g$[$parentid$jscomp$13$$], $inode$jscomp$12$$ = $JSCompiler_StaticMethods_Link$self$$.$g$[$targetid$$];
  if (5 === $parent_inode$jscomp$10$$.status) {
    return 5 !== $inode$jscomp$12$$.status || $inode$jscomp$12$$.$i$ !== $parent_inode$jscomp$10$$.$i$ ? -1 : $JSCompiler_StaticMethods_Link$$($JSCompiler_StaticMethods_follow_fs$$($JSCompiler_StaticMethods_Link$self$$, $parent_inode$jscomp$10$$), $parent_inode$jscomp$10$$.$g$, $inode$jscomp$12$$.$g$, $name$jscomp$92$$);
  }
  if (5 === $inode$jscomp$12$$.status) {
    return -1;
  }
  $JSCompiler_StaticMethods_link_under_dir$$($JSCompiler_StaticMethods_Link$self$$, $parentid$jscomp$13$$, $targetid$$, $name$jscomp$92$$);
  return 0;
}
function $JSCompiler_StaticMethods_Unlink$$($JSCompiler_StaticMethods_Unlink$self$$, $foreign_parentid$jscomp$7_parentid$jscomp$14$$, $name$jscomp$93$$) {
  if ("." === $name$jscomp$93$$ || ".." === $name$jscomp$93$$) {
    return -1;
  }
  var $idx$jscomp$6_inode$jscomp$inline_326$$ = $JSCompiler_StaticMethods_Search$$($JSCompiler_StaticMethods_Unlink$self$$, $foreign_parentid$jscomp$7_parentid$jscomp$14$$, $name$jscomp$93$$);
  const $inode$jscomp$13$$ = $JSCompiler_StaticMethods_Unlink$self$$.$g$[$idx$jscomp$6_inode$jscomp$inline_326$$];
  var $JSCompiler_temp$jscomp$59_parent_inode$jscomp$11$$ = $JSCompiler_StaticMethods_Unlink$self$$.$g$[$foreign_parentid$jscomp$7_parentid$jscomp$14$$];
  if (5 === $JSCompiler_temp$jscomp$59_parent_inode$jscomp$11$$.status) {
    return $foreign_parentid$jscomp$7_parentid$jscomp$14$$ = $JSCompiler_temp$jscomp$59_parent_inode$jscomp$11$$.$g$, $JSCompiler_StaticMethods_Unlink$$($JSCompiler_StaticMethods_follow_fs$$($JSCompiler_StaticMethods_Unlink$self$$, $JSCompiler_temp$jscomp$59_parent_inode$jscomp$11$$), $foreign_parentid$jscomp$7_parentid$jscomp$14$$, $name$jscomp$93$$);
  }
  if ($JSCompiler_temp$jscomp$59_parent_inode$jscomp$11$$ = $JSCompiler_StaticMethods_IsDirectory$$($JSCompiler_StaticMethods_Unlink$self$$, $idx$jscomp$6_inode$jscomp$inline_326$$)) {
    a: {
      if ($idx$jscomp$6_inode$jscomp$inline_326$$ = $JSCompiler_StaticMethods_Unlink$self$$.$g$[$idx$jscomp$6_inode$jscomp$inline_326$$], 5 === $idx$jscomp$6_inode$jscomp$inline_326$$.status) {
        var $JSCompiler_inline_result$jscomp$60_name$jscomp$inline_327$$ = $JSCompiler_StaticMethods_IsDirectory$$($JSCompiler_StaticMethods_follow_fs$$($JSCompiler_StaticMethods_Unlink$self$$, $idx$jscomp$6_inode$jscomp$inline_326$$), $idx$jscomp$6_inode$jscomp$inline_326$$.$g$);
      } else {
        for ($JSCompiler_inline_result$jscomp$60_name$jscomp$inline_327$$ of $idx$jscomp$6_inode$jscomp$inline_326$$.$direntries$.keys()) {
          if ("." !== $JSCompiler_inline_result$jscomp$60_name$jscomp$inline_327$$ && ".." !== $JSCompiler_inline_result$jscomp$60_name$jscomp$inline_327$$) {
            $JSCompiler_inline_result$jscomp$60_name$jscomp$inline_327$$ = !1;
            break a;
          }
        }
        $JSCompiler_inline_result$jscomp$60_name$jscomp$inline_327$$ = !0;
      }
    }
    $JSCompiler_temp$jscomp$59_parent_inode$jscomp$11$$ = !$JSCompiler_inline_result$jscomp$60_name$jscomp$inline_327$$;
  }
  if ($JSCompiler_temp$jscomp$59_parent_inode$jscomp$11$$) {
    return -39;
  }
  $JSCompiler_StaticMethods_unlink_from_dir$$($JSCompiler_StaticMethods_Unlink$self$$, $foreign_parentid$jscomp$7_parentid$jscomp$14$$, $name$jscomp$93$$);
  0 === $inode$jscomp$13$$.$nlinks$ && ($inode$jscomp$13$$.status = 4);
  return 0;
}
async function $JSCompiler_StaticMethods_DeleteData$$($JSCompiler_StaticMethods_DeleteData$self$$, $idx$jscomp$7$$) {
  const $inode$jscomp$14$$ = $JSCompiler_StaticMethods_DeleteData$self$$.$g$[$idx$jscomp$7$$];
  5 === $inode$jscomp$14$$.status ? await $JSCompiler_StaticMethods_DeleteData$$($JSCompiler_StaticMethods_follow_fs$$($JSCompiler_StaticMethods_DeleteData$self$$, $inode$jscomp$14$$), $inode$jscomp$14$$.$g$) : ($inode$jscomp$14$$.size = 0, delete $JSCompiler_StaticMethods_DeleteData$self$$.$h$[$idx$jscomp$7$$]);
}
$FS$$module$lib$filesystem$$.prototype.$get_buffer$ = async function($idx$jscomp$8$$) {
  const $inode$jscomp$15$$ = this.$g$[$idx$jscomp$8$$];
  return this.$h$[$idx$jscomp$8$$] ? this.$h$[$idx$jscomp$8$$] : 2 === $inode$jscomp$15$$.status ? await this.$j$.read($inode$jscomp$15$$.$sha256sum$, 0, $inode$jscomp$15$$.size) : null;
};
async function $JSCompiler_StaticMethods_get_data$$($JSCompiler_StaticMethods_get_data$self$$, $idx$jscomp$9$$, $offset$jscomp$56$$, $count$jscomp$54$$) {
  const $inode$jscomp$16$$ = $JSCompiler_StaticMethods_get_data$self$$.$g$[$idx$jscomp$9$$];
  return $JSCompiler_StaticMethods_get_data$self$$.$h$[$idx$jscomp$9$$] ? $JSCompiler_StaticMethods_get_data$self$$.$h$[$idx$jscomp$9$$].subarray($offset$jscomp$56$$, $offset$jscomp$56$$ + $count$jscomp$54$$) : 2 === $inode$jscomp$16$$.status ? await $JSCompiler_StaticMethods_get_data$self$$.$j$.read($inode$jscomp$16$$.$sha256sum$, $offset$jscomp$56$$, $count$jscomp$54$$) : null;
}
async function $JSCompiler_StaticMethods_set_data$$($JSCompiler_StaticMethods_set_data$self$$, $idx$jscomp$10$$, $buffer$jscomp$40$$) {
  $JSCompiler_StaticMethods_set_data$self$$.$h$[$idx$jscomp$10$$] = $buffer$jscomp$40$$;
  2 === $JSCompiler_StaticMethods_set_data$self$$.$g$[$idx$jscomp$10$$].status && ($JSCompiler_StaticMethods_set_data$self$$.$g$[$idx$jscomp$10$$].status = 0, $JSCompiler_StaticMethods_set_data$self$$.$j$.$g$($JSCompiler_StaticMethods_set_data$self$$.$g$[$idx$jscomp$10$$].$sha256sum$));
}
function $JSCompiler_StaticMethods_GetInode$$($JSCompiler_StaticMethods_GetInode$self$$, $idx$jscomp$11_inode$jscomp$17$$) {
  $idx$jscomp$11_inode$jscomp$17$$ = $JSCompiler_StaticMethods_GetInode$self$$.$g$[$idx$jscomp$11_inode$jscomp$17$$];
  return 5 === $idx$jscomp$11_inode$jscomp$17$$.status ? $JSCompiler_StaticMethods_GetInode$$($JSCompiler_StaticMethods_follow_fs$$($JSCompiler_StaticMethods_GetInode$self$$, $idx$jscomp$11_inode$jscomp$17$$), $idx$jscomp$11_inode$jscomp$17$$.$g$) : $idx$jscomp$11_inode$jscomp$17$$;
}
async function $JSCompiler_StaticMethods_ChangeSize$$($JSCompiler_StaticMethods_ChangeSize$self$$, $idx$jscomp$12$$, $newsize$$) {
  var $inode$jscomp$18$$ = $JSCompiler_StaticMethods_GetInode$$($JSCompiler_StaticMethods_ChangeSize$self$$, $idx$jscomp$12$$), $temp$$ = await $JSCompiler_StaticMethods_get_data$$($JSCompiler_StaticMethods_ChangeSize$self$$, $idx$jscomp$12$$, 0, $inode$jscomp$18$$.size);
  if ($newsize$$ !== $inode$jscomp$18$$.size) {
    var $data$jscomp$157$$ = new Uint8Array($newsize$$);
    $inode$jscomp$18$$.size = $newsize$$;
    $temp$$ && $data$jscomp$157$$.set($temp$$.subarray(0, Math.min($temp$$.length, $inode$jscomp$18$$.size)), 0);
    await $JSCompiler_StaticMethods_set_data$$($JSCompiler_StaticMethods_ChangeSize$self$$, $idx$jscomp$12$$, $data$jscomp$157$$);
  }
}
function $JSCompiler_StaticMethods_SearchPath$$($JSCompiler_StaticMethods_SearchPath$self$$, $path$jscomp$7_walk$$) {
  $path$jscomp$7_walk$$ = $path$jscomp$7_walk$$.replace("//", "/");
  $path$jscomp$7_walk$$ = $path$jscomp$7_walk$$.split("/");
  0 < $path$jscomp$7_walk$$.length && 0 === $path$jscomp$7_walk$$[$path$jscomp$7_walk$$.length - 1].length && $path$jscomp$7_walk$$.pop();
  0 < $path$jscomp$7_walk$$.length && 0 === $path$jscomp$7_walk$$[0].length && $path$jscomp$7_walk$$.shift();
  const $n$jscomp$9$$ = $path$jscomp$7_walk$$.length;
  var $parentid$jscomp$15$$ = -1, $id$jscomp$13$$ = 0;
  let $forward_path$$ = null;
  for (var $i$jscomp$62$$ = 0; $i$jscomp$62$$ < $n$jscomp$9$$; $i$jscomp$62$$++) {
    if ($parentid$jscomp$15$$ = $id$jscomp$13$$, $id$jscomp$13$$ = $JSCompiler_StaticMethods_Search$$($JSCompiler_StaticMethods_SearchPath$self$$, $parentid$jscomp$15$$, $path$jscomp$7_walk$$[$i$jscomp$62$$]), !$forward_path$$ && 5 === $JSCompiler_StaticMethods_SearchPath$self$$.$g$[$parentid$jscomp$15$$].status && ($forward_path$$ = "/" + $path$jscomp$7_walk$$.slice($i$jscomp$62$$).join("/")), -1 === $id$jscomp$13$$) {
      return $i$jscomp$62$$ < $n$jscomp$9$$ - 1 ? {id:-1, $parentid$:-1, name:$path$jscomp$7_walk$$[$i$jscomp$62$$], $forward_path$:$forward_path$$} : {id:-1, $parentid$:$parentid$jscomp$15$$, name:$path$jscomp$7_walk$$[$i$jscomp$62$$], $forward_path$:$forward_path$$};
    }
  }
  return {id:$id$jscomp$13$$, $parentid$:$parentid$jscomp$15$$, name:$path$jscomp$7_walk$$[$i$jscomp$62$$], $forward_path$:$forward_path$$};
}
function $JSCompiler_StaticMethods_FillDirectory$$($JSCompiler_StaticMethods_FillDirectory$self$$, $data$jscomp$158_dirid$jscomp$1$$) {
  var $child$jscomp$1_inode$jscomp$21$$ = $JSCompiler_StaticMethods_FillDirectory$self$$.$g$[$data$jscomp$158_dirid$jscomp$1$$];
  if (5 === $child$jscomp$1_inode$jscomp$21$$.status) {
    $JSCompiler_StaticMethods_FillDirectory$$($JSCompiler_StaticMethods_follow_fs$$($JSCompiler_StaticMethods_FillDirectory$self$$, $child$jscomp$1_inode$jscomp$21$$), $child$jscomp$1_inode$jscomp$21$$.$g$);
  } else {
    var $offset$jscomp$57_size$jscomp$34$$ = 0;
    for (const $name$jscomp$96$$ of $child$jscomp$1_inode$jscomp$21$$.$direntries$.keys()) {
      $offset$jscomp$57_size$jscomp$34$$ += 24 + $texten$$module$lib$filesystem$$.encode($name$jscomp$96$$).length;
    }
    $data$jscomp$158_dirid$jscomp$1$$ = $JSCompiler_StaticMethods_FillDirectory$self$$.$h$[$data$jscomp$158_dirid$jscomp$1$$] = new Uint8Array($offset$jscomp$57_size$jscomp$34$$);
    $child$jscomp$1_inode$jscomp$21$$.size = $offset$jscomp$57_size$jscomp$34$$;
    $offset$jscomp$57_size$jscomp$34$$ = 0;
    for (const [$name$jscomp$97$$, $id$jscomp$17$$] of $child$jscomp$1_inode$jscomp$21$$.$direntries$) {
      $child$jscomp$1_inode$jscomp$21$$ = $JSCompiler_StaticMethods_GetInode$$($JSCompiler_StaticMethods_FillDirectory$self$$, $id$jscomp$17$$), $offset$jscomp$57_size$jscomp$34$$ += $Marshall$$module$lib$marshall$$(["Q", "d", "b", "s"], [$child$jscomp$1_inode$jscomp$21$$.$qid$, $offset$jscomp$57_size$jscomp$34$$ + 13 + 8 + 1 + 2 + $texten$$module$lib$filesystem$$.encode($name$jscomp$97$$).length, $child$jscomp$1_inode$jscomp$21$$.mode >> 12, $name$jscomp$97$$], $data$jscomp$158_dirid$jscomp$1$$, 
      $offset$jscomp$57_size$jscomp$34$$);
    }
  }
}
function $JSCompiler_StaticMethods_IsDirectory$$($JSCompiler_StaticMethods_IsDirectory$self$$, $idx$jscomp$13_inode$jscomp$22$$) {
  $idx$jscomp$13_inode$jscomp$22$$ = $JSCompiler_StaticMethods_IsDirectory$self$$.$g$[$idx$jscomp$13_inode$jscomp$22$$];
  return 5 === $idx$jscomp$13_inode$jscomp$22$$.status ? $JSCompiler_StaticMethods_IsDirectory$$($JSCompiler_StaticMethods_follow_fs$$($JSCompiler_StaticMethods_IsDirectory$self$$, $idx$jscomp$13_inode$jscomp$22$$), $idx$jscomp$13_inode$jscomp$22$$.$g$) : 16384 === ($idx$jscomp$13_inode$jscomp$22$$.mode & 61440);
}
function $JSCompiler_StaticMethods_GetChildren$$($JSCompiler_StaticMethods_GetChildren$self_children$jscomp$3$$, $idx$jscomp$15_inode$jscomp$24$$) {
  $JSCompiler_StaticMethods_IsDirectory$$($JSCompiler_StaticMethods_GetChildren$self_children$jscomp$3$$, $idx$jscomp$15_inode$jscomp$24$$);
  $idx$jscomp$15_inode$jscomp$24$$ = $JSCompiler_StaticMethods_GetChildren$self_children$jscomp$3$$.$g$[$idx$jscomp$15_inode$jscomp$24$$];
  if (5 === $idx$jscomp$15_inode$jscomp$24$$.status) {
    return $JSCompiler_StaticMethods_GetChildren$$($JSCompiler_StaticMethods_follow_fs$$($JSCompiler_StaticMethods_GetChildren$self_children$jscomp$3$$, $idx$jscomp$15_inode$jscomp$24$$), $idx$jscomp$15_inode$jscomp$24$$.$g$);
  }
  $JSCompiler_StaticMethods_GetChildren$self_children$jscomp$3$$ = [];
  for (const $name$jscomp$99$$ of $idx$jscomp$15_inode$jscomp$24$$.$direntries$.keys()) {
    "." !== $name$jscomp$99$$ && ".." !== $name$jscomp$99$$ && $JSCompiler_StaticMethods_GetChildren$self_children$jscomp$3$$.push($name$jscomp$99$$);
  }
  return $JSCompiler_StaticMethods_GetChildren$self_children$jscomp$3$$;
}
function $JSCompiler_StaticMethods_GetParent$$($JSCompiler_StaticMethods_GetParent$self$$, $idx$jscomp$16_inode$jscomp$25$$) {
  $JSCompiler_StaticMethods_IsDirectory$$($JSCompiler_StaticMethods_GetParent$self$$, $idx$jscomp$16_inode$jscomp$25$$);
  $idx$jscomp$16_inode$jscomp$25$$ = $JSCompiler_StaticMethods_GetParent$self$$.$g$[$idx$jscomp$16_inode$jscomp$25$$];
  if (5 !== $idx$jscomp$16_inode$jscomp$25$$.status || 0 === $idx$jscomp$16_inode$jscomp$25$$.$g$) {
    return $idx$jscomp$16_inode$jscomp$25$$.$direntries$.get("..");
  }
  const $foreign_dirid$jscomp$1$$ = $JSCompiler_StaticMethods_GetParent$$($JSCompiler_StaticMethods_follow_fs$$($JSCompiler_StaticMethods_GetParent$self$$, $idx$jscomp$16_inode$jscomp$25$$), $idx$jscomp$16_inode$jscomp$25$$.$g$);
  return $JSCompiler_StaticMethods_get_forwarder$$($JSCompiler_StaticMethods_GetParent$self$$, $idx$jscomp$16_inode$jscomp$25$$.$i$, $foreign_dirid$jscomp$1$$);
}
function $JSCompiler_StaticMethods_set_forwarder$$($JSCompiler_StaticMethods_set_forwarder$self$$, $idx$jscomp$17$$, $mount_id$jscomp$1$$, $foreign_id$jscomp$10$$) {
  const $inode$jscomp$27$$ = $JSCompiler_StaticMethods_set_forwarder$self$$.$g$[$idx$jscomp$17$$];
  5 === $inode$jscomp$27$$.status && $JSCompiler_StaticMethods_set_forwarder$self$$.$i$[$inode$jscomp$27$$.$i$].$g$.delete($inode$jscomp$27$$.$g$);
  $inode$jscomp$27$$.status = 5;
  $inode$jscomp$27$$.$i$ = $mount_id$jscomp$1$$;
  $inode$jscomp$27$$.$g$ = $foreign_id$jscomp$10$$;
  $JSCompiler_StaticMethods_set_forwarder$self$$.$i$[$mount_id$jscomp$1$$].$g$.set($foreign_id$jscomp$10$$, $idx$jscomp$17$$);
}
function $JSCompiler_StaticMethods_create_forwarder$$($JSCompiler_StaticMethods_create_forwarder$self$$, $mount_id$jscomp$2$$, $foreign_id$jscomp$11$$) {
  const $inode$jscomp$28$$ = $JSCompiler_StaticMethods_CreateInode$$($JSCompiler_StaticMethods_create_forwarder$self$$), $idx$jscomp$18$$ = $JSCompiler_StaticMethods_create_forwarder$self$$.$g$.length;
  $JSCompiler_StaticMethods_create_forwarder$self$$.$g$.push($inode$jscomp$28$$);
  $inode$jscomp$28$$.$fid$ = $idx$jscomp$18$$;
  $JSCompiler_StaticMethods_set_forwarder$$($JSCompiler_StaticMethods_create_forwarder$self$$, $idx$jscomp$18$$, $mount_id$jscomp$2$$, $foreign_id$jscomp$11$$);
  return $idx$jscomp$18$$;
}
function $JSCompiler_StaticMethods_get_forwarder$$($JSCompiler_StaticMethods_get_forwarder$self$$, $mount_id$jscomp$3$$, $foreign_id$jscomp$12$$) {
  const $result$jscomp$8$$ = $JSCompiler_StaticMethods_get_forwarder$self$$.$i$[$mount_id$jscomp$3$$].$g$.get($foreign_id$jscomp$12$$);
  return void 0 === $result$jscomp$8$$ ? $JSCompiler_StaticMethods_create_forwarder$$($JSCompiler_StaticMethods_get_forwarder$self$$, $mount_id$jscomp$3$$, $foreign_id$jscomp$12$$) : $result$jscomp$8$$;
}
function $JSCompiler_StaticMethods_follow_fs$$($JSCompiler_StaticMethods_follow_fs$self$$, $inode$jscomp$31$$) {
  return $JSCompiler_StaticMethods_follow_fs$self$$.$i$[$inode$jscomp$31$$.$i$].$h$;
}
function $FSLockRegion$$module$lib$filesystem$$() {
  this.type = 2;
  this.start = 0;
  this.length = Infinity;
  this.$h$ = -1;
  this.$g$ = "";
}
$FSLockRegion$$module$lib$filesystem$$.prototype.$get_state$ = function() {
  const $state$jscomp$24$$ = [];
  $state$jscomp$24$$[0] = this.type;
  $state$jscomp$24$$[1] = this.start;
  $state$jscomp$24$$[2] = Infinity === this.length ? 0 : this.length;
  $state$jscomp$24$$[3] = this.$h$;
  $state$jscomp$24$$[4] = this.$g$;
  return $state$jscomp$24$$;
};
$FSLockRegion$$module$lib$filesystem$$.prototype.$set_state$ = function($state$jscomp$25$$) {
  this.type = $state$jscomp$25$$[0];
  this.start = $state$jscomp$25$$[1];
  this.length = 0 === $state$jscomp$25$$[2] ? Infinity : $state$jscomp$25$$[2];
  this.$h$ = $state$jscomp$25$$[3];
  this.$g$ = $state$jscomp$25$$[4];
};
function $JSCompiler_StaticMethods_JSC$1893_clone$$($JSCompiler_StaticMethods_JSC$1893_clone$self$$) {
  const $new_region$$ = new $FSLockRegion$$module$lib$filesystem$$;
  $new_region$$.$set_state$($JSCompiler_StaticMethods_JSC$1893_clone$self$$.$get_state$());
  return $new_region$$;
}
function $JSCompiler_StaticMethods_is_alike$$($JSCompiler_StaticMethods_is_alike$self$$, $region$jscomp$1$$) {
  return $region$jscomp$1$$.$h$ === $JSCompiler_StaticMethods_is_alike$self$$.$h$ && $region$jscomp$1$$.$g$ === $JSCompiler_StaticMethods_is_alike$self$$.$g$ && $region$jscomp$1$$.type === $JSCompiler_StaticMethods_is_alike$self$$.type;
}
function $JSCompiler_StaticMethods_may_merge_after$$($JSCompiler_StaticMethods_may_merge_after$self$$, $region$jscomp$2$$) {
  return $JSCompiler_StaticMethods_is_alike$$($JSCompiler_StaticMethods_may_merge_after$self$$, $region$jscomp$2$$) && $region$jscomp$2$$.start + $region$jscomp$2$$.length === $JSCompiler_StaticMethods_may_merge_after$self$$.start;
}
function $JSCompiler_StaticMethods_DescribeLock$$($type$jscomp$152$$, $start$jscomp$27$$, $length$jscomp$23$$, $proc_id$$, $client_id$$) {
  const $lock$jscomp$1$$ = new $FSLockRegion$$module$lib$filesystem$$;
  $lock$jscomp$1$$.type = $type$jscomp$152$$;
  $lock$jscomp$1$$.start = $start$jscomp$27$$;
  $lock$jscomp$1$$.length = $length$jscomp$23$$;
  $lock$jscomp$1$$.$h$ = $proc_id$$;
  $lock$jscomp$1$$.$g$ = $client_id$$;
  return $lock$jscomp$1$$;
}
function $JSCompiler_StaticMethods_GetLock$$($JSCompiler_StaticMethods_GetLock$self$$, $id$jscomp$19_inode$jscomp$32$$, $request$jscomp$5$$) {
  $id$jscomp$19_inode$jscomp$32$$ = $JSCompiler_StaticMethods_GetLock$self$$.$g$[$id$jscomp$19_inode$jscomp$32$$];
  if (5 === $id$jscomp$19_inode$jscomp$32$$.status) {
    var $foreign_id$jscomp$13_region$jscomp$3$$ = $id$jscomp$19_inode$jscomp$32$$.$g$;
    return $JSCompiler_StaticMethods_GetLock$$($JSCompiler_StaticMethods_follow_fs$$($JSCompiler_StaticMethods_GetLock$self$$, $id$jscomp$19_inode$jscomp$32$$), $foreign_id$jscomp$13_region$jscomp$3$$, $request$jscomp$5$$);
  }
  for ($foreign_id$jscomp$13_region$jscomp$3$$ of $id$jscomp$19_inode$jscomp$32$$.$h$) {
    if (!($request$jscomp$5$$.$h$ === $foreign_id$jscomp$13_region$jscomp$3$$.$h$ && $request$jscomp$5$$.$g$ === $foreign_id$jscomp$13_region$jscomp$3$$.$g$ || 2 === $request$jscomp$5$$.type || 2 === $foreign_id$jscomp$13_region$jscomp$3$$.type || 1 !== $request$jscomp$5$$.type && 1 !== $foreign_id$jscomp$13_region$jscomp$3$$.type || $request$jscomp$5$$.start + $request$jscomp$5$$.length <= $foreign_id$jscomp$13_region$jscomp$3$$.start || $foreign_id$jscomp$13_region$jscomp$3$$.start + $foreign_id$jscomp$13_region$jscomp$3$$.length <= 
    $request$jscomp$5$$.start)) {
      return $JSCompiler_StaticMethods_JSC$1893_clone$$($foreign_id$jscomp$13_region$jscomp$3$$);
    }
  }
  return null;
}
function $JSCompiler_StaticMethods_Lock$$($JSCompiler_StaticMethods_Lock$self_i$jscomp$66_new_region$jscomp$1$$, $foreign_id$jscomp$14_i$jscomp$67_id$jscomp$20_start2$$, $request$jscomp$6$$, $flags$jscomp$10_has_merged_region$jscomp$4$$) {
  const $inode$jscomp$33$$ = $JSCompiler_StaticMethods_Lock$self_i$jscomp$66_new_region$jscomp$1$$.$g$[$foreign_id$jscomp$14_i$jscomp$67_id$jscomp$20_start2$$];
  if (5 === $inode$jscomp$33$$.status) {
    return $foreign_id$jscomp$14_i$jscomp$67_id$jscomp$20_start2$$ = $inode$jscomp$33$$.$g$, $JSCompiler_StaticMethods_Lock$$($JSCompiler_StaticMethods_follow_fs$$($JSCompiler_StaticMethods_Lock$self_i$jscomp$66_new_region$jscomp$1$$, $inode$jscomp$33$$), $foreign_id$jscomp$14_i$jscomp$67_id$jscomp$20_start2$$, $request$jscomp$6$$, $flags$jscomp$10_has_merged_region$jscomp$4$$);
  }
  $request$jscomp$6$$ = $JSCompiler_StaticMethods_JSC$1893_clone$$($request$jscomp$6$$);
  if (2 !== $request$jscomp$6$$.type && $JSCompiler_StaticMethods_GetLock$$($JSCompiler_StaticMethods_Lock$self_i$jscomp$66_new_region$jscomp$1$$, $foreign_id$jscomp$14_i$jscomp$67_id$jscomp$20_start2$$, $request$jscomp$6$$)) {
    return 1;
  }
  for ($JSCompiler_StaticMethods_Lock$self_i$jscomp$66_new_region$jscomp$1$$ = 0; $JSCompiler_StaticMethods_Lock$self_i$jscomp$66_new_region$jscomp$1$$ < $inode$jscomp$33$$.$h$.length; $JSCompiler_StaticMethods_Lock$self_i$jscomp$66_new_region$jscomp$1$$++) {
    $flags$jscomp$10_has_merged_region$jscomp$4$$ = $inode$jscomp$33$$.$h$[$JSCompiler_StaticMethods_Lock$self_i$jscomp$66_new_region$jscomp$1$$];
    if ($flags$jscomp$10_has_merged_region$jscomp$4$$.start + $flags$jscomp$10_has_merged_region$jscomp$4$$.length <= $request$jscomp$6$$.start) {
      continue;
    }
    if ($request$jscomp$6$$.start + $request$jscomp$6$$.length <= $flags$jscomp$10_has_merged_region$jscomp$4$$.start) {
      break;
    }
    if ($flags$jscomp$10_has_merged_region$jscomp$4$$.$h$ !== $request$jscomp$6$$.$h$ || $flags$jscomp$10_has_merged_region$jscomp$4$$.$g$ !== $request$jscomp$6$$.$g$) {
      continue;
    }
    $foreign_id$jscomp$14_i$jscomp$67_id$jscomp$20_start2$$ = $request$jscomp$6$$.start + $request$jscomp$6$$.length;
    const $length1$$ = $request$jscomp$6$$.start - $flags$jscomp$10_has_merged_region$jscomp$4$$.start, $length2$$ = $flags$jscomp$10_has_merged_region$jscomp$4$$.start + $flags$jscomp$10_has_merged_region$jscomp$4$$.length - $foreign_id$jscomp$14_i$jscomp$67_id$jscomp$20_start2$$;
    if (0 < $length1$$ && 0 < $length2$$ && $flags$jscomp$10_has_merged_region$jscomp$4$$.type === $request$jscomp$6$$.type) {
      return 0;
    }
    0 < $length1$$ && ($flags$jscomp$10_has_merged_region$jscomp$4$$.length = $length1$$);
    if (0 >= $length1$$ && 0 < $length2$$) {
      $flags$jscomp$10_has_merged_region$jscomp$4$$.start = $foreign_id$jscomp$14_i$jscomp$67_id$jscomp$20_start2$$, $flags$jscomp$10_has_merged_region$jscomp$4$$.length = $length2$$;
    } else {
      if (0 < $length2$$) {
        for (; $JSCompiler_StaticMethods_Lock$self_i$jscomp$66_new_region$jscomp$1$$ < $inode$jscomp$33$$.$h$.length && $inode$jscomp$33$$.$h$[$JSCompiler_StaticMethods_Lock$self_i$jscomp$66_new_region$jscomp$1$$].start < $foreign_id$jscomp$14_i$jscomp$67_id$jscomp$20_start2$$;) {
          $JSCompiler_StaticMethods_Lock$self_i$jscomp$66_new_region$jscomp$1$$++;
        }
        $inode$jscomp$33$$.$h$.splice($JSCompiler_StaticMethods_Lock$self_i$jscomp$66_new_region$jscomp$1$$, 0, $JSCompiler_StaticMethods_DescribeLock$$($flags$jscomp$10_has_merged_region$jscomp$4$$.type, $foreign_id$jscomp$14_i$jscomp$67_id$jscomp$20_start2$$, $length2$$, $flags$jscomp$10_has_merged_region$jscomp$4$$.$h$, $flags$jscomp$10_has_merged_region$jscomp$4$$.$g$));
      } else {
        0 >= $length1$$ && ($inode$jscomp$33$$.$h$.splice($JSCompiler_StaticMethods_Lock$self_i$jscomp$66_new_region$jscomp$1$$, 1), $JSCompiler_StaticMethods_Lock$self_i$jscomp$66_new_region$jscomp$1$$--);
      }
    }
  }
  if (2 !== $request$jscomp$6$$.type) {
    $JSCompiler_StaticMethods_Lock$self_i$jscomp$66_new_region$jscomp$1$$ = $request$jscomp$6$$;
    $flags$jscomp$10_has_merged_region$jscomp$4$$ = !1;
    for ($foreign_id$jscomp$14_i$jscomp$67_id$jscomp$20_start2$$ = 0; $foreign_id$jscomp$14_i$jscomp$67_id$jscomp$20_start2$$ < $inode$jscomp$33$$.$h$.length && !($JSCompiler_StaticMethods_may_merge_after$$($JSCompiler_StaticMethods_Lock$self_i$jscomp$66_new_region$jscomp$1$$, $inode$jscomp$33$$.$h$[$foreign_id$jscomp$14_i$jscomp$67_id$jscomp$20_start2$$]) && ($inode$jscomp$33$$.$h$[$foreign_id$jscomp$14_i$jscomp$67_id$jscomp$20_start2$$].length += $request$jscomp$6$$.length, $JSCompiler_StaticMethods_Lock$self_i$jscomp$66_new_region$jscomp$1$$ = 
    $inode$jscomp$33$$.$h$[$foreign_id$jscomp$14_i$jscomp$67_id$jscomp$20_start2$$], $flags$jscomp$10_has_merged_region$jscomp$4$$ = !0), $request$jscomp$6$$.start <= $inode$jscomp$33$$.$h$[$foreign_id$jscomp$14_i$jscomp$67_id$jscomp$20_start2$$].start); $foreign_id$jscomp$14_i$jscomp$67_id$jscomp$20_start2$$++) {
    }
    $flags$jscomp$10_has_merged_region$jscomp$4$$ || ($inode$jscomp$33$$.$h$.splice($foreign_id$jscomp$14_i$jscomp$67_id$jscomp$20_start2$$, 0, $JSCompiler_StaticMethods_Lock$self_i$jscomp$66_new_region$jscomp$1$$), $foreign_id$jscomp$14_i$jscomp$67_id$jscomp$20_start2$$++);
    for (; $foreign_id$jscomp$14_i$jscomp$67_id$jscomp$20_start2$$ < $inode$jscomp$33$$.$h$.length; $foreign_id$jscomp$14_i$jscomp$67_id$jscomp$20_start2$$++) {
      if ($JSCompiler_StaticMethods_is_alike$$($inode$jscomp$33$$.$h$[$foreign_id$jscomp$14_i$jscomp$67_id$jscomp$20_start2$$], $JSCompiler_StaticMethods_Lock$self_i$jscomp$66_new_region$jscomp$1$$)) {
        $JSCompiler_StaticMethods_may_merge_after$$($inode$jscomp$33$$.$h$[$foreign_id$jscomp$14_i$jscomp$67_id$jscomp$20_start2$$], $JSCompiler_StaticMethods_Lock$self_i$jscomp$66_new_region$jscomp$1$$) && ($JSCompiler_StaticMethods_Lock$self_i$jscomp$66_new_region$jscomp$1$$.length += $inode$jscomp$33$$.$h$[$foreign_id$jscomp$14_i$jscomp$67_id$jscomp$20_start2$$].length, $inode$jscomp$33$$.$h$.splice($foreign_id$jscomp$14_i$jscomp$67_id$jscomp$20_start2$$, 1));
        break;
      }
    }
  }
  return 0;
}
function $JSCompiler_StaticMethods_read_dir$$($JSCompiler_StaticMethods_read_dir$self_dir$$, $p$jscomp$1_path$jscomp$11$$) {
  $p$jscomp$1_path$jscomp$11$$ = $JSCompiler_StaticMethods_SearchPath$$($JSCompiler_StaticMethods_read_dir$self_dir$$, $p$jscomp$1_path$jscomp$11$$);
  if (-1 !== $p$jscomp$1_path$jscomp$11$$.id) {
    return $JSCompiler_StaticMethods_read_dir$self_dir$$ = $JSCompiler_StaticMethods_GetInode$$($JSCompiler_StaticMethods_read_dir$self_dir$$, $p$jscomp$1_path$jscomp$11$$.id), Array.from($JSCompiler_StaticMethods_read_dir$self_dir$$.$direntries$.keys()).filter($path$jscomp$12$$ => "." !== $path$jscomp$12$$ && ".." !== $path$jscomp$12$$);
  }
}
$FS$$module$lib$filesystem$$.prototype.$read_file$ = function($file$jscomp$3_p$jscomp$2$$) {
  $file$jscomp$3_p$jscomp$2$$ = $JSCompiler_StaticMethods_SearchPath$$(this, $file$jscomp$3_p$jscomp$2$$);
  if (-1 === $file$jscomp$3_p$jscomp$2$$.id) {
    return Promise.resolve(null);
  }
  const $inode$jscomp$34$$ = $JSCompiler_StaticMethods_GetInode$$(this, $file$jscomp$3_p$jscomp$2$$.id);
  return $JSCompiler_StaticMethods_Read$$(this, $file$jscomp$3_p$jscomp$2$$.id, 0, $inode$jscomp$34$$.size);
};
function $V86$$module$src$browser$starter$$($options$jscomp$41$$) {
  this.$cpu_is_running$ = !1;
  this.$u$ = function() {
  };
  var $bus$jscomp$16_wasm_shared_funcs$$ = $Bus$$module$src$bus$create$$();
  this.$bus$ = $bus$jscomp$16_wasm_shared_funcs$$[0];
  this.$emulator_bus$ = $bus$jscomp$16_wasm_shared_funcs$$[1];
  var $cpu$jscomp$12$$, $wasm_memory$$;
  const $wasm_table$$ = new WebAssembly.Table({element:"anyfunc", initial:1924});
  $bus$jscomp$16_wasm_shared_funcs$$ = {cpu_exception_hook:() => this.$u$(), run_hardware_timers:function($a$jscomp$6$$, $t$jscomp$4$$) {
    var $JSCompiler_StaticMethods_run_hardware_timers$self$jscomp$inline_333$$ = $cpu$jscomp$12$$;
    const $pit_time$jscomp$inline_336$$ = $JSCompiler_StaticMethods_run_hardware_timers$self$jscomp$inline_333$$.$devices$.$pit$.$timer$($t$jscomp$4$$, !1), $rtc_time$jscomp$inline_337$$ = $JSCompiler_StaticMethods_run_hardware_timers$self$jscomp$inline_333$$.$devices$.$rtc$.$timer$($t$jscomp$4$$, !1);
    let $acpi_time$jscomp$inline_338$$ = 100, $apic_time$jscomp$inline_339$$ = 100;
    $a$jscomp$6$$ && ($acpi_time$jscomp$inline_338$$ = $JSCompiler_StaticMethods_run_hardware_timers$self$jscomp$inline_333$$.$devices$.$acpi$.$timer$($t$jscomp$4$$), $apic_time$jscomp$inline_339$$ = $JSCompiler_StaticMethods_run_hardware_timers$self$jscomp$inline_333$$.$xa$($t$jscomp$4$$));
    return Math.min($pit_time$jscomp$inline_336$$, $rtc_time$jscomp$inline_337$$, $acpi_time$jscomp$inline_338$$, $apic_time$jscomp$inline_339$$);
  }, cpu_event_halt:() => {
    this.$emulator_bus$.send("cpu-event-halt");
  }, abort:function() {
  }, microtick:$v86$$module$src$main$microtick$$, get_rand_int:function() {
    return $get_rand_int$$module$src$lib$$();
  }, stop_idling:function() {
    return $cpu$jscomp$12$$.$Ka$();
  }, io_port_read8:function($addr$jscomp$11$$) {
    var $entry$jscomp$inline_343$$ = $cpu$jscomp$12$$.$io$.ports[$addr$jscomp$11$$];
    return $entry$jscomp$inline_343$$.$read8$.call($entry$jscomp$inline_343$$.$device$, $addr$jscomp$11$$);
  }, io_port_read16:function($addr$jscomp$12$$) {
    var $entry$jscomp$inline_348$$ = $cpu$jscomp$12$$.$io$.ports[$addr$jscomp$12$$];
    return $entry$jscomp$inline_348$$.$read16$.call($entry$jscomp$inline_348$$.$device$, $addr$jscomp$12$$);
  }, io_port_read32:function($addr$jscomp$13$$) {
    return $JSCompiler_StaticMethods_port_read32$$($cpu$jscomp$12$$.$io$, $addr$jscomp$13$$);
  }, io_port_write8:function($addr$jscomp$14_entry$jscomp$inline_354$$, $value$jscomp$140$$) {
    $addr$jscomp$14_entry$jscomp$inline_354$$ = $cpu$jscomp$12$$.$io$.ports[$addr$jscomp$14_entry$jscomp$inline_354$$];
    $addr$jscomp$14_entry$jscomp$inline_354$$.$write8$.call($addr$jscomp$14_entry$jscomp$inline_354$$.$device$, $value$jscomp$140$$);
  }, io_port_write16:function($addr$jscomp$15_entry$jscomp$inline_359$$, $value$jscomp$141$$) {
    $addr$jscomp$15_entry$jscomp$inline_359$$ = $cpu$jscomp$12$$.$io$.ports[$addr$jscomp$15_entry$jscomp$inline_359$$];
    $addr$jscomp$15_entry$jscomp$inline_359$$.$write16$.call($addr$jscomp$15_entry$jscomp$inline_359$$.$device$, $value$jscomp$141$$);
  }, io_port_write32:function($addr$jscomp$16_entry$jscomp$inline_364$$, $value$jscomp$142$$) {
    $addr$jscomp$16_entry$jscomp$inline_364$$ = $cpu$jscomp$12$$.$io$.ports[$addr$jscomp$16_entry$jscomp$inline_364$$];
    $addr$jscomp$16_entry$jscomp$inline_364$$.$write32$.call($addr$jscomp$16_entry$jscomp$inline_364$$.$device$, $value$jscomp$142$$);
  }, mmap_read8:function($addr$jscomp$17$$) {
    return $cpu$jscomp$12$$.$g$[$addr$jscomp$17$$ >>> 17]($addr$jscomp$17$$);
  }, mmap_read16:function($addr$jscomp$18$$) {
    var $fn$jscomp$inline_372$$ = $cpu$jscomp$12$$.$g$[$addr$jscomp$18$$ >>> 17];
    return $fn$jscomp$inline_372$$($addr$jscomp$18$$) | $fn$jscomp$inline_372$$($addr$jscomp$18$$ + 1 | 0) << 8;
  }, mmap_read32:function($addr$jscomp$19$$) {
    return $cpu$jscomp$12$$.$M$[$addr$jscomp$19$$ >>> 17]($addr$jscomp$19$$);
  }, mmap_write8:function($addr$jscomp$20$$, $value$jscomp$143$$) {
    $cpu$jscomp$12$$.$j$[$addr$jscomp$20$$ >>> 17]($addr$jscomp$20$$, $value$jscomp$143$$);
  }, mmap_write16:function($addr$jscomp$21$$, $value$jscomp$144$$) {
    var $fn$jscomp$inline_382$$ = $cpu$jscomp$12$$.$j$[$addr$jscomp$21$$ >>> 17];
    $fn$jscomp$inline_382$$($addr$jscomp$21$$, $value$jscomp$144$$ & 255);
    $fn$jscomp$inline_382$$($addr$jscomp$21$$ + 1 | 0, $value$jscomp$144$$ >> 8);
  }, mmap_write32:function($addr$jscomp$22$$, $value$jscomp$145$$) {
    $cpu$jscomp$12$$.$i$[$addr$jscomp$22$$ >>> 17]($addr$jscomp$22$$, $value$jscomp$145$$);
  }, mmap_write64:function($addr$jscomp$23$$, $value0$$, $value1$jscomp$7$$) {
    var $write_func32$jscomp$inline_393$$ = $cpu$jscomp$12$$.$i$[$addr$jscomp$23$$ >>> 17];
    $write_func32$jscomp$inline_393$$($addr$jscomp$23$$, $value0$$);
    $write_func32$jscomp$inline_393$$($addr$jscomp$23$$ + 4, $value1$jscomp$7$$);
  }, mmap_write128:function($addr$jscomp$24$$, $value0$jscomp$1$$, $value1$jscomp$8$$, $value2$jscomp$7$$, $value3$jscomp$4$$) {
    var $write_func32$jscomp$inline_402$$ = $cpu$jscomp$12$$.$i$[$addr$jscomp$24$$ >>> 17];
    $write_func32$jscomp$inline_402$$($addr$jscomp$24$$, $value0$jscomp$1$$);
    $write_func32$jscomp$inline_402$$($addr$jscomp$24$$ + 4, $value1$jscomp$8$$);
    $write_func32$jscomp$inline_402$$($addr$jscomp$24$$ + 8, $value2$jscomp$7$$);
    $write_func32$jscomp$inline_402$$($addr$jscomp$24$$ + 12, $value3$jscomp$4$$);
  }, log_from_wasm:function($offset$jscomp$59$$, $len$jscomp$22$$) {
    $read_sized_string_from_mem$$module$src$lib$$($wasm_memory$$, $offset$jscomp$59$$, $len$jscomp$22$$);
  }, console_log_from_wasm:function($offset$jscomp$60_str$jscomp$12$$, $len$jscomp$23$$) {
    $offset$jscomp$60_str$jscomp$12$$ = $read_sized_string_from_mem$$module$src$lib$$($wasm_memory$$, $offset$jscomp$60_str$jscomp$12$$, $len$jscomp$23$$);
    console.error($offset$jscomp$60_str$jscomp$12$$);
  }, dbg_trace_from_wasm:function() {
  }, codegen_finalize:($wasm_table_index$$, $start$jscomp$28$$, $state_flags$$, $ptr$jscomp$4$$, $len$jscomp$24$$) => {
    $JSCompiler_StaticMethods_codegen_finalize$$($cpu$jscomp$12$$, $wasm_table_index$$, $start$jscomp$28$$, $state_flags$$, $ptr$jscomp$4$$, $len$jscomp$24$$);
  }, jit_clear_func:$wasm_table_index$jscomp$1$$ => {
    $cpu$jscomp$12$$.$wm$.$wasm_table$.set($wasm_table_index$jscomp$1$$ + 1024, null);
  }, jit_clear_all_funcs:() => {
    const $table$jscomp$inline_409$$ = $cpu$jscomp$12$$.$wm$.$wasm_table$;
    for (let $i$jscomp$inline_410$$ = 0; 900 > $i$jscomp$inline_410$$; $i$jscomp$inline_410$$++) {
      $table$jscomp$inline_409$$.set(1024 + $i$jscomp$inline_410$$, null);
    }
  }, __indirect_function_table:$wasm_table$$, };
  let $wasm_fn$$ = $options$jscomp$41$$.$wasm_fn$;
  $wasm_fn$$ || ($wasm_fn$$ = $env$$ => new Promise($resolve$jscomp$2$$ => {
    let $v86_bin$$ = "v86.wasm", $v86_bin_fallback$$ = "v86-fallback.wasm";
    $options$jscomp$41$$.$wasm_path$ ? ($v86_bin$$ = $options$jscomp$41$$.$wasm_path$, $v86_bin_fallback$$ = $v86_bin$$.replace("v86.wasm", "v86-fallback.wasm")) : "undefined" === typeof window && "string" === typeof __dirname ? ($v86_bin$$ = __dirname + "/" + $v86_bin$$, $v86_bin_fallback$$ = __dirname + "/" + $v86_bin_fallback$$) : ($v86_bin$$ = "build/" + $v86_bin$$, $v86_bin_fallback$$ = "build/" + $v86_bin_fallback$$);
    $load_file$$module$src$lib$$($v86_bin$$, {done:async $bytes$jscomp$4$$ => {
      try {
        const {instance:$instance$$} = await WebAssembly.instantiate($bytes$jscomp$4$$, $env$$);
        this.$s$ = $bytes$jscomp$4$$;
        $resolve$jscomp$2$$($instance$$.exports);
      } catch ($err$jscomp$3$$) {
        $load_file$$module$src$lib$$($v86_bin_fallback$$, {done:async $bytes$jscomp$5$$ => {
          const {instance:$instance$jscomp$1$$} = await WebAssembly.instantiate($bytes$jscomp$5$$, $env$$);
          this.$s$ = $bytes$jscomp$5$$;
          $resolve$jscomp$2$$($instance$jscomp$1$$.exports);
        }, });
      }
    }, progress:$e$jscomp$40$$ => {
      this.$emulator_bus$.send("download-progress", {$file_index$:0, $file_count$:1, $file_name$:$v86_bin$$, lengthComputable:$e$jscomp$40$$.lengthComputable, total:$e$jscomp$40$$.total, loaded:$e$jscomp$40$$.loaded, });
    }});
  }));
  $wasm_fn$$({env:$bus$jscomp$16_wasm_shared_funcs$$}).then($emulator_exports$$ => {
    $wasm_memory$$ = $emulator_exports$$.memory;
    $emulator_exports$$.rust_init();
    $emulator_exports$$ = this.$v86$ = new $v86$$module$src$main$$(this.$emulator_bus$, {exports:$emulator_exports$$, $wasm_table$:$wasm_table$$});
    $cpu$jscomp$12$$ = $emulator_exports$$.$cpu$;
    $JSCompiler_StaticMethods_continue_init$$(this, $emulator_exports$$, $options$jscomp$41$$);
  });
  this.$h$ = null;
  this.$v$ = 0;
}
async function $JSCompiler_StaticMethods_continue_init$$($JSCompiler_StaticMethods_continue_init$self$$, $emulator$jscomp$1$$, $options$jscomp$42$$) {
  function $put_on_settings$$($name$jscomp$100$$, $buffer$jscomp$41$$) {
    switch($name$jscomp$100$$) {
      case "hda":
        $settings$$.$hda$ = this.$disk_images$.$hda$ = $buffer$jscomp$41$$;
        break;
      case "hdb":
        $settings$$.$hdb$ = this.$disk_images$.$hdb$ = $buffer$jscomp$41$$;
        break;
      case "cdrom":
        $settings$$.$cdrom$ = this.$disk_images$.$cdrom$ = $buffer$jscomp$41$$;
        break;
      case "fda":
        $settings$$.$fda$ = this.$disk_images$.$fda$ = $buffer$jscomp$41$$;
        break;
      case "fdb":
        $settings$$.$fdb$ = this.$disk_images$.$fdb$ = $buffer$jscomp$41$$;
        break;
      case "multiboot":
        $settings$$.$multiboot$ = this.$disk_images$.$multiboot$ = $buffer$jscomp$41$$.buffer;
        break;
      case "bzimage":
        $settings$$.$bzimage$ = this.$disk_images$.$bzimage$ = $buffer$jscomp$41$$.buffer;
        break;
      case "initrd":
        $settings$$.$initrd$ = this.$disk_images$.$initrd$ = $buffer$jscomp$41$$.buffer;
        break;
      case "bios":
        $settings$$.$bios$ = $buffer$jscomp$41$$.buffer;
        break;
      case "vga_bios":
        $settings$$.$vga_bios$ = $buffer$jscomp$41$$.buffer;
        break;
      case "initial_state":
        $settings$$.$initial_state$ = $buffer$jscomp$41$$.buffer;
        break;
      case "fs9p_json":
        $settings$$.$fs9p_json$ = $buffer$jscomp$41$$;
    }
  }
  async function $done$jscomp$4$$() {
    if ($settings$$.$fs9p$ && $settings$$.$fs9p_json$ && !$settings$$.$initial_state$) {
      var $JSCompiler_StaticMethods_load_from_json$self$jscomp$inline_412$$ = $settings$$.$fs9p$, $fs$jscomp$inline_413_i$jscomp$inline_415$$ = $settings$$.$fs9p_json$;
      if (3 !== $fs$jscomp$inline_413_i$jscomp$inline_415$$.version) {
        throw "The filesystem JSON format has changed. Please recreate the filesystem JSON.";
      }
      var $fsroot$jscomp$inline_414$$ = $fs$jscomp$inline_413_i$jscomp$inline_415$$.fsroot;
      $JSCompiler_StaticMethods_load_from_json$self$jscomp$inline_412$$.$o$ = $fs$jscomp$inline_413_i$jscomp$inline_415$$.size;
      for ($fs$jscomp$inline_413_i$jscomp$inline_415$$ = 0; $fs$jscomp$inline_413_i$jscomp$inline_415$$ < $fsroot$jscomp$inline_414$$.length; $fs$jscomp$inline_413_i$jscomp$inline_415$$++) {
        $JSCompiler_StaticMethods_LoadRecursive$$($JSCompiler_StaticMethods_load_from_json$self$jscomp$inline_412$$, $fsroot$jscomp$inline_414$$[$fs$jscomp$inline_413_i$jscomp$inline_415$$], 0);
      }
      if ($options$jscomp$42$$.$bzimage_initrd_from_filesystem$) {
        const {$bzimage_path$:$bzimage_path$$, $initrd_path$:$initrd_path$$} = $JSCompiler_StaticMethods_get_bzimage_initrd_from_filesystem$$($settings$$.$fs9p$), [$initrd$$, $bzimage$$] = await Promise.all([$settings$$.$fs9p$.$read_file$($initrd_path$$), $settings$$.$fs9p$.$read_file$($bzimage_path$$), ]);
        $put_on_settings$$.call(this, "initrd", new $SyncBuffer$$module$src$buffer$$($initrd$$.buffer));
        $put_on_settings$$.call(this, "bzimage", new $SyncBuffer$$module$src$buffer$$($bzimage$$.buffer));
      }
    }
    this.$serial_adapter$ && this.$serial_adapter$.show && this.$serial_adapter$.show();
    this.$v86$.$init$($settings$$);
    $settings$$.$initial_state$ && ($emulator$jscomp$1$$.$restore_state$($settings$$.$initial_state$), $settings$$.$initial_state$ = void 0);
    $options$jscomp$42$$.$autostart$ && this.$v86$.$run$();
    this.$emulator_bus$.send("emulator-loaded");
  }
  $JSCompiler_StaticMethods_continue_init$self$$.$bus$.register("emulator-stopped", function() {
    this.$cpu_is_running$ = !1;
    this.$screen_adapter$.pause();
  }, $JSCompiler_StaticMethods_continue_init$self$$);
  $JSCompiler_StaticMethods_continue_init$self$$.$bus$.register("emulator-started", function() {
    this.$cpu_is_running$ = !0;
    this.$screen_adapter$.continue();
  }, $JSCompiler_StaticMethods_continue_init$self$$);
  var $settings$$ = {};
  $JSCompiler_StaticMethods_continue_init$self$$.$disk_images$ = {$fda$:void 0, $fdb$:void 0, $hda$:void 0, $hdb$:void 0, $cdrom$:void 0, };
  var $add_file_boot_order_fs_url_relay_url_screen_options$$ = $options$jscomp$42$$.$boot_order$ ? $options$jscomp$42$$.$boot_order$ : $options$jscomp$42$$.$fda$ ? 801 : $options$jscomp$42$$.$hda$ ? 786 : 291;
  $settings$$.$acpi$ = $options$jscomp$42$$.$acpi$;
  $settings$$.$disable_jit$ = $options$jscomp$42$$.$disable_jit$;
  $settings$$.$load_devices$ = !0;
  $settings$$.$memory_size$ = $options$jscomp$42$$.$memory_size$ || 67108864;
  $settings$$.$vga_memory_size$ = $options$jscomp$42$$.$vga_memory_size$ || 8388608;
  $settings$$.$boot_order$ = $add_file_boot_order_fs_url_relay_url_screen_options$$;
  $settings$$.$fastboot$ = $options$jscomp$42$$.$fastboot$ || !1;
  $settings$$.$fda$ = void 0;
  $settings$$.$fdb$ = void 0;
  $settings$$.$uart1$ = $options$jscomp$42$$.$uart1$;
  $settings$$.$uart2$ = $options$jscomp$42$$.$uart2$;
  $settings$$.$uart3$ = $options$jscomp$42$$.$uart3$;
  $settings$$.$cmdline$ = $options$jscomp$42$$.$cmdline$;
  $settings$$.$preserve_mac_from_state_image$ = $options$jscomp$42$$.$preserve_mac_from_state_image$;
  $settings$$.$mac_address_translation$ = $options$jscomp$42$$.$mac_address_translation$;
  $settings$$.$cpuid_level$ = $options$jscomp$42$$.$cpuid_level$;
  $settings$$.$virtio_balloon$ = $options$jscomp$42$$.$virtio_balloon$;
  $settings$$.$virtio_console$ = $options$jscomp$42$$.$virtio_console$;
  if ($add_file_boot_order_fs_url_relay_url_screen_options$$ = $options$jscomp$42$$.$network_relay_url$ || $options$jscomp$42$$.$net_device$ && $options$jscomp$42$$.$net_device$.$relay_url$) {
    "fetch" === $add_file_boot_order_fs_url_relay_url_screen_options$$ ? $JSCompiler_StaticMethods_continue_init$self$$.$i$ = new $FetchNetworkAdapter$$module$src$browser$fetch_network$$($JSCompiler_StaticMethods_continue_init$self$$.$bus$, $options$jscomp$42$$.$net_device$) : "inbrowser" === $add_file_boot_order_fs_url_relay_url_screen_options$$ ? $JSCompiler_StaticMethods_continue_init$self$$.$i$ = new $InBrowserNetworkAdapter$$module$src$browser$inbrowser_network$$($JSCompiler_StaticMethods_continue_init$self$$.$bus$, 
    $options$jscomp$42$$.$net_device$) : $add_file_boot_order_fs_url_relay_url_screen_options$$.startsWith("wisp://") || $add_file_boot_order_fs_url_relay_url_screen_options$$.startsWith("wisps://") ? $JSCompiler_StaticMethods_continue_init$self$$.$i$ = new $WispNetworkAdapter$$module$src$browser$wisp_network$$($add_file_boot_order_fs_url_relay_url_screen_options$$, $JSCompiler_StaticMethods_continue_init$self$$.$bus$, $options$jscomp$42$$.$net_device$) : $JSCompiler_StaticMethods_continue_init$self$$.$i$ = 
    new $NetworkAdapter$$module$src$browser$network$$($add_file_boot_order_fs_url_relay_url_screen_options$$, $JSCompiler_StaticMethods_continue_init$self$$.$bus$);
  }
  $settings$$.$net_device$ = $options$jscomp$42$$.$net_device$ || {type:"ne2k"};
  $add_file_boot_order_fs_url_relay_url_screen_options$$ = $options$jscomp$42$$.screen || {};
  $options$jscomp$42$$.$screen_container$ && ($add_file_boot_order_fs_url_relay_url_screen_options$$.$container$ = $options$jscomp$42$$.$screen_container$);
  $options$jscomp$42$$.$disable_keyboard$ || ($JSCompiler_StaticMethods_continue_init$self$$.$o$ = new $KeyboardAdapter$$module$src$browser$keyboard$$($JSCompiler_StaticMethods_continue_init$self$$.$bus$));
  $options$jscomp$42$$.$disable_mouse$ || ($JSCompiler_StaticMethods_continue_init$self$$.$j$ = new $MouseAdapter$$module$src$browser$mouse$$($JSCompiler_StaticMethods_continue_init$self$$.$bus$, $add_file_boot_order_fs_url_relay_url_screen_options$$.$container$));
  $add_file_boot_order_fs_url_relay_url_screen_options$$.$container$ ? $JSCompiler_StaticMethods_continue_init$self$$.$screen_adapter$ = new $ScreenAdapter$$module$src$browser$screen$$($add_file_boot_order_fs_url_relay_url_screen_options$$, () => $JSCompiler_StaticMethods_continue_init$self$$.$v86$.$cpu$.$devices$.$vga$ && $JSCompiler_StaticMethods_continue_init$self$$.$v86$.$cpu$.$devices$.$vga$.$screen_fill_buffer$()) : $JSCompiler_StaticMethods_continue_init$self$$.$screen_adapter$ = new $DummyScreenAdapter$$module$src$browser$dummy_screen$$;
  $settings$$.screen = $JSCompiler_StaticMethods_continue_init$self$$.$screen_adapter$;
  $settings$$.$screen_options$ = $add_file_boot_order_fs_url_relay_url_screen_options$$;
  $options$jscomp$42$$.$serial_container$ && ($JSCompiler_StaticMethods_continue_init$self$$.$serial_adapter$ = new $SerialAdapter$$module$src$browser$serial$$($options$jscomp$42$$.$serial_container$, $JSCompiler_StaticMethods_continue_init$self$$.$bus$));
  $options$jscomp$42$$.$serial_container_xtermjs$ && ($JSCompiler_StaticMethods_continue_init$self$$.$serial_adapter$ = new $SerialAdapterXtermJS$$module$src$browser$serial$$($options$jscomp$42$$.$serial_container_xtermjs$, $JSCompiler_StaticMethods_continue_init$self$$.$bus$));
  $options$jscomp$42$$.$disable_speaker$ || ($JSCompiler_StaticMethods_continue_init$self$$.$g$ = new $SpeakerAdapter$$module$src$browser$speaker$$($JSCompiler_StaticMethods_continue_init$self$$.$bus$));
  var $files_to_load$$ = [];
  $add_file_boot_order_fs_url_relay_url_screen_options$$ = ($name$jscomp$101$$, $file$jscomp$4$$) => {
    if ($file$jscomp$4$$) {
      if ($file$jscomp$4$$.get && $file$jscomp$4$$.set && $file$jscomp$4$$.load) {
        $files_to_load$$.push({name:$name$jscomp$101$$, $loadable$:$file$jscomp$4$$, });
      } else {
        if ("bios" === $name$jscomp$101$$ || "vga_bios" === $name$jscomp$101$$ || "initial_state" === $name$jscomp$101$$ || "multiboot" === $name$jscomp$101$$ || "bzimage" === $name$jscomp$101$$ || "initrd" === $name$jscomp$101$$) {
          $file$jscomp$4$$.async = !1;
        }
        if ("fda" === $name$jscomp$101$$ || "fdb" === $name$jscomp$101$$) {
          $file$jscomp$4$$.async = !1;
        }
        $file$jscomp$4$$.url && !$file$jscomp$4$$.async ? $files_to_load$$.push({name:$name$jscomp$101$$, url:$file$jscomp$4$$.url, size:$file$jscomp$4$$.size, }) : $files_to_load$$.push({name:$name$jscomp$101$$, $loadable$:$buffer_from_object$$module$src$buffer$$($file$jscomp$4$$, $JSCompiler_StaticMethods_continue_init$self$$.$zstd_decompress_worker$.bind($JSCompiler_StaticMethods_continue_init$self$$)), });
      }
    }
  };
  $options$jscomp$42$$.state && console.warn("Warning: Unknown option 'state'. Did you mean 'initial_state'?");
  $add_file_boot_order_fs_url_relay_url_screen_options$$("bios", $options$jscomp$42$$.$bios$);
  $add_file_boot_order_fs_url_relay_url_screen_options$$("vga_bios", $options$jscomp$42$$.$vga_bios$);
  $add_file_boot_order_fs_url_relay_url_screen_options$$("cdrom", $options$jscomp$42$$.$cdrom$);
  $add_file_boot_order_fs_url_relay_url_screen_options$$("hda", $options$jscomp$42$$.$hda$);
  $add_file_boot_order_fs_url_relay_url_screen_options$$("hdb", $options$jscomp$42$$.$hdb$);
  $add_file_boot_order_fs_url_relay_url_screen_options$$("fda", $options$jscomp$42$$.$fda$);
  $add_file_boot_order_fs_url_relay_url_screen_options$$("fdb", $options$jscomp$42$$.$fdb$);
  $add_file_boot_order_fs_url_relay_url_screen_options$$("initial_state", $options$jscomp$42$$.$initial_state$);
  $add_file_boot_order_fs_url_relay_url_screen_options$$("multiboot", $options$jscomp$42$$.$multiboot$);
  $add_file_boot_order_fs_url_relay_url_screen_options$$("bzimage", $options$jscomp$42$$.$bzimage$);
  $add_file_boot_order_fs_url_relay_url_screen_options$$("initrd", $options$jscomp$42$$.$initrd$);
  if ($options$jscomp$42$$.filesystem && $options$jscomp$42$$.filesystem.$handle9p$) {
    $settings$$.$handle9p$ = $options$jscomp$42$$.filesystem.$handle9p$;
  } else {
    if ($options$jscomp$42$$.filesystem && $options$jscomp$42$$.filesystem.$proxy_url$) {
      $settings$$.$proxy9p$ = $options$jscomp$42$$.filesystem.$proxy_url$;
    } else {
      if ($options$jscomp$42$$.filesystem) {
        $add_file_boot_order_fs_url_relay_url_screen_options$$ = $options$jscomp$42$$.filesystem.$basefs$;
        var $base_url$$ = $options$jscomp$42$$.filesystem.$baseurl$;
        let $file_storage$jscomp$1$$ = new $MemoryFileStorage$$module$src$browser$filestorage$$;
        $base_url$$ && ($file_storage$jscomp$1$$ = new $ServerFileStorageWrapper$$module$src$browser$filestorage$$($file_storage$jscomp$1$$, $base_url$$));
        $settings$$.$fs9p$ = $JSCompiler_StaticMethods_continue_init$self$$.$fs9p$ = new $FS$$module$lib$filesystem$$($file_storage$jscomp$1$$);
        if ($add_file_boot_order_fs_url_relay_url_screen_options$$) {
          if ("object" === typeof $add_file_boot_order_fs_url_relay_url_screen_options$$) {
            var $size$jscomp$35$$ = $add_file_boot_order_fs_url_relay_url_screen_options$$.size;
            $add_file_boot_order_fs_url_relay_url_screen_options$$ = $add_file_boot_order_fs_url_relay_url_screen_options$$.url;
          }
          $files_to_load$$.push({name:"fs9p_json", url:$add_file_boot_order_fs_url_relay_url_screen_options$$, size:$size$jscomp$35$$, $as_json$:!0, });
        }
      }
    }
  }
  var $total$jscomp$1$$ = $files_to_load$$.length, $cont$$ = function($index$jscomp$82$$) {
    if ($index$jscomp$82$$ === $total$jscomp$1$$) {
      setTimeout($done$jscomp$4$$.bind(this), 0);
    } else {
      var $f$jscomp$1$$ = $files_to_load$$[$index$jscomp$82$$];
      $f$jscomp$1$$.$loadable$ ? ($f$jscomp$1$$.$loadable$.onload = function() {
        $put_on_settings$$.call(this, $f$jscomp$1$$.name, $f$jscomp$1$$.$loadable$);
        $cont$$($index$jscomp$82$$ + 1);
      }.bind(this), $f$jscomp$1$$.$loadable$.load()) : $load_file$$module$src$lib$$($f$jscomp$1$$.url, {done:function($cpu$jscomp$inline_420_result$jscomp$9$$) {
        if ($f$jscomp$1$$.url.endsWith(".zst") && "initial_state" !== $f$jscomp$1$$.name) {
          var $decompressed_size$jscomp$inline_418$$ = $f$jscomp$1$$.size, $ptr$jscomp$inline_421_src$jscomp$inline_419$$ = new Uint8Array($cpu$jscomp$inline_420_result$jscomp$9$$);
          $cpu$jscomp$inline_420_result$jscomp$9$$ = this.$v86$.$cpu$;
          this.$l$ = $cpu$jscomp$inline_420_result$jscomp$9$$.$zstd_create_ctx$($ptr$jscomp$inline_421_src$jscomp$inline_419$$.length);
          (new Uint8Array($cpu$jscomp$inline_420_result$jscomp$9$$.$wasm_memory$.buffer)).set($ptr$jscomp$inline_421_src$jscomp$inline_419$$, $cpu$jscomp$inline_420_result$jscomp$9$$.$zstd_get_src_ptr$(this.$l$));
          $ptr$jscomp$inline_421_src$jscomp$inline_419$$ = $cpu$jscomp$inline_420_result$jscomp$9$$.$zstd_read$(this.$l$, $decompressed_size$jscomp$inline_418$$);
          const $result$jscomp$inline_422$$ = $cpu$jscomp$inline_420_result$jscomp$9$$.$wasm_memory$.buffer.slice($ptr$jscomp$inline_421_src$jscomp$inline_419$$, $ptr$jscomp$inline_421_src$jscomp$inline_419$$ + $decompressed_size$jscomp$inline_418$$);
          $cpu$jscomp$inline_420_result$jscomp$9$$.$zstd_read_free$($ptr$jscomp$inline_421_src$jscomp$inline_419$$, $decompressed_size$jscomp$inline_418$$);
          $cpu$jscomp$inline_420_result$jscomp$9$$.$zstd_free_ctx$(this.$l$);
          this.$l$ = null;
          $cpu$jscomp$inline_420_result$jscomp$9$$ = $result$jscomp$inline_422$$;
        }
        $put_on_settings$$.call(this, $f$jscomp$1$$.name, $f$jscomp$1$$.$as_json$ ? $cpu$jscomp$inline_420_result$jscomp$9$$ : new $SyncBuffer$$module$src$buffer$$($cpu$jscomp$inline_420_result$jscomp$9$$));
        $cont$$($index$jscomp$82$$ + 1);
      }.bind(this), progress:function($e$jscomp$42$$) {
        200 === $e$jscomp$42$$.target.status ? $JSCompiler_StaticMethods_continue_init$self$$.$emulator_bus$.send("download-progress", {$file_index$:$index$jscomp$82$$, $file_count$:$total$jscomp$1$$, $file_name$:$f$jscomp$1$$.url, lengthComputable:$e$jscomp$42$$.lengthComputable, total:$e$jscomp$42$$.total || $f$jscomp$1$$.size, loaded:$e$jscomp$42$$.loaded, }) : $JSCompiler_StaticMethods_continue_init$self$$.$emulator_bus$.send("download-error", {$file_index$:$index$jscomp$82$$, $file_count$:$total$jscomp$1$$, 
        $file_name$:$f$jscomp$1$$.url, request:$e$jscomp$42$$.target, });
      }, $as_json$:$f$jscomp$1$$.$as_json$, });
    }
  }.bind($JSCompiler_StaticMethods_continue_init$self$$);
  $cont$$(0);
}
$JSCompiler_prototypeAlias$$ = $V86$$module$src$browser$starter$$.prototype;
$JSCompiler_prototypeAlias$$.$zstd_decompress_worker$ = async function($decompressed_size$jscomp$1$$, $src$jscomp$5$$) {
  if (!this.$h$) {
    const $url$jscomp$26$$ = URL.createObjectURL(new Blob(["(" + function() {
      let $wasm$$;
      globalThis.onmessage = function($e$jscomp$43_id$jscomp$21$$) {
        if ($wasm$$) {
          var $ptr$jscomp$6_src$jscomp$6$$ = $e$jscomp$43_id$jscomp$21$$.data.src, $decompressed_size$jscomp$2_env$jscomp$1$$ = $e$jscomp$43_id$jscomp$21$$.data.$decompressed_size$;
          $e$jscomp$43_id$jscomp$21$$ = $e$jscomp$43_id$jscomp$21$$.data.id;
          var $exports$jscomp$1$$ = $wasm$$.exports, $zstd_context$$ = $exports$jscomp$1$$.zstd_create_ctx($ptr$jscomp$6_src$jscomp$6$$.length);
          (new Uint8Array($exports$jscomp$1$$.memory.buffer)).set($ptr$jscomp$6_src$jscomp$6$$, $exports$jscomp$1$$.zstd_get_src_ptr($zstd_context$$));
          $ptr$jscomp$6_src$jscomp$6$$ = $exports$jscomp$1$$.zstd_read($zstd_context$$, $decompressed_size$jscomp$2_env$jscomp$1$$);
          var $result$jscomp$11$$ = $exports$jscomp$1$$.memory.buffer.slice($ptr$jscomp$6_src$jscomp$6$$, $ptr$jscomp$6_src$jscomp$6$$ + $decompressed_size$jscomp$2_env$jscomp$1$$);
          $exports$jscomp$1$$.zstd_read_free($ptr$jscomp$6_src$jscomp$6$$, $decompressed_size$jscomp$2_env$jscomp$1$$);
          $exports$jscomp$1$$.zstd_free_ctx($zstd_context$$);
          postMessage({result:$result$jscomp$11$$, id:$e$jscomp$43_id$jscomp$21$$}, [$result$jscomp$11$$]);
        } else {
          $decompressed_size$jscomp$2_env$jscomp$1$$ = Object.fromEntries("cpu_exception_hook run_hardware_timers cpu_event_halt microtick get_rand_int stop_idling io_port_read8 io_port_read16 io_port_read32 io_port_write8 io_port_write16 io_port_write32 mmap_read8 mmap_read16 mmap_read32 mmap_write8 mmap_write16 mmap_write32 mmap_write64 mmap_write128 codegen_finalize jit_clear_func jit_clear_all_funcs".split(" ").map($f$jscomp$2$$ => [$f$jscomp$2$$, () => console.error("zstd worker unexpectedly called " + 
          $f$jscomp$2$$)])), $decompressed_size$jscomp$2_env$jscomp$1$$.__indirect_function_table = new WebAssembly.Table({element:"anyfunc", initial:1024}), $decompressed_size$jscomp$2_env$jscomp$1$$.abort = () => {
            throw Error("zstd worker aborted");
          }, $decompressed_size$jscomp$2_env$jscomp$1$$.log_from_wasm = $decompressed_size$jscomp$2_env$jscomp$1$$.console_log_from_wasm = ($off$$, $len$jscomp$25$$) => {
            console.log($read_sized_string_from_mem$$module$src$lib$$($wasm$$.exports.memory.buffer, $off$$, $len$jscomp$25$$));
          }, $decompressed_size$jscomp$2_env$jscomp$1$$.dbg_trace_from_wasm = () => console.trace(), $wasm$$ = new WebAssembly.Instance(new WebAssembly.Module($e$jscomp$43_id$jscomp$21$$.data), {env:$decompressed_size$jscomp$2_env$jscomp$1$$});
        }
      };
    }.toString() + ")()"], {type:"text/javascript"}));
    this.$h$ = new Worker($url$jscomp$26$$);
    URL.revokeObjectURL($url$jscomp$26$$);
    this.$h$.postMessage(this.$s$, [this.$s$]);
  }
  return new Promise($resolve$jscomp$3$$ => {
    const $id$jscomp$22$$ = this.$v$++, $done$jscomp$5$$ = async $e$jscomp$44$$ => {
      $e$jscomp$44$$.data.id === $id$jscomp$22$$ && (this.$h$.removeEventListener("message", $done$jscomp$5$$), $resolve$jscomp$3$$($e$jscomp$44$$.data.result));
    };
    this.$h$.addEventListener("message", $done$jscomp$5$$);
    this.$h$.postMessage({src:$src$jscomp$5$$, $decompressed_size$:$decompressed_size$jscomp$1$$, id:$id$jscomp$22$$}, [$src$jscomp$5$$.buffer]);
  });
};
function $JSCompiler_StaticMethods_get_bzimage_initrd_from_filesystem$$($boot_filesystem$jscomp$1$$) {
  const $root$jscomp$3$$ = ($JSCompiler_StaticMethods_read_dir$$($boot_filesystem$jscomp$1$$, "/") || []).map($x$jscomp$117$$ => "/" + $x$jscomp$117$$);
  $boot_filesystem$jscomp$1$$ = ($JSCompiler_StaticMethods_read_dir$$($boot_filesystem$jscomp$1$$, "/boot/") || []).map($x$jscomp$118$$ => "/boot/" + $x$jscomp$118$$);
  let $initrd_path$jscomp$1$$, $bzimage_path$jscomp$1$$;
  for (const $f$jscomp$3$$ of [].concat($root$jscomp$3$$, $boot_filesystem$jscomp$1$$)) {
    const $old$$ = /old/i.test($f$jscomp$3$$) || /fallback/i.test($f$jscomp$3$$), $is_initrd$$ = /initrd/i.test($f$jscomp$3$$) || /initramfs/i.test($f$jscomp$3$$);
    !/vmlinuz/i.test($f$jscomp$3$$) && !/bzimage/i.test($f$jscomp$3$$) || $bzimage_path$jscomp$1$$ && $old$$ || ($bzimage_path$jscomp$1$$ = $f$jscomp$3$$);
    !$is_initrd$$ || $initrd_path$jscomp$1$$ && $old$$ || ($initrd_path$jscomp$1$$ = $f$jscomp$3$$);
  }
  $initrd_path$jscomp$1$$ && $bzimage_path$jscomp$1$$ || (console.log("Failed to find bzimage or initrd in filesystem. Files:"), console.log($root$jscomp$3$$.join(" ")), console.log($boot_filesystem$jscomp$1$$.join(" ")));
  return {$initrd_path$:$initrd_path$jscomp$1$$, $bzimage_path$:$bzimage_path$jscomp$1$$};
}
$JSCompiler_prototypeAlias$$.$run$ = async function() {
  this.$v86$.$run$();
};
$JSCompiler_prototypeAlias$$.stop = async function() {
  this.$cpu_is_running$ && await new Promise($resolve$jscomp$4$$ => {
    const $listener$jscomp$65$$ = () => {
      this.$bus$.unregister("emulator-stopped", $listener$jscomp$65$$);
      $resolve$jscomp$4$$();
    };
    $JSCompiler_StaticMethods_add_listener$$(this, "emulator-stopped", $listener$jscomp$65$$);
    this.$v86$.stop();
  });
};
$JSCompiler_prototypeAlias$$.$destroy$ = async function() {
  await this.stop();
  this.$v86$.$destroy$();
  this.$o$ && this.$o$.$destroy$();
  this.$i$ && this.$i$.$destroy$();
  this.$j$ && this.$j$.$destroy$();
  this.$screen_adapter$ && this.$screen_adapter$.$destroy$();
  this.$serial_adapter$ && this.$serial_adapter$.$destroy$();
  this.$g$ && this.$g$.$destroy$();
};
$JSCompiler_prototypeAlias$$.$restart$ = function() {
  this.$v86$.$restart$();
};
function $JSCompiler_StaticMethods_add_listener$$($JSCompiler_StaticMethods_add_listener$self$$, $event$jscomp$10$$, $listener$jscomp$66$$) {
  $JSCompiler_StaticMethods_add_listener$self$$.$bus$.register($event$jscomp$10$$, $listener$jscomp$66$$, $JSCompiler_StaticMethods_add_listener$self$$);
}
$JSCompiler_prototypeAlias$$.$restore_state$ = async function($state$jscomp$26$$) {
  this.$v86$.$restore_state$($state$jscomp$26$$);
};
$JSCompiler_prototypeAlias$$.$save_state$ = async function() {
  return this.$v86$.$save_state$();
};
$JSCompiler_prototypeAlias$$.$is_running$ = function() {
  return this.$cpu_is_running$;
};
async function $JSCompiler_StaticMethods_set_fda$$($JSCompiler_StaticMethods_set_fda$self$$, $file$jscomp$5$$) {
  const $fda$$ = $JSCompiler_StaticMethods_set_fda$self$$.$v86$.$cpu$.$devices$.$fdc$.$drives$[0];
  if ($file$jscomp$5$$.url && !$file$jscomp$5$$.async) {
    await new Promise($resolve$jscomp$5$$ => {
      $load_file$$module$src$lib$$($file$jscomp$5$$.url, {done:$result$jscomp$12$$ => {
        $JSCompiler_StaticMethods_insert_disk$$($fda$$, new $SyncBuffer$$module$src$buffer$$($result$jscomp$12$$));
        $resolve$jscomp$5$$();
      }});
    });
  } else {
    const $image$jscomp$4$$ = $buffer_from_object$$module$src$buffer$$($file$jscomp$5$$, $JSCompiler_StaticMethods_set_fda$self$$.$zstd_decompress_worker$.bind($JSCompiler_StaticMethods_set_fda$self$$));
    $image$jscomp$4$$.onload = () => {
      $JSCompiler_StaticMethods_insert_disk$$($fda$$, $image$jscomp$4$$);
    };
    await $image$jscomp$4$$.load();
  }
}
async function $JSCompiler_StaticMethods_set_fdb$$($JSCompiler_StaticMethods_set_fdb$self$$, $file$jscomp$6$$) {
  const $fdb$$ = $JSCompiler_StaticMethods_set_fdb$self$$.$v86$.$cpu$.$devices$.$fdc$.$drives$[1];
  if ($file$jscomp$6$$.url && !$file$jscomp$6$$.async) {
    await new Promise($resolve$jscomp$6$$ => {
      $load_file$$module$src$lib$$($file$jscomp$6$$.url, {done:$result$jscomp$13$$ => {
        $JSCompiler_StaticMethods_insert_disk$$($fdb$$, new $SyncBuffer$$module$src$buffer$$($result$jscomp$13$$));
        $resolve$jscomp$6$$();
      }});
    });
  } else {
    const $image$jscomp$5$$ = $buffer_from_object$$module$src$buffer$$($file$jscomp$6$$, $JSCompiler_StaticMethods_set_fdb$self$$.$zstd_decompress_worker$.bind($JSCompiler_StaticMethods_set_fdb$self$$));
    $image$jscomp$5$$.onload = () => {
      $JSCompiler_StaticMethods_insert_disk$$($fdb$$, $image$jscomp$5$$);
    };
    await $image$jscomp$5$$.load();
  }
}
$JSCompiler_prototypeAlias$$.$set_cdrom$ = async function($file$jscomp$7$$) {
  if ($file$jscomp$7$$.url && !$file$jscomp$7$$.async) {
    $load_file$$module$src$lib$$($file$jscomp$7$$.url, {done:$result$jscomp$14$$ => {
      this.$v86$.$cpu$.$devices$.$cdrom$.$set_cdrom$(new $SyncBuffer$$module$src$buffer$$($result$jscomp$14$$));
    }, });
  } else {
    const $image$jscomp$6$$ = $buffer_from_object$$module$src$buffer$$($file$jscomp$7$$, this.$zstd_decompress_worker$.bind(this));
    $image$jscomp$6$$.onload = () => {
      this.$v86$.$cpu$.$devices$.$cdrom$.$set_cdrom$($image$jscomp$6$$);
    };
    await $image$jscomp$6$$.load();
  }
};
async function $JSCompiler_StaticMethods_keyboard_send_scancodes$$($JSCompiler_StaticMethods_keyboard_send_scancodes$self$$, $codes$$) {
  for (var $i$jscomp$68$$ = 0; $i$jscomp$68$$ < $codes$$.length; $i$jscomp$68$$++) {
    $JSCompiler_StaticMethods_keyboard_send_scancodes$self$$.$bus$.send("keyboard-code", $codes$$[$i$jscomp$68$$]);
  }
}
async function $JSCompiler_StaticMethods_keyboard_send_text$$($JSCompiler_StaticMethods_keyboard_send_text$self$$, $string$jscomp$3$$) {
  for (var $i$jscomp$70$$ = 0; $i$jscomp$70$$ < $string$jscomp$3$$.length; $i$jscomp$70$$++) {
    $JSCompiler_StaticMethods_keyboard_send_text$self$$.$o$.$simulate_char$($string$jscomp$3$$[$i$jscomp$70$$]);
  }
}
async function $JSCompiler_StaticMethods_lock_mouse$$() {
  const $elem$jscomp$3$$ = document.body;
  try {
    await $elem$jscomp$3$$.requestPointerLock({unadjustedMovement:!0, });
  } catch ($e$jscomp$46$$) {
    await $elem$jscomp$3$$.requestPointerLock();
  }
}
$JSCompiler_prototypeAlias$$.$create_file$ = async function($file$jscomp$8_parent_id$$, $data$jscomp$162$$) {
  var $fs$jscomp$7$$ = this.$fs9p$;
  if ($fs$jscomp$7$$) {
    var $filename$jscomp$12_parts$jscomp$4$$ = $file$jscomp$8_parent_id$$.split("/");
    $filename$jscomp$12_parts$jscomp$4$$ = $filename$jscomp$12_parts$jscomp$4$$[$filename$jscomp$12_parts$jscomp$4$$.length - 1];
    $file$jscomp$8_parent_id$$ = $JSCompiler_StaticMethods_SearchPath$$($fs$jscomp$7$$, $file$jscomp$8_parent_id$$).$parentid$;
    if ("" !== $filename$jscomp$12_parts$jscomp$4$$ && -1 !== $file$jscomp$8_parent_id$$) {
      await $JSCompiler_StaticMethods_CreateBinaryFile$$($fs$jscomp$7$$, $filename$jscomp$12_parts$jscomp$4$$, $file$jscomp$8_parent_id$$, $data$jscomp$162$$);
    } else {
      return Promise.reject(new $FileNotFoundError$$module$src$browser$starter$$);
    }
  }
};
$JSCompiler_prototypeAlias$$.$read_file$ = async function($file$jscomp$9_result$jscomp$15$$) {
  var $fs$jscomp$8$$ = this.$fs9p$;
  if ($fs$jscomp$8$$) {
    return ($file$jscomp$9_result$jscomp$15$$ = await $fs$jscomp$8$$.$read_file$($file$jscomp$9_result$jscomp$15$$)) ? $file$jscomp$9_result$jscomp$15$$ : Promise.reject(new $FileNotFoundError$$module$src$browser$starter$$);
  }
};
function $FileNotFoundError$$module$src$browser$starter$$() {
  this.message = "File not found";
}
$FileNotFoundError$$module$src$browser$starter$$.prototype = Error.prototype;
"undefined" !== typeof module && "undefined" !== typeof module.exports ? module.exports.V86 = $V86$$module$src$browser$starter$$ : "undefined" !== typeof window ? window.V86 = $V86$$module$src$browser$starter$$ : "function" === typeof importScripts && (self.V86 = $V86$$module$src$browser$starter$$);
function $v86$$module$src$main$$($bus$jscomp$17$$, $wasm$jscomp$1$$) {
  this.$l$ = this.$h$ = !1;
  this.$u$ = !0;
  this.$i$ = 0;
  this.$g$ = null;
  this.$cpu$ = new $CPU$$module$src$cpu$$($bus$jscomp$17$$, $wasm$jscomp$1$$, () => {
    this.$u$ && $JSCompiler_StaticMethods_next_tick$$(this, 0);
  });
  this.$bus$ = $bus$jscomp$17$$;
  this.$j$();
}
$JSCompiler_prototypeAlias$$ = $v86$$module$src$main$$.prototype;
$JSCompiler_prototypeAlias$$.$run$ = function() {
  this.$l$ = !1;
  this.$h$ || (this.$h$ = !0, this.$bus$.send("emulator-started"));
  $JSCompiler_StaticMethods_next_tick$$(this, 0);
};
function $JSCompiler_StaticMethods_do_tick$$($JSCompiler_StaticMethods_do_tick$self$$) {
  if ($JSCompiler_StaticMethods_do_tick$self$$.$l$ || !$JSCompiler_StaticMethods_do_tick$self$$.$h$) {
    $JSCompiler_StaticMethods_do_tick$self$$.$l$ = $JSCompiler_StaticMethods_do_tick$self$$.$h$ = !1, $JSCompiler_StaticMethods_do_tick$self$$.$bus$.send("emulator-stopped");
  } else {
    $JSCompiler_StaticMethods_do_tick$self$$.$u$ = !1;
    var $t$jscomp$5$$ = $JSCompiler_StaticMethods_do_tick$self$$.$cpu$.$Ha$();
    $JSCompiler_StaticMethods_next_tick$$($JSCompiler_StaticMethods_do_tick$self$$, $t$jscomp$5$$);
  }
}
function $JSCompiler_StaticMethods_next_tick$$($JSCompiler_StaticMethods_next_tick$self$$, $t$jscomp$6$$) {
  const $tick$$ = ++$JSCompiler_StaticMethods_next_tick$self$$.$i$;
  $JSCompiler_StaticMethods_next_tick$self$$.$u$ = !0;
  $JSCompiler_StaticMethods_next_tick$self$$.$s$($t$jscomp$6$$, $tick$$);
}
$JSCompiler_prototypeAlias$$.stop = function() {
  this.$h$ && (this.$l$ = !0);
};
$JSCompiler_prototypeAlias$$.$destroy$ = function() {
  this.$o$();
};
$JSCompiler_prototypeAlias$$.$restart$ = function() {
  this.$cpu$.$O$();
  $JSCompiler_StaticMethods_load_bios$$(this.$cpu$);
};
$JSCompiler_prototypeAlias$$.$init$ = function($settings$jscomp$1$$) {
  this.$cpu$.$init$($settings$jscomp$1$$, this.$bus$);
  this.$bus$.send("emulator-ready");
};
if ("undefined" !== typeof process) {
  $v86$$module$src$main$$.prototype.$s$ = function($t$jscomp$7$$, $tick$jscomp$2$$) {
    1 > $t$jscomp$7$$ ? global.setImmediate($tick$jscomp$3$$ => {
      $tick$jscomp$3$$ === this.$i$ && $JSCompiler_StaticMethods_do_tick$$(this);
    }, $tick$jscomp$2$$) : setTimeout($tick$jscomp$4$$ => {
      $tick$jscomp$4$$ === this.$i$ && $JSCompiler_StaticMethods_do_tick$$(this);
    }, $t$jscomp$7$$, $tick$jscomp$2$$);
  }, $v86$$module$src$main$$.prototype.$j$ = function() {
  }, $v86$$module$src$main$$.prototype.$o$ = function() {
  };
} else {
  if (window.scheduler && "function" === typeof window.scheduler.postTask && location.href.includes("use-scheduling-api")) {
    $v86$$module$src$main$$.prototype.$s$ = function($t$jscomp$8$$, $tick$jscomp$5$$) {
      $t$jscomp$8$$ = Math.max(0, $t$jscomp$8$$);
      window.scheduler.postTask(() => {
        $tick$jscomp$5$$ === this.$i$ && $JSCompiler_StaticMethods_do_tick$$(this);
      }, {delay:$t$jscomp$8$$});
    }, $v86$$module$src$main$$.prototype.$j$ = function() {
    }, $v86$$module$src$main$$.prototype.$o$ = function() {
    };
  } else {
    if ("undefined" !== typeof Worker) {
      function $the_worker$jscomp$1$$() {
        let $timeout$jscomp$4$$;
        globalThis.onmessage = function($e$jscomp$47$$) {
          const $t$jscomp$9$$ = $e$jscomp$47$$.data.t;
          $timeout$jscomp$4$$ = $timeout$jscomp$4$$ && clearTimeout($timeout$jscomp$4$$);
          1 > $t$jscomp$9$$ ? postMessage($e$jscomp$47$$.data.$tick$) : $timeout$jscomp$4$$ = setTimeout(() => postMessage($e$jscomp$47$$.data.$tick$), $t$jscomp$9$$);
        };
      }
      $v86$$module$src$main$$.prototype.$j$ = function() {
        const $url$jscomp$27$$ = URL.createObjectURL(new Blob(["(" + $the_worker$jscomp$1$$.toString() + ")()"], {type:"text/javascript"}));
        this.$g$ = new Worker($url$jscomp$27$$);
        this.$g$.onmessage = $e$jscomp$48$$ => {
          $e$jscomp$48$$.data === this.$i$ && $JSCompiler_StaticMethods_do_tick$$(this);
        };
        URL.revokeObjectURL($url$jscomp$27$$);
      };
      $v86$$module$src$main$$.prototype.$s$ = function($t$jscomp$10$$, $tick$jscomp$6$$) {
        this.$g$.postMessage({t:$t$jscomp$10$$, $tick$:$tick$jscomp$6$$});
      };
      $v86$$module$src$main$$.prototype.$o$ = function() {
        this.$g$ && this.$g$.terminate();
        this.$g$ = null;
      };
    } else {
      $v86$$module$src$main$$.prototype.$s$ = function($t$jscomp$11$$) {
        setTimeout(() => {
          $JSCompiler_StaticMethods_do_tick$$(this);
        }, $t$jscomp$11$$);
      }, $v86$$module$src$main$$.prototype.$j$ = function() {
      }, $v86$$module$src$main$$.prototype.$o$ = function() {
      };
    }
  }
}
$v86$$module$src$main$$.prototype.$save_state$ = function() {
  for (var $saved_buffers$jscomp$inline_441$$ = [], $buffer_block$jscomp$inline_453_buffer_block_start$jscomp$inline_449_state$jscomp$inline_442$$ = $save_object$$module$src$state$$(this.$cpu$, $saved_buffers$jscomp$inline_441$$), $buffer_infos$jscomp$inline_443$$ = [], $result$jscomp$inline_451_total_buffer_size$jscomp$inline_444$$ = 0, $i$jscomp$inline_445_info_block$jscomp$inline_448_info_object$jscomp$inline_447$$ = 0; $i$jscomp$inline_445_info_block$jscomp$inline_448_info_object$jscomp$inline_447$$ < 
  $saved_buffers$jscomp$inline_441$$.length; $i$jscomp$inline_445_info_block$jscomp$inline_448_info_object$jscomp$inline_447$$++) {
    var $len$jscomp$inline_446_total_size$jscomp$inline_450$$ = $saved_buffers$jscomp$inline_441$$[$i$jscomp$inline_445_info_block$jscomp$inline_448_info_object$jscomp$inline_447$$].byteLength;
    $buffer_infos$jscomp$inline_443$$[$i$jscomp$inline_445_info_block$jscomp$inline_448_info_object$jscomp$inline_447$$] = {offset:$result$jscomp$inline_451_total_buffer_size$jscomp$inline_444$$, length:$len$jscomp$inline_446_total_size$jscomp$inline_450$$, };
    $result$jscomp$inline_451_total_buffer_size$jscomp$inline_444$$ += $len$jscomp$inline_446_total_size$jscomp$inline_450$$;
    $result$jscomp$inline_451_total_buffer_size$jscomp$inline_444$$ = $result$jscomp$inline_451_total_buffer_size$jscomp$inline_444$$ + 3 & -4;
  }
  $i$jscomp$inline_445_info_block$jscomp$inline_448_info_object$jscomp$inline_447$$ = JSON.stringify({buffer_infos:$buffer_infos$jscomp$inline_443$$, state:$buffer_block$jscomp$inline_453_buffer_block_start$jscomp$inline_449_state$jscomp$inline_442$$, });
  $i$jscomp$inline_445_info_block$jscomp$inline_448_info_object$jscomp$inline_447$$ = (new TextEncoder).encode($i$jscomp$inline_445_info_block$jscomp$inline_448_info_object$jscomp$inline_447$$);
  $buffer_block$jscomp$inline_453_buffer_block_start$jscomp$inline_449_state$jscomp$inline_442$$ = 16 + $i$jscomp$inline_445_info_block$jscomp$inline_448_info_object$jscomp$inline_447$$.length;
  $buffer_block$jscomp$inline_453_buffer_block_start$jscomp$inline_449_state$jscomp$inline_442$$ = $buffer_block$jscomp$inline_453_buffer_block_start$jscomp$inline_449_state$jscomp$inline_442$$ + 3 & -4;
  $len$jscomp$inline_446_total_size$jscomp$inline_450$$ = $buffer_block$jscomp$inline_453_buffer_block_start$jscomp$inline_449_state$jscomp$inline_442$$ + $result$jscomp$inline_451_total_buffer_size$jscomp$inline_444$$;
  $result$jscomp$inline_451_total_buffer_size$jscomp$inline_444$$ = new ArrayBuffer($len$jscomp$inline_446_total_size$jscomp$inline_450$$);
  var $header_block$jscomp$inline_452$$ = new Int32Array($result$jscomp$inline_451_total_buffer_size$jscomp$inline_444$$, 0, 4);
  (new Uint8Array($result$jscomp$inline_451_total_buffer_size$jscomp$inline_444$$, 16, $i$jscomp$inline_445_info_block$jscomp$inline_448_info_object$jscomp$inline_447$$.length)).set($i$jscomp$inline_445_info_block$jscomp$inline_448_info_object$jscomp$inline_447$$);
  $buffer_block$jscomp$inline_453_buffer_block_start$jscomp$inline_449_state$jscomp$inline_442$$ = new Uint8Array($result$jscomp$inline_451_total_buffer_size$jscomp$inline_444$$, $buffer_block$jscomp$inline_453_buffer_block_start$jscomp$inline_449_state$jscomp$inline_442$$);
  $header_block$jscomp$inline_452$$[0] = -2039052682;
  $header_block$jscomp$inline_452$$[1] = 6;
  $header_block$jscomp$inline_452$$[2] = $len$jscomp$inline_446_total_size$jscomp$inline_450$$;
  $header_block$jscomp$inline_452$$[3] = $i$jscomp$inline_445_info_block$jscomp$inline_448_info_object$jscomp$inline_447$$.length;
  for ($i$jscomp$inline_445_info_block$jscomp$inline_448_info_object$jscomp$inline_447$$ = 0; $i$jscomp$inline_445_info_block$jscomp$inline_448_info_object$jscomp$inline_447$$ < $saved_buffers$jscomp$inline_441$$.length; $i$jscomp$inline_445_info_block$jscomp$inline_448_info_object$jscomp$inline_447$$++) {
    $buffer_block$jscomp$inline_453_buffer_block_start$jscomp$inline_449_state$jscomp$inline_442$$.set($saved_buffers$jscomp$inline_441$$[$i$jscomp$inline_445_info_block$jscomp$inline_448_info_object$jscomp$inline_447$$], $buffer_infos$jscomp$inline_443$$[$i$jscomp$inline_445_info_block$jscomp$inline_448_info_object$jscomp$inline_447$$].offset);
  }
  return $result$jscomp$inline_451_total_buffer_size$jscomp$inline_444$$;
};
$v86$$module$src$main$$.prototype.$restore_state$ = function($state$jscomp$27$$) {
  return $restore_state$$module$src$state$$(this.$cpu$, $state$jscomp$27$$);
};
if ("object" === typeof performance && performance.now) {
  var $v86$$module$src$main$microtick$$ = performance.now.bind(performance);
} else {
  if ("function" === typeof require) {
    const {performance:$performance$jscomp$1$$} = require("perf_hooks");
    $v86$$module$src$main$microtick$$ = $performance$jscomp$1$$.now.bind($performance$jscomp$1$$);
  } else {
    "object" === typeof process && process.hrtime ? $v86$$module$src$main$microtick$$ = function() {
      var $t$jscomp$12$$ = process.hrtime();
      return 1000 * $t$jscomp$12$$[0] + $t$jscomp$12$$[1] / 1e6;
    } : $v86$$module$src$main$microtick$$ = Date.now;
  }
}
;function $ACPI$$module$src$acpi$$($cpu$jscomp$14$$) {
  this.$cpu$ = $cpu$jscomp$14$$;
  var $io$jscomp$1$$ = $cpu$jscomp$14$$.$io$;
  $JSCompiler_StaticMethods_register_device$$($cpu$jscomp$14$$.$devices$.$pci$, {$pci_id$:56, $pci_space$:[134, 128, 19, 113, 7, 0, 128, 2, 8, 0, 128, 6, 0, 0, 128, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 9, 1, 0, 0, ], $pci_bars$:[], name:"acpi", });
  this.$g$ = this.$h$ = 0;
  this.status = 1;
  this.$pm1_enable$ = this.$pm1_status$ = 0;
  this.$i$ = $JSCompiler_StaticMethods_get_timer$$(this, $v86$$module$src$main$microtick$$());
  this.$gpe$ = new Uint8Array(4);
  $JSCompiler_StaticMethods_register_read$$($io$jscomp$1$$, 45056, this, void 0, function() {
    return this.$pm1_status$;
  });
  $JSCompiler_StaticMethods_register_write$$($io$jscomp$1$$, 45056, this, void 0, function($value$jscomp$146$$) {
    this.$pm1_status$ &= ~$value$jscomp$146$$;
  });
  $JSCompiler_StaticMethods_register_read$$($io$jscomp$1$$, 45058, this, void 0, function() {
    return this.$pm1_enable$;
  });
  $JSCompiler_StaticMethods_register_write$$($io$jscomp$1$$, 45058, this, void 0, function($value$jscomp$147$$) {
    this.$pm1_enable$ = $value$jscomp$147$$;
  });
  $JSCompiler_StaticMethods_register_read$$($io$jscomp$1$$, 45060, this, function() {
    return this.status & 255;
  }, function() {
    return this.status;
  });
  $JSCompiler_StaticMethods_register_write$$($io$jscomp$1$$, 45060, this, void 0, function($value$jscomp$148$$) {
    this.status = $value$jscomp$148$$;
  });
  $JSCompiler_StaticMethods_register_read$$($io$jscomp$1$$, 45064, this, void 0, void 0, function() {
    return $JSCompiler_StaticMethods_get_timer$$(this, $v86$$module$src$main$microtick$$()) & 16777215;
  });
  $JSCompiler_StaticMethods_register_read$$($io$jscomp$1$$, 45024, this, function() {
    return this.$gpe$[0];
  });
  $JSCompiler_StaticMethods_register_read$$($io$jscomp$1$$, 45025, this, function() {
    return this.$gpe$[1];
  });
  $JSCompiler_StaticMethods_register_read$$($io$jscomp$1$$, 45026, this, function() {
    return this.$gpe$[2];
  });
  $JSCompiler_StaticMethods_register_read$$($io$jscomp$1$$, 45027, this, function() {
    return this.$gpe$[3];
  });
  $JSCompiler_StaticMethods_register_write$$($io$jscomp$1$$, 45024, this, function($value$jscomp$150$$) {
    this.$gpe$[0] = $value$jscomp$150$$;
  });
  $JSCompiler_StaticMethods_register_write$$($io$jscomp$1$$, 45025, this, function($value$jscomp$151$$) {
    this.$gpe$[1] = $value$jscomp$151$$;
  });
  $JSCompiler_StaticMethods_register_write$$($io$jscomp$1$$, 45026, this, function($value$jscomp$152$$) {
    this.$gpe$[2] = $value$jscomp$152$$;
  });
  $JSCompiler_StaticMethods_register_write$$($io$jscomp$1$$, 45027, this, function($value$jscomp$153$$) {
    this.$gpe$[3] = $value$jscomp$153$$;
  });
}
$ACPI$$module$src$acpi$$.prototype.$timer$ = function($now$jscomp$11_timer$$) {
  $now$jscomp$11_timer$$ = $JSCompiler_StaticMethods_get_timer$$(this, $now$jscomp$11_timer$$);
  var $highest_bit_changed$$ = 0 !== (($now$jscomp$11_timer$$ ^ this.$i$) & 8388608);
  this.$pm1_enable$ & 1 && $highest_bit_changed$$ ? (this.$pm1_status$ |= 1, this.$cpu$.$device_raise_irq$(9)) : this.$cpu$.$device_lower_irq$(9);
  this.$i$ = $now$jscomp$11_timer$$;
  return 100;
};
function $JSCompiler_StaticMethods_get_timer$$($JSCompiler_StaticMethods_get_timer$self$$, $now$jscomp$12_t$jscomp$13$$) {
  $now$jscomp$12_t$jscomp$13$$ = Math.round(3579.545 * $now$jscomp$12_t$jscomp$13$$);
  $now$jscomp$12_t$jscomp$13$$ === $JSCompiler_StaticMethods_get_timer$self$$.$h$ ? 3579.545 > $JSCompiler_StaticMethods_get_timer$self$$.$g$ && $JSCompiler_StaticMethods_get_timer$self$$.$g$++ : $JSCompiler_StaticMethods_get_timer$self$$.$h$ + $JSCompiler_StaticMethods_get_timer$self$$.$g$ <= $now$jscomp$12_t$jscomp$13$$ && ($JSCompiler_StaticMethods_get_timer$self$$.$g$ = 0, $JSCompiler_StaticMethods_get_timer$self$$.$h$ = $now$jscomp$12_t$jscomp$13$$);
  return $JSCompiler_StaticMethods_get_timer$self$$.$h$ + $JSCompiler_StaticMethods_get_timer$self$$.$g$;
}
$ACPI$$module$src$acpi$$.prototype.$get_state$ = function() {
  var $state$jscomp$28$$ = [];
  $state$jscomp$28$$[0] = this.status;
  $state$jscomp$28$$[1] = this.$pm1_status$;
  $state$jscomp$28$$[2] = this.$pm1_enable$;
  $state$jscomp$28$$[3] = this.$gpe$;
  return $state$jscomp$28$$;
};
$ACPI$$module$src$acpi$$.prototype.$set_state$ = function($state$jscomp$29$$) {
  this.status = $state$jscomp$29$$[0];
  this.$pm1_status$ = $state$jscomp$29$$[1];
  this.$pm1_enable$ = $state$jscomp$29$$[2];
  this.$gpe$ = $state$jscomp$29$$[3];
};
function $UART$$module$src$uart$$($cpu$jscomp$15_io$jscomp$2$$, $port$jscomp$2$$, $bus$jscomp$18$$) {
  this.$bus$ = $bus$jscomp$18$$;
  this.$cpu$ = $cpu$jscomp$15_io$jscomp$2$$;
  this.$h$ = 4;
  this.$line_control$ = this.$baud_rate$ = 0;
  this.$lsr$ = 96;
  this.$ier$ = this.$fifo_control$ = 0;
  this.$iir$ = 1;
  this.$irq$ = this.$scratch_register$ = this.$modem_status$ = this.$modem_control$ = 0;
  this.input = [];
  switch($port$jscomp$2$$) {
    case 1016:
      this.$g$ = 0;
      this.$irq$ = 4;
      break;
    case 760:
      this.$g$ = 1;
      this.$irq$ = 3;
      break;
    case 1E3:
      this.$g$ = 2;
      this.$irq$ = 4;
      break;
    case 744:
      this.$irq$ = this.$g$ = 3;
      break;
    default:
      this.$g$ = 0, this.$irq$ = 4;
  }
  this.$bus$.register("serial" + this.$g$ + "-input", function($data$jscomp$163$$) {
    this.input.push($data$jscomp$163$$);
    this.$lsr$ |= 1;
    this.$fifo_control$ & 1 ? $JSCompiler_StaticMethods_ThrowInterrupt$$(this, 12) : $JSCompiler_StaticMethods_ThrowInterrupt$$(this, 4);
  }, this);
  this.$bus$.register("serial" + this.$g$ + "-modem-status-input", function($data$jscomp$164$$) {
    $JSCompiler_StaticMethods_set_modem_status$$(this, $data$jscomp$164$$);
  }, this);
  this.$bus$.register("serial" + this.$g$ + "-carrier-detect-input", function($data$jscomp$165$$) {
    $JSCompiler_StaticMethods_set_modem_status$$(this, $data$jscomp$165$$ ? this.$modem_status$ | 136 : this.$modem_status$ & -137);
  }, this);
  this.$bus$.register("serial" + this.$g$ + "-ring-indicator-input", function($data$jscomp$166$$) {
    $JSCompiler_StaticMethods_set_modem_status$$(this, $data$jscomp$166$$ ? this.$modem_status$ | 68 : this.$modem_status$ & -69);
  }, this);
  this.$bus$.register("serial" + this.$g$ + "-data-set-ready-input", function($data$jscomp$167$$) {
    $JSCompiler_StaticMethods_set_modem_status$$(this, $data$jscomp$167$$ ? this.$modem_status$ | 34 : this.$modem_status$ & -35);
  }, this);
  this.$bus$.register("serial" + this.$g$ + "-clear-to-send-input", function($data$jscomp$168$$) {
    $JSCompiler_StaticMethods_set_modem_status$$(this, $data$jscomp$168$$ ? this.$modem_status$ | 17 : this.$modem_status$ & -18);
  }, this);
  $cpu$jscomp$15_io$jscomp$2$$ = $cpu$jscomp$15_io$jscomp$2$$.$io$;
  $JSCompiler_StaticMethods_register_write$$($cpu$jscomp$15_io$jscomp$2$$, $port$jscomp$2$$, this, function($out_byte$jscomp$1$$) {
    $JSCompiler_StaticMethods_write_data$$(this, $out_byte$jscomp$1$$);
  }, function($out_word$$) {
    $JSCompiler_StaticMethods_write_data$$(this, $out_word$$ & 255);
    $JSCompiler_StaticMethods_write_data$$(this, $out_word$$ >> 8);
  });
  $JSCompiler_StaticMethods_register_write$$($cpu$jscomp$15_io$jscomp$2$$, $port$jscomp$2$$ | 1, this, function($out_byte$jscomp$2$$) {
    this.$line_control$ & 128 ? this.$baud_rate$ = this.$baud_rate$ & 255 | $out_byte$jscomp$2$$ << 8 : (0 === (this.$ier$ & 2) && $out_byte$jscomp$2$$ & 2 && $JSCompiler_StaticMethods_ThrowInterrupt$$(this, 2), this.$ier$ = $out_byte$jscomp$2$$ & 15, $JSCompiler_StaticMethods_CheckInterrupt$$(this));
  });
  $JSCompiler_StaticMethods_register_read$$($cpu$jscomp$15_io$jscomp$2$$, $port$jscomp$2$$, this, function() {
    if (this.$line_control$ & 128) {
      return this.$baud_rate$ & 255;
    }
    let $data$jscomp$169$$ = 0;
    0 !== this.input.length && ($data$jscomp$169$$ = this.input.shift());
    0 === this.input.length && (this.$lsr$ &= -2, $JSCompiler_StaticMethods_ClearInterrupt$$(this, 12), $JSCompiler_StaticMethods_ClearInterrupt$$(this, 4));
    return $data$jscomp$169$$;
  });
  $JSCompiler_StaticMethods_register_read$$($cpu$jscomp$15_io$jscomp$2$$, $port$jscomp$2$$ | 1, this, function() {
    return this.$line_control$ & 128 ? this.$baud_rate$ >> 8 : this.$ier$ & 15;
  });
  $JSCompiler_StaticMethods_register_read$$($cpu$jscomp$15_io$jscomp$2$$, $port$jscomp$2$$ | 2, this, function() {
    var $ret$jscomp$10$$ = this.$iir$ & 15;
    2 === this.$iir$ && $JSCompiler_StaticMethods_ClearInterrupt$$(this, 2);
    this.$fifo_control$ & 1 && ($ret$jscomp$10$$ |= 192);
    return $ret$jscomp$10$$;
  });
  $JSCompiler_StaticMethods_register_write$$($cpu$jscomp$15_io$jscomp$2$$, $port$jscomp$2$$ | 2, this, function($out_byte$jscomp$3$$) {
    this.$fifo_control$ = $out_byte$jscomp$3$$;
  });
  $JSCompiler_StaticMethods_register_read$$($cpu$jscomp$15_io$jscomp$2$$, $port$jscomp$2$$ | 3, this, function() {
    return this.$line_control$;
  });
  $JSCompiler_StaticMethods_register_write$$($cpu$jscomp$15_io$jscomp$2$$, $port$jscomp$2$$ | 3, this, function($out_byte$jscomp$4$$) {
    this.$line_control$ = $out_byte$jscomp$4$$;
  });
  $JSCompiler_StaticMethods_register_read$$($cpu$jscomp$15_io$jscomp$2$$, $port$jscomp$2$$ | 4, this, function() {
    return this.$modem_control$;
  });
  $JSCompiler_StaticMethods_register_write$$($cpu$jscomp$15_io$jscomp$2$$, $port$jscomp$2$$ | 4, this, function($out_byte$jscomp$5$$) {
    this.$modem_control$ = $out_byte$jscomp$5$$;
  });
  $JSCompiler_StaticMethods_register_read$$($cpu$jscomp$15_io$jscomp$2$$, $port$jscomp$2$$ | 5, this, function() {
    return this.$lsr$;
  });
  $JSCompiler_StaticMethods_register_write$$($cpu$jscomp$15_io$jscomp$2$$, $port$jscomp$2$$ | 5, this, function() {
  });
  $JSCompiler_StaticMethods_register_read$$($cpu$jscomp$15_io$jscomp$2$$, $port$jscomp$2$$ | 6, this, function() {
    return this.$modem_status$ &= 240;
  });
  $JSCompiler_StaticMethods_register_write$$($cpu$jscomp$15_io$jscomp$2$$, $port$jscomp$2$$ | 6, this, function($out_byte$jscomp$7$$) {
    $JSCompiler_StaticMethods_set_modem_status$$(this, $out_byte$jscomp$7$$);
  });
  $JSCompiler_StaticMethods_register_read$$($cpu$jscomp$15_io$jscomp$2$$, $port$jscomp$2$$ | 7, this, function() {
    return this.$scratch_register$;
  });
  $JSCompiler_StaticMethods_register_write$$($cpu$jscomp$15_io$jscomp$2$$, $port$jscomp$2$$ | 7, this, function($out_byte$jscomp$8$$) {
    this.$scratch_register$ = $out_byte$jscomp$8$$;
  });
}
$UART$$module$src$uart$$.prototype.$get_state$ = function() {
  var $state$jscomp$30$$ = [];
  $state$jscomp$30$$[0] = this.$h$;
  $state$jscomp$30$$[1] = this.$baud_rate$;
  $state$jscomp$30$$[2] = this.$line_control$;
  $state$jscomp$30$$[3] = this.$lsr$;
  $state$jscomp$30$$[4] = this.$fifo_control$;
  $state$jscomp$30$$[5] = this.$ier$;
  $state$jscomp$30$$[6] = this.$iir$;
  $state$jscomp$30$$[7] = this.$modem_control$;
  $state$jscomp$30$$[8] = this.$modem_status$;
  $state$jscomp$30$$[9] = this.$scratch_register$;
  $state$jscomp$30$$[10] = this.$irq$;
  return $state$jscomp$30$$;
};
$UART$$module$src$uart$$.prototype.$set_state$ = function($state$jscomp$31$$) {
  this.$h$ = $state$jscomp$31$$[0];
  this.$baud_rate$ = $state$jscomp$31$$[1];
  this.$line_control$ = $state$jscomp$31$$[2];
  this.$lsr$ = $state$jscomp$31$$[3];
  this.$fifo_control$ = $state$jscomp$31$$[4];
  this.$ier$ = $state$jscomp$31$$[5];
  this.$iir$ = $state$jscomp$31$$[6];
  this.$modem_control$ = $state$jscomp$31$$[7];
  this.$modem_status$ = $state$jscomp$31$$[8];
  this.$scratch_register$ = $state$jscomp$31$$[9];
  this.$irq$ = $state$jscomp$31$$[10];
};
function $JSCompiler_StaticMethods_CheckInterrupt$$($JSCompiler_StaticMethods_CheckInterrupt$self$$) {
  $JSCompiler_StaticMethods_CheckInterrupt$self$$.$h$ & 4096 && $JSCompiler_StaticMethods_CheckInterrupt$self$$.$ier$ & 1 ? ($JSCompiler_StaticMethods_CheckInterrupt$self$$.$iir$ = 12, $JSCompiler_StaticMethods_CheckInterrupt$self$$.$cpu$.$device_raise_irq$($JSCompiler_StaticMethods_CheckInterrupt$self$$.$irq$)) : $JSCompiler_StaticMethods_CheckInterrupt$self$$.$h$ & 16 && $JSCompiler_StaticMethods_CheckInterrupt$self$$.$ier$ & 1 ? ($JSCompiler_StaticMethods_CheckInterrupt$self$$.$iir$ = 4, $JSCompiler_StaticMethods_CheckInterrupt$self$$.$cpu$.$device_raise_irq$($JSCompiler_StaticMethods_CheckInterrupt$self$$.$irq$)) : 
  $JSCompiler_StaticMethods_CheckInterrupt$self$$.$h$ & 4 && $JSCompiler_StaticMethods_CheckInterrupt$self$$.$ier$ & 2 ? ($JSCompiler_StaticMethods_CheckInterrupt$self$$.$iir$ = 2, $JSCompiler_StaticMethods_CheckInterrupt$self$$.$cpu$.$device_raise_irq$($JSCompiler_StaticMethods_CheckInterrupt$self$$.$irq$)) : $JSCompiler_StaticMethods_CheckInterrupt$self$$.$h$ & 1 && $JSCompiler_StaticMethods_CheckInterrupt$self$$.$ier$ & 8 ? ($JSCompiler_StaticMethods_CheckInterrupt$self$$.$iir$ = 0, $JSCompiler_StaticMethods_CheckInterrupt$self$$.$cpu$.$device_raise_irq$($JSCompiler_StaticMethods_CheckInterrupt$self$$.$irq$)) : 
  ($JSCompiler_StaticMethods_CheckInterrupt$self$$.$iir$ = 1, $JSCompiler_StaticMethods_CheckInterrupt$self$$.$cpu$.$device_lower_irq$($JSCompiler_StaticMethods_CheckInterrupt$self$$.$irq$));
}
function $JSCompiler_StaticMethods_ThrowInterrupt$$($JSCompiler_StaticMethods_ThrowInterrupt$self$$, $line$jscomp$2$$) {
  $JSCompiler_StaticMethods_ThrowInterrupt$self$$.$h$ |= 1 << $line$jscomp$2$$;
  $JSCompiler_StaticMethods_CheckInterrupt$$($JSCompiler_StaticMethods_ThrowInterrupt$self$$);
}
function $JSCompiler_StaticMethods_ClearInterrupt$$($JSCompiler_StaticMethods_ClearInterrupt$self$$, $line$jscomp$3$$) {
  $JSCompiler_StaticMethods_ClearInterrupt$self$$.$h$ &= ~(1 << $line$jscomp$3$$);
  $JSCompiler_StaticMethods_CheckInterrupt$$($JSCompiler_StaticMethods_ClearInterrupt$self$$);
}
function $JSCompiler_StaticMethods_write_data$$($JSCompiler_StaticMethods_write_data$self$$, $out_byte$jscomp$9$$) {
  $JSCompiler_StaticMethods_write_data$self$$.$line_control$ & 128 ? $JSCompiler_StaticMethods_write_data$self$$.$baud_rate$ = $JSCompiler_StaticMethods_write_data$self$$.$baud_rate$ & -256 | $out_byte$jscomp$9$$ : ($JSCompiler_StaticMethods_ThrowInterrupt$$($JSCompiler_StaticMethods_write_data$self$$, 2), $JSCompiler_StaticMethods_write_data$self$$.$bus$.send("serial" + $JSCompiler_StaticMethods_write_data$self$$.$g$ + "-output-byte", $out_byte$jscomp$9$$));
}
function $JSCompiler_StaticMethods_set_modem_status$$($JSCompiler_StaticMethods_set_modem_status$self$$, $status$jscomp$10$$) {
  let $delta$jscomp$4$$ = ($JSCompiler_StaticMethods_set_modem_status$self$$.$modem_status$ ^ $status$jscomp$10$$) >> 4;
  $delta$jscomp$4$$ |= $JSCompiler_StaticMethods_set_modem_status$self$$.$modem_status$ & 15;
  $JSCompiler_StaticMethods_set_modem_status$self$$.$modem_status$ = $status$jscomp$10$$;
  $JSCompiler_StaticMethods_set_modem_status$self$$.$modem_status$ |= $delta$jscomp$4$$;
}
;function $PCI$$module$src$pci$$($cpu$jscomp$16$$) {
  this.$pci_addr$ = new Uint8Array(4);
  this.$g$ = new Uint8Array(4);
  this.$pci_response$ = new Uint8Array(4);
  this.$pci_status$ = new Uint8Array(4);
  this.$pci_addr32$ = new Int32Array(this.$pci_addr$.buffer);
  new Int32Array(this.$g$.buffer);
  this.$pci_response32$ = new Int32Array(this.$pci_response$.buffer);
  this.$pci_status32$ = new Int32Array(this.$pci_status$.buffer);
  this.$device_spaces$ = [];
  this.$devices$ = [];
  this.$cpu$ = $cpu$jscomp$16$$;
  for (var $i$jscomp$74$$ = 0; 256 > $i$jscomp$74$$; $i$jscomp$74$$++) {
    this.$device_spaces$[$i$jscomp$74$$] = void 0, this.$devices$[$i$jscomp$74$$] = void 0;
  }
  this.$io$ = $cpu$jscomp$16$$.$io$;
  $JSCompiler_StaticMethods_register_write$$($cpu$jscomp$16$$.$io$, 3324, this, function($value$jscomp$154$$) {
    $JSCompiler_StaticMethods_pci_write8$$(this, this.$pci_addr32$[0], $value$jscomp$154$$);
  }, function($value$jscomp$155$$) {
    $JSCompiler_StaticMethods_pci_write16$$(this, this.$pci_addr32$[0], $value$jscomp$155$$);
  }, function($value$jscomp$156_written$jscomp$inline_461$$) {
    var $address$jscomp$inline_460_space$jscomp$inline_464$$ = this.$pci_addr32$[0], $bar$jscomp$inline_467_bdf$jscomp$inline_462_device$jscomp$inline_465$$ = $address$jscomp$inline_460_space$jscomp$inline_464$$ >> 8 & 65535, $addr$jscomp$inline_463_space_addr$jscomp$inline_468$$ = $address$jscomp$inline_460_space$jscomp$inline_464$$ & 255;
    $address$jscomp$inline_460_space$jscomp$inline_464$$ = this.$device_spaces$[$bar$jscomp$inline_467_bdf$jscomp$inline_462_device$jscomp$inline_465$$];
    $bar$jscomp$inline_467_bdf$jscomp$inline_462_device$jscomp$inline_465$$ = this.$devices$[$bar$jscomp$inline_467_bdf$jscomp$inline_462_device$jscomp$inline_465$$];
    if ($address$jscomp$inline_460_space$jscomp$inline_464$$) {
      if (16 <= $addr$jscomp$inline_463_space_addr$jscomp$inline_468$$ && 40 > $addr$jscomp$inline_463_space_addr$jscomp$inline_468$$) {
        if ($bar$jscomp$inline_467_bdf$jscomp$inline_462_device$jscomp$inline_465$$ = $bar$jscomp$inline_467_bdf$jscomp$inline_462_device$jscomp$inline_465$$.$pci_bars$[$addr$jscomp$inline_463_space_addr$jscomp$inline_468$$ - 16 >> 2]) {
          $addr$jscomp$inline_463_space_addr$jscomp$inline_468$$ >>= 2;
          var $type$jscomp$inline_469$$ = $address$jscomp$inline_460_space$jscomp$inline_464$$[$addr$jscomp$inline_463_space_addr$jscomp$inline_468$$] & 1;
          -1 === ($value$jscomp$156_written$jscomp$inline_461$$ | 3 | $bar$jscomp$inline_467_bdf$jscomp$inline_462_device$jscomp$inline_465$$.size - 1) ? ($value$jscomp$156_written$jscomp$inline_461$$ = ~($bar$jscomp$inline_467_bdf$jscomp$inline_462_device$jscomp$inline_465$$.size - 1) | $type$jscomp$inline_469$$, 0 === $type$jscomp$inline_469$$ && ($address$jscomp$inline_460_space$jscomp$inline_464$$[$addr$jscomp$inline_463_space_addr$jscomp$inline_468$$] = $value$jscomp$156_written$jscomp$inline_461$$)) : 
          0 === $type$jscomp$inline_469$$ && ($address$jscomp$inline_460_space$jscomp$inline_464$$[$addr$jscomp$inline_463_space_addr$jscomp$inline_468$$] = $bar$jscomp$inline_467_bdf$jscomp$inline_462_device$jscomp$inline_465$$.$original_bar$);
          1 === $type$jscomp$inline_469$$ && ($JSCompiler_StaticMethods_set_io_bars$$(this, $bar$jscomp$inline_467_bdf$jscomp$inline_462_device$jscomp$inline_465$$, $address$jscomp$inline_460_space$jscomp$inline_464$$[$addr$jscomp$inline_463_space_addr$jscomp$inline_468$$] & 65534, $value$jscomp$156_written$jscomp$inline_461$$ & 65534), $address$jscomp$inline_460_space$jscomp$inline_464$$[$addr$jscomp$inline_463_space_addr$jscomp$inline_468$$] = $value$jscomp$156_written$jscomp$inline_461$$ | 1);
        } else {
          $address$jscomp$inline_460_space$jscomp$inline_464$$[$addr$jscomp$inline_463_space_addr$jscomp$inline_468$$ >> 2] = 0;
        }
      } else {
        48 === $addr$jscomp$inline_463_space_addr$jscomp$inline_468$$ ? $address$jscomp$inline_460_space$jscomp$inline_464$$[$addr$jscomp$inline_463_space_addr$jscomp$inline_468$$ >> 2] = $bar$jscomp$inline_467_bdf$jscomp$inline_462_device$jscomp$inline_465$$.$pci_rom_size$ ? -1 === ($value$jscomp$156_written$jscomp$inline_461$$ | 2047) ? -$bar$jscomp$inline_467_bdf$jscomp$inline_462_device$jscomp$inline_465$$.$pci_rom_size$ | 0 : $bar$jscomp$inline_467_bdf$jscomp$inline_462_device$jscomp$inline_465$$.$pci_rom_address$ | 
        0 : 0 : 4 !== $addr$jscomp$inline_463_space_addr$jscomp$inline_468$$ && ($address$jscomp$inline_460_space$jscomp$inline_464$$[$addr$jscomp$inline_463_space_addr$jscomp$inline_468$$ >>> 2] = $value$jscomp$156_written$jscomp$inline_461$$);
      }
    }
  });
  $JSCompiler_StaticMethods_register_write$$($cpu$jscomp$16$$.$io$, 3325, this, function($value$jscomp$157$$) {
    $JSCompiler_StaticMethods_pci_write8$$(this, this.$pci_addr32$[0] + 1 | 0, $value$jscomp$157$$);
  });
  $JSCompiler_StaticMethods_register_write$$($cpu$jscomp$16$$.$io$, 3326, this, function($value$jscomp$158$$) {
    $JSCompiler_StaticMethods_pci_write8$$(this, this.$pci_addr32$[0] + 2 | 0, $value$jscomp$158$$);
  }, function($value$jscomp$159$$) {
    $JSCompiler_StaticMethods_pci_write16$$(this, this.$pci_addr32$[0] + 2 | 0, $value$jscomp$159$$);
  });
  $JSCompiler_StaticMethods_register_write$$($cpu$jscomp$16$$.$io$, 3327, this, function($value$jscomp$160$$) {
    $JSCompiler_StaticMethods_pci_write8$$(this, this.$pci_addr32$[0] + 3 | 0, $value$jscomp$160$$);
  });
  $cpu$jscomp$16$$.$io$.$register_read_consecutive$(3324, this, function() {
    return this.$pci_response$[0];
  }, function() {
    return this.$pci_response$[1];
  }, function() {
    return this.$pci_response$[2];
  }, function() {
    return this.$pci_response$[3];
  });
  $cpu$jscomp$16$$.$io$.$register_read_consecutive$(3320, this, function() {
    return this.$pci_status$[0];
  }, function() {
    return this.$pci_status$[1];
  }, function() {
    return this.$pci_status$[2];
  }, function() {
    return this.$pci_status$[3];
  });
  $cpu$jscomp$16$$.$io$.$register_write_consecutive$(3320, this, function($out_byte$jscomp$10$$) {
    this.$pci_addr$[0] = $out_byte$jscomp$10$$ & 252;
  }, function($out_byte$jscomp$11$$) {
    2 === (this.$pci_addr$[1] & 6) && 6 === ($out_byte$jscomp$11$$ & 6) ? $JSCompiler_StaticMethods_reboot_internal$$($cpu$jscomp$16$$) : this.$pci_addr$[1] = $out_byte$jscomp$11$$;
  }, function($out_byte$jscomp$12$$) {
    this.$pci_addr$[2] = $out_byte$jscomp$12$$;
  }, function($addr$jscomp$inline_477_out_byte$jscomp$13$$) {
    this.$pci_addr$[3] = $addr$jscomp$inline_477_out_byte$jscomp$13$$;
    $addr$jscomp$inline_477_out_byte$jscomp$13$$ = this.$pci_addr$[0] & 252;
    var $device$jscomp$inline_479$$ = this.$device_spaces$[this.$pci_addr$[2] << 8 | this.$pci_addr$[1]];
    void 0 !== $device$jscomp$inline_479$$ ? (this.$pci_status32$[0] = -2147483648, this.$pci_response32$[0] = $addr$jscomp$inline_477_out_byte$jscomp$13$$ < $device$jscomp$inline_479$$.byteLength ? $device$jscomp$inline_479$$[$addr$jscomp$inline_477_out_byte$jscomp$13$$ >> 2] : 0) : (this.$pci_response32$[0] = -1, this.$pci_status32$[0] = 0);
  });
  $JSCompiler_StaticMethods_register_device$$(this, {$pci_id$:0, $pci_space$:[134, 128, 55, 18, 0, 0, 0, 0, 2, 0, 0, 6, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 16, 0, 0, 0, 0, 0, 0, ], $pci_bars$:[], name:"82441FX PMC", });
  this.$i$ = {$pci_id$:8, $pci_space$:[134, 128, 0, 112, 7, 0, 0, 2, 0, 0, 1, 6, 0, 0, 128, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ], $pci_bars$:[], name:"82371SB PIIX3 ISA", };
  this.$j$ = $JSCompiler_StaticMethods_register_device$$(this, this.$i$);
  this.$h$ = new Uint8Array(this.$j$.buffer);
}
$PCI$$module$src$pci$$.prototype.$get_state$ = function() {
  for (var $state$jscomp$32$$ = [], $i$jscomp$75$$ = 0; 256 > $i$jscomp$75$$; $i$jscomp$75$$++) {
    $state$jscomp$32$$[$i$jscomp$75$$] = this.$device_spaces$[$i$jscomp$75$$];
  }
  $state$jscomp$32$$[256] = this.$pci_addr$;
  $state$jscomp$32$$[257] = this.$g$;
  $state$jscomp$32$$[258] = this.$pci_response$;
  $state$jscomp$32$$[259] = this.$pci_status$;
  return $state$jscomp$32$$;
};
$PCI$$module$src$pci$$.prototype.$set_state$ = function($state$jscomp$33$$) {
  for (var $i$jscomp$76$$ = 0; 256 > $i$jscomp$76$$; $i$jscomp$76$$++) {
    var $device$jscomp$4$$ = this.$devices$[$i$jscomp$76$$], $space$$ = $state$jscomp$33$$[$i$jscomp$76$$];
    if ($device$jscomp$4$$ && $space$$) {
      for (var $bar_nr$$ = 0; $bar_nr$$ < $device$jscomp$4$$.$pci_bars$.length; $bar_nr$$++) {
        var $value$jscomp$161$$ = $space$$[4 + $bar_nr$$];
        if ($value$jscomp$161$$ & 1) {
          var $bar$$ = $device$jscomp$4$$.$pci_bars$[$bar_nr$$];
          $JSCompiler_StaticMethods_set_io_bars$$(this, $bar$$, $bar$$.$original_bar$ & 65534, $value$jscomp$161$$ & 65534);
        }
      }
      this.$device_spaces$[$i$jscomp$76$$].set($space$$);
    }
  }
  this.$pci_addr$.set($state$jscomp$33$$[256]);
  this.$g$.set($state$jscomp$33$$[257]);
  this.$pci_response$.set($state$jscomp$33$$[258]);
  this.$pci_status$.set($state$jscomp$33$$[259]);
};
function $JSCompiler_StaticMethods_pci_write8$$($JSCompiler_StaticMethods_pci_write8$self$$, $address$jscomp$19$$, $written$$) {
  var $addr$jscomp$26$$ = $address$jscomp$19$$ & 255;
  (new Uint8Array($JSCompiler_StaticMethods_pci_write8$self$$.$device_spaces$[$address$jscomp$19$$ >> 8 & 65535].buffer))[$addr$jscomp$26$$] = $written$$;
}
function $JSCompiler_StaticMethods_pci_write16$$($JSCompiler_StaticMethods_pci_write16$self_space$jscomp$2$$, $address$jscomp$20$$, $written$jscomp$1$$) {
  var $addr$jscomp$27$$ = $address$jscomp$20$$ & 255;
  $JSCompiler_StaticMethods_pci_write16$self_space$jscomp$2$$ = new Uint16Array($JSCompiler_StaticMethods_pci_write16$self_space$jscomp$2$$.$device_spaces$[$address$jscomp$20$$ >> 8 & 65535].buffer);
  !$JSCompiler_StaticMethods_pci_write16$self_space$jscomp$2$$ || 16 <= $addr$jscomp$27$$ && 44 > $addr$jscomp$27$$ || ($JSCompiler_StaticMethods_pci_write16$self_space$jscomp$2$$[$addr$jscomp$27$$ >>> 1] = $written$jscomp$1$$);
}
function $JSCompiler_StaticMethods_register_device$$($JSCompiler_StaticMethods_register_device$self$$, $device$jscomp$9$$) {
  var $bar_space_device_id$$ = $device$jscomp$9$$.$pci_id$, $space$jscomp$4$$ = new Int32Array(64);
  $space$jscomp$4$$.set(new Int32Array((new Uint8Array($device$jscomp$9$$.$pci_space$)).buffer));
  $JSCompiler_StaticMethods_register_device$self$$.$device_spaces$[$bar_space_device_id$$] = $space$jscomp$4$$;
  $JSCompiler_StaticMethods_register_device$self$$.$devices$[$bar_space_device_id$$] = $device$jscomp$9$$;
  $bar_space_device_id$$ = $space$jscomp$4$$.slice(4, 10);
  for (var $i$jscomp$77$$ = 0; $i$jscomp$77$$ < $device$jscomp$9$$.$pci_bars$.length; $i$jscomp$77$$++) {
    var $bar$jscomp$2$$ = $device$jscomp$9$$.$pci_bars$[$i$jscomp$77$$];
    if ($bar$jscomp$2$$) {
      var $bar_base_port$jscomp$3$$ = $bar_space_device_id$$[$i$jscomp$77$$], $j$jscomp$8_type$jscomp$154$$ = $bar_base_port$jscomp$3$$ & 1;
      $bar$jscomp$2$$.$original_bar$ = $bar_base_port$jscomp$3$$;
      $bar$jscomp$2$$.entries = [];
      if (0 !== $j$jscomp$8_type$jscomp$154$$) {
        for ($bar_base_port$jscomp$3$$ &= -2, $j$jscomp$8_type$jscomp$154$$ = 0; $j$jscomp$8_type$jscomp$154$$ < $bar$jscomp$2$$.size; $j$jscomp$8_type$jscomp$154$$++) {
          $bar$jscomp$2$$.entries[$j$jscomp$8_type$jscomp$154$$] = $JSCompiler_StaticMethods_register_device$self$$.$io$.ports[$bar_base_port$jscomp$3$$ + $j$jscomp$8_type$jscomp$154$$];
        }
      }
    }
  }
  return $space$jscomp$4$$;
}
function $JSCompiler_StaticMethods_set_io_bars$$($JSCompiler_StaticMethods_set_io_bars$self$$, $bar$jscomp$3$$, $from$jscomp$2$$, $to$jscomp$2$$) {
  for (var $count$jscomp$55$$ = $bar$jscomp$3$$.size, $ports$$ = $JSCompiler_StaticMethods_set_io_bars$self$$.$io$.ports, $i$jscomp$78$$ = 0; $i$jscomp$78$$ < $count$jscomp$55$$; $i$jscomp$78$$++) {
    4096 <= $from$jscomp$2$$ + $i$jscomp$78$$ && ($ports$$[$from$jscomp$2$$ + $i$jscomp$78$$] = $JSCompiler_StaticMethods_create_empty_entry$$($JSCompiler_StaticMethods_set_io_bars$self$$.$io$));
    var $entry$jscomp$7$$ = $bar$jscomp$3$$.entries[$i$jscomp$78$$];
    4096 <= $to$jscomp$2$$ + $i$jscomp$78$$ && ($ports$$[$to$jscomp$2$$ + $i$jscomp$78$$] = $entry$jscomp$7$$);
  }
}
$PCI$$module$src$pci$$.prototype.$raise_irq$ = function($pci_id$$) {
  this.$cpu$.$device_raise_irq$(this.$h$[96 + ((this.$device_spaces$[$pci_id$$][15] >> 8 & 255) - 1 + (($pci_id$$ >> 3) - 1 & 255) & 3)]);
};
function $JSCompiler_StaticMethods_JSC$1939_lower_irq$$($JSCompiler_StaticMethods_JSC$1939_lower_irq$self$$, $pci_id$jscomp$1$$) {
  $JSCompiler_StaticMethods_JSC$1939_lower_irq$self$$.$cpu$.$device_lower_irq$($JSCompiler_StaticMethods_JSC$1939_lower_irq$self$$.$h$[96 + (($JSCompiler_StaticMethods_JSC$1939_lower_irq$self$$.$device_spaces$[$pci_id$jscomp$1$$][15] >> 8 & 255) + ($pci_id$jscomp$1$$ >> 3 & 255) - 2 & 3)]);
}
;function $translate_mac_address$$module$src$ne2k$$($arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$, $search_mac$$, $replacement_mac$$) {
  $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[0] === $search_mac$$[0] && $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[1] === $search_mac$$[1] && $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[2] === $search_mac$$[2] && $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[3] === $search_mac$$[3] && $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[4] === $search_mac$$[4] && $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[5] === $search_mac$$[5] && ($arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[0] = 
  $replacement_mac$$[0], $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[1] = $replacement_mac$$[1], $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[2] = $replacement_mac$$[2], $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[3] = $replacement_mac$$[3], $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[4] = $replacement_mac$$[4], $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[5] = $replacement_mac$$[5]);
  $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[6] === $search_mac$$[0] && $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[7] === $search_mac$$[1] && $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[8] === $search_mac$$[2] && $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[9] === $search_mac$$[3] && $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[10] === $search_mac$$[4] && $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[11] === $search_mac$$[5] && ($arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[6] = 
  $replacement_mac$$[0], $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[7] = $replacement_mac$$[1], $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[8] = $replacement_mac$$[2], $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[9] = $replacement_mac$$[3], $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[10] = $replacement_mac$$[4], $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[11] = $replacement_mac$$[5]);
  var $destination_port_ethertype$jscomp$1_offset$jscomp$63$$ = $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[12] << 8 | $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[13];
  if (2048 === $destination_port_ethertype$jscomp$1_offset$jscomp$63$$) {
    if ($arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$ = $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$.subarray(14), 4 === $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[0] >> 4 && 17 === $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[9] && ($arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$ = $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$.subarray(20), $destination_port_ethertype$jscomp$1_offset$jscomp$63$$ = $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[2] << 
    8 | $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[3], 67 === ($arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[0] << 8 | $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[1]) || 67 === $destination_port_ethertype$jscomp$1_offset$jscomp$63$$)) {
      const $dhcp_packet$$ = $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$.subarray(8);
      if (1669485411 === ($dhcp_packet$$[236] << 24 | $dhcp_packet$$[237] << 16 | $dhcp_packet$$[238] << 8 | $dhcp_packet$$[239])) {
        for ($dhcp_packet$$[28] === $search_mac$$[0] && $dhcp_packet$$[29] === $search_mac$$[1] && $dhcp_packet$$[30] === $search_mac$$[2] && $dhcp_packet$$[31] === $search_mac$$[3] && $dhcp_packet$$[32] === $search_mac$$[4] && $dhcp_packet$$[33] === $search_mac$$[5] && ($dhcp_packet$$[28] = $replacement_mac$$[0], $dhcp_packet$$[29] = $replacement_mac$$[1], $dhcp_packet$$[30] = $replacement_mac$$[2], $dhcp_packet$$[31] = $replacement_mac$$[3], $dhcp_packet$$[32] = $replacement_mac$$[4], $dhcp_packet$$[33] = 
        $replacement_mac$$[5], $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[6] = $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[7] = 0), $destination_port_ethertype$jscomp$1_offset$jscomp$63$$ = 240; $destination_port_ethertype$jscomp$1_offset$jscomp$63$$ < $dhcp_packet$$.length;) {
          const $dhcp_option_type$$ = $dhcp_packet$$[$destination_port_ethertype$jscomp$1_offset$jscomp$63$$++];
          if (255 === $dhcp_option_type$$) {
            break;
          }
          const $length$jscomp$25$$ = $dhcp_packet$$[$destination_port_ethertype$jscomp$1_offset$jscomp$63$$++];
          61 === $dhcp_option_type$$ && 1 === $dhcp_packet$$[$destination_port_ethertype$jscomp$1_offset$jscomp$63$$ + 0] && $dhcp_packet$$[$destination_port_ethertype$jscomp$1_offset$jscomp$63$$ + 1] === $search_mac$$[0] && $dhcp_packet$$[$destination_port_ethertype$jscomp$1_offset$jscomp$63$$ + 2] === $search_mac$$[1] && $dhcp_packet$$[$destination_port_ethertype$jscomp$1_offset$jscomp$63$$ + 3] === $search_mac$$[2] && $dhcp_packet$$[$destination_port_ethertype$jscomp$1_offset$jscomp$63$$ + 4] === 
          $search_mac$$[3] && $dhcp_packet$$[$destination_port_ethertype$jscomp$1_offset$jscomp$63$$ + 5] === $search_mac$$[4] && $dhcp_packet$$[$destination_port_ethertype$jscomp$1_offset$jscomp$63$$ + 6] === $search_mac$$[5] && ($dhcp_packet$$[$destination_port_ethertype$jscomp$1_offset$jscomp$63$$ + 1] = $replacement_mac$$[0], $dhcp_packet$$[$destination_port_ethertype$jscomp$1_offset$jscomp$63$$ + 2] = $replacement_mac$$[1], $dhcp_packet$$[$destination_port_ethertype$jscomp$1_offset$jscomp$63$$ + 
          3] = $replacement_mac$$[2], $dhcp_packet$$[$destination_port_ethertype$jscomp$1_offset$jscomp$63$$ + 4] = $replacement_mac$$[3], $dhcp_packet$$[$destination_port_ethertype$jscomp$1_offset$jscomp$63$$ + 5] = $replacement_mac$$[4], $dhcp_packet$$[$destination_port_ethertype$jscomp$1_offset$jscomp$63$$ + 6] = $replacement_mac$$[5], $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[6] = $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[7] = 0);
          $destination_port_ethertype$jscomp$1_offset$jscomp$63$$ += $length$jscomp$25$$;
        }
      }
    }
  } else {
    2054 === $destination_port_ethertype$jscomp$1_offset$jscomp$63$$ && ($arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$ = $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$.subarray(14), $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[8] === $search_mac$$[0] && $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[9] === $search_mac$$[1] && $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[10] === $search_mac$$[2] && $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[11] === 
    $search_mac$$[3] && $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[12] === $search_mac$$[4] && $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[13] === $search_mac$$[5] && ($arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[8] = $replacement_mac$$[0], $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[9] = $replacement_mac$$[1], $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[10] = $replacement_mac$$[2], $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[11] = $replacement_mac$$[3], 
    $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[12] = $replacement_mac$$[4], $arp_packet_ipv4_packet_packet$jscomp$16_udp_packet$$[13] = $replacement_mac$$[5]));
  }
}
function $format_mac$$module$src$ne2k$$($mac$jscomp$2$$) {
  return [$mac$jscomp$2$$[0].toString(16).padStart(2, "0"), $mac$jscomp$2$$[1].toString(16).padStart(2, "0"), $mac$jscomp$2$$[2].toString(16).padStart(2, "0"), $mac$jscomp$2$$[3].toString(16).padStart(2, "0"), $mac$jscomp$2$$[4].toString(16).padStart(2, "0"), $mac$jscomp$2$$[5].toString(16).padStart(2, "0"), ].join(":");
}
function $Ne2k$$module$src$ne2k$$($cpu$jscomp$17$$, $bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, $preserve_mac_from_state_image$$, $mac_address_translation$$) {
  this.$cpu$ = $cpu$jscomp$17$$;
  this.$pci$ = $cpu$jscomp$17$$.$devices$.$pci$;
  this.id = 0;
  this.$preserve_mac_from_state_image$ = $preserve_mac_from_state_image$$;
  this.$mac_address_translation$ = $mac_address_translation$$;
  this.$bus$ = $bus$jscomp$19_i$jscomp$79_io$jscomp$3$$;
  this.$bus$.register("net" + this.id + "-receive", function($data$jscomp$171$$) {
    this.$receive$($data$jscomp$171$$);
  }, this);
  this.port = 768 + 256 * this.id;
  this.name = "ne2k";
  this.$pci_space$ = [236, 16, 41, 128, 3, 1, 0, 0, 0, 0, 0, 2, 0, 0, 0, 0, this.port & 255 | 1, this.port >> 8, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 244, 26, 0, 17, 0, 0, 184, 254, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, ];
  this.$pci_id$ = (0 === this.id ? 5 : 7 + this.id) << 3;
  this.$pci_bars$ = [{size:32, }, ];
  this.$imr$ = this.$isr$ = 0;
  this.$cr$ = 1;
  this.$tpsr$ = this.$tcnt$ = this.$rcnt$ = this.$dcfg$ = 0;
  this.memory = new Uint8Array(32768);
  this.$txcr$ = this.$rxcr$ = 0;
  this.$tsr$ = 1;
  this.$mac$ = new Uint8Array([0, 34, 21, 255 * Math.random() | 0, 255 * Math.random() | 0, 255 * Math.random() | 0, ]);
  this.$bus$.send("net" + this.id + "-mac", $format_mac$$module$src$ne2k$$(this.$mac$));
  this.$mar$ = Uint8Array.of(255, 255, 255, 255, 255, 255, 255, 255);
  this.$mac_address_in_state$ = null;
  for ($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$ = 0; 6 > $bus$jscomp$19_i$jscomp$79_io$jscomp$3$$; $bus$jscomp$19_i$jscomp$79_io$jscomp$3$$++) {
    this.memory[$bus$jscomp$19_i$jscomp$79_io$jscomp$3$$ << 1] = this.memory[$bus$jscomp$19_i$jscomp$79_io$jscomp$3$$ << 1 | 1] = this.$mac$[$bus$jscomp$19_i$jscomp$79_io$jscomp$3$$];
  }
  this.memory[28] = this.memory[29] = 87;
  this.memory[30] = this.memory[31] = 87;
  this.$rsar$ = 0;
  this.$pstart$ = 64;
  this.$pstop$ = 128;
  this.$boundary$ = this.$curpg$ = 76;
  $bus$jscomp$19_i$jscomp$79_io$jscomp$3$$ = $cpu$jscomp$17$$.$io$;
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 0, this, function() {
    return this.$cr$;
  }, function() {
    return this.$cr$;
  });
  $JSCompiler_StaticMethods_register_write$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 0, this, function($data$jscomp$172_data_byte$jscomp$9_start$jscomp$29$$) {
    this.$cr$ = $data$jscomp$172_data_byte$jscomp$9_start$jscomp$29$$;
    this.$cr$ & 1 || ($data$jscomp$172_data_byte$jscomp$9_start$jscomp$29$$ & 24 && 0 === this.$rcnt$ && $JSCompiler_StaticMethods_do_interrupt$$(this, 64), $data$jscomp$172_data_byte$jscomp$9_start$jscomp$29$$ & 4 && ($data$jscomp$172_data_byte$jscomp$9_start$jscomp$29$$ = this.$tpsr$ << 8, $data$jscomp$172_data_byte$jscomp$9_start$jscomp$29$$ = this.memory.subarray($data$jscomp$172_data_byte$jscomp$9_start$jscomp$29$$, $data$jscomp$172_data_byte$jscomp$9_start$jscomp$29$$ + this.$tcnt$), this.$mac_address_in_state$ && 
    ($data$jscomp$172_data_byte$jscomp$9_start$jscomp$29$$ = new Uint8Array($data$jscomp$172_data_byte$jscomp$9_start$jscomp$29$$), $translate_mac_address$$module$src$ne2k$$($data$jscomp$172_data_byte$jscomp$9_start$jscomp$29$$, this.$mac_address_in_state$, this.$mac$)), this.$bus$.send("net" + this.id + "-send", $data$jscomp$172_data_byte$jscomp$9_start$jscomp$29$$), this.$bus$.send("eth-transmit-end", [$data$jscomp$172_data_byte$jscomp$9_start$jscomp$29$$.length]), this.$cr$ &= -5, $JSCompiler_StaticMethods_do_interrupt$$(this, 
    2)));
  });
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 13, this, function() {
    return 1 === $JSCompiler_StaticMethods_get_page$$(this) ? this.$mar$[5] : 0;
  });
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 14, this, function() {
    return 1 === $JSCompiler_StaticMethods_get_page$$(this) ? this.$mar$[6] : 0;
  }, function() {
    return 0;
  });
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 15, this, function() {
    return 1 === $JSCompiler_StaticMethods_get_page$$(this) ? this.$mar$[7] : 0;
  });
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 31, this, function() {
    $JSCompiler_StaticMethods_do_interrupt$$(this, 128);
    return 0;
  });
  $JSCompiler_StaticMethods_register_write$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 31, this, function() {
  });
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 1, this, function() {
    var $pg$jscomp$5$$ = $JSCompiler_StaticMethods_get_page$$(this);
    return 0 === $pg$jscomp$5$$ ? this.$pstart$ : 1 === $pg$jscomp$5$$ ? this.$mac$[0] : 2 === $pg$jscomp$5$$ ? this.$pstart$ : 0;
  });
  $JSCompiler_StaticMethods_register_write$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 1, this, function($data_byte$jscomp$11$$) {
    var $pg$jscomp$6$$ = $JSCompiler_StaticMethods_get_page$$(this);
    0 === $pg$jscomp$6$$ ? this.$pstart$ = $data_byte$jscomp$11$$ : 1 === $pg$jscomp$6$$ && (this.$mac$[0] = $data_byte$jscomp$11$$);
  });
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 2, this, function() {
    var $pg$jscomp$7$$ = $JSCompiler_StaticMethods_get_page$$(this);
    return 0 === $pg$jscomp$7$$ ? this.$pstop$ : 1 === $pg$jscomp$7$$ ? this.$mac$[1] : 2 === $pg$jscomp$7$$ ? this.$pstop$ : 0;
  });
  $JSCompiler_StaticMethods_register_write$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 2, this, function($data_byte$jscomp$12$$) {
    var $pg$jscomp$8$$ = $JSCompiler_StaticMethods_get_page$$(this);
    0 === $pg$jscomp$8$$ ? ($data_byte$jscomp$12$$ > this.memory.length >> 8 && ($data_byte$jscomp$12$$ = this.memory.length >> 8), this.$pstop$ = $data_byte$jscomp$12$$) : 1 === $pg$jscomp$8$$ && (this.$mac$[1] = $data_byte$jscomp$12$$);
  });
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 7, this, function() {
    var $pg$jscomp$9$$ = $JSCompiler_StaticMethods_get_page$$(this);
    return 0 === $pg$jscomp$9$$ ? this.$isr$ : 1 === $pg$jscomp$9$$ ? this.$curpg$ : 0;
  });
  $JSCompiler_StaticMethods_register_write$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 7, this, function($data_byte$jscomp$13$$) {
    var $pg$jscomp$10$$ = $JSCompiler_StaticMethods_get_page$$(this);
    0 === $pg$jscomp$10$$ ? (this.$isr$ &= ~$data_byte$jscomp$13$$, $JSCompiler_StaticMethods_update_irq$$(this)) : 1 === $pg$jscomp$10$$ && (this.$curpg$ = $data_byte$jscomp$13$$);
  });
  $JSCompiler_StaticMethods_register_write$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 13, this, function($data_byte$jscomp$14$$) {
    0 === $JSCompiler_StaticMethods_get_page$$(this) && (this.$txcr$ = $data_byte$jscomp$14$$);
  });
  $JSCompiler_StaticMethods_register_write$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 14, this, function($data_byte$jscomp$15$$) {
    0 === $JSCompiler_StaticMethods_get_page$$(this) && (this.$dcfg$ = $data_byte$jscomp$15$$);
  });
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 10, this, function() {
    var $pg$jscomp$13$$ = $JSCompiler_StaticMethods_get_page$$(this);
    return 0 === $pg$jscomp$13$$ ? 80 : 1 === $pg$jscomp$13$$ ? this.$mar$[2] : 0;
  });
  $JSCompiler_StaticMethods_register_write$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 10, this, function($data_byte$jscomp$16$$) {
    0 === $JSCompiler_StaticMethods_get_page$$(this) && (this.$rcnt$ = this.$rcnt$ & 65280 | $data_byte$jscomp$16$$ & 255);
  });
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 11, this, function() {
    var $pg$jscomp$15$$ = $JSCompiler_StaticMethods_get_page$$(this);
    return 0 === $pg$jscomp$15$$ ? 67 : 1 === $pg$jscomp$15$$ ? this.$mar$[3] : 0;
  });
  $JSCompiler_StaticMethods_register_write$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 11, this, function($data_byte$jscomp$17$$) {
    0 === $JSCompiler_StaticMethods_get_page$$(this) && (this.$rcnt$ = this.$rcnt$ & 255 | $data_byte$jscomp$17$$ << 8 & 65280);
  });
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 8, this, function() {
    var $pg$jscomp$17$$ = $JSCompiler_StaticMethods_get_page$$(this);
    return 0 === $pg$jscomp$17$$ ? this.$rsar$ & 255 : 1 === $pg$jscomp$17$$ ? this.$mar$[0] : 0;
  });
  $JSCompiler_StaticMethods_register_write$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 8, this, function($data_byte$jscomp$18$$) {
    0 === $JSCompiler_StaticMethods_get_page$$(this) && (this.$rsar$ = this.$rsar$ & 65280 | $data_byte$jscomp$18$$ & 255);
  });
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 9, this, function() {
    var $pg$jscomp$19$$ = $JSCompiler_StaticMethods_get_page$$(this);
    return 0 === $pg$jscomp$19$$ ? this.$rsar$ >> 8 & 255 : 1 === $pg$jscomp$19$$ ? this.$mar$[1] : 0;
  });
  $JSCompiler_StaticMethods_register_write$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 9, this, function($data_byte$jscomp$19$$) {
    0 === $JSCompiler_StaticMethods_get_page$$(this) && (this.$rsar$ = this.$rsar$ & 255 | $data_byte$jscomp$19$$ << 8 & 65280);
  });
  $JSCompiler_StaticMethods_register_write$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 15, this, function($data_byte$jscomp$20$$) {
    0 === $JSCompiler_StaticMethods_get_page$$(this) && (this.$imr$ = $data_byte$jscomp$20$$, $JSCompiler_StaticMethods_update_irq$$(this));
  });
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 3, this, function() {
    var $pg$jscomp$22$$ = $JSCompiler_StaticMethods_get_page$$(this);
    return 0 === $pg$jscomp$22$$ ? this.$boundary$ : 1 === $pg$jscomp$22$$ ? this.$mac$[2] : 0;
  });
  $JSCompiler_StaticMethods_register_write$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 3, this, function($data_byte$jscomp$21$$) {
    var $pg$jscomp$23$$ = $JSCompiler_StaticMethods_get_page$$(this);
    0 === $pg$jscomp$23$$ ? this.$boundary$ = $data_byte$jscomp$21$$ : 1 === $pg$jscomp$23$$ && (this.$mac$[2] = $data_byte$jscomp$21$$);
  });
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 4, this, function() {
    var $pg$jscomp$24$$ = $JSCompiler_StaticMethods_get_page$$(this);
    return 0 === $pg$jscomp$24$$ ? this.$tsr$ : 1 === $pg$jscomp$24$$ ? this.$mac$[3] : 0;
  });
  $JSCompiler_StaticMethods_register_write$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 4, this, function($data_byte$jscomp$22$$) {
    var $pg$jscomp$25$$ = $JSCompiler_StaticMethods_get_page$$(this);
    0 === $pg$jscomp$25$$ ? this.$tpsr$ = $data_byte$jscomp$22$$ : 1 === $pg$jscomp$25$$ && (this.$mac$[3] = $data_byte$jscomp$22$$);
  });
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 5, this, function() {
    var $pg$jscomp$26$$ = $JSCompiler_StaticMethods_get_page$$(this);
    return 0 === $pg$jscomp$26$$ ? 0 : 1 === $pg$jscomp$26$$ ? this.$mac$[4] : 0;
  });
  $JSCompiler_StaticMethods_register_write$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 5, this, function($data_byte$jscomp$23$$) {
    var $pg$jscomp$27$$ = $JSCompiler_StaticMethods_get_page$$(this);
    0 === $pg$jscomp$27$$ ? this.$tcnt$ = this.$tcnt$ & -256 | $data_byte$jscomp$23$$ : 1 === $pg$jscomp$27$$ && (this.$mac$[4] = $data_byte$jscomp$23$$);
  });
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 6, this, function() {
    var $pg$jscomp$28$$ = $JSCompiler_StaticMethods_get_page$$(this);
    return 0 === $pg$jscomp$28$$ ? 0 : 1 === $pg$jscomp$28$$ ? this.$mac$[5] : 0;
  });
  $JSCompiler_StaticMethods_register_write$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 6, this, function($data_byte$jscomp$24$$) {
    var $pg$jscomp$29$$ = $JSCompiler_StaticMethods_get_page$$(this);
    0 === $pg$jscomp$29$$ ? this.$tcnt$ = this.$tcnt$ & 255 | $data_byte$jscomp$24$$ << 8 : 1 === $pg$jscomp$29$$ && (this.$mac$[5] = $data_byte$jscomp$24$$);
  });
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 12, this, function() {
    var $pg$jscomp$30$$ = $JSCompiler_StaticMethods_get_page$$(this);
    return 0 === $pg$jscomp$30$$ ? 9 : 1 === $pg$jscomp$30$$ ? this.$mar$[4] : 0;
  });
  $JSCompiler_StaticMethods_register_write$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 12, this, function($data_byte$jscomp$25$$) {
    0 === $JSCompiler_StaticMethods_get_page$$(this) && (this.$rxcr$ = $data_byte$jscomp$25$$);
  });
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 16, this, this.$data_port_read8$, this.$data_port_read16$, this.$data_port_read32$);
  $JSCompiler_StaticMethods_register_write$$($bus$jscomp$19_i$jscomp$79_io$jscomp$3$$, this.port | 16, this, this.$data_port_write16$, this.$data_port_write16$, this.$data_port_write32$);
  $JSCompiler_StaticMethods_register_device$$($cpu$jscomp$17$$.$devices$.$pci$, this);
}
$JSCompiler_prototypeAlias$$ = $Ne2k$$module$src$ne2k$$.prototype;
$JSCompiler_prototypeAlias$$.$get_state$ = function() {
  var $state$jscomp$34$$ = [];
  $state$jscomp$34$$[0] = this.$isr$;
  $state$jscomp$34$$[1] = this.$imr$;
  $state$jscomp$34$$[2] = this.$cr$;
  $state$jscomp$34$$[3] = this.$dcfg$;
  $state$jscomp$34$$[4] = this.$rcnt$;
  $state$jscomp$34$$[5] = this.$tcnt$;
  $state$jscomp$34$$[6] = this.$tpsr$;
  $state$jscomp$34$$[7] = this.$rsar$;
  $state$jscomp$34$$[8] = this.$pstart$;
  $state$jscomp$34$$[9] = this.$curpg$;
  $state$jscomp$34$$[10] = this.$boundary$;
  $state$jscomp$34$$[11] = this.$pstop$;
  $state$jscomp$34$$[12] = this.$rxcr$;
  $state$jscomp$34$$[13] = this.$txcr$;
  $state$jscomp$34$$[14] = this.$tsr$;
  $state$jscomp$34$$[15] = this.$mac$;
  $state$jscomp$34$$[16] = this.memory;
  return $state$jscomp$34$$;
};
$JSCompiler_prototypeAlias$$.$set_state$ = function($state$jscomp$35$$) {
  this.$isr$ = $state$jscomp$35$$[0];
  this.$imr$ = $state$jscomp$35$$[1];
  this.$cr$ = $state$jscomp$35$$[2];
  this.$dcfg$ = $state$jscomp$35$$[3];
  this.$rcnt$ = $state$jscomp$35$$[4];
  this.$tcnt$ = $state$jscomp$35$$[5];
  this.$tpsr$ = $state$jscomp$35$$[6];
  this.$rsar$ = $state$jscomp$35$$[7];
  this.$pstart$ = $state$jscomp$35$$[8];
  this.$curpg$ = $state$jscomp$35$$[9];
  this.$boundary$ = $state$jscomp$35$$[10];
  this.$pstop$ = $state$jscomp$35$$[11];
  this.$rxcr$ = $state$jscomp$35$$[12];
  this.$txcr$ = $state$jscomp$35$$[13];
  this.$tsr$ = $state$jscomp$35$$[14];
  this.$preserve_mac_from_state_image$ ? (this.$mac$ = $state$jscomp$35$$[15], this.memory = $state$jscomp$35$$[16]) : this.$mac_address_translation$ && (this.$mac_address_in_state$ = $state$jscomp$35$$[15], this.memory = $state$jscomp$35$$[16]);
  this.$bus$.send("net" + this.id + "-mac", $format_mac$$module$src$ne2k$$(this.$mac$));
};
function $JSCompiler_StaticMethods_do_interrupt$$($JSCompiler_StaticMethods_do_interrupt$self$$, $ir_mask$$) {
  $JSCompiler_StaticMethods_do_interrupt$self$$.$isr$ |= $ir_mask$$;
  $JSCompiler_StaticMethods_update_irq$$($JSCompiler_StaticMethods_do_interrupt$self$$);
}
function $JSCompiler_StaticMethods_update_irq$$($JSCompiler_StaticMethods_update_irq$self$$) {
  $JSCompiler_StaticMethods_update_irq$self$$.$imr$ & $JSCompiler_StaticMethods_update_irq$self$$.$isr$ ? $JSCompiler_StaticMethods_update_irq$self$$.$pci$.$raise_irq$($JSCompiler_StaticMethods_update_irq$self$$.$pci_id$) : $JSCompiler_StaticMethods_JSC$1939_lower_irq$$($JSCompiler_StaticMethods_update_irq$self$$.$pci$, $JSCompiler_StaticMethods_update_irq$self$$.$pci_id$);
}
function $JSCompiler_StaticMethods_data_port_write$$($JSCompiler_StaticMethods_data_port_write$self$$, $data_byte$jscomp$26$$) {
  if (16 >= $JSCompiler_StaticMethods_data_port_write$self$$.$rsar$ || 16384 <= $JSCompiler_StaticMethods_data_port_write$self$$.$rsar$ && 32768 > $JSCompiler_StaticMethods_data_port_write$self$$.$rsar$) {
    $JSCompiler_StaticMethods_data_port_write$self$$.memory[$JSCompiler_StaticMethods_data_port_write$self$$.$rsar$] = $data_byte$jscomp$26$$;
  }
  $JSCompiler_StaticMethods_data_port_write$self$$.$rsar$++;
  $JSCompiler_StaticMethods_data_port_write$self$$.$rcnt$--;
  $JSCompiler_StaticMethods_data_port_write$self$$.$rsar$ >= $JSCompiler_StaticMethods_data_port_write$self$$.$pstop$ << 8 && ($JSCompiler_StaticMethods_data_port_write$self$$.$rsar$ += $JSCompiler_StaticMethods_data_port_write$self$$.$pstart$ - $JSCompiler_StaticMethods_data_port_write$self$$.$pstop$ << 8);
  0 === $JSCompiler_StaticMethods_data_port_write$self$$.$rcnt$ && $JSCompiler_StaticMethods_do_interrupt$$($JSCompiler_StaticMethods_data_port_write$self$$, 64);
}
$JSCompiler_prototypeAlias$$.$data_port_write16$ = function($data$jscomp$173$$) {
  $JSCompiler_StaticMethods_data_port_write$$(this, $data$jscomp$173$$);
  this.$dcfg$ & 1 && $JSCompiler_StaticMethods_data_port_write$$(this, $data$jscomp$173$$ >> 8);
};
$JSCompiler_prototypeAlias$$.$data_port_write32$ = function($data$jscomp$174$$) {
  $JSCompiler_StaticMethods_data_port_write$$(this, $data$jscomp$174$$);
  $JSCompiler_StaticMethods_data_port_write$$(this, $data$jscomp$174$$ >> 8);
  $JSCompiler_StaticMethods_data_port_write$$(this, $data$jscomp$174$$ >> 16);
  $JSCompiler_StaticMethods_data_port_write$$(this, $data$jscomp$174$$ >> 24);
};
function $JSCompiler_StaticMethods_data_port_read$$($JSCompiler_StaticMethods_data_port_read$self$$) {
  let $data$jscomp$175$$ = 0;
  32768 > $JSCompiler_StaticMethods_data_port_read$self$$.$rsar$ && ($data$jscomp$175$$ = $JSCompiler_StaticMethods_data_port_read$self$$.memory[$JSCompiler_StaticMethods_data_port_read$self$$.$rsar$]);
  $JSCompiler_StaticMethods_data_port_read$self$$.$rsar$++;
  $JSCompiler_StaticMethods_data_port_read$self$$.$rcnt$--;
  $JSCompiler_StaticMethods_data_port_read$self$$.$rsar$ >= $JSCompiler_StaticMethods_data_port_read$self$$.$pstop$ << 8 && ($JSCompiler_StaticMethods_data_port_read$self$$.$rsar$ += $JSCompiler_StaticMethods_data_port_read$self$$.$pstart$ - $JSCompiler_StaticMethods_data_port_read$self$$.$pstop$ << 8);
  0 === $JSCompiler_StaticMethods_data_port_read$self$$.$rcnt$ && $JSCompiler_StaticMethods_do_interrupt$$($JSCompiler_StaticMethods_data_port_read$self$$, 64);
  return $data$jscomp$175$$;
}
$JSCompiler_prototypeAlias$$.$data_port_read8$ = function() {
  return this.$data_port_read16$() & 255;
};
$JSCompiler_prototypeAlias$$.$data_port_read16$ = function() {
  return this.$dcfg$ & 1 ? $JSCompiler_StaticMethods_data_port_read$$(this) | $JSCompiler_StaticMethods_data_port_read$$(this) << 8 : $JSCompiler_StaticMethods_data_port_read$$(this);
};
$JSCompiler_prototypeAlias$$.$data_port_read32$ = function() {
  return $JSCompiler_StaticMethods_data_port_read$$(this) | $JSCompiler_StaticMethods_data_port_read$$(this) << 8 | $JSCompiler_StaticMethods_data_port_read$$(this) << 16 | $JSCompiler_StaticMethods_data_port_read$$(this) << 24;
};
$JSCompiler_prototypeAlias$$.$receive$ = function($data$jscomp$176$$) {
  if (!(this.$cr$ & 1) && (this.$bus$.send("eth-receive-end", [$data$jscomp$176$$.length]), this.$rxcr$ & 16 || this.$rxcr$ & 4 && 255 === $data$jscomp$176$$[0] && 255 === $data$jscomp$176$$[1] && 255 === $data$jscomp$176$$[2] && 255 === $data$jscomp$176$$[3] && 255 === $data$jscomp$176$$[4] && 255 === $data$jscomp$176$$[5] || !(this.$rxcr$ & 8 && 1 === ($data$jscomp$176$$[0] & 1) || $data$jscomp$176$$[0] !== this.$mac$[0] || $data$jscomp$176$$[1] !== this.$mac$[1] || $data$jscomp$176$$[2] !== this.$mac$[2] || 
  $data$jscomp$176$$[3] !== this.$mac$[3] || $data$jscomp$176$$[4] !== this.$mac$[4] || $data$jscomp$176$$[5] !== this.$mac$[5]))) {
    this.$mac_address_in_state$ && ($data$jscomp$176$$ = new Uint8Array($data$jscomp$176$$), $translate_mac_address$$module$src$ne2k$$($data$jscomp$176$$, this.$mac$, this.$mac_address_in_state$));
    var $offset$jscomp$64$$ = this.$curpg$ << 8, $total_length$jscomp$4$$ = Math.max(60, $data$jscomp$176$$.length) + 4, $data_start$$ = $offset$jscomp$64$$ + 4, $next$$ = this.$curpg$ + 1 + ($total_length$jscomp$4$$ >> 8);
    if (!((this.$boundary$ > this.$curpg$ ? this.$boundary$ - this.$curpg$ : this.$pstop$ - this.$curpg$ + this.$boundary$ - this.$pstart$) < 1 + ($total_length$jscomp$4$$ >> 8) && 0 !== this.$boundary$)) {
      if ($offset$jscomp$64$$ + $total_length$jscomp$4$$ > this.$pstop$ << 8) {
        var $cut$$ = (this.$pstop$ << 8) - $data_start$$;
        this.memory.set($data$jscomp$176$$.subarray(0, $cut$$), $data_start$$);
        this.memory.set($data$jscomp$176$$.subarray($cut$$), this.$pstart$ << 8);
      } else {
        this.memory.set($data$jscomp$176$$, $data_start$$), 60 > $data$jscomp$176$$.length && this.memory.fill(0, $data_start$$ + $data$jscomp$176$$.length, $data_start$$ + 60);
      }
      $next$$ >= this.$pstop$ && ($next$$ += this.$pstart$ - this.$pstop$);
      this.memory[$offset$jscomp$64$$] = 1;
      this.memory[$offset$jscomp$64$$ + 1] = $next$$;
      this.memory[$offset$jscomp$64$$ + 2] = $total_length$jscomp$4$$;
      this.memory[$offset$jscomp$64$$ + 3] = $total_length$jscomp$4$$ >> 8;
      this.$curpg$ = $next$$;
      $JSCompiler_StaticMethods_do_interrupt$$(this, 1);
    }
  }
};
function $JSCompiler_StaticMethods_get_page$$($JSCompiler_StaticMethods_get_page$self$$) {
  return $JSCompiler_StaticMethods_get_page$self$$.$cr$ >> 6 & 3;
}
;function $VirtioConsole$$module$src$virtio_console$$($cpu$jscomp$18$$, $bus$jscomp$20_queues$$) {
  this.$bus$ = $bus$jscomp$20_queues$$;
  this.rows = 25;
  this.cols = 80;
  this.ports = 4;
  $bus$jscomp$20_queues$$ = [{$size_supported$:16, $notify_offset$:0, }, {$size_supported$:16, $notify_offset$:1, }, {$size_supported$:16, $notify_offset$:2, }, {$size_supported$:16, $notify_offset$:3, }, ];
  for (let $i$jscomp$80$$ = 1; $i$jscomp$80$$ < this.ports; ++$i$jscomp$80$$) {
    $bus$jscomp$20_queues$$.push({$size_supported$:16, $notify_offset$:0}), $bus$jscomp$20_queues$$.push({$size_supported$:8, $notify_offset$:1});
  }
  this.$virtio$ = new $VirtIO$$module$src$virtio$$($cpu$jscomp$18$$, {name:"virtio-console", $pci_id$:96, $device_id$:4163, $subsystem_device_id$:3, $common$:{$initial_port$:47104, $queues$:$bus$jscomp$20_queues$$, features:[0, 1, 32, ], $on_driver_ok$:() => {
  }, }, notification:{$initial_port$:47360, $single_handler$:!1, $handlers$:[() => {
  }, $queue_id$jscomp$1$$ => {
    const $queue$$ = this.$virtio$.$queues$[$queue_id$jscomp$1$$], $port$jscomp$4$$ = 3 < $queue_id$jscomp$1$$ ? $queue_id$jscomp$1$$ - 3 >> 1 : 0;
    for (; $JSCompiler_StaticMethods_has_request$$($queue$$);) {
      const $bufchain$$ = $JSCompiler_StaticMethods_pop_request$$($queue$$), $buffer$jscomp$42$$ = new Uint8Array($bufchain$$.$length_readable$);
      $JSCompiler_StaticMethods_get_next_blob$$($bufchain$$, $buffer$jscomp$42$$);
      this.$bus$.send("virtio-console" + $port$jscomp$4$$ + "-output-bytes", $buffer$jscomp$42$$);
      $JSCompiler_StaticMethods_JSC$1957_Ack$$(this, $queue_id$jscomp$1$$, $bufchain$$);
    }
  }, $queue$jscomp$1_queue_id$jscomp$2$$ => {
    if (2 === $queue$jscomp$1_queue_id$jscomp$2$$) {
      for ($queue$jscomp$1_queue_id$jscomp$2$$ = this.$virtio$.$queues$[$queue$jscomp$1_queue_id$jscomp$2$$]; $JSCompiler_StaticMethods_count_requests$$($queue$jscomp$1_queue_id$jscomp$2$$) > $queue$jscomp$1_queue_id$jscomp$2$$.size - 2;) {
        $JSCompiler_StaticMethods_pop_request$$($queue$jscomp$1_queue_id$jscomp$2$$);
      }
    }
  }, $queue_id$jscomp$3$$ => {
    if (3 === $queue_id$jscomp$3$$) {
      for (var $queue$jscomp$2$$ = this.$virtio$.$queues$[$queue_id$jscomp$3$$]; $JSCompiler_StaticMethods_has_request$$($queue$jscomp$2$$);) {
        var $bufchain$jscomp$1_bufchain$jscomp$inline_484$$ = $JSCompiler_StaticMethods_pop_request$$($queue$jscomp$2$$), $buffer$jscomp$43_i$jscomp$81_port$jscomp$5$$ = new Uint8Array($bufchain$jscomp$1_bufchain$jscomp$inline_484$$.$length_readable$);
        $JSCompiler_StaticMethods_get_next_blob$$($bufchain$jscomp$1_bufchain$jscomp$inline_484$$, $buffer$jscomp$43_i$jscomp$81_port$jscomp$5$$);
        $event$jscomp$12_i$jscomp$inline_487_parts$jscomp$5_port$jscomp$inline_482$$ = $Unmarshall$$module$lib$marshall$$(["w", "h", "h"], $buffer$jscomp$43_i$jscomp$81_port$jscomp$5$$, {offset:0});
        $buffer$jscomp$43_i$jscomp$81_port$jscomp$5$$ = $event$jscomp$12_i$jscomp$inline_487_parts$jscomp$5_port$jscomp$inline_482$$[0];
        $event$jscomp$12_i$jscomp$inline_487_parts$jscomp$5_port$jscomp$inline_482$$ = $event$jscomp$12_i$jscomp$inline_487_parts$jscomp$5_port$jscomp$inline_482$$[1];
        $JSCompiler_StaticMethods_JSC$1957_Ack$$(this, $queue_id$jscomp$3$$, $bufchain$jscomp$1_bufchain$jscomp$inline_484$$);
        switch($event$jscomp$12_i$jscomp$inline_487_parts$jscomp$5_port$jscomp$inline_482$$) {
          case 0:
            for ($buffer$jscomp$43_i$jscomp$81_port$jscomp$5$$ = 0; $buffer$jscomp$43_i$jscomp$81_port$jscomp$5$$ < this.ports; ++$buffer$jscomp$43_i$jscomp$81_port$jscomp$5$$) {
              $JSCompiler_StaticMethods_SendEvent$$(this, $buffer$jscomp$43_i$jscomp$81_port$jscomp$5$$, 1, 0);
            }
            break;
          case 3:
            $JSCompiler_StaticMethods_JSC$1957_Ack$$(this, $queue_id$jscomp$3$$, $bufchain$jscomp$1_bufchain$jscomp$inline_484$$);
            $JSCompiler_StaticMethods_SendEvent$$(this, $buffer$jscomp$43_i$jscomp$81_port$jscomp$5$$, 4, 1);
            var $event$jscomp$12_i$jscomp$inline_487_parts$jscomp$5_port$jscomp$inline_482$$ = $buffer$jscomp$43_i$jscomp$81_port$jscomp$5$$, $name$jscomp$inline_483_namex$jscomp$inline_485$$ = "virtio-" + $buffer$jscomp$43_i$jscomp$81_port$jscomp$5$$;
            $bufchain$jscomp$1_bufchain$jscomp$inline_484$$ = $JSCompiler_StaticMethods_pop_request$$(this.$virtio$.$queues$[2]);
            $name$jscomp$inline_483_namex$jscomp$inline_485$$ = (new TextEncoder).encode($name$jscomp$inline_483_namex$jscomp$inline_485$$);
            const $buf$jscomp$inline_486$$ = new Uint8Array($name$jscomp$inline_483_namex$jscomp$inline_485$$.length + 9);
            $Marshall$$module$lib$marshall$$(["w", "h", "h"], [$event$jscomp$12_i$jscomp$inline_487_parts$jscomp$5_port$jscomp$inline_482$$, 7, 1], $buf$jscomp$inline_486$$, 0);
            for ($event$jscomp$12_i$jscomp$inline_487_parts$jscomp$5_port$jscomp$inline_482$$ = 0; $event$jscomp$12_i$jscomp$inline_487_parts$jscomp$5_port$jscomp$inline_482$$ < $name$jscomp$inline_483_namex$jscomp$inline_485$$.length; ++$event$jscomp$12_i$jscomp$inline_487_parts$jscomp$5_port$jscomp$inline_482$$) {
              $buf$jscomp$inline_486$$[$event$jscomp$12_i$jscomp$inline_487_parts$jscomp$5_port$jscomp$inline_482$$ + 8] = $name$jscomp$inline_483_namex$jscomp$inline_485$$[$event$jscomp$12_i$jscomp$inline_487_parts$jscomp$5_port$jscomp$inline_482$$];
            }
            $buf$jscomp$inline_486$$[8 + $name$jscomp$inline_483_namex$jscomp$inline_485$$.length] = 0;
            this.$Send$(2, $bufchain$jscomp$1_bufchain$jscomp$inline_484$$, $buf$jscomp$inline_486$$);
            $JSCompiler_StaticMethods_SendEvent$$(this, $buffer$jscomp$43_i$jscomp$81_port$jscomp$5$$, 6, 1);
            break;
          case 6:
            $JSCompiler_StaticMethods_JSC$1957_Ack$$(this, $queue_id$jscomp$3$$, $bufchain$jscomp$1_bufchain$jscomp$inline_484$$);
            0 === $buffer$jscomp$43_i$jscomp$81_port$jscomp$5$$ && $JSCompiler_StaticMethods_SendWindowSize$$(this, $buffer$jscomp$43_i$jscomp$81_port$jscomp$5$$);
            break;
          default:
            return;
        }
      }
    }
  }, ], }, $isr_status$:{$initial_port$:46848, }, $device_specific$:{$initial_port$:46592, $struct$:[{bytes:2, name:"cols", read:() => this.cols, write:() => {
  }, }, {bytes:2, name:"rows", read:() => this.rows, write:() => {
  }, }, {bytes:4, name:"max_nr_ports", read:() => this.ports, write:() => {
  }, }, {bytes:4, name:"emerg_wr", read:() => 0, write:() => {
  }, }, ]}, });
  for (let $port$jscomp$6$$ = 0; $port$jscomp$6$$ < this.ports; ++$port$jscomp$6$$) {
    const $queue_id$jscomp$4$$ = 0 === $port$jscomp$6$$ ? 0 : 2 * $port$jscomp$6$$ + 2;
    this.$bus$.register("virtio-console" + $port$jscomp$6$$ + "-input-bytes", function($data$jscomp$181$$) {
      var $bufchain$jscomp$2_queue$jscomp$3$$ = this.$virtio$.$queues$[$queue_id$jscomp$4$$];
      $JSCompiler_StaticMethods_has_request$$($bufchain$jscomp$2_queue$jscomp$3$$) && ($bufchain$jscomp$2_queue$jscomp$3$$ = $JSCompiler_StaticMethods_pop_request$$($bufchain$jscomp$2_queue$jscomp$3$$), this.$Send$($queue_id$jscomp$4$$, $bufchain$jscomp$2_queue$jscomp$3$$, new Uint8Array($data$jscomp$181$$)));
    }, this);
    this.$bus$.register("virtio-console" + $port$jscomp$6$$ + "-resize", function($size$jscomp$36$$) {
      0 === $port$jscomp$6$$ && (this.cols = $size$jscomp$36$$[0], this.rows = $size$jscomp$36$$[1]);
      $JSCompiler_StaticMethods_is_configured$$(this.$virtio$.$queues$[2]) && $JSCompiler_StaticMethods_has_request$$(this.$virtio$.$queues$[2]) && $JSCompiler_StaticMethods_SendWindowSize$$(this, $port$jscomp$6$$, $size$jscomp$36$$[0], $size$jscomp$36$$[1]);
    }, this);
  }
}
function $JSCompiler_StaticMethods_SendWindowSize$$($JSCompiler_StaticMethods_SendWindowSize$self$$, $port$jscomp$7$$, $cols$jscomp$2$$, $rows$jscomp$2$$) {
  $rows$jscomp$2$$ = $rows$jscomp$2$$ || $JSCompiler_StaticMethods_SendWindowSize$self$$.rows;
  $cols$jscomp$2$$ = $cols$jscomp$2$$ || $JSCompiler_StaticMethods_SendWindowSize$self$$.cols;
  const $bufchain$jscomp$3$$ = $JSCompiler_StaticMethods_pop_request$$($JSCompiler_StaticMethods_SendWindowSize$self$$.$virtio$.$queues$[2]), $buf$jscomp$1$$ = new Uint8Array(12);
  $Marshall$$module$lib$marshall$$(["w", "h", "h", "h", "h"], [$port$jscomp$7$$, 5, 0, $rows$jscomp$2$$, $cols$jscomp$2$$], $buf$jscomp$1$$, 0);
  $JSCompiler_StaticMethods_SendWindowSize$self$$.$Send$(2, $bufchain$jscomp$3$$, $buf$jscomp$1$$);
}
$VirtioConsole$$module$src$virtio_console$$.prototype.$get_state$ = function() {
  const $state$jscomp$36$$ = [];
  $state$jscomp$36$$[0] = this.$virtio$;
  $state$jscomp$36$$[1] = this.rows;
  $state$jscomp$36$$[2] = this.cols;
  $state$jscomp$36$$[3] = this.ports;
  return $state$jscomp$36$$;
};
$VirtioConsole$$module$src$virtio_console$$.prototype.$set_state$ = function($state$jscomp$37$$) {
  this.$virtio$.$set_state$($state$jscomp$37$$[0]);
  this.rows = $state$jscomp$37$$[1];
  this.cols = $state$jscomp$37$$[2];
  this.ports = $state$jscomp$37$$[3];
};
$VirtioConsole$$module$src$virtio_console$$.prototype.reset = function() {
  this.$virtio$.reset();
};
function $JSCompiler_StaticMethods_SendEvent$$($JSCompiler_StaticMethods_SendEvent$self$$, $port$jscomp$9$$, $event$jscomp$13$$, $value$jscomp$163$$) {
  const $bufchain$jscomp$5$$ = $JSCompiler_StaticMethods_pop_request$$($JSCompiler_StaticMethods_SendEvent$self$$.$virtio$.$queues$[2]), $buf$jscomp$3$$ = new Uint8Array(8);
  $Marshall$$module$lib$marshall$$(["w", "h", "h"], [$port$jscomp$9$$, $event$jscomp$13$$, $value$jscomp$163$$], $buf$jscomp$3$$, 0);
  $JSCompiler_StaticMethods_SendEvent$self$$.$Send$(2, $bufchain$jscomp$5$$, $buf$jscomp$3$$);
}
$VirtioConsole$$module$src$virtio_console$$.prototype.$Send$ = function($queue_id$jscomp$5$$, $bufchain$jscomp$6$$, $blob$jscomp$14$$) {
  $JSCompiler_StaticMethods_set_next_blob$$($bufchain$jscomp$6$$, $blob$jscomp$14$$);
  $JSCompiler_StaticMethods_push_reply$$(this.$virtio$.$queues$[$queue_id$jscomp$5$$], $bufchain$jscomp$6$$);
  $JSCompiler_StaticMethods_flush_replies$$(this.$virtio$.$queues$[$queue_id$jscomp$5$$]);
};
function $JSCompiler_StaticMethods_JSC$1957_Ack$$($JSCompiler_StaticMethods_JSC$1957_Ack$self$$, $queue_id$jscomp$6$$, $bufchain$jscomp$7$$) {
  $JSCompiler_StaticMethods_set_next_blob$$($bufchain$jscomp$7$$, new Uint8Array(0));
  $JSCompiler_StaticMethods_push_reply$$($JSCompiler_StaticMethods_JSC$1957_Ack$self$$.$virtio$.$queues$[$queue_id$jscomp$6$$], $bufchain$jscomp$7$$);
  $JSCompiler_StaticMethods_flush_replies$$($JSCompiler_StaticMethods_JSC$1957_Ack$self$$.$virtio$.$queues$[$queue_id$jscomp$6$$]);
}
;function $PS2$$module$src$ps2$$($cpu$jscomp$19$$, $bus$jscomp$21$$) {
  this.$cpu$ = $cpu$jscomp$19$$;
  this.$bus$ = $bus$jscomp$21$$;
  this.reset();
  this.$bus$.register("keyboard-code", function($code$jscomp$7$$) {
    this.$enable_keyboard_stream$ && (this.$kbd_buffer$.push($code$jscomp$7$$), this.$raise_irq$());
  }, this);
  this.$bus$.register("mouse-click", function($data$jscomp$182$$) {
    this.$have_mouse$ && this.$use_mouse$ && (this.$mouse_clicks$ = $data$jscomp$182$$[0] | $data$jscomp$182$$[2] << 1 | $data$jscomp$182$$[1] << 2, this.$enable_mouse_stream$ && $JSCompiler_StaticMethods_send_mouse_packet$$(this, 0, 0));
  }, this);
  this.$bus$.register("mouse-delta", function($change_x$jscomp$inline_500_data$jscomp$183$$) {
    var $change_y$jscomp$inline_501_delta_y$jscomp$inline_499$$ = $change_x$jscomp$inline_500_data$jscomp$183$$[1];
    this.$have_mouse$ && this.$use_mouse$ && (this.$mouse_delta_x$ += 1 * $change_x$jscomp$inline_500_data$jscomp$183$$[0], this.$mouse_delta_y$ += 1 * $change_y$jscomp$inline_501_delta_y$jscomp$inline_499$$, this.$enable_mouse_stream$ && ($change_x$jscomp$inline_500_data$jscomp$183$$ = this.$mouse_delta_x$ | 0, $change_y$jscomp$inline_501_delta_y$jscomp$inline_499$$ = this.$mouse_delta_y$ | 0, $change_x$jscomp$inline_500_data$jscomp$183$$ || $change_y$jscomp$inline_501_delta_y$jscomp$inline_499$$)) && 
    (this.$mouse_delta_x$ -= $change_x$jscomp$inline_500_data$jscomp$183$$, this.$mouse_delta_y$ -= $change_y$jscomp$inline_501_delta_y$jscomp$inline_499$$, $JSCompiler_StaticMethods_send_mouse_packet$$(this, $change_x$jscomp$inline_500_data$jscomp$183$$, $change_y$jscomp$inline_501_delta_y$jscomp$inline_499$$));
  }, this);
  this.$bus$.register("mouse-wheel", function($data$jscomp$184$$) {
    this.$wheel_movement$ -= $data$jscomp$184$$[0];
    this.$wheel_movement$ -= 2 * $data$jscomp$184$$[1];
    this.$wheel_movement$ = Math.min(7, Math.max(-8, this.$wheel_movement$));
    $JSCompiler_StaticMethods_send_mouse_packet$$(this, 0, 0);
  }, this);
  $JSCompiler_StaticMethods_register_read$$($cpu$jscomp$19$$.$io$, 96, this, this.$port60_read$);
  $JSCompiler_StaticMethods_register_read$$($cpu$jscomp$19$$.$io$, 100, this, this.$port64_read$);
  $JSCompiler_StaticMethods_register_write$$($cpu$jscomp$19$$.$io$, 96, this, this.$port60_write$);
  $JSCompiler_StaticMethods_register_write$$($cpu$jscomp$19$$.$io$, 100, this, this.$port64_write$);
}
$JSCompiler_prototypeAlias$$ = $PS2$$module$src$ps2$$.prototype;
$JSCompiler_prototypeAlias$$.reset = function() {
  this.$use_mouse$ = this.$enable_mouse_stream$ = !1;
  this.$have_mouse$ = !0;
  this.$mouse_clicks$ = this.$mouse_delta_y$ = this.$mouse_delta_x$ = 0;
  this.$N$ = !0;
  this.$G$ = this.$F$ = this.$B$ = this.$D$ = this.$H$ = this.$C$ = this.$enable_keyboard_stream$ = !1;
  this.$kbd_buffer$ = new $ByteQueue$$module$src$lib$$(1024);
  this.$o$ = 0;
  this.$l$ = 100;
  this.$j$ = this.$i$ = 0;
  this.$v$ = !1;
  this.$wheel_movement$ = 0;
  this.$L$ = 4;
  this.$u$ = !1;
  this.$g$ = new $ByteQueue$$module$src$lib$$(1024);
  this.$A$ = this.$s$ = !1;
  this.$h$ = 5;
  this.$M$ = 0;
  this.$J$ = this.$I$ = this.$K$ = !1;
};
$JSCompiler_prototypeAlias$$.$get_state$ = function() {
  var $state$jscomp$38$$ = [];
  $state$jscomp$38$$[0] = this.$enable_mouse_stream$;
  $state$jscomp$38$$[1] = this.$use_mouse$;
  $state$jscomp$38$$[2] = this.$have_mouse$;
  $state$jscomp$38$$[3] = this.$mouse_delta_x$;
  $state$jscomp$38$$[4] = this.$mouse_delta_y$;
  $state$jscomp$38$$[5] = this.$mouse_clicks$;
  $state$jscomp$38$$[6] = this.$N$;
  $state$jscomp$38$$[7] = this.$enable_keyboard_stream$;
  $state$jscomp$38$$[8] = this.$C$;
  $state$jscomp$38$$[9] = this.$H$;
  $state$jscomp$38$$[10] = this.$D$;
  $state$jscomp$38$$[11] = this.$B$;
  $state$jscomp$38$$[12] = this.$F$;
  $state$jscomp$38$$[13] = this.$G$;
  $state$jscomp$38$$[15] = this.$o$;
  $state$jscomp$38$$[16] = this.$l$;
  $state$jscomp$38$$[17] = this.$L$;
  $state$jscomp$38$$[18] = this.$u$;
  $state$jscomp$38$$[20] = this.$h$;
  $state$jscomp$38$$[21] = this.$K$;
  $state$jscomp$38$$[22] = this.$I$;
  $state$jscomp$38$$[23] = this.$M$;
  $state$jscomp$38$$[24] = this.$J$;
  $state$jscomp$38$$[25] = this.$j$;
  $state$jscomp$38$$[26] = this.$i$;
  $state$jscomp$38$$[27] = this.$v$;
  return $state$jscomp$38$$;
};
$JSCompiler_prototypeAlias$$.$set_state$ = function($state$jscomp$39$$) {
  this.$enable_mouse_stream$ = $state$jscomp$39$$[0];
  this.$use_mouse$ = $state$jscomp$39$$[1];
  this.$have_mouse$ = $state$jscomp$39$$[2];
  this.$mouse_delta_x$ = $state$jscomp$39$$[3];
  this.$mouse_delta_y$ = $state$jscomp$39$$[4];
  this.$mouse_clicks$ = $state$jscomp$39$$[5];
  this.$N$ = $state$jscomp$39$$[6];
  this.$enable_keyboard_stream$ = $state$jscomp$39$$[7];
  this.$C$ = $state$jscomp$39$$[8];
  this.$H$ = $state$jscomp$39$$[9];
  this.$D$ = $state$jscomp$39$$[10];
  this.$B$ = $state$jscomp$39$$[11];
  this.$F$ = $state$jscomp$39$$[12];
  this.$G$ = $state$jscomp$39$$[13];
  this.$o$ = $state$jscomp$39$$[15];
  this.$l$ = $state$jscomp$39$$[16];
  this.$L$ = $state$jscomp$39$$[17];
  this.$u$ = $state$jscomp$39$$[18];
  this.$h$ = $state$jscomp$39$$[20];
  this.$K$ = $state$jscomp$39$$[21];
  this.$I$ = $state$jscomp$39$$[22];
  this.$M$ = $state$jscomp$39$$[23];
  this.$J$ = $state$jscomp$39$$[24];
  this.$j$ = $state$jscomp$39$$[25] || 0;
  this.$i$ = $state$jscomp$39$$[26] || 0;
  this.$v$ = $state$jscomp$39$$[27] || !1;
  this.$A$ = this.$s$ = !1;
  this.$kbd_buffer$.clear();
  this.$g$.clear();
  this.$bus$.send("mouse-enable", this.$use_mouse$);
};
$JSCompiler_prototypeAlias$$.$raise_irq$ = function() {
  this.$s$ || (this.$kbd_buffer$.length ? $JSCompiler_StaticMethods_kbd_irq$$(this) : this.$g$.length && $JSCompiler_StaticMethods_mouse_irq$$(this));
};
function $JSCompiler_StaticMethods_mouse_irq$$($JSCompiler_StaticMethods_mouse_irq$self$$) {
  $JSCompiler_StaticMethods_mouse_irq$self$$.$s$ = !0;
  $JSCompiler_StaticMethods_mouse_irq$self$$.$A$ = !0;
  $JSCompiler_StaticMethods_mouse_irq$self$$.$h$ & 2 && ($JSCompiler_StaticMethods_mouse_irq$self$$.$cpu$.$device_lower_irq$(12), $JSCompiler_StaticMethods_mouse_irq$self$$.$cpu$.$device_raise_irq$(12));
}
function $JSCompiler_StaticMethods_kbd_irq$$($JSCompiler_StaticMethods_kbd_irq$self$$) {
  $JSCompiler_StaticMethods_kbd_irq$self$$.$s$ = !0;
  $JSCompiler_StaticMethods_kbd_irq$self$$.$A$ = !1;
  $JSCompiler_StaticMethods_kbd_irq$self$$.$h$ & 1 && ($JSCompiler_StaticMethods_kbd_irq$self$$.$cpu$.$device_lower_irq$(1), $JSCompiler_StaticMethods_kbd_irq$self$$.$cpu$.$device_raise_irq$(1));
}
function $JSCompiler_StaticMethods_send_mouse_packet$$($JSCompiler_StaticMethods_send_mouse_packet$self$$, $dx$jscomp$4$$, $dy$jscomp$4$$) {
  $JSCompiler_StaticMethods_send_mouse_packet$self$$.$g$.push((0 > $dy$jscomp$4$$) << 5 | (0 > $dx$jscomp$4$$) << 4 | 8 | $JSCompiler_StaticMethods_send_mouse_packet$self$$.$mouse_clicks$);
  $JSCompiler_StaticMethods_send_mouse_packet$self$$.$g$.push($dx$jscomp$4$$);
  $JSCompiler_StaticMethods_send_mouse_packet$self$$.$g$.push($dy$jscomp$4$$);
  4 === $JSCompiler_StaticMethods_send_mouse_packet$self$$.$j$ ? ($JSCompiler_StaticMethods_send_mouse_packet$self$$.$g$.push(0 | $JSCompiler_StaticMethods_send_mouse_packet$self$$.$wheel_movement$ & 15), $JSCompiler_StaticMethods_send_mouse_packet$self$$.$wheel_movement$ = 0) : 3 === $JSCompiler_StaticMethods_send_mouse_packet$self$$.$j$ && ($JSCompiler_StaticMethods_send_mouse_packet$self$$.$g$.push($JSCompiler_StaticMethods_send_mouse_packet$self$$.$wheel_movement$ & 255), $JSCompiler_StaticMethods_send_mouse_packet$self$$.$wheel_movement$ = 
  0);
  $JSCompiler_StaticMethods_send_mouse_packet$self$$.$raise_irq$();
}
$JSCompiler_prototypeAlias$$.$port60_read$ = function() {
  this.$s$ = !1;
  if (!this.$kbd_buffer$.length && !this.$g$.length) {
    return this.$o$;
  }
  this.$A$ ? (this.$cpu$.$device_lower_irq$(12), this.$o$ = this.$g$.shift()) : (this.$cpu$.$device_lower_irq$(1), this.$o$ = this.$kbd_buffer$.shift());
  (this.$kbd_buffer$.length || this.$g$.length) && this.$raise_irq$();
  return this.$o$;
};
$JSCompiler_prototypeAlias$$.$port64_read$ = function() {
  var $status_byte$$ = 16;
  this.$s$ && ($status_byte$$ |= 1);
  this.$A$ && ($status_byte$$ |= 32);
  return $status_byte$$;
};
$JSCompiler_prototypeAlias$$.$port60_write$ = function($write_byte$$) {
  if (this.$I$) {
    this.$h$ = $write_byte$$, this.$I$ = !1;
  } else {
    if (this.$K$) {
      this.$K$ = !1, this.$g$.clear(), this.$g$.push($write_byte$$), $JSCompiler_StaticMethods_mouse_irq$$(this);
    } else {
      if (this.$H$) {
        this.$H$ = !1;
        this.$g$.clear();
        this.$g$.push(250);
        this.$l$ = $write_byte$$;
        switch(this.$i$) {
          case -1:
            60 === $write_byte$$ ? (this.$v$ = !0, this.$i$ = 0) : (this.$v$ = !1, this.$i$ = 200 === $write_byte$$ ? 1 : 0);
            break;
          case 0:
            200 === $write_byte$$ && (this.$i$ = 1);
            break;
          case 1:
            this.$i$ = 100 === $write_byte$$ ? 2 : 200 === $write_byte$$ ? 3 : 0;
            break;
          case 2:
            80 === $write_byte$$ && (this.$j$ = 3);
            this.$i$ = -1;
            break;
          case 3:
            80 === $write_byte$$ && (this.$j$ = 4), this.$i$ = -1;
        }
        this.$l$ || (this.$l$ = 100);
        $JSCompiler_StaticMethods_mouse_irq$$(this);
      } else {
        if (this.$G$) {
          this.$G$ = !1, this.$g$.clear(), this.$g$.push(250), this.$L$ = 3 < $write_byte$$ ? 4 : 1 << $write_byte$$, $JSCompiler_StaticMethods_mouse_irq$$(this);
        } else {
          if (this.$D$) {
            this.$D$ = !1, this.$kbd_buffer$.push(250), $JSCompiler_StaticMethods_kbd_irq$$(this);
          } else {
            if (this.$B$) {
              this.$B$ = !1, this.$kbd_buffer$.push(250), $JSCompiler_StaticMethods_kbd_irq$$(this), $write_byte$$ || this.$kbd_buffer$.push(1);
            } else {
              if (this.$F$) {
                this.$F$ = !1, this.$kbd_buffer$.push(250), $JSCompiler_StaticMethods_kbd_irq$$(this);
              } else {
                if (this.$C$) {
                  if (this.$C$ = !1, this.$have_mouse$) {
                    this.$kbd_buffer$.clear();
                    this.$g$.clear();
                    this.$g$.push(250);
                    switch($write_byte$$) {
                      case 230:
                        this.$u$ = !1;
                        break;
                      case 231:
                        this.$u$ = !0;
                        break;
                      case 232:
                        this.$G$ = !0;
                        break;
                      case 233:
                        $JSCompiler_StaticMethods_send_mouse_packet$$(this, 0, 0);
                        break;
                      case 235:
                        $JSCompiler_StaticMethods_send_mouse_packet$$(this, 0, 0);
                        break;
                      case 242:
                        this.$g$.push(this.$j$);
                        this.$mouse_clicks$ = this.$mouse_delta_x$ = this.$mouse_delta_y$ = 0;
                        this.$raise_irq$();
                        break;
                      case 243:
                        this.$H$ = !0;
                        break;
                      case 244:
                        this.$use_mouse$ = this.$enable_mouse_stream$ = !0;
                        this.$bus$.send("mouse-enable", !0);
                        this.$mouse_clicks$ = this.$mouse_delta_x$ = this.$mouse_delta_y$ = 0;
                        break;
                      case 245:
                        this.$enable_mouse_stream$ = !1;
                        break;
                      case 246:
                        this.$enable_mouse_stream$ = !1;
                        this.$l$ = 100;
                        this.$u$ = !1;
                        this.$L$ = 4;
                        break;
                      case 255:
                        this.$g$.push(170), this.$g$.push(0), this.$use_mouse$ = !0, this.$bus$.send("mouse-enable", !0), this.$enable_mouse_stream$ = !1, this.$l$ = 100, this.$u$ = !1, this.$L$ = 4, this.$v$ || (this.$j$ = 0), this.$mouse_clicks$ = this.$mouse_delta_x$ = this.$mouse_delta_y$ = 0;
                    }
                    $JSCompiler_StaticMethods_mouse_irq$$(this);
                  }
                } else {
                  if (this.$J$) {
                    this.$J$ = !1, this.$M$ = $write_byte$$;
                  } else {
                    this.$g$.clear();
                    this.$kbd_buffer$.clear();
                    this.$kbd_buffer$.push(250);
                    switch($write_byte$$) {
                      case 237:
                        this.$D$ = !0;
                        break;
                      case 240:
                        this.$B$ = !0;
                        break;
                      case 242:
                        this.$kbd_buffer$.push(171);
                        this.$kbd_buffer$.push(131);
                        break;
                      case 243:
                        this.$F$ = !0;
                        break;
                      case 244:
                        this.$enable_keyboard_stream$ = !0;
                        break;
                      case 245:
                        this.$enable_keyboard_stream$ = !1;
                        break;
                      case 255:
                        this.$kbd_buffer$.clear(), this.$kbd_buffer$.push(250), this.$kbd_buffer$.push(170), this.$kbd_buffer$.push(0);
                    }
                    $JSCompiler_StaticMethods_kbd_irq$$(this);
                  }
                }
              }
            }
          }
        }
      }
    }
  }
};
$JSCompiler_prototypeAlias$$.$port64_write$ = function($write_byte$jscomp$1$$) {
  switch($write_byte$jscomp$1$$) {
    case 32:
      this.$kbd_buffer$.clear();
      this.$g$.clear();
      this.$kbd_buffer$.push(this.$h$);
      $JSCompiler_StaticMethods_kbd_irq$$(this);
      break;
    case 96:
      this.$I$ = !0;
      break;
    case 209:
      this.$J$ = !0;
      break;
    case 211:
      this.$K$ = !0;
      break;
    case 212:
      this.$C$ = !0;
      break;
    case 167:
      this.$h$ |= 32;
      break;
    case 168:
      this.$h$ &= -33;
      break;
    case 169:
      this.$kbd_buffer$.clear();
      this.$g$.clear();
      this.$kbd_buffer$.push(0);
      $JSCompiler_StaticMethods_kbd_irq$$(this);
      break;
    case 170:
      this.$kbd_buffer$.clear();
      this.$g$.clear();
      this.$kbd_buffer$.push(85);
      $JSCompiler_StaticMethods_kbd_irq$$(this);
      break;
    case 171:
      this.$kbd_buffer$.clear();
      this.$g$.clear();
      this.$kbd_buffer$.push(0);
      $JSCompiler_StaticMethods_kbd_irq$$(this);
      break;
    case 173:
      this.$h$ |= 16;
      break;
    case 174:
      this.$h$ &= -17;
      break;
    case 254:
      $JSCompiler_StaticMethods_reboot_internal$$(this.$cpu$);
  }
};
const $types$$module$src$elf$$ = DataView.prototype, $U8$$module$src$elf$$ = {size:1, get:$types$$module$src$elf$$.getUint8, set:$types$$module$src$elf$$.setUint8, }, $U16$$module$src$elf$$ = {size:2, get:$types$$module$src$elf$$.getUint16, set:$types$$module$src$elf$$.setUint16, }, $U32$$module$src$elf$$ = {size:4, get:$types$$module$src$elf$$.getUint32, set:$types$$module$src$elf$$.setUint32, }, $Header$$module$src$elf$$ = $create_struct$$module$src$elf$$([{$magic$:$U32$$module$src$elf$$, }, {$class$:$U8$$module$src$elf$$, 
}, {data:$U8$$module$src$elf$$, }, {$version0$:$U8$$module$src$elf$$, }, {$osabi$:$U8$$module$src$elf$$, }, {$abiversion$:$U8$$module$src$elf$$, }, {$pad0$:function($size$jscomp$37$$) {
  return {size:$size$jscomp$37$$, get:() => -1, };
}(7)}, {type:$U16$$module$src$elf$$, }, {$machine$:$U16$$module$src$elf$$, }, {$version1$:$U32$$module$src$elf$$, }, {$entry$:$U32$$module$src$elf$$, }, {$phoff$:$U32$$module$src$elf$$, }, {$shoff$:$U32$$module$src$elf$$, }, {flags:$U32$$module$src$elf$$, }, {$ehsize$:$U16$$module$src$elf$$, }, {$phentsize$:$U16$$module$src$elf$$, }, {$phnum$:$U16$$module$src$elf$$, }, {$shentsize$:$U16$$module$src$elf$$, }, {$shnum$:$U16$$module$src$elf$$, }, {$shstrndx$:$U16$$module$src$elf$$, }, ]);
console.assert(52 === $Header$$module$src$elf$$.reduce(($a$jscomp$7$$, $entry$jscomp$8$$) => $a$jscomp$7$$ + $entry$jscomp$8$$.size, 0));
const $ProgramHeader$$module$src$elf$$ = $create_struct$$module$src$elf$$([{type:$U32$$module$src$elf$$, }, {offset:$U32$$module$src$elf$$, }, {$vaddr$:$U32$$module$src$elf$$, }, {$paddr$:$U32$$module$src$elf$$, }, {$filesz$:$U32$$module$src$elf$$, }, {$memsz$:$U32$$module$src$elf$$, }, {flags:$U32$$module$src$elf$$, }, {align:$U32$$module$src$elf$$, }, ]);
console.assert(32 === $ProgramHeader$$module$src$elf$$.reduce(($a$jscomp$8$$, $entry$jscomp$9$$) => $a$jscomp$8$$ + $entry$jscomp$9$$.size, 0));
const $SectionHeader$$module$src$elf$$ = $create_struct$$module$src$elf$$([{name:$U32$$module$src$elf$$, }, {type:$U32$$module$src$elf$$, }, {flags:$U32$$module$src$elf$$, }, {$addr$:$U32$$module$src$elf$$, }, {offset:$U32$$module$src$elf$$, }, {size:$U32$$module$src$elf$$, }, {link:$U32$$module$src$elf$$, }, {info:$U32$$module$src$elf$$, }, {$addralign$:$U32$$module$src$elf$$, }, {$entsize$:$U32$$module$src$elf$$, }, ]);
console.assert(40 === $SectionHeader$$module$src$elf$$.reduce(($a$jscomp$9$$, $entry$jscomp$10$$) => $a$jscomp$9$$ + $entry$jscomp$10$$.size, 0));
function $create_struct$$module$src$elf$$($struct$jscomp$2$$) {
  return $struct$jscomp$2$$.map(function($entry$jscomp$11_type$jscomp$155$$) {
    var $keys$jscomp$1_name$jscomp$103$$ = Object.keys($entry$jscomp$11_type$jscomp$155$$);
    console.assert(1 === $keys$jscomp$1_name$jscomp$103$$.length);
    $keys$jscomp$1_name$jscomp$103$$ = $keys$jscomp$1_name$jscomp$103$$[0];
    $entry$jscomp$11_type$jscomp$155$$ = $entry$jscomp$11_type$jscomp$155$$[$keys$jscomp$1_name$jscomp$103$$];
    console.assert(0 < $entry$jscomp$11_type$jscomp$155$$.size);
    return {name:$keys$jscomp$1_name$jscomp$103$$, type:$entry$jscomp$11_type$jscomp$155$$, size:$entry$jscomp$11_type$jscomp$155$$.size, get:$entry$jscomp$11_type$jscomp$155$$.get, set:$entry$jscomp$11_type$jscomp$155$$.set, };
  });
}
function $read_struct$$module$src$elf$$($view$jscomp$29$$, $Struct_value$jscomp$164$$) {
  const $result$jscomp$16$$ = {};
  let $offset$jscomp$67$$ = 0;
  for (const $entry$jscomp$12$$ of $Struct_value$jscomp$164$$) {
    $Struct_value$jscomp$164$$ = $entry$jscomp$12$$.get.call($view$jscomp$29$$, $offset$jscomp$67$$, !0), console.assert(void 0 === $result$jscomp$16$$[$entry$jscomp$12$$.name]), $result$jscomp$16$$[$entry$jscomp$12$$.name] = $Struct_value$jscomp$164$$, $offset$jscomp$67$$ += $entry$jscomp$12$$.size;
  }
  return [$result$jscomp$16$$, $offset$jscomp$67$$];
}
function $read_structs$$module$src$elf$$($view$jscomp$30$$, $Struct$jscomp$1$$, $count$jscomp$56$$) {
  const $result$jscomp$17$$ = [];
  let $offset$jscomp$68$$ = 0;
  for (var $i$jscomp$83$$ = 0; $i$jscomp$83$$ < $count$jscomp$56$$; $i$jscomp$83$$++) {
    const [$s$jscomp$7$$, $size$jscomp$38$$] = $read_struct$$module$src$elf$$(new DataView($view$jscomp$30$$.buffer, $view$jscomp$30$$.byteOffset + $offset$jscomp$68$$, void 0), $Struct$jscomp$1$$);
    $result$jscomp$17$$.push($s$jscomp$7$$);
    $offset$jscomp$68$$ += $size$jscomp$38$$;
  }
  return [$result$jscomp$17$$, $offset$jscomp$68$$];
}
;const $CMOS_FDD_TYPE_MEDIUM$$module$src$floppy$$ = {[0]:0, [1]:525, [2]:525, [3]:350, [4]:350, [5]:350, };
function $FloppyController$$module$src$floppy$$($CMD_DESCRIPTOR$jscomp$inline_504_cpu$jscomp$20$$, $fda_image$$, $fdb_image$$) {
  this.$io$ = $CMD_DESCRIPTOR$jscomp$inline_504_cpu$jscomp$20$$.$io$;
  this.$cpu$ = $CMD_DESCRIPTOR$jscomp$inline_504_cpu$jscomp$20$$;
  this.$dma$ = $CMD_DESCRIPTOR$jscomp$inline_504_cpu$jscomp$20$$.$devices$.$dma$;
  $CMD_DESCRIPTOR$jscomp$inline_504_cpu$jscomp$20$$ = [{code:6, $mask$:31, $argc$:8, name:"READ", $handler$:this.$exec_read$}, {code:5, $mask$:63, $argc$:8, name:"WRITE", $handler$:this.$exec_write$}, {code:15, $mask$:255, $argc$:2, name:"SEEK", $handler$:this.$exec_seek$}, {code:8, $mask$:255, $argc$:0, name:"SENSE INTERRUPT STATUS", $handler$:this.$exec_sense_interrupt_status$}, {code:7, $mask$:255, $argc$:1, name:"RECALIBRATE", $handler$:this.$exec_recalibrate$}, {code:13, $mask$:191, $argc$:5, 
  name:"FORMAT TRACK", $handler$:this.$exec_format_track$}, {code:2, $mask$:191, $argc$:8, name:"READ TRACK", $handler$:this.$exec_unimplemented$}, {code:78, $mask$:255, $argc$:17, name:"RESTORE", $handler$:this.$exec_unimplemented$}, {code:46, $mask$:255, $argc$:0, name:"SAVE", $handler$:this.$exec_unimplemented$}, {code:12, $mask$:31, $argc$:8, name:"READ DELETED DATA", $handler$:this.$exec_unimplemented$}, {code:17, $mask$:31, $argc$:8, name:"SCAN EQUAL", $handler$:this.$exec_unimplemented$}, 
  {code:22, $mask$:31, $argc$:8, name:"VERIFY", $handler$:this.$exec_unimplemented$}, {code:25, $mask$:31, $argc$:8, name:"SCAN LOW OR EQUAL", $handler$:this.$exec_unimplemented$}, {code:29, $mask$:31, $argc$:8, name:"SCAN HIGH OR EQUAL", $handler$:this.$exec_unimplemented$}, {code:9, $mask$:63, $argc$:8, name:"WRITE DELETED DATA", $handler$:this.$exec_unimplemented$}, {code:10, $mask$:191, $argc$:1, name:"READ ID", $handler$:this.$exec_read_id$}, {code:3, $mask$:255, $argc$:2, name:"SPECIFY", $handler$:this.$exec_specify$}, 
  {code:4, $mask$:255, $argc$:1, name:"SENSE DRIVE STATUS", $handler$:this.$exec_sense_drive_status$}, {code:18, $mask$:255, $argc$:1, name:"PERPENDICULAR MODE", $handler$:this.$exec_perpendicular_mode$}, {code:19, $mask$:255, $argc$:3, name:"CONFIGURE", $handler$:this.$exec_configure$}, {code:23, $mask$:255, $argc$:2, name:"POWERDOWN MODE", $handler$:this.$exec_unimplemented$}, {code:51, $mask$:255, $argc$:1, name:"OPTION", $handler$:this.$exec_unimplemented$}, {code:142, $mask$:255, $argc$:5, name:"DRIVE SPECIFICATION", 
  $handler$:this.$exec_unimplemented$}, {code:143, $mask$:255, $argc$:2, name:"RELATIVE SEEK OUT", $handler$:this.$exec_unimplemented$}, {code:205, $mask$:255, $argc$:10, name:"FORMAT AND WRITE", $handler$:this.$exec_unimplemented$}, {code:207, $mask$:255, $argc$:2, name:"RELATIVE SEEK IN", $handler$:this.$exec_unimplemented$}, {code:20, $mask$:127, $argc$:0, name:"LOCK", $handler$:this.$exec_lock$}, {code:14, $mask$:255, $argc$:0, name:"DUMP REGISTERS", $handler$:this.$exec_dump_regs$}, {code:16, 
  $mask$:255, $argc$:0, name:"VERSION", $handler$:this.$exec_version$}, {code:24, $mask$:255, $argc$:0, name:"PART ID", $handler$:this.$exec_part_id$}, {code:0, $mask$:0, $argc$:0, name:"UNKNOWN COMMAND", $handler$:this.$exec_unimplemented$}, ];
  const $cmd_table$jscomp$inline_505$$ = Array(256);
  for (let $i$jscomp$inline_506$$ = $CMD_DESCRIPTOR$jscomp$inline_504_cpu$jscomp$20$$.length - 1; 0 <= $i$jscomp$inline_506$$; $i$jscomp$inline_506$$--) {
    const $cmd_desc$jscomp$inline_507$$ = $CMD_DESCRIPTOR$jscomp$inline_504_cpu$jscomp$20$$[$i$jscomp$inline_506$$];
    if (255 === $cmd_desc$jscomp$inline_507$$.$mask$) {
      $cmd_table$jscomp$inline_505$$[$cmd_desc$jscomp$inline_507$$.code] = $cmd_desc$jscomp$inline_507$$;
    } else {
      for (let $j$jscomp$inline_508$$ = 0; 256 > $j$jscomp$inline_508$$; $j$jscomp$inline_508$$++) {
        ($j$jscomp$inline_508$$ & $cmd_desc$jscomp$inline_507$$.$mask$) === $cmd_desc$jscomp$inline_507$$.code && ($cmd_table$jscomp$inline_505$$[$j$jscomp$inline_508$$] = $cmd_desc$jscomp$inline_507$$);
      }
    }
  }
  this.$R$ = $cmd_table$jscomp$inline_505$$;
  this.$s$ = 0;
  this.$H$ = 192;
  this.$j$ = 12;
  this.$P$ = 0;
  this.$i$ = 128;
  this.$o$ = 0;
  this.$B$ = 1;
  this.$A$ = this.$v$ = 0;
  this.$J$ = new Uint8Array(17);
  this.$u$ = this.$D$ = 0;
  this.$g$ = new Uint8Array(15);
  this.$F$ = this.$l$ = this.$S$ = this.$h$ = this.$G$ = this.$C$ = 0;
  this.$I$ = !1;
  this.$M$ = this.$O$ = 0;
  this.$L$ = 96;
  this.$K$ = this.$N$ = 0;
  this.$drives$ = [new $FloppyDrive$$module$src$floppy$$("fda", (void 0)?.$fda$, $fda_image$$), new $FloppyDrive$$module$src$floppy$$("fdb", (void 0)?.$fdb$, $fdb_image$$)];
  Object.seal(this);
  this.$cpu$.$devices$.$rtc$.$cmos_data$[16] = this.$drives$[0].$drive_type$ << 4 | this.$drives$[1].$drive_type$;
  $JSCompiler_StaticMethods_register_read$$(this.$io$, 1008, this, this.$read_reg_sra$);
  $JSCompiler_StaticMethods_register_read$$(this.$io$, 1009, this, this.$read_reg_srb$);
  $JSCompiler_StaticMethods_register_read$$(this.$io$, 1010, this, this.$read_reg_dor$);
  $JSCompiler_StaticMethods_register_read$$(this.$io$, 1011, this, this.$read_reg_tdr$);
  $JSCompiler_StaticMethods_register_read$$(this.$io$, 1012, this, this.$read_reg_msr$);
  $JSCompiler_StaticMethods_register_read$$(this.$io$, 1013, this, this.$read_reg_fifo$);
  $JSCompiler_StaticMethods_register_read$$(this.$io$, 1015, this, this.$read_reg_dir$);
  $JSCompiler_StaticMethods_register_write$$(this.$io$, 1010, this, this.$write_reg_dor$);
  $JSCompiler_StaticMethods_register_write$$(this.$io$, 1011, this, this.$write_reg_tdr$);
  $JSCompiler_StaticMethods_register_write$$(this.$io$, 1012, this, this.$write_reg_dsr$);
  $JSCompiler_StaticMethods_register_write$$(this.$io$, 1013, this, this.$write_reg_fifo$);
  $JSCompiler_StaticMethods_register_write$$(this.$io$, 1015, this, this.$write_reg_ccr$);
}
$JSCompiler_prototypeAlias$$ = $FloppyController$$module$src$floppy$$.prototype;
$JSCompiler_prototypeAlias$$.$raise_irq$ = function() {
  this.$s$ & 128 || (this.$cpu$.$device_raise_irq$(6), this.$s$ |= 128);
  this.$F$ = 0;
};
function $JSCompiler_StaticMethods_JSC$1997_lower_irq$$($JSCompiler_StaticMethods_JSC$1997_lower_irq$self$$) {
  $JSCompiler_StaticMethods_JSC$1997_lower_irq$self$$.$h$ = 0;
  $JSCompiler_StaticMethods_JSC$1997_lower_irq$self$$.$s$ & 128 && ($JSCompiler_StaticMethods_JSC$1997_lower_irq$self$$.$cpu$.$device_lower_irq$(6), $JSCompiler_StaticMethods_JSC$1997_lower_irq$self$$.$s$ &= -129);
}
function $JSCompiler_StaticMethods_set_curr_drive_no$$($JSCompiler_StaticMethods_set_curr_drive_no$self$$, $curr_drive_no$$) {
  $JSCompiler_StaticMethods_set_curr_drive_no$self$$.$l$ = $curr_drive_no$$ & 1;
  return $JSCompiler_StaticMethods_set_curr_drive_no$self$$.$drives$[$JSCompiler_StaticMethods_set_curr_drive_no$self$$.$l$];
}
function $JSCompiler_StaticMethods_enter_command_phase$$($JSCompiler_StaticMethods_enter_command_phase$self$$) {
  $JSCompiler_StaticMethods_enter_command_phase$self$$.$B$ = 1;
  $JSCompiler_StaticMethods_enter_command_phase$self$$.$D$ = 0;
  $JSCompiler_StaticMethods_enter_command_phase$self$$.$u$ = 0;
  $JSCompiler_StaticMethods_enter_command_phase$self$$.$i$ &= -81;
  $JSCompiler_StaticMethods_enter_command_phase$self$$.$i$ |= 128;
}
function $JSCompiler_StaticMethods_enter_result_phase$$($JSCompiler_StaticMethods_enter_result_phase$self$$, $fifo_len$$) {
  $JSCompiler_StaticMethods_enter_result_phase$self$$.$B$ = 3;
  $JSCompiler_StaticMethods_enter_result_phase$self$$.$C$ = 0;
  $JSCompiler_StaticMethods_enter_result_phase$self$$.$G$ = $fifo_len$$;
  $JSCompiler_StaticMethods_enter_result_phase$self$$.$i$ |= 208;
}
function $JSCompiler_StaticMethods_reset_fdc$$($JSCompiler_StaticMethods_reset_fdc$self$$) {
  $JSCompiler_StaticMethods_JSC$1997_lower_irq$$($JSCompiler_StaticMethods_reset_fdc$self$$);
  $JSCompiler_StaticMethods_reset_fdc$self$$.$s$ = 0;
  $JSCompiler_StaticMethods_reset_fdc$self$$.$H$ = 192;
  $JSCompiler_StaticMethods_reset_fdc$self$$.$j$ = 12;
  $JSCompiler_StaticMethods_reset_fdc$self$$.$i$ = 128;
  $JSCompiler_StaticMethods_reset_fdc$self$$.$l$ = 0;
  $JSCompiler_StaticMethods_reset_fdc$self$$.$h$ |= 192;
  $JSCompiler_StaticMethods_reset_fdc$self$$.$C$ = 0;
  $JSCompiler_StaticMethods_reset_fdc$self$$.$G$ = 0;
  $JSCompiler_StaticMethods_reset_fdc$self$$.$drives$[0].seek(0, 0, 1);
  $JSCompiler_StaticMethods_reset_fdc$self$$.$drives$[1].seek(0, 0, 1);
  $JSCompiler_StaticMethods_enter_command_phase$$($JSCompiler_StaticMethods_reset_fdc$self$$);
  $JSCompiler_StaticMethods_reset_fdc$self$$.$raise_irq$("controller reset");
  $JSCompiler_StaticMethods_reset_fdc$self$$.$F$ = 4;
}
$JSCompiler_prototypeAlias$$.$read_reg_sra$ = function() {
  return this.$s$;
};
$JSCompiler_prototypeAlias$$.$read_reg_srb$ = function() {
  return this.$H$;
};
$JSCompiler_prototypeAlias$$.$read_reg_dor$ = function() {
  return this.$j$ & -4 | this.$l$;
};
$JSCompiler_prototypeAlias$$.$read_reg_tdr$ = function() {
  return this.$P$;
};
$JSCompiler_prototypeAlias$$.$read_reg_msr$ = function() {
  this.$o$ &= -65;
  this.$j$ |= 4;
  return this.$i$;
};
$JSCompiler_prototypeAlias$$.$read_reg_fifo$ = function() {
  this.$o$ &= -65;
  if (!(this.$i$ & 128 && this.$i$ & 64) || 3 !== this.$B$) {
    return 0;
  }
  if (this.$C$ < this.$G$) {
    const $fifo_byte$$ = this.$g$[this.$C$++];
    this.$C$ === this.$G$ && (this.$i$ &= -129, $JSCompiler_StaticMethods_enter_command_phase$$(this), $JSCompiler_StaticMethods_JSC$1997_lower_irq$$(this));
    return $fifo_byte$$;
  }
  return 0;
};
$JSCompiler_prototypeAlias$$.$read_reg_dir$ = function() {
  return this.$drives$[this.$l$].$media_changed$ ? 128 : 0;
};
$JSCompiler_prototypeAlias$$.$write_reg_dor$ = function($dor_byte$jscomp$1$$) {
  this.$H$ = this.$H$ & -36 | ($dor_byte$jscomp$1$$ & 16 ? 1 : 0) | ($dor_byte$jscomp$1$$ & 32 ? 2 : 0) | ($dor_byte$jscomp$1$$ & 1 ? 32 : 0);
  !(this.$j$ & 4) && $dor_byte$jscomp$1$$ & 4 && ($JSCompiler_StaticMethods_reset_fdc$$(this), this.$o$ &= -65);
  this.$l$ = $dor_byte$jscomp$1$$ & 1;
  this.$j$ = $dor_byte$jscomp$1$$;
};
$JSCompiler_prototypeAlias$$.$write_reg_tdr$ = function($tdr_byte$$) {
  this.$j$ & 4 && (this.$P$ = $tdr_byte$$ & 4);
};
$JSCompiler_prototypeAlias$$.$write_reg_dsr$ = function($dsr_byte$$) {
  this.$j$ & 4 && ($dsr_byte$$ & 128 && (this.$j$ &= -5, $JSCompiler_StaticMethods_reset_fdc$$(this), this.$j$ |= 4), $dsr_byte$$ & 64 && $JSCompiler_StaticMethods_reset_fdc$$(this), this.$o$ = $dsr_byte$$);
};
$JSCompiler_prototypeAlias$$.$write_reg_fifo$ = function($fifo_byte$jscomp$1$$) {
  this.$o$ &= -65;
  if (this.$j$ & 4 && this.$i$ & 128 && !(this.$i$ & 64) && 1 === this.$B$) {
    if (0 === this.$u$) {
      const $cmd_desc$jscomp$1$$ = this.$R$[$fifo_byte$jscomp$1$$];
      this.$v$ = $fifo_byte$jscomp$1$$;
      this.$u$ = $cmd_desc$jscomp$1$$.$argc$;
      this.$A$ = this.$D$ = 0;
      (6 === $cmd_desc$jscomp$1$$.code || 5 === $cmd_desc$jscomp$1$$.code) && this.$v$ & 128 && (this.$A$ |= 1);
      this.$u$ && (this.$i$ |= 128);
      this.$i$ |= 16;
    } else {
      this.$J$[this.$D$++] = $fifo_byte$jscomp$1$$, this.$u$--;
    }
    0 === this.$u$ && (this.$B$ = 2, this.$R$[this.$v$].$handler$.call(this, this.$J$.slice(0, this.$D$)));
  }
};
$JSCompiler_prototypeAlias$$.$write_reg_ccr$ = function($ccr_byte$$) {
  this.$j$ & 4 && (this.$o$ = this.$o$ & -4 | $ccr_byte$$ & 3);
};
$JSCompiler_prototypeAlias$$.$exec_unimplemented$ = function() {
  this.$h$ = 128;
  this.$g$[0] = this.$h$;
  $JSCompiler_StaticMethods_enter_result_phase$$(this, 1);
};
$JSCompiler_prototypeAlias$$.$exec_read$ = function($args$jscomp$5$$) {
  $JSCompiler_StaticMethods_start_read_write$$(this, $args$jscomp$5$$, !1);
};
$JSCompiler_prototypeAlias$$.$exec_write$ = function($args$jscomp$6$$) {
  $JSCompiler_StaticMethods_start_read_write$$(this, $args$jscomp$6$$, !0);
};
$JSCompiler_prototypeAlias$$.$exec_seek$ = function($args$jscomp$7_track$jscomp$4$$) {
  const $curr_drive$jscomp$1$$ = $JSCompiler_StaticMethods_set_curr_drive_no$$(this, $args$jscomp$7_track$jscomp$4$$[0] & 1);
  $args$jscomp$7_track$jscomp$4$$ = $args$jscomp$7_track$jscomp$4$$[1];
  $JSCompiler_StaticMethods_enter_command_phase$$(this);
  $curr_drive$jscomp$1$$.seek($curr_drive$jscomp$1$$.$curr_head$, $args$jscomp$7_track$jscomp$4$$, $curr_drive$jscomp$1$$.$curr_sect$);
  this.$h$ |= 32;
  this.$raise_irq$("SEEK command");
};
$JSCompiler_prototypeAlias$$.$exec_sense_interrupt_status$ = function() {
  const $curr_drive$jscomp$2$$ = this.$drives$[this.$l$];
  let $status0$$;
  if (0 < this.$F$) {
    $status0$$ = 192 | 4 - this.$F$--;
  } else {
    if (this.$s$ & 128) {
      $status0$$ = this.$h$ & -8 | this.$l$;
    } else {
      this.$g$[0] = 128;
      $JSCompiler_StaticMethods_enter_result_phase$$(this, 1);
      return;
    }
  }
  this.$g$[0] = $status0$$;
  this.$g$[1] = $curr_drive$jscomp$2$$.$curr_track$;
  $JSCompiler_StaticMethods_enter_result_phase$$(this, 2);
  $JSCompiler_StaticMethods_JSC$1997_lower_irq$$(this);
  this.$h$ = 192;
};
$JSCompiler_prototypeAlias$$.$exec_recalibrate$ = function($args$jscomp$9$$) {
  $JSCompiler_StaticMethods_set_curr_drive_no$$(this, $args$jscomp$9$$[0] & 1).seek(0, 0, 1);
  $JSCompiler_StaticMethods_enter_command_phase$$(this);
  this.$h$ |= 32;
  this.$raise_irq$("RECALIBRATE command");
};
$JSCompiler_prototypeAlias$$.$exec_format_track$ = function($args$jscomp$10$$) {
  let $status0$jscomp$1$$ = 0, $status1$$ = 0;
  $JSCompiler_StaticMethods_set_curr_drive_no$$(this, $args$jscomp$10$$[0] & 1).$read_only$ && ($status0$jscomp$1$$ = 96, $status1$$ = 2);
  $JSCompiler_StaticMethods_end_read_write$$(this, $status0$jscomp$1$$, $status1$$);
};
$JSCompiler_prototypeAlias$$.$exec_read_id$ = function($args$jscomp$11$$) {
  const $curr_drive$jscomp$5$$ = this.$drives$[this.$l$];
  $curr_drive$jscomp$5$$.$curr_head$ = $args$jscomp$11$$[0] >> 2 & 1;
  0 !== $curr_drive$jscomp$5$$.$max_sect$ && ($curr_drive$jscomp$5$$.$curr_sect$ = $curr_drive$jscomp$5$$.$curr_sect$ % $curr_drive$jscomp$5$$.$max_sect$ + 1);
  $JSCompiler_StaticMethods_end_read_write$$(this, 0, 0);
};
$JSCompiler_prototypeAlias$$.$exec_specify$ = function($args$jscomp$12$$) {
  const $nd_hlt$$ = $args$jscomp$12$$[1];
  this.$O$ = $args$jscomp$12$$[0] >> 4;
  this.$M$ = $nd_hlt$$ >> 1;
  this.$j$ = $nd_hlt$$ & 1 ? this.$j$ & -9 : this.$j$ | 8;
  $JSCompiler_StaticMethods_enter_command_phase$$(this);
};
$JSCompiler_prototypeAlias$$.$exec_sense_drive_status$ = function($args$jscomp$13_drv_sel$$) {
  $args$jscomp$13_drv_sel$$ = $args$jscomp$13_drv_sel$$[0];
  const $curr_drive$jscomp$6$$ = $JSCompiler_StaticMethods_set_curr_drive_no$$(this, $args$jscomp$13_drv_sel$$ & 1);
  $curr_drive$jscomp$6$$.$curr_head$ = $args$jscomp$13_drv_sel$$ >> 2 & 1;
  this.$g$[0] = ($curr_drive$jscomp$6$$.$read_only$ ? 64 : 0) | (0 === $curr_drive$jscomp$6$$.$curr_track$ ? 16 : 0) | $curr_drive$jscomp$6$$.$curr_head$ << 2 | this.$l$ | 40;
  $JSCompiler_StaticMethods_enter_result_phase$$(this, 1);
};
$JSCompiler_prototypeAlias$$.$exec_perpendicular_mode$ = function($args$jscomp$14_perp_mode$$) {
  $args$jscomp$14_perp_mode$$ = $args$jscomp$14_perp_mode$$[0];
  $args$jscomp$14_perp_mode$$ & 128 && (this.$drives$[this.$l$].$perpendicular$ = $args$jscomp$14_perp_mode$$ & 7);
  $JSCompiler_StaticMethods_enter_command_phase$$(this);
};
$JSCompiler_prototypeAlias$$.$exec_configure$ = function($args$jscomp$15$$) {
  this.$L$ = $args$jscomp$15$$[1];
  this.$N$ = $args$jscomp$15$$[2];
  $JSCompiler_StaticMethods_enter_command_phase$$(this);
};
$JSCompiler_prototypeAlias$$.$exec_lock$ = function() {
  this.$v$ & 128 ? (this.$I$ = !0, this.$g$[0] = 16) : (this.$I$ = !1, this.$g$[0] = 0);
  $JSCompiler_StaticMethods_enter_result_phase$$(this, 1);
};
$JSCompiler_prototypeAlias$$.$exec_dump_regs$ = function() {
  const $curr_drive$jscomp$8$$ = this.$drives$[this.$l$];
  this.$g$[0] = this.$drives$[0].$curr_track$;
  this.$g$[1] = this.$drives$[1].$curr_track$;
  this.$g$[2] = 0;
  this.$g$[3] = 0;
  this.$g$[4] = this.$O$;
  this.$g$[5] = this.$M$ << 1 | (this.$j$ & 8 ? 1 : 0);
  this.$g$[6] = $curr_drive$jscomp$8$$.$max_sect$;
  this.$g$[7] = (this.$I$ ? 128 : 0) | $curr_drive$jscomp$8$$.$perpendicular$ << 2;
  this.$g$[8] = this.$L$;
  this.$g$[9] = this.$N$;
  $JSCompiler_StaticMethods_enter_result_phase$$(this, 10);
};
$JSCompiler_prototypeAlias$$.$exec_version$ = function() {
  this.$g$[0] = 144;
  $JSCompiler_StaticMethods_enter_result_phase$$(this, 1);
};
$JSCompiler_prototypeAlias$$.$exec_part_id$ = function() {
  this.$g$[0] = 65;
  $JSCompiler_StaticMethods_enter_result_phase$$(this, 1);
};
function $JSCompiler_StaticMethods_start_read_write$$($JSCompiler_StaticMethods_start_read_write$self$$, $args$jscomp$20_data_length$jscomp$1_dtl$$, $do_write$$) {
  const $curr_drive$jscomp$9$$ = $JSCompiler_StaticMethods_set_curr_drive_no$$($JSCompiler_StaticMethods_start_read_write$self$$, $args$jscomp$20_data_length$jscomp$1_dtl$$[0] & 1), $track$jscomp$5$$ = $args$jscomp$20_data_length$jscomp$1_dtl$$[1], $head$$ = $args$jscomp$20_data_length$jscomp$1_dtl$$[2], $sect$$ = $args$jscomp$20_data_length$jscomp$1_dtl$$[3];
  var $data_offset_ssc$$ = $args$jscomp$20_data_length$jscomp$1_dtl$$[4];
  const $eot$$ = $args$jscomp$20_data_length$jscomp$1_dtl$$[5];
  $args$jscomp$20_data_length$jscomp$1_dtl$$ = 128 > $args$jscomp$20_data_length$jscomp$1_dtl$$[7] ? $args$jscomp$20_data_length$jscomp$1_dtl$$[7] : 128;
  switch($curr_drive$jscomp$9$$.seek($head$$, $track$jscomp$5$$, $sect$$)) {
    case 2:
      $JSCompiler_StaticMethods_end_read_write$$($JSCompiler_StaticMethods_start_read_write$self$$, 64, 0);
      $JSCompiler_StaticMethods_start_read_write$self$$.$g$[3] = $track$jscomp$5$$;
      $JSCompiler_StaticMethods_start_read_write$self$$.$g$[4] = $head$$;
      $JSCompiler_StaticMethods_start_read_write$self$$.$g$[5] = $sect$$;
      return;
    case 3:
      $JSCompiler_StaticMethods_end_read_write$$($JSCompiler_StaticMethods_start_read_write$self$$, 64, 128);
      $JSCompiler_StaticMethods_start_read_write$self$$.$g$[3] = $track$jscomp$5$$;
      $JSCompiler_StaticMethods_start_read_write$self$$.$g$[4] = $head$$;
      $JSCompiler_StaticMethods_start_read_write$self$$.$g$[5] = $sect$$;
      return;
    case 1:
      $JSCompiler_StaticMethods_start_read_write$self$$.$h$ |= 32;
  }
  const $sect_size$$ = 128 << (7 < $data_offset_ssc$$ ? 7 : $data_offset_ssc$$);
  $data_offset_ssc$$ = (($track$jscomp$5$$ * $curr_drive$jscomp$9$$.$max_head$ + $head$$) * $curr_drive$jscomp$9$$.$max_sect$ + $sect$$ - 1) * $sect_size$$;
  if (128 !== $sect_size$$ && ($args$jscomp$20_data_length$jscomp$1_dtl$$ = $JSCompiler_StaticMethods_start_read_write$self$$.$A$ & 1 ? (2 * $eot$$ - $sect$$ + 1) * $sect_size$$ : ($eot$$ - $sect$$ + 1) * $sect_size$$, 0 >= $args$jscomp$20_data_length$jscomp$1_dtl$$)) {
    $JSCompiler_StaticMethods_end_read_write$$($JSCompiler_StaticMethods_start_read_write$self$$, 64, 1);
    $JSCompiler_StaticMethods_start_read_write$self$$.$g$[3] = $track$jscomp$5$$;
    $JSCompiler_StaticMethods_start_read_write$self$$.$g$[4] = $head$$;
    $JSCompiler_StaticMethods_start_read_write$self$$.$g$[5] = $sect$$;
    return;
  }
  $JSCompiler_StaticMethods_start_read_write$self$$.$K$ = $eot$$;
  $do_write$$ && $curr_drive$jscomp$9$$.$read_only$ ? ($JSCompiler_StaticMethods_end_read_write$$($JSCompiler_StaticMethods_start_read_write$self$$, 96, 2), $JSCompiler_StaticMethods_start_read_write$self$$.$g$[3] = $track$jscomp$5$$, $JSCompiler_StaticMethods_start_read_write$self$$.$g$[4] = $head$$, $JSCompiler_StaticMethods_start_read_write$self$$.$g$[5] = $sect$$) : $JSCompiler_StaticMethods_start_read_write$self$$.$j$ & 8 && ($JSCompiler_StaticMethods_start_read_write$self$$.$i$ &= -129, ($do_write$$ ? 
  $JSCompiler_StaticMethods_start_read_write$self$$.$dma$.$do_write$ : $JSCompiler_StaticMethods_start_read_write$self$$.$dma$.$do_read$).call($JSCompiler_StaticMethods_start_read_write$self$$.$dma$, $curr_drive$jscomp$9$$.buffer, $data_offset_ssc$$, $args$jscomp$20_data_length$jscomp$1_dtl$$, 2, $curr_drive$jscomp$inline_511_dma_error$$ => {
    if ($curr_drive$jscomp$inline_511_dma_error$$) {
      $JSCompiler_StaticMethods_end_read_write$$($JSCompiler_StaticMethods_start_read_write$self$$, 64, 0);
    } else {
      $curr_drive$jscomp$inline_511_dma_error$$ = $JSCompiler_StaticMethods_start_read_write$self$$.$drives$[$JSCompiler_StaticMethods_start_read_write$self$$.$l$];
      let $new_track$jscomp$inline_512$$ = $curr_drive$jscomp$inline_511_dma_error$$.$curr_track$, $new_head$jscomp$inline_513$$ = $curr_drive$jscomp$inline_511_dma_error$$.$curr_head$, $new_sect$jscomp$inline_514$$ = $curr_drive$jscomp$inline_511_dma_error$$.$curr_sect$;
      $new_sect$jscomp$inline_514$$ >= $curr_drive$jscomp$inline_511_dma_error$$.$max_sect$ || $new_sect$jscomp$inline_514$$ === $JSCompiler_StaticMethods_start_read_write$self$$.$K$ ? ($new_sect$jscomp$inline_514$$ = 1, $JSCompiler_StaticMethods_start_read_write$self$$.$A$ & 1 ? 0 === $new_head$jscomp$inline_513$$ && 2 === $curr_drive$jscomp$inline_511_dma_error$$.$max_head$ ? $new_head$jscomp$inline_513$$ = 1 : ($new_head$jscomp$inline_513$$ = 0, $new_track$jscomp$inline_512$$++, $JSCompiler_StaticMethods_start_read_write$self$$.$h$ |= 
      32) : ($JSCompiler_StaticMethods_start_read_write$self$$.$h$ |= 32, $new_track$jscomp$inline_512$$++)) : $new_sect$jscomp$inline_514$$++;
      $curr_drive$jscomp$inline_511_dma_error$$.seek($new_head$jscomp$inline_513$$, $new_track$jscomp$inline_512$$, $new_sect$jscomp$inline_514$$);
      $JSCompiler_StaticMethods_end_read_write$$($JSCompiler_StaticMethods_start_read_write$self$$, 0, 0);
    }
  }));
}
function $JSCompiler_StaticMethods_end_read_write$$($JSCompiler_StaticMethods_end_read_write$self$$, $status0$jscomp$2$$, $status1$jscomp$1$$) {
  const $curr_drive$jscomp$10$$ = $JSCompiler_StaticMethods_end_read_write$self$$.$drives$[$JSCompiler_StaticMethods_end_read_write$self$$.$l$];
  $JSCompiler_StaticMethods_end_read_write$self$$.$h$ &= -8;
  $JSCompiler_StaticMethods_end_read_write$self$$.$h$ |= $JSCompiler_StaticMethods_end_read_write$self$$.$l$;
  $curr_drive$jscomp$10$$.$curr_head$ && ($JSCompiler_StaticMethods_end_read_write$self$$.$h$ |= 4);
  $JSCompiler_StaticMethods_end_read_write$self$$.$h$ |= $status0$jscomp$2$$;
  $JSCompiler_StaticMethods_end_read_write$self$$.$i$ |= 192;
  $JSCompiler_StaticMethods_end_read_write$self$$.$i$ &= -33;
  $JSCompiler_StaticMethods_end_read_write$self$$.$g$[0] = $JSCompiler_StaticMethods_end_read_write$self$$.$h$;
  $JSCompiler_StaticMethods_end_read_write$self$$.$g$[1] = $status1$jscomp$1$$;
  $JSCompiler_StaticMethods_end_read_write$self$$.$g$[2] = 0;
  $JSCompiler_StaticMethods_end_read_write$self$$.$g$[3] = $curr_drive$jscomp$10$$.$curr_track$;
  $JSCompiler_StaticMethods_end_read_write$self$$.$g$[4] = $curr_drive$jscomp$10$$.$curr_head$;
  $JSCompiler_StaticMethods_end_read_write$self$$.$g$[5] = $curr_drive$jscomp$10$$.$curr_sect$;
  $JSCompiler_StaticMethods_end_read_write$self$$.$g$[6] = 2;
  $JSCompiler_StaticMethods_enter_result_phase$$($JSCompiler_StaticMethods_end_read_write$self$$, 7);
  $JSCompiler_StaticMethods_end_read_write$self$$.$raise_irq$($JSCompiler_StaticMethods_end_read_write$self$$.$R$[$JSCompiler_StaticMethods_end_read_write$self$$.$v$].name + " command");
}
$JSCompiler_prototypeAlias$$.$get_state$ = function() {
  const $state$jscomp$40$$ = [];
  $state$jscomp$40$$[19] = this.$s$;
  $state$jscomp$40$$[20] = this.$H$;
  $state$jscomp$40$$[21] = this.$j$;
  $state$jscomp$40$$[22] = this.$P$;
  $state$jscomp$40$$[23] = this.$i$;
  $state$jscomp$40$$[24] = this.$o$;
  $state$jscomp$40$$[25] = this.$B$;
  $state$jscomp$40$$[26] = this.$v$;
  $state$jscomp$40$$[27] = this.$A$;
  $state$jscomp$40$$[28] = this.$J$;
  $state$jscomp$40$$[29] = this.$D$;
  $state$jscomp$40$$[30] = this.$u$;
  $state$jscomp$40$$[31] = this.$g$;
  $state$jscomp$40$$[32] = this.$C$;
  $state$jscomp$40$$[33] = this.$G$;
  $state$jscomp$40$$[34] = this.$h$;
  $state$jscomp$40$$[35] = this.$S$;
  $state$jscomp$40$$[36] = this.$l$;
  $state$jscomp$40$$[37] = this.$F$;
  $state$jscomp$40$$[38] = this.$I$;
  $state$jscomp$40$$[39] = this.$O$;
  $state$jscomp$40$$[40] = this.$M$;
  $state$jscomp$40$$[41] = this.$L$;
  $state$jscomp$40$$[42] = this.$N$;
  $state$jscomp$40$$[43] = this.$K$;
  $state$jscomp$40$$[44] = this.$drives$[0].$get_state$();
  $state$jscomp$40$$[45] = this.$drives$[1].$get_state$();
  return $state$jscomp$40$$;
};
$JSCompiler_prototypeAlias$$.$set_state$ = function($state$jscomp$41$$) {
  "undefined" !== typeof $state$jscomp$41$$[19] && (this.$s$ = $state$jscomp$41$$[19], this.$H$ = $state$jscomp$41$$[20], this.$j$ = $state$jscomp$41$$[21], this.$P$ = $state$jscomp$41$$[22], this.$i$ = $state$jscomp$41$$[23], this.$o$ = $state$jscomp$41$$[24], this.$B$ = $state$jscomp$41$$[25], this.$v$ = $state$jscomp$41$$[26], this.$A$ = $state$jscomp$41$$[27], this.$J$.set($state$jscomp$41$$[28]), this.$D$ = $state$jscomp$41$$[29], this.$u$ = $state$jscomp$41$$[30], this.$g$.set($state$jscomp$41$$[31]), 
  this.$C$ = $state$jscomp$41$$[32], this.$G$ = $state$jscomp$41$$[33], this.$h$ = $state$jscomp$41$$[34], this.$S$ = $state$jscomp$41$$[35], this.$l$ = $state$jscomp$41$$[36], this.$F$ = $state$jscomp$41$$[37], this.$I$ = $state$jscomp$41$$[38], this.$O$ = $state$jscomp$41$$[39], this.$M$ = $state$jscomp$41$$[40], this.$L$ = $state$jscomp$41$$[41], this.$N$ = $state$jscomp$41$$[42], this.$K$ = $state$jscomp$41$$[43], this.$drives$[0].$set_state$($state$jscomp$41$$[44]), this.$drives$[1].$set_state$($state$jscomp$41$$[45]));
};
const $DISK_FORMATS$$module$src$floppy$$ = [{$drive_type$:4, $sectors$:18, $tracks$:80, $heads$:2}, {$drive_type$:4, $sectors$:20, $tracks$:80, $heads$:2}, {$drive_type$:4, $sectors$:21, $tracks$:80, $heads$:2}, {$drive_type$:4, $sectors$:21, $tracks$:82, $heads$:2}, {$drive_type$:4, $sectors$:21, $tracks$:83, $heads$:2}, {$drive_type$:4, $sectors$:22, $tracks$:80, $heads$:2}, {$drive_type$:4, $sectors$:23, $tracks$:80, $heads$:2}, {$drive_type$:4, $sectors$:24, $tracks$:80, $heads$:2}, {$drive_type$:5, 
$sectors$:36, $tracks$:80, $heads$:2}, {$drive_type$:5, $sectors$:39, $tracks$:80, $heads$:2}, {$drive_type$:5, $sectors$:40, $tracks$:80, $heads$:2}, {$drive_type$:5, $sectors$:44, $tracks$:80, $heads$:2}, {$drive_type$:5, $sectors$:48, $tracks$:80, $heads$:2}, {$drive_type$:4, $sectors$:8, $tracks$:80, $heads$:2}, {$drive_type$:4, $sectors$:9, $tracks$:80, $heads$:2}, {$drive_type$:4, $sectors$:10, $tracks$:80, $heads$:2}, {$drive_type$:4, $sectors$:10, $tracks$:82, $heads$:2}, {$drive_type$:4, 
$sectors$:10, $tracks$:83, $heads$:2}, {$drive_type$:4, $sectors$:13, $tracks$:80, $heads$:2}, {$drive_type$:4, $sectors$:14, $tracks$:80, $heads$:2}, {$drive_type$:2, $sectors$:15, $tracks$:80, $heads$:2}, {$drive_type$:2, $sectors$:18, $tracks$:80, $heads$:2}, {$drive_type$:2, $sectors$:18, $tracks$:82, $heads$:2}, {$drive_type$:2, $sectors$:18, $tracks$:83, $heads$:2}, {$drive_type$:2, $sectors$:20, $tracks$:80, $heads$:2}, {$drive_type$:2, $sectors$:9, $tracks$:80, $heads$:2}, {$drive_type$:2, 
$sectors$:11, $tracks$:80, $heads$:2}, {$drive_type$:2, $sectors$:9, $tracks$:40, $heads$:2}, {$drive_type$:2, $sectors$:9, $tracks$:40, $heads$:1}, {$drive_type$:2, $sectors$:10, $tracks$:41, $heads$:2}, {$drive_type$:2, $sectors$:10, $tracks$:42, $heads$:2}, {$drive_type$:2, $sectors$:8, $tracks$:40, $heads$:2}, {$drive_type$:2, $sectors$:8, $tracks$:40, $heads$:1}, {$drive_type$:4, $sectors$:9, $tracks$:80, $heads$:1}, {$drive_type$:1, $sectors$:10, $tracks$:40, $heads$:1}, {$drive_type$:1, $sectors$:10, 
$tracks$:40, $heads$:2}, ];
function $FloppyDrive$$module$src$floppy$$($cfg_drive_type_name$jscomp$104$$, $fdd_config$$, $buffer$jscomp$45$$) {
  this.name = $cfg_drive_type_name$jscomp$104$$;
  this.$curr_head$ = this.$curr_track$ = this.$max_sect$ = this.$max_head$ = this.$g$ = this.$drive_type$ = 0;
  this.$curr_sect$ = 1;
  this.$perpendicular$ = 0;
  this.$read_only$ = !1;
  this.$media_changed$ = !0;
  this.buffer = null;
  Object.seal(this);
  $cfg_drive_type_name$jscomp$104$$ = $fdd_config$$?.$drive_type$;
  void 0 !== $cfg_drive_type_name$jscomp$104$$ && 0 <= $cfg_drive_type_name$jscomp$104$$ && 5 >= $cfg_drive_type_name$jscomp$104$$ && (this.$drive_type$ = $cfg_drive_type_name$jscomp$104$$);
  $JSCompiler_StaticMethods_insert_disk$$(this, $buffer$jscomp$45$$, !!$fdd_config$$?.$read_only$);
  0 === this.$drive_type$ && void 0 === $cfg_drive_type_name$jscomp$104$$ && (this.$drive_type$ = 4);
}
function $JSCompiler_StaticMethods_insert_disk$$($JSCompiler_StaticMethods_insert_disk$self$$, $buffer$jscomp$46$$, $read_only$$) {
  if ($buffer$jscomp$46$$) {
    $buffer$jscomp$46$$ instanceof Uint8Array && ($buffer$jscomp$46$$ = new $SyncBuffer$$module$src$buffer$$($buffer$jscomp$46$$.buffer));
    var [$new_buffer$jscomp$1$$, $disk_format$$] = $JSCompiler_StaticMethods_find_disk_format$$($buffer$jscomp$46$$, $JSCompiler_StaticMethods_insert_disk$self$$.$drive_type$);
    $new_buffer$jscomp$1$$ && ($JSCompiler_StaticMethods_insert_disk$self$$.$g$ = $disk_format$$.$tracks$, $JSCompiler_StaticMethods_insert_disk$self$$.$max_head$ = $disk_format$$.$heads$, $JSCompiler_StaticMethods_insert_disk$self$$.$max_sect$ = $disk_format$$.$sectors$, $JSCompiler_StaticMethods_insert_disk$self$$.$read_only$ = !!$read_only$$, $JSCompiler_StaticMethods_insert_disk$self$$.$media_changed$ = !0, $JSCompiler_StaticMethods_insert_disk$self$$.buffer = $new_buffer$jscomp$1$$, 0 === $JSCompiler_StaticMethods_insert_disk$self$$.$drive_type$ && 
    ($JSCompiler_StaticMethods_insert_disk$self$$.$drive_type$ = $disk_format$$.$drive_type$));
  }
}
function $JSCompiler_StaticMethods_eject_disk$$($JSCompiler_StaticMethods_eject_disk$self$$) {
  $JSCompiler_StaticMethods_eject_disk$self$$.$g$ = 0;
  $JSCompiler_StaticMethods_eject_disk$self$$.$max_head$ = 0;
  $JSCompiler_StaticMethods_eject_disk$self$$.$max_sect$ = 0;
  $JSCompiler_StaticMethods_eject_disk$self$$.$media_changed$ = !0;
  $JSCompiler_StaticMethods_eject_disk$self$$.buffer = null;
}
$FloppyDrive$$module$src$floppy$$.prototype.$get_buffer$ = function() {
  return this.buffer ? this.buffer.buffer : null;
};
function $JSCompiler_StaticMethods_find_disk_format$$($buffer$jscomp$47$$, $drive_type_tmp_buffer$$) {
  const $autodetect$$ = 0 === $drive_type_tmp_buffer$$, $buffer_size$$ = $buffer$jscomp$47$$.byteLength;
  let $preferred_match$$ = -1, $medium_match$$ = -1, $size_match$$ = -1, $nearest_match$$ = -1, $nearest_size$$ = -1;
  for (let $i$jscomp$85$$ = 0; $i$jscomp$85$$ < $DISK_FORMATS$$module$src$floppy$$.length; $i$jscomp$85$$++) {
    const $disk_format$jscomp$1$$ = $DISK_FORMATS$$module$src$floppy$$[$i$jscomp$85$$], $disk_size$$ = $disk_format$jscomp$1$$.$sectors$ * $disk_format$jscomp$1$$.$tracks$ * $disk_format$jscomp$1$$.$heads$ * 512;
    if ($buffer_size$$ === $disk_size$$) {
      if ($autodetect$$ || $disk_format$jscomp$1$$.$drive_type$ === $drive_type_tmp_buffer$$) {
        $preferred_match$$ = $i$jscomp$85$$;
        break;
      } else {
        $autodetect$$ || $CMOS_FDD_TYPE_MEDIUM$$module$src$floppy$$[$disk_format$jscomp$1$$.$drive_type$] !== $CMOS_FDD_TYPE_MEDIUM$$module$src$floppy$$[$drive_type_tmp_buffer$$] ? $size_match$$ = -1 === $size_match$$ ? $i$jscomp$85$$ : $size_match$$ : $medium_match$$ = -1 === $medium_match$$ ? $i$jscomp$85$$ : $medium_match$$;
      }
    } else {
      $buffer_size$$ < $disk_size$$ && (-1 === $nearest_size$$ || $disk_size$$ < $nearest_size$$) && ($nearest_match$$ = $i$jscomp$85$$, $nearest_size$$ = $disk_size$$);
    }
  }
  return -1 !== $preferred_match$$ ? [$buffer$jscomp$47$$, $DISK_FORMATS$$module$src$floppy$$[$preferred_match$$]] : -1 !== $medium_match$$ ? [$buffer$jscomp$47$$, $DISK_FORMATS$$module$src$floppy$$[$medium_match$$]] : -1 !== $size_match$$ ? [$buffer$jscomp$47$$, $DISK_FORMATS$$module$src$floppy$$[$size_match$$]] : -1 !== $nearest_match$$ ? ($drive_type_tmp_buffer$$ = new Uint8Array($nearest_size$$), $drive_type_tmp_buffer$$.set(new Uint8Array($buffer$jscomp$47$$.buffer)), [new $SyncBuffer$$module$src$buffer$$($drive_type_tmp_buffer$$.buffer), 
  $DISK_FORMATS$$module$src$floppy$$[$nearest_match$$]]) : [null, null];
}
$FloppyDrive$$module$src$floppy$$.prototype.seek = function($head$jscomp$2$$, $track$jscomp$7$$, $sect$jscomp$2$$) {
  if ($track$jscomp$7$$ > this.$g$ || 0 !== $head$jscomp$2$$ && 1 === this.$max_head$) {
    return 2;
  }
  if ($sect$jscomp$2$$ > this.$max_sect$) {
    return 3;
  }
  let $result$jscomp$18$$ = 0;
  (this.$curr_track$ * this.$max_head$ + this.$curr_head$) * this.$max_sect$ + this.$curr_sect$ - 1 !== ($track$jscomp$7$$ * this.$max_head$ + $head$jscomp$2$$) * this.$max_sect$ + $sect$jscomp$2$$ - 1 && (this.$curr_track$ !== $track$jscomp$7$$ && (this.buffer && (this.$media_changed$ = !1), $result$jscomp$18$$ = 1), this.$curr_head$ = $head$jscomp$2$$, this.$curr_track$ = $track$jscomp$7$$, this.$curr_sect$ = $sect$jscomp$2$$);
  this.buffer || ($result$jscomp$18$$ = 2);
  return $result$jscomp$18$$;
};
$FloppyDrive$$module$src$floppy$$.prototype.$get_state$ = function() {
  const $state$jscomp$42$$ = [];
  $state$jscomp$42$$[0] = this.$drive_type$;
  $state$jscomp$42$$[1] = this.$g$;
  $state$jscomp$42$$[2] = this.$max_head$;
  $state$jscomp$42$$[3] = this.$max_sect$;
  $state$jscomp$42$$[4] = this.$curr_track$;
  $state$jscomp$42$$[5] = this.$curr_head$;
  $state$jscomp$42$$[6] = this.$curr_sect$;
  $state$jscomp$42$$[7] = this.$perpendicular$;
  $state$jscomp$42$$[8] = this.$read_only$;
  $state$jscomp$42$$[9] = this.$media_changed$;
  $state$jscomp$42$$[10] = this.buffer ? this.buffer.$get_state$() : null;
  return $state$jscomp$42$$;
};
$FloppyDrive$$module$src$floppy$$.prototype.$set_state$ = function($state$jscomp$43$$) {
  this.$drive_type$ = $state$jscomp$43$$[0];
  this.$g$ = $state$jscomp$43$$[1];
  this.$max_head$ = $state$jscomp$43$$[2];
  this.$max_sect$ = $state$jscomp$43$$[3];
  this.$curr_track$ = $state$jscomp$43$$[4];
  this.$curr_head$ = $state$jscomp$43$$[5];
  this.$curr_sect$ = $state$jscomp$43$$[6];
  this.$perpendicular$ = $state$jscomp$43$$[7];
  this.$read_only$ = $state$jscomp$43$$[8];
  this.$media_changed$ = $state$jscomp$43$$[9];
  $state$jscomp$43$$[10] ? (this.buffer || (this.buffer = new $SyncBuffer$$module$src$buffer$$(new ArrayBuffer(0))), this.buffer.$set_state$($state$jscomp$43$$[10])) : this.buffer = null;
};
const $ATAPI_CMD$$module$src$ide$$ = {[70]:{name:"GET CONFIGURATION", flags:0}, [74]:{name:"GET EVENT STATUS NOTIFICATION", flags:0}, [18]:{name:"INQUIRY", flags:0}, [189]:{name:"MECHANISM STATUS", flags:0}, [26]:{name:"MODE SENSE (6)", flags:0}, [90]:{name:"MODE SENSE (10)", flags:0}, [69]:{name:"PAUSE", flags:1}, [30]:{name:"PREVENT ALLOW MEDIUM REMOVAL", flags:0}, [40]:{name:"READ (10)", flags:1}, [168]:{name:"READ (12)", flags:1}, [37]:{name:"READ CAPACITY", flags:1}, [190]:{name:"READ CD", flags:1}, 
[81]:{name:"READ DISK INFORMATION", flags:1}, [66]:{name:"READ SUBCHANNEL", flags:1}, [67]:{name:"READ TOC PMA ATIP", flags:1}, [82]:{name:"READ TRACK INFORMATION", flags:1}, [3]:{name:"REQUEST SENSE", flags:0}, [27]:{name:"START STOP UNIT", flags:0}, [0]:{name:"TEST UNIT READY", flags:1}, };
function $IDEController$$module$src$ide$$($cpu$jscomp$21$$, $bus$jscomp$22_has_primary$$, $command_base0_ide_config$$) {
  this.$cpu$ = $cpu$jscomp$21$$;
  this.$bus$ = $bus$jscomp$22_has_primary$$;
  this.$secondary$ = this.$primary$ = void 0;
  $bus$jscomp$22_has_primary$$ = $command_base0_ide_config$$ && $command_base0_ide_config$$[0][0];
  const $has_secondary$$ = $command_base0_ide_config$$ && $command_base0_ide_config$$[1][0];
  if ($bus$jscomp$22_has_primary$$ || $has_secondary$$) {
    $bus$jscomp$22_has_primary$$ && (this.$primary$ = new $IDEChannel$$module$src$ide$$(this, 0, $command_base0_ide_config$$[0], 496, 1014, 14));
    $has_secondary$$ && (this.$secondary$ = new $IDEChannel$$module$src$ide$$(this, 1, $command_base0_ide_config$$[1], 368, 886, 15));
    $command_base0_ide_config$$ = $bus$jscomp$22_has_primary$$ ? this.$primary$.$h$ : 0;
    const $control_base0$$ = $bus$jscomp$22_has_primary$$ ? this.$primary$.$j$ : 0, $command_base1$$ = $has_secondary$$ ? this.$secondary$.$h$ : 0, $control_base1$$ = $has_secondary$$ ? this.$secondary$.$j$ : 0;
    this.name = "ide";
    this.$pci_id$ = 240;
    this.$pci_space$ = [134, 128, 16, 112, 5, 0, 160, 2, 0, 128, 1, 1, 0, 0, 0, 0, $command_base0_ide_config$$ & 255 | 1, $command_base0_ide_config$$ >> 8, 0, 0, $control_base0$$ & 255 | 1, $control_base0$$ >> 8, 0, 0, $command_base1$$ & 255 | 1, $command_base1$$ >> 8, 0, 0, $control_base1$$ & 255 | 1, $control_base1$$ >> 8, 0, 0, 1, 180, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 67, 16, 212, 130, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ];
    this.$pci_bars$ = [$bus$jscomp$22_has_primary$$ ? {size:8} : void 0, $bus$jscomp$22_has_primary$$ ? {size:1} : void 0, $has_secondary$$ ? {size:8} : void 0, $has_secondary$$ ? {size:1} : void 0, {size:16}];
    $JSCompiler_StaticMethods_register_device$$($cpu$jscomp$21$$.$devices$.$pci$, this);
  }
  Object.seal(this);
}
$IDEController$$module$src$ide$$.prototype.$get_state$ = function() {
  const $state$jscomp$44$$ = [];
  $state$jscomp$44$$[0] = this.$primary$;
  $state$jscomp$44$$[1] = this.$secondary$;
  return $state$jscomp$44$$;
};
$IDEController$$module$src$ide$$.prototype.$set_state$ = function($state$jscomp$45$$) {
  this.$primary$ && this.$primary$.$set_state$($state$jscomp$45$$[0]);
  this.$secondary$ && this.$secondary$.$set_state$($state$jscomp$45$$[1]);
};
function $IDEChannel$$module$src$ide$$($controller_cpu$jscomp$22$$, $bus_master_base_channel_nr$$, $channel_config_slave_cfg$$, $command_base_master_cfg$$, $control_base$$, $irq$jscomp$2$$) {
  this.$C$ = $bus_master_base_channel_nr$$;
  this.$cpu$ = $controller_cpu$jscomp$22$$.$cpu$;
  this.$bus$ = $controller_cpu$jscomp$22$$.$bus$;
  this.$h$ = $command_base_master_cfg$$;
  this.$j$ = $control_base$$;
  this.$irq$ = $irq$jscomp$2$$;
  this.name = "ide" + $bus_master_base_channel_nr$$;
  $command_base_master_cfg$$ = $channel_config_slave_cfg$$ ? $channel_config_slave_cfg$$[0] : void 0;
  $channel_config_slave_cfg$$ = $channel_config_slave_cfg$$ ? $channel_config_slave_cfg$$[1] : void 0;
  this.$master$ = new $IDEInterface$$module$src$ide$$(this, 0, $command_base_master_cfg$$?.buffer, $command_base_master_cfg$$?.$is_cdrom$);
  this.$slave$ = new $IDEInterface$$module$src$ide$$(this, 1, $channel_config_slave_cfg$$?.buffer, $channel_config_slave_cfg$$?.$is_cdrom$);
  this.$current_interface$ = this.$master$;
  this.$o$ = 2;
  this.$l$ = this.$g$ = this.$i$ = 0;
  $controller_cpu$jscomp$22$$ = $controller_cpu$jscomp$22$$.$cpu$;
  $JSCompiler_StaticMethods_register_read$$($controller_cpu$jscomp$22$$.$io$, this.$h$ | 0, this, function() {
    return $JSCompiler_StaticMethods_read_data$$(this.$current_interface$, 1);
  }, function() {
    return $JSCompiler_StaticMethods_read_data$$(this.$current_interface$, 2);
  }, function() {
    return $JSCompiler_StaticMethods_read_data$$(this.$current_interface$, 4);
  });
  $JSCompiler_StaticMethods_register_read$$($controller_cpu$jscomp$22$$.$io$, this.$h$ | 1, this, function() {
    return this.$current_interface$.$error_reg$ & 255;
  });
  $JSCompiler_StaticMethods_register_read$$($controller_cpu$jscomp$22$$.$io$, this.$h$ | 2, this, function() {
    return this.$current_interface$.$sector_count_reg$ & 255;
  });
  $JSCompiler_StaticMethods_register_read$$($controller_cpu$jscomp$22$$.$io$, this.$h$ | 3, this, function() {
    return this.$current_interface$.$lba_low_reg$ & 255;
  });
  $JSCompiler_StaticMethods_register_read$$($controller_cpu$jscomp$22$$.$io$, this.$h$ | 4, this, function() {
    return this.$current_interface$.$lba_mid_reg$ & 255;
  });
  $JSCompiler_StaticMethods_register_read$$($controller_cpu$jscomp$22$$.$io$, this.$h$ | 5, this, function() {
    return this.$current_interface$.$lba_high_reg$ & 255;
  });
  $JSCompiler_StaticMethods_register_read$$($controller_cpu$jscomp$22$$.$io$, this.$h$ | 6, this, function() {
    return this.$current_interface$.$device_reg$ & 255;
  });
  $JSCompiler_StaticMethods_register_read$$($controller_cpu$jscomp$22$$.$io$, this.$h$ | 7, this, function() {
    const $status$jscomp$11$$ = this.$read_status$();
    this.$cpu$.$device_lower_irq$(this.$irq$);
    return $status$jscomp$11$$;
  });
  $JSCompiler_StaticMethods_register_write$$($controller_cpu$jscomp$22$$.$io$, this.$h$ | 0, this, function($data$jscomp$185$$) {
    $JSCompiler_StaticMethods_write_data_port$$(this.$current_interface$, $data$jscomp$185$$, 1);
  }, function($data$jscomp$186$$) {
    $JSCompiler_StaticMethods_write_data_port$$(this.$current_interface$, $data$jscomp$186$$, 2);
  }, function($data$jscomp$187$$) {
    $JSCompiler_StaticMethods_write_data_port$$(this.$current_interface$, $data$jscomp$187$$, 4);
  });
  $JSCompiler_StaticMethods_register_write$$($controller_cpu$jscomp$22$$.$io$, this.$h$ | 1, this, function($data$jscomp$188$$) {
    this.$current_interface$.$features_reg$ = (this.$current_interface$.$features_reg$ << 8 | $data$jscomp$188$$) & 65535;
  });
  $JSCompiler_StaticMethods_register_write$$($controller_cpu$jscomp$22$$.$io$, this.$h$ | 2, this, function($data$jscomp$189$$) {
    this.$current_interface$.$sector_count_reg$ = (this.$current_interface$.$sector_count_reg$ << 8 | $data$jscomp$189$$) & 65535;
  });
  $JSCompiler_StaticMethods_register_write$$($controller_cpu$jscomp$22$$.$io$, this.$h$ | 3, this, function($data$jscomp$190$$) {
    this.$current_interface$.$lba_low_reg$ = (this.$current_interface$.$lba_low_reg$ << 8 | $data$jscomp$190$$) & 65535;
  });
  $JSCompiler_StaticMethods_register_write$$($controller_cpu$jscomp$22$$.$io$, this.$h$ | 4, this, function($data$jscomp$191$$) {
    this.$current_interface$.$lba_mid_reg$ = (this.$current_interface$.$lba_mid_reg$ << 8 | $data$jscomp$191$$) & 65535;
  });
  $JSCompiler_StaticMethods_register_write$$($controller_cpu$jscomp$22$$.$io$, this.$h$ | 5, this, function($data$jscomp$192$$) {
    this.$current_interface$.$lba_high_reg$ = (this.$current_interface$.$lba_high_reg$ << 8 | $data$jscomp$192$$) & 65535;
  });
  $JSCompiler_StaticMethods_register_write$$($controller_cpu$jscomp$22$$.$io$, this.$h$ | 6, this, function($data$jscomp$193$$) {
    const $select_slave$$ = $data$jscomp$193$$ & 16;
    if ($select_slave$$ && this.$current_interface$ === this.$master$ || !$select_slave$$ && this.$current_interface$ === this.$slave$) {
      this.$current_interface$ = $select_slave$$ ? this.$slave$ : this.$master$;
    }
    this.$current_interface$.$device_reg$ = $data$jscomp$193$$;
    this.$current_interface$.$is_lba$ = $data$jscomp$193$$ >> 6 & 1;
    this.$current_interface$.head = $data$jscomp$193$$ & 15;
  });
  $JSCompiler_StaticMethods_register_write$$($controller_cpu$jscomp$22$$.$io$, this.$h$ | 7, this, function($data$jscomp$194_is_single$jscomp$inline_969$$) {
    this.$current_interface$.$status_reg$ &= -34;
    var $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$ = this.$current_interface$;
    if ($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$L$ || 144 === $data$jscomp$194_is_single$jscomp$inline_969$$) {
      switch($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$u$ = $data$jscomp$194_is_single$jscomp$inline_969$$, $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$error_reg$ = 0, $data$jscomp$194_is_single$jscomp$inline_969$$) {
        case 8:
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$i$ = 0;
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$g$ = 0;
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$h$ = 0;
          $JSCompiler_StaticMethods_device_reset$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$);
          $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$);
          break;
        case 16:
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$lba_mid_reg$ = 0;
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$status_reg$ = 80;
          $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$);
          break;
        case 248:
          var $byte_count$jscomp$inline_970_count$jscomp$inline_967_is_lba48$jscomp$inline_975_is_lba48$jscomp$inline_980_last_sector$jscomp$inline_528$$ = $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$j$ - 1;
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$lba_low_reg$ = $byte_count$jscomp$inline_970_count$jscomp$inline_967_is_lba48$jscomp$inline_975_is_lba48$jscomp$inline_980_last_sector$jscomp$inline_528$$ & 255;
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$lba_mid_reg$ = $byte_count$jscomp$inline_970_count$jscomp$inline_967_is_lba48$jscomp$inline_975_is_lba48$jscomp$inline_980_last_sector$jscomp$inline_528$$ >> 8 & 255;
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$lba_high_reg$ = $byte_count$jscomp$inline_970_count$jscomp$inline_967_is_lba48$jscomp$inline_975_is_lba48$jscomp$inline_980_last_sector$jscomp$inline_528$$ >> 16 & 255;
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$device_reg$ = $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$device_reg$ & 240 | $byte_count$jscomp$inline_970_count$jscomp$inline_967_is_lba48$jscomp$inline_975_is_lba48$jscomp$inline_980_last_sector$jscomp$inline_528$$ >> 24 & 15;
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$status_reg$ = 80;
          $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$);
          break;
        case 39:
          $byte_count$jscomp$inline_970_count$jscomp$inline_967_is_lba48$jscomp$inline_975_is_lba48$jscomp$inline_980_last_sector$jscomp$inline_528$$ = $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$j$ - 1;
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$lba_low_reg$ = $byte_count$jscomp$inline_970_count$jscomp$inline_967_is_lba48$jscomp$inline_975_is_lba48$jscomp$inline_980_last_sector$jscomp$inline_528$$ & 255;
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$lba_mid_reg$ = $byte_count$jscomp$inline_970_count$jscomp$inline_967_is_lba48$jscomp$inline_975_is_lba48$jscomp$inline_980_last_sector$jscomp$inline_528$$ >> 8 & 255;
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$lba_high_reg$ = $byte_count$jscomp$inline_970_count$jscomp$inline_967_is_lba48$jscomp$inline_975_is_lba48$jscomp$inline_980_last_sector$jscomp$inline_528$$ >> 16 & 255;
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$lba_low_reg$ |= $byte_count$jscomp$inline_970_count$jscomp$inline_967_is_lba48$jscomp$inline_975_is_lba48$jscomp$inline_980_last_sector$jscomp$inline_528$$ >> 24 << 8 & 65280;
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$status_reg$ = 80;
          $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$);
          break;
        case 32:
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$s$ ? ($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$lba_mid_reg$ = 20, $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$lba_high_reg$ = 235, $JSCompiler_StaticMethods_ata_abort_command$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$)) : $JSCompiler_StaticMethods_ata_read_sectors$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$, $data$jscomp$194_is_single$jscomp$inline_969$$);
          break;
        case 36:
        case 41:
        case 196:
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$s$ ? $JSCompiler_StaticMethods_ata_abort_command$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$) : $JSCompiler_StaticMethods_ata_read_sectors$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$, $data$jscomp$194_is_single$jscomp$inline_969$$);
          break;
        case 48:
        case 52:
        case 57:
        case 197:
          if ($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$s$) {
            $JSCompiler_StaticMethods_ata_abort_command$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$);
          } else {
            var $count$jscomp$inline_976_count$jscomp$inline_981_is_lba48$jscomp$inline_966_lba$jscomp$inline_968_start$jscomp$inline_971$$ = 52 === $data$jscomp$194_is_single$jscomp$inline_969$$ || 57 === $data$jscomp$194_is_single$jscomp$inline_969$$;
            $byte_count$jscomp$inline_970_count$jscomp$inline_967_is_lba48$jscomp$inline_975_is_lba48$jscomp$inline_980_last_sector$jscomp$inline_528$$ = $JSCompiler_StaticMethods_get_count$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$, $count$jscomp$inline_976_count$jscomp$inline_981_is_lba48$jscomp$inline_966_lba$jscomp$inline_968_start$jscomp$inline_971$$);
            $count$jscomp$inline_976_count$jscomp$inline_981_is_lba48$jscomp$inline_966_lba$jscomp$inline_968_start$jscomp$inline_971$$ = $JSCompiler_StaticMethods_get_lba$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$, $count$jscomp$inline_976_count$jscomp$inline_981_is_lba48$jscomp$inline_966_lba$jscomp$inline_968_start$jscomp$inline_971$$);
            $data$jscomp$194_is_single$jscomp$inline_969$$ = 48 === $data$jscomp$194_is_single$jscomp$inline_969$$ || 52 === $data$jscomp$194_is_single$jscomp$inline_969$$;
            $byte_count$jscomp$inline_970_count$jscomp$inline_967_is_lba48$jscomp$inline_975_is_lba48$jscomp$inline_980_last_sector$jscomp$inline_528$$ *= $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$o$;
            $count$jscomp$inline_976_count$jscomp$inline_981_is_lba48$jscomp$inline_966_lba$jscomp$inline_968_start$jscomp$inline_971$$ *= $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$o$;
            $count$jscomp$inline_976_count$jscomp$inline_981_is_lba48$jscomp$inline_966_lba$jscomp$inline_968_start$jscomp$inline_971$$ + $byte_count$jscomp$inline_970_count$jscomp$inline_967_is_lba48$jscomp$inline_975_is_lba48$jscomp$inline_980_last_sector$jscomp$inline_528$$ > $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.buffer.byteLength ? ($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$status_reg$ = 255, $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$)) : 
            ($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$status_reg$ = 88, $JSCompiler_StaticMethods_data_allocate_noclear$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$, $byte_count$jscomp$inline_970_count$jscomp$inline_967_is_lba48$jscomp$inline_975_is_lba48$jscomp$inline_980_last_sector$jscomp$inline_528$$), $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$g$ = $data$jscomp$194_is_single$jscomp$inline_969$$ ? 512 : Math.min($byte_count$jscomp$inline_970_count$jscomp$inline_967_is_lba48$jscomp$inline_975_is_lba48$jscomp$inline_980_last_sector$jscomp$inline_528$$, 
            512 * $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$F$), $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$M$ = $count$jscomp$inline_976_count$jscomp$inline_981_is_lba48$jscomp$inline_966_lba$jscomp$inline_968_start$jscomp$inline_971$$);
          }
          break;
        case 144:
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$l$.$master$.$status_reg$ = 80;
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$l$.$master$.$error_reg$ = 1;
          $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$l$.$master$);
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$l$.$slave$.$L$ && ($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$l$.$slave$.$status_reg$ = 80, $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$l$.$slave$.$error_reg$ = 1, $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$l$.$slave$));
          break;
        case 145:
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$status_reg$ = 80;
          $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$);
          break;
        case 160:
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$s$ ? ($JSCompiler_StaticMethods_data_allocate$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$, 12), $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$g$ = 12, $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$sector_count_reg$ = 1, $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$status_reg$ = 88, $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$)) : 
          $JSCompiler_StaticMethods_ata_abort_command$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$);
          break;
        case 161:
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$s$ ? ($JSCompiler_StaticMethods_create_identify_packet$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$), $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$status_reg$ = 88, $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$)) : $JSCompiler_StaticMethods_ata_abort_command$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$);
          break;
        case 198:
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$F$ = $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$sector_count_reg$ & 255;
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$status_reg$ = 80;
          $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$);
          break;
        case 200:
        case 37:
          $byte_count$jscomp$inline_970_count$jscomp$inline_967_is_lba48$jscomp$inline_975_is_lba48$jscomp$inline_980_last_sector$jscomp$inline_528$$ = 37 === $data$jscomp$194_is_single$jscomp$inline_969$$;
          $count$jscomp$inline_976_count$jscomp$inline_981_is_lba48$jscomp$inline_966_lba$jscomp$inline_968_start$jscomp$inline_971$$ = $JSCompiler_StaticMethods_get_count$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$, $byte_count$jscomp$inline_970_count$jscomp$inline_967_is_lba48$jscomp$inline_975_is_lba48$jscomp$inline_980_last_sector$jscomp$inline_528$$);
          $JSCompiler_StaticMethods_get_lba$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$, $byte_count$jscomp$inline_970_count$jscomp$inline_967_is_lba48$jscomp$inline_975_is_lba48$jscomp$inline_980_last_sector$jscomp$inline_528$$) * $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$o$ + $count$jscomp$inline_976_count$jscomp$inline_981_is_lba48$jscomp$inline_966_lba$jscomp$inline_968_start$jscomp$inline_971$$ * $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$o$ > 
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.buffer.byteLength ? ($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$status_reg$ = 255, $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$)) : ($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$status_reg$ = 88, $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$l$.$g$ |= 1);
          break;
        case 202:
        case 53:
          $byte_count$jscomp$inline_970_count$jscomp$inline_967_is_lba48$jscomp$inline_975_is_lba48$jscomp$inline_980_last_sector$jscomp$inline_528$$ = 53 === $data$jscomp$194_is_single$jscomp$inline_969$$;
          $count$jscomp$inline_976_count$jscomp$inline_981_is_lba48$jscomp$inline_966_lba$jscomp$inline_968_start$jscomp$inline_971$$ = $JSCompiler_StaticMethods_get_count$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$, $byte_count$jscomp$inline_970_count$jscomp$inline_967_is_lba48$jscomp$inline_975_is_lba48$jscomp$inline_980_last_sector$jscomp$inline_528$$);
          $JSCompiler_StaticMethods_get_lba$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$, $byte_count$jscomp$inline_970_count$jscomp$inline_967_is_lba48$jscomp$inline_975_is_lba48$jscomp$inline_980_last_sector$jscomp$inline_528$$) * $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$o$ + $count$jscomp$inline_976_count$jscomp$inline_981_is_lba48$jscomp$inline_966_lba$jscomp$inline_968_start$jscomp$inline_971$$ * $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$o$ > 
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.buffer.byteLength ? ($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$status_reg$ = 255, $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$)) : ($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$status_reg$ = 88, $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$l$.$g$ |= 1);
          break;
        case 64:
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$status_reg$ = 80;
          $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$);
          break;
        case 218:
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$s$ && ($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.buffer || ($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$error_reg$ |= 2), $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$D$ && ($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$error_reg$ |= 32, $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$D$ = !1), $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$error_reg$ |= 
          64);
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$status_reg$ = 80;
          $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$);
          break;
        case 224:
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$status_reg$ = 80;
          $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$);
          break;
        case 225:
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$status_reg$ = 80;
          $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$);
          break;
        case 231:
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$status_reg$ = 80;
          $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$);
          break;
        case 234:
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$status_reg$ = 80;
          $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$);
          break;
        case 236:
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$s$ ? ($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$lba_mid_reg$ = 20, $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$lba_high_reg$ = 235, $JSCompiler_StaticMethods_ata_abort_command$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$)) : ($JSCompiler_StaticMethods_create_identify_packet$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$), $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$status_reg$ = 
          88, $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$));
          break;
        case 239:
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$status_reg$ = 80;
          $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$);
          break;
        case 222:
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$status_reg$ = 64;
          $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$);
          break;
        case 245:
          $JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$.$status_reg$ = 80;
          $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$);
          break;
        case 249:
          $JSCompiler_StaticMethods_ata_abort_command$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$);
          break;
        case 0:
          $JSCompiler_StaticMethods_ata_abort_command$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$);
          break;
        case 240:
          $JSCompiler_StaticMethods_ata_abort_command$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$);
          break;
        default:
          $JSCompiler_StaticMethods_ata_abort_command$$($JSCompiler_StaticMethods_ata_command$self$jscomp$inline_526$$);
      }
    }
    this.$cpu$.$device_lower_irq$(this.$irq$);
  });
  $JSCompiler_StaticMethods_register_read$$($controller_cpu$jscomp$22$$.$io$, this.$j$ | 0, this, this.$read_status$);
  $JSCompiler_StaticMethods_register_write$$($controller_cpu$jscomp$22$$.$io$, this.$j$ | 0, this, this.$write_control$);
  $bus_master_base_channel_nr$$ = 46080 + 8 * $bus_master_base_channel_nr$$;
  $JSCompiler_StaticMethods_register_read$$($controller_cpu$jscomp$22$$.$io$, $bus_master_base_channel_nr$$ | 0, this, this.$dma_read_command8$, void 0, this.$dma_read_command$);
  $JSCompiler_StaticMethods_register_write$$($controller_cpu$jscomp$22$$.$io$, $bus_master_base_channel_nr$$ | 0, this, this.$dma_write_command8$, void 0, this.$dma_write_command$);
  $JSCompiler_StaticMethods_register_read$$($controller_cpu$jscomp$22$$.$io$, $bus_master_base_channel_nr$$ | 2, this, this.$dma_read_status$);
  $JSCompiler_StaticMethods_register_write$$($controller_cpu$jscomp$22$$.$io$, $bus_master_base_channel_nr$$ | 2, this, this.$dma_write_status$);
  $JSCompiler_StaticMethods_register_read$$($controller_cpu$jscomp$22$$.$io$, $bus_master_base_channel_nr$$ | 4, this, void 0, void 0, this.$dma_read_addr$);
  $JSCompiler_StaticMethods_register_write$$($controller_cpu$jscomp$22$$.$io$, $bus_master_base_channel_nr$$ | 4, this, void 0, void 0, this.$dma_set_addr$);
}
$JSCompiler_prototypeAlias$$ = $IDEChannel$$module$src$ide$$.prototype;
$JSCompiler_prototypeAlias$$.$read_status$ = function() {
  return this.$current_interface$.$L$ ? this.$current_interface$.$status_reg$ : 0;
};
$JSCompiler_prototypeAlias$$.$write_control$ = function($data$jscomp$195$$) {
  $data$jscomp$195$$ & 4 && (this.$cpu$.$device_lower_irq$(this.$irq$), $JSCompiler_StaticMethods_device_reset$$(this.$master$), $JSCompiler_StaticMethods_device_reset$$(this.$slave$));
  this.$o$ = $data$jscomp$195$$;
};
$JSCompiler_prototypeAlias$$.$dma_read_addr$ = function() {
  return this.$i$;
};
$JSCompiler_prototypeAlias$$.$dma_set_addr$ = function($data$jscomp$196$$) {
  this.$i$ = $data$jscomp$196$$;
};
$JSCompiler_prototypeAlias$$.$dma_read_status$ = function() {
  return this.$g$;
};
$JSCompiler_prototypeAlias$$.$dma_write_status$ = function($value$jscomp$165$$) {
  this.$g$ &= ~($value$jscomp$165$$ & 6);
};
$JSCompiler_prototypeAlias$$.$dma_read_command$ = function() {
  return this.$l$ | this.$g$ << 16;
};
$JSCompiler_prototypeAlias$$.$dma_read_command8$ = function() {
  return this.$l$;
};
$JSCompiler_prototypeAlias$$.$dma_write_command$ = function($value$jscomp$166$$) {
  this.$dma_write_command8$($value$jscomp$166$$ & 255);
  this.$dma_write_status$($value$jscomp$166$$ >> 16 & 255);
};
$JSCompiler_prototypeAlias$$.$dma_write_command8$ = function($value$jscomp$167$$) {
  const $old_command$$ = this.$l$;
  this.$l$ = $value$jscomp$167$$ & 9;
  if (($old_command$$ & 1) !== ($value$jscomp$167$$ & 1)) {
    if (0 === ($value$jscomp$167$$ & 1)) {
      this.$g$ &= -2;
    } else {
      switch(this.$g$ |= 1, this.$current_interface$.$u$) {
        case 200:
        case 37:
          $JSCompiler_StaticMethods_do_ata_read_sectors_dma$$(this.$current_interface$);
          break;
        case 202:
        case 53:
          $JSCompiler_StaticMethods_do_ata_write_sectors_dma$$(this.$current_interface$);
          break;
        case 160:
          $JSCompiler_StaticMethods_do_atapi_dma$$(this.$current_interface$);
          break;
        default:
          this.$g$ &= -2, this.$g$ |= 2, $JSCompiler_StaticMethods_JSC$2010_push_irq$$(this);
      }
    }
  }
};
function $JSCompiler_StaticMethods_JSC$2010_push_irq$$($JSCompiler_StaticMethods_JSC$2010_push_irq$self$$) {
  0 === ($JSCompiler_StaticMethods_JSC$2010_push_irq$self$$.$o$ & 2) && ($JSCompiler_StaticMethods_JSC$2010_push_irq$self$$.$g$ |= 4, $JSCompiler_StaticMethods_JSC$2010_push_irq$self$$.$cpu$.$device_raise_irq$($JSCompiler_StaticMethods_JSC$2010_push_irq$self$$.$irq$));
}
$JSCompiler_prototypeAlias$$.$get_state$ = function() {
  var $state$jscomp$46$$ = [];
  $state$jscomp$46$$[0] = this.$master$;
  $state$jscomp$46$$[1] = this.$slave$;
  $state$jscomp$46$$[2] = this.$h$;
  $state$jscomp$46$$[3] = this.$irq$;
  $state$jscomp$46$$[5] = this.$j$;
  $state$jscomp$46$$[7] = this.name;
  $state$jscomp$46$$[8] = this.$o$;
  $state$jscomp$46$$[9] = this.$i$;
  $state$jscomp$46$$[10] = this.$g$;
  $state$jscomp$46$$[11] = this.$current_interface$ === this.$master$;
  $state$jscomp$46$$[12] = this.$l$;
  return $state$jscomp$46$$;
};
$JSCompiler_prototypeAlias$$.$set_state$ = function($state$jscomp$47$$) {
  this.$master$.$set_state$($state$jscomp$47$$[0]);
  this.$slave$.$set_state$($state$jscomp$47$$[1]);
  this.$h$ = $state$jscomp$47$$[2];
  this.$irq$ = $state$jscomp$47$$[3];
  this.$j$ = $state$jscomp$47$$[5];
  this.name = $state$jscomp$47$$[7];
  this.$o$ = $state$jscomp$47$$[8];
  this.$i$ = $state$jscomp$47$$[9];
  this.$g$ = $state$jscomp$47$$[10];
  this.$current_interface$ = $state$jscomp$47$$[11] ? this.$master$ : this.$slave$;
  this.$l$ = $state$jscomp$47$$[12];
};
function $IDEInterface$$module$src$ide$$($channel$jscomp$31$$, $interface_nr$$, $buffer$jscomp$48$$, $is_cd$$) {
  this.$l$ = $channel$jscomp$31$$;
  this.name = $channel$jscomp$31$$.name + "." + $interface_nr$$;
  this.$bus$ = $channel$jscomp$31$$.$bus$;
  this.$C$ = $channel$jscomp$31$$.$C$;
  this.$P$ = $interface_nr$$;
  this.$cpu$ = $channel$jscomp$31$$.$cpu$;
  this.buffer = null;
  this.$L$ = $is_cd$$ || !!$buffer$jscomp$48$$;
  this.$o$ = $is_cd$$ ? 2048 : 512;
  this.$s$ = $is_cd$$;
  this.$j$ = 0;
  this.$A$ = this.$s$ ? 1 : 0;
  this.$device_reg$ = this.head = this.$lba_high_reg$ = this.$lba_mid_reg$ = this.$features_reg$ = this.$lba_low_reg$ = this.$sector_count_reg$ = this.$is_lba$ = this.$B$ = this.$v$ = 0;
  this.$status_reg$ = 80;
  this.$F$ = 128;
  this.$i$ = this.$error_reg$ = 0;
  this.data = new Uint8Array(65536);
  this.$K$ = new Uint16Array(this.data.buffer);
  this.$G$ = new Int32Array(this.data.buffer);
  this.$g$ = this.$h$ = 0;
  this.$u$ = -1;
  this.$R$ = this.$M$ = 0;
  this.$H$ = new Set;
  this.$O$ = new Set;
  this.$N$ = -1;
  this.$I$ = this.$J$ = 0;
  this.$D$ = !1;
  $JSCompiler_StaticMethods_set_disk_buffer$$(this, $buffer$jscomp$48$$);
  Object.seal(this);
}
function $JSCompiler_StaticMethods_eject$$($JSCompiler_StaticMethods_eject$self$$) {
  $JSCompiler_StaticMethods_eject$self$$.$s$ && $JSCompiler_StaticMethods_eject$self$$.buffer && ($JSCompiler_StaticMethods_eject$self$$.$D$ = !0, $JSCompiler_StaticMethods_eject$self$$.buffer = null, $JSCompiler_StaticMethods_eject$self$$.$status_reg$ = 89, $JSCompiler_StaticMethods_eject$self$$.$error_reg$ = 96, $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_eject$self$$));
}
$JSCompiler_prototypeAlias$$ = $IDEInterface$$module$src$ide$$.prototype;
$JSCompiler_prototypeAlias$$.$set_cdrom$ = function($buffer$jscomp$49$$) {
  this.$s$ && $buffer$jscomp$49$$ && ($JSCompiler_StaticMethods_set_disk_buffer$$(this, $buffer$jscomp$49$$), this.$D$ = !0);
};
function $JSCompiler_StaticMethods_set_disk_buffer$$($JSCompiler_StaticMethods_set_disk_buffer$self$$, $buffer$jscomp$50_rtc$$) {
  if ($buffer$jscomp$50_rtc$$) {
    $JSCompiler_StaticMethods_set_disk_buffer$self$$.buffer = $buffer$jscomp$50_rtc$$;
    $JSCompiler_StaticMethods_set_disk_buffer$self$$.$s$ && ($JSCompiler_StaticMethods_set_disk_buffer$self$$.$status_reg$ = 89, $JSCompiler_StaticMethods_set_disk_buffer$self$$.$error_reg$ = 96);
    $JSCompiler_StaticMethods_set_disk_buffer$self$$.$j$ = $JSCompiler_StaticMethods_set_disk_buffer$self$$.buffer.byteLength / $JSCompiler_StaticMethods_set_disk_buffer$self$$.$o$;
    $JSCompiler_StaticMethods_set_disk_buffer$self$$.$j$ !== ($JSCompiler_StaticMethods_set_disk_buffer$self$$.$j$ | 0) && ($JSCompiler_StaticMethods_set_disk_buffer$self$$.$j$ = Math.ceil($JSCompiler_StaticMethods_set_disk_buffer$self$$.$j$));
    $JSCompiler_StaticMethods_set_disk_buffer$self$$.$s$ ? ($JSCompiler_StaticMethods_set_disk_buffer$self$$.$A$ = 1, $JSCompiler_StaticMethods_set_disk_buffer$self$$.$v$ = 2048) : ($JSCompiler_StaticMethods_set_disk_buffer$self$$.$A$ = 16, $JSCompiler_StaticMethods_set_disk_buffer$self$$.$v$ = 63);
    $JSCompiler_StaticMethods_set_disk_buffer$self$$.$B$ = $JSCompiler_StaticMethods_set_disk_buffer$self$$.$j$ / $JSCompiler_StaticMethods_set_disk_buffer$self$$.$A$ / $JSCompiler_StaticMethods_set_disk_buffer$self$$.$v$;
    $JSCompiler_StaticMethods_set_disk_buffer$self$$.$B$ !== ($JSCompiler_StaticMethods_set_disk_buffer$self$$.$B$ | 0) && ($JSCompiler_StaticMethods_set_disk_buffer$self$$.$B$ = Math.floor($JSCompiler_StaticMethods_set_disk_buffer$self$$.$B$));
    if (0 === $JSCompiler_StaticMethods_set_disk_buffer$self$$.$P$) {
      $buffer$jscomp$50_rtc$$ = $JSCompiler_StaticMethods_set_disk_buffer$self$$.$cpu$.$devices$.$rtc$;
      $buffer$jscomp$50_rtc$$.$cmos_data$[57] |= 1 << 4 * $JSCompiler_StaticMethods_set_disk_buffer$self$$.$C$;
      $buffer$jscomp$50_rtc$$.$cmos_data$[18] = $buffer$jscomp$50_rtc$$.$cmos_data$[18] & 15 | 240;
      const $drive_reg$$ = 0 === $JSCompiler_StaticMethods_set_disk_buffer$self$$.$C$ ? 27 : 36;
      $buffer$jscomp$50_rtc$$.$cmos_data$[$drive_reg$$] = $JSCompiler_StaticMethods_set_disk_buffer$self$$.$B$ & 255;
      $buffer$jscomp$50_rtc$$.$cmos_data$[$drive_reg$$ + 1] = $JSCompiler_StaticMethods_set_disk_buffer$self$$.$B$ >> 8 & 255;
      $buffer$jscomp$50_rtc$$.$cmos_data$[$drive_reg$$ + 2] = $JSCompiler_StaticMethods_set_disk_buffer$self$$.$A$ & 255;
      $buffer$jscomp$50_rtc$$.$cmos_data$[$drive_reg$$ + 3] = 255;
      $buffer$jscomp$50_rtc$$.$cmos_data$[$drive_reg$$ + 4] = 255;
      $buffer$jscomp$50_rtc$$.$cmos_data$[$drive_reg$$ + 5] = 200;
      $buffer$jscomp$50_rtc$$.$cmos_data$[$drive_reg$$ + 6] = $JSCompiler_StaticMethods_set_disk_buffer$self$$.$B$ & 255;
      $buffer$jscomp$50_rtc$$.$cmos_data$[$drive_reg$$ + 7] = $JSCompiler_StaticMethods_set_disk_buffer$self$$.$B$ >> 8 & 255;
      $buffer$jscomp$50_rtc$$.$cmos_data$[$drive_reg$$ + 8] = $JSCompiler_StaticMethods_set_disk_buffer$self$$.$v$ & 255;
    }
    $JSCompiler_StaticMethods_set_disk_buffer$self$$.$l$.$cpu$ && $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_set_disk_buffer$self$$);
  }
}
function $JSCompiler_StaticMethods_device_reset$$($JSCompiler_StaticMethods_device_reset$self$$) {
  $JSCompiler_StaticMethods_device_reset$self$$.$s$ ? ($JSCompiler_StaticMethods_device_reset$self$$.$status_reg$ = 0, $JSCompiler_StaticMethods_device_reset$self$$.$sector_count_reg$ = 1, $JSCompiler_StaticMethods_device_reset$self$$.$error_reg$ = 1, $JSCompiler_StaticMethods_device_reset$self$$.$lba_low_reg$ = 1, $JSCompiler_StaticMethods_device_reset$self$$.$lba_mid_reg$ = 20, $JSCompiler_StaticMethods_device_reset$self$$.$lba_high_reg$ = 235) : ($JSCompiler_StaticMethods_device_reset$self$$.$status_reg$ = 
  81, $JSCompiler_StaticMethods_device_reset$self$$.$sector_count_reg$ = 1, $JSCompiler_StaticMethods_device_reset$self$$.$error_reg$ = 1, $JSCompiler_StaticMethods_device_reset$self$$.$lba_low_reg$ = 1, $JSCompiler_StaticMethods_device_reset$self$$.$lba_mid_reg$ = 0, $JSCompiler_StaticMethods_device_reset$self$$.$lba_high_reg$ = 0);
  for (const $id$jscomp$inline_537$$ of $JSCompiler_StaticMethods_device_reset$self$$.$H$) {
    $JSCompiler_StaticMethods_device_reset$self$$.$O$.add($id$jscomp$inline_537$$);
  }
  $JSCompiler_StaticMethods_device_reset$self$$.$H$.clear();
}
function $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_JSC$2013_push_irq$self$$) {
  $JSCompiler_StaticMethods_JSC$2010_push_irq$$($JSCompiler_StaticMethods_JSC$2013_push_irq$self$$.$l$);
}
function $JSCompiler_StaticMethods_ata_abort_command$$($JSCompiler_StaticMethods_ata_abort_command$self$$) {
  $JSCompiler_StaticMethods_ata_abort_command$self$$.$error_reg$ = 4;
  $JSCompiler_StaticMethods_ata_abort_command$self$$.$status_reg$ = 65;
  $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_ata_abort_command$self$$);
}
function $JSCompiler_StaticMethods_atapi_check_condition_response$$($JSCompiler_StaticMethods_atapi_check_condition_response$self$$, $sense_key$$, $additional_sense$$) {
  $JSCompiler_StaticMethods_data_allocate$$($JSCompiler_StaticMethods_atapi_check_condition_response$self$$, 0);
  $JSCompiler_StaticMethods_atapi_check_condition_response$self$$.$g$ = $JSCompiler_StaticMethods_atapi_check_condition_response$self$$.$h$;
  $JSCompiler_StaticMethods_atapi_check_condition_response$self$$.$status_reg$ = 65;
  $JSCompiler_StaticMethods_atapi_check_condition_response$self$$.$error_reg$ = $sense_key$$ << 4;
  $JSCompiler_StaticMethods_atapi_check_condition_response$self$$.$sector_count_reg$ = $JSCompiler_StaticMethods_atapi_check_condition_response$self$$.$sector_count_reg$ & -8 | 3;
  $JSCompiler_StaticMethods_atapi_check_condition_response$self$$.$J$ = $sense_key$$;
  $JSCompiler_StaticMethods_atapi_check_condition_response$self$$.$I$ = $additional_sense$$;
}
$JSCompiler_prototypeAlias$$.$do_write$ = function() {
  this.$status_reg$ = 80;
  var $data$jscomp$197$$ = this.data.subarray(0, this.$h$);
  $JSCompiler_StaticMethods_ata_advance$$(this, this.$u$, this.$h$ / 512);
  $JSCompiler_StaticMethods_JSC$2013_push_irq$$(this);
  this.buffer.set(this.$M$, $data$jscomp$197$$, function() {
  });
  $JSCompiler_StaticMethods_report_write$$(this, this.$h$);
};
function $JSCompiler_StaticMethods_atapi_read$$($JSCompiler_StaticMethods_atapi_read$self$$, $cmd$jscomp$2_start$jscomp$30$$) {
  var $byte_count$$ = ((168 === $cmd$jscomp$2_start$jscomp$30$$[0] ? $cmd$jscomp$2_start$jscomp$30$$[6] << 24 | $cmd$jscomp$2_start$jscomp$30$$[7] << 16 | $cmd$jscomp$2_start$jscomp$30$$[8] << 8 | $cmd$jscomp$2_start$jscomp$30$$[9] : $cmd$jscomp$2_start$jscomp$30$$[7] << 8 | $cmd$jscomp$2_start$jscomp$30$$[8]) >>> 0) * $JSCompiler_StaticMethods_atapi_read$self$$.$o$;
  $cmd$jscomp$2_start$jscomp$30$$ = ($cmd$jscomp$2_start$jscomp$30$$[2] << 24 | $cmd$jscomp$2_start$jscomp$30$$[3] << 16 | $cmd$jscomp$2_start$jscomp$30$$[4] << 8 | $cmd$jscomp$2_start$jscomp$30$$[5]) * $JSCompiler_StaticMethods_atapi_read$self$$.$o$;
  $JSCompiler_StaticMethods_atapi_read$self$$.$h$ = 0;
  var $req_length$$ = $JSCompiler_StaticMethods_atapi_read$self$$.$lba_high_reg$ << 8 & 65280 | $JSCompiler_StaticMethods_atapi_read$self$$.$lba_mid_reg$ & 255;
  $JSCompiler_StaticMethods_atapi_read$self$$.$lba_mid_reg$ = $JSCompiler_StaticMethods_atapi_read$self$$.$lba_high_reg$ = 0;
  65535 === $req_length$$ && $req_length$$--;
  $req_length$$ > $byte_count$$ && ($req_length$$ = $byte_count$$);
  $JSCompiler_StaticMethods_atapi_read$self$$.buffer ? $cmd$jscomp$2_start$jscomp$30$$ >= $JSCompiler_StaticMethods_atapi_read$self$$.buffer.byteLength ? ($JSCompiler_StaticMethods_atapi_read$self$$.$status_reg$ = 255, $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_atapi_read$self$$)) : 0 === $byte_count$$ ? ($JSCompiler_StaticMethods_atapi_read$self$$.$status_reg$ = 80, $JSCompiler_StaticMethods_atapi_read$self$$.$i$ = 0) : ($byte_count$$ = Math.min($byte_count$$, $JSCompiler_StaticMethods_atapi_read$self$$.buffer.byteLength - 
  $cmd$jscomp$2_start$jscomp$30$$), $JSCompiler_StaticMethods_atapi_read$self$$.$status_reg$ = 208, $JSCompiler_StaticMethods_report_read_start$$($JSCompiler_StaticMethods_atapi_read$self$$), $JSCompiler_StaticMethods_atapi_read$self$$.$read_buffer$($cmd$jscomp$2_start$jscomp$30$$, $byte_count$$, $data$jscomp$198$$ => {
    $JSCompiler_StaticMethods_data_set$$($JSCompiler_StaticMethods_atapi_read$self$$, $data$jscomp$198$$);
    $JSCompiler_StaticMethods_atapi_read$self$$.$status_reg$ = 88;
    $JSCompiler_StaticMethods_atapi_read$self$$.$sector_count_reg$ = $JSCompiler_StaticMethods_atapi_read$self$$.$sector_count_reg$ & -8 | 2;
    $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_atapi_read$self$$);
    $req_length$$ &= -4;
    $JSCompiler_StaticMethods_atapi_read$self$$.$g$ = $req_length$$;
    $JSCompiler_StaticMethods_atapi_read$self$$.$g$ > $JSCompiler_StaticMethods_atapi_read$self$$.$h$ && ($JSCompiler_StaticMethods_atapi_read$self$$.$g$ = $JSCompiler_StaticMethods_atapi_read$self$$.$h$);
    $JSCompiler_StaticMethods_atapi_read$self$$.$lba_mid_reg$ = $JSCompiler_StaticMethods_atapi_read$self$$.$g$ & 255;
    $JSCompiler_StaticMethods_atapi_read$self$$.$lba_high_reg$ = $JSCompiler_StaticMethods_atapi_read$self$$.$g$ >> 8 & 255;
    $JSCompiler_StaticMethods_report_read_end$$($JSCompiler_StaticMethods_atapi_read$self$$, $byte_count$$);
  })) : ($JSCompiler_StaticMethods_atapi_read$self$$.$status_reg$ = 255, $JSCompiler_StaticMethods_atapi_read$self$$.$error_reg$ = 65, $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_atapi_read$self$$));
}
function $JSCompiler_StaticMethods_atapi_read_dma$$($JSCompiler_StaticMethods_atapi_read_dma$self$$, $cmd$jscomp$3_count$jscomp$59$$) {
  var $lba$jscomp$1_start$jscomp$31$$ = $cmd$jscomp$3_count$jscomp$59$$[2] << 24 | $cmd$jscomp$3_count$jscomp$59$$[3] << 16 | $cmd$jscomp$3_count$jscomp$59$$[4] << 8 | $cmd$jscomp$3_count$jscomp$59$$[5];
  $cmd$jscomp$3_count$jscomp$59$$ = 168 === $cmd$jscomp$3_count$jscomp$59$$[0] ? $cmd$jscomp$3_count$jscomp$59$$[6] << 24 | $cmd$jscomp$3_count$jscomp$59$$[7] << 16 | $cmd$jscomp$3_count$jscomp$59$$[8] << 8 | $cmd$jscomp$3_count$jscomp$59$$[9] : $cmd$jscomp$3_count$jscomp$59$$[7] << 8 | $cmd$jscomp$3_count$jscomp$59$$[8];
  var $byte_count$jscomp$1$$ = ($cmd$jscomp$3_count$jscomp$59$$ >>> 0) * $JSCompiler_StaticMethods_atapi_read_dma$self$$.$o$;
  $lba$jscomp$1_start$jscomp$31$$ *= $JSCompiler_StaticMethods_atapi_read_dma$self$$.$o$;
  $lba$jscomp$1_start$jscomp$31$$ >= $JSCompiler_StaticMethods_atapi_read_dma$self$$.buffer.byteLength ? ($JSCompiler_StaticMethods_atapi_read_dma$self$$.$status_reg$ = 255, $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_atapi_read_dma$self$$)) : ($JSCompiler_StaticMethods_atapi_read_dma$self$$.$status_reg$ = 208, $JSCompiler_StaticMethods_report_read_start$$($JSCompiler_StaticMethods_atapi_read_dma$self$$), $JSCompiler_StaticMethods_atapi_read_dma$self$$.$read_buffer$($lba$jscomp$1_start$jscomp$31$$, 
  $byte_count$jscomp$1$$, $data$jscomp$199$$ => {
    $JSCompiler_StaticMethods_report_read_end$$($JSCompiler_StaticMethods_atapi_read_dma$self$$, $byte_count$jscomp$1$$);
    $JSCompiler_StaticMethods_atapi_read_dma$self$$.$status_reg$ = 88;
    $JSCompiler_StaticMethods_atapi_read_dma$self$$.$sector_count_reg$ = $JSCompiler_StaticMethods_atapi_read_dma$self$$.$sector_count_reg$ & -8 | 2;
    $JSCompiler_StaticMethods_data_set$$($JSCompiler_StaticMethods_atapi_read_dma$self$$, $data$jscomp$199$$);
    $JSCompiler_StaticMethods_do_atapi_dma$$($JSCompiler_StaticMethods_atapi_read_dma$self$$);
  }));
}
function $JSCompiler_StaticMethods_do_atapi_dma$$($JSCompiler_StaticMethods_do_atapi_dma$self$$) {
  if (0 !== ($JSCompiler_StaticMethods_do_atapi_dma$self$$.$l$.$g$ & 1) && 0 !== ($JSCompiler_StaticMethods_do_atapi_dma$self$$.$status_reg$ & 8)) {
    var $prdt_start$$ = $JSCompiler_StaticMethods_do_atapi_dma$self$$.$l$.$i$, $offset$jscomp$70$$ = 0, $data$jscomp$200$$ = $JSCompiler_StaticMethods_do_atapi_dma$self$$.data;
    do {
      var $addr$jscomp$29$$ = $JSCompiler_StaticMethods_do_atapi_dma$self$$.$cpu$.$h$($prdt_start$$), $count$jscomp$60$$ = $JSCompiler_StaticMethods_do_atapi_dma$self$$.$cpu$.$read16$($prdt_start$$ + 4), $end$jscomp$20$$ = $JSCompiler_StaticMethods_do_atapi_dma$self$$.$cpu$.$read8$($prdt_start$$ + 7) & 128;
      $count$jscomp$60$$ || ($count$jscomp$60$$ = 65536);
      $JSCompiler_StaticMethods_write_blob$$($JSCompiler_StaticMethods_do_atapi_dma$self$$.$cpu$, $data$jscomp$200$$.subarray($offset$jscomp$70$$, Math.min($offset$jscomp$70$$ + $count$jscomp$60$$, $JSCompiler_StaticMethods_do_atapi_dma$self$$.$h$)), $addr$jscomp$29$$);
      $offset$jscomp$70$$ += $count$jscomp$60$$;
      $prdt_start$$ += 8;
      if ($offset$jscomp$70$$ >= $JSCompiler_StaticMethods_do_atapi_dma$self$$.$h$ && !$end$jscomp$20$$) {
        break;
      }
    } while (!$end$jscomp$20$$);
    $JSCompiler_StaticMethods_do_atapi_dma$self$$.$status_reg$ = 80;
    $JSCompiler_StaticMethods_do_atapi_dma$self$$.$l$.$g$ &= -2;
    $JSCompiler_StaticMethods_do_atapi_dma$self$$.$sector_count_reg$ = $JSCompiler_StaticMethods_do_atapi_dma$self$$.$sector_count_reg$ & -8 | 3;
    $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_do_atapi_dma$self$$);
  }
}
function $JSCompiler_StaticMethods_read_data$$($JSCompiler_StaticMethods_read_data$self$$, $byte_count$jscomp$inline_540_length$jscomp$28_sector_count$jscomp$inline_541$$) {
  if ($JSCompiler_StaticMethods_read_data$self$$.$i$ < $JSCompiler_StaticMethods_read_data$self$$.$g$) {
    var $result$jscomp$21$$ = 1 === $byte_count$jscomp$inline_540_length$jscomp$28_sector_count$jscomp$inline_541$$ ? $JSCompiler_StaticMethods_read_data$self$$.data[$JSCompiler_StaticMethods_read_data$self$$.$i$] : 2 === $byte_count$jscomp$inline_540_length$jscomp$28_sector_count$jscomp$inline_541$$ ? $JSCompiler_StaticMethods_read_data$self$$.$K$[$JSCompiler_StaticMethods_read_data$self$$.$i$ >>> 1] : $JSCompiler_StaticMethods_read_data$self$$.$G$[$JSCompiler_StaticMethods_read_data$self$$.$i$ >>> 
    2];
    $JSCompiler_StaticMethods_read_data$self$$.$i$ += $byte_count$jscomp$inline_540_length$jscomp$28_sector_count$jscomp$inline_541$$;
    $JSCompiler_StaticMethods_read_data$self$$.$i$ >= $JSCompiler_StaticMethods_read_data$self$$.$g$ && (160 === $JSCompiler_StaticMethods_read_data$self$$.$u$ ? $JSCompiler_StaticMethods_read_data$self$$.$g$ === $JSCompiler_StaticMethods_read_data$self$$.$h$ ? ($JSCompiler_StaticMethods_read_data$self$$.$status_reg$ = 80, $JSCompiler_StaticMethods_read_data$self$$.$sector_count_reg$ = $JSCompiler_StaticMethods_read_data$self$$.$sector_count_reg$ & -8 | 3, $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_read_data$self$$)) : 
    ($JSCompiler_StaticMethods_read_data$self$$.$status_reg$ = 88, $JSCompiler_StaticMethods_read_data$self$$.$sector_count_reg$ = $JSCompiler_StaticMethods_read_data$self$$.$sector_count_reg$ & -8 | 2, $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_read_data$self$$), $byte_count$jscomp$inline_540_length$jscomp$28_sector_count$jscomp$inline_541$$ = $JSCompiler_StaticMethods_read_data$self$$.$lba_high_reg$ << 8 & 65280 | $JSCompiler_StaticMethods_read_data$self$$.$lba_mid_reg$ & 
    255, $JSCompiler_StaticMethods_read_data$self$$.$g$ + $byte_count$jscomp$inline_540_length$jscomp$28_sector_count$jscomp$inline_541$$ > $JSCompiler_StaticMethods_read_data$self$$.$h$ ? ($JSCompiler_StaticMethods_read_data$self$$.$lba_mid_reg$ = $JSCompiler_StaticMethods_read_data$self$$.$h$ - $JSCompiler_StaticMethods_read_data$self$$.$g$ & 255, $JSCompiler_StaticMethods_read_data$self$$.$lba_high_reg$ = $JSCompiler_StaticMethods_read_data$self$$.$h$ - $JSCompiler_StaticMethods_read_data$self$$.$g$ >> 
    8 & 255, $JSCompiler_StaticMethods_read_data$self$$.$g$ = $JSCompiler_StaticMethods_read_data$self$$.$h$) : $JSCompiler_StaticMethods_read_data$self$$.$g$ += $byte_count$jscomp$inline_540_length$jscomp$28_sector_count$jscomp$inline_541$$) : ($JSCompiler_StaticMethods_read_data$self$$.$error_reg$ = 0, $JSCompiler_StaticMethods_read_data$self$$.$i$ >= $JSCompiler_StaticMethods_read_data$self$$.$h$ ? $JSCompiler_StaticMethods_read_data$self$$.$status_reg$ = 80 : ($byte_count$jscomp$inline_540_length$jscomp$28_sector_count$jscomp$inline_541$$ = 
    41 === $JSCompiler_StaticMethods_read_data$self$$.$u$ || 196 === $JSCompiler_StaticMethods_read_data$self$$.$u$ ? Math.min($JSCompiler_StaticMethods_read_data$self$$.$F$, ($JSCompiler_StaticMethods_read_data$self$$.$h$ - $JSCompiler_StaticMethods_read_data$self$$.$g$) / 512) : 1, $JSCompiler_StaticMethods_ata_advance$$($JSCompiler_StaticMethods_read_data$self$$, $JSCompiler_StaticMethods_read_data$self$$.$u$, $byte_count$jscomp$inline_540_length$jscomp$28_sector_count$jscomp$inline_541$$), $JSCompiler_StaticMethods_read_data$self$$.$g$ += 
    512 * $byte_count$jscomp$inline_540_length$jscomp$28_sector_count$jscomp$inline_541$$, $JSCompiler_StaticMethods_read_data$self$$.$status_reg$ = 88, $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_read_data$self$$))));
    return $result$jscomp$21$$;
  }
  $JSCompiler_StaticMethods_read_data$self$$.$i$ += $byte_count$jscomp$inline_540_length$jscomp$28_sector_count$jscomp$inline_541$$;
  return 0;
}
function $JSCompiler_StaticMethods_write_data_port$$($JSCompiler_StaticMethods_write_data_port$self$$, $cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$, $cmd_flags$jscomp$inline_985_format$jscomp$inline_988_length$jscomp$29$$) {
  if (!($JSCompiler_StaticMethods_write_data_port$self$$.$i$ >= $JSCompiler_StaticMethods_write_data_port$self$$.$g$) && (1 === $cmd_flags$jscomp$inline_985_format$jscomp$inline_988_length$jscomp$29$$ ? $JSCompiler_StaticMethods_write_data_port$self$$.data[$JSCompiler_StaticMethods_write_data_port$self$$.$i$++] = $cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$ : 2 === $cmd_flags$jscomp$inline_985_format$jscomp$inline_988_length$jscomp$29$$ ? 
  ($JSCompiler_StaticMethods_write_data_port$self$$.$K$[$JSCompiler_StaticMethods_write_data_port$self$$.$i$ >>> 1] = $cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$, $JSCompiler_StaticMethods_write_data_port$self$$.$i$ += 2) : ($JSCompiler_StaticMethods_write_data_port$self$$.$G$[$JSCompiler_StaticMethods_write_data_port$self$$.$i$ >>> 2] = $cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$, 
  $JSCompiler_StaticMethods_write_data_port$self$$.$i$ += 4), $JSCompiler_StaticMethods_write_data_port$self$$.$i$ === $JSCompiler_StaticMethods_write_data_port$self$$.$g$)) {
    if (160 === $JSCompiler_StaticMethods_write_data_port$self$$.$u$) {
      if ($cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$ = $JSCompiler_StaticMethods_write_data_port$self$$.data[0], $cmd_flags$jscomp$inline_985_format$jscomp$inline_988_length$jscomp$29$$ = $ATAPI_CMD$$module$src$ide$$[$cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$] ? $ATAPI_CMD$$module$src$ide$$[$cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$].flags : 
      0, $JSCompiler_StaticMethods_write_data_port$self$$.$i$ = 0, $JSCompiler_StaticMethods_write_data_port$self$$.$N$ = $cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$, 3 !== $cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$ && ($JSCompiler_StaticMethods_write_data_port$self$$.$J$ = 0, $JSCompiler_StaticMethods_write_data_port$self$$.$I$ = 
      0), !$JSCompiler_StaticMethods_write_data_port$self$$.buffer && $cmd_flags$jscomp$inline_985_format$jscomp$inline_988_length$jscomp$29$$ & 1) {
        $JSCompiler_StaticMethods_atapi_check_condition_response$$($JSCompiler_StaticMethods_write_data_port$self$$, 2, 58), $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_write_data_port$self$$);
      } else {
        switch($cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$) {
          case 0:
            $JSCompiler_StaticMethods_write_data_port$self$$.buffer ? ($JSCompiler_StaticMethods_data_allocate$$($JSCompiler_StaticMethods_write_data_port$self$$, 0), $JSCompiler_StaticMethods_write_data_port$self$$.$g$ = $JSCompiler_StaticMethods_write_data_port$self$$.$h$, $JSCompiler_StaticMethods_write_data_port$self$$.$status_reg$ = 80) : $JSCompiler_StaticMethods_atapi_check_condition_response$$($JSCompiler_StaticMethods_write_data_port$self$$, 2, 58);
            break;
          case 3:
            $JSCompiler_StaticMethods_data_allocate$$($JSCompiler_StaticMethods_write_data_port$self$$, $JSCompiler_StaticMethods_write_data_port$self$$.data[4]);
            $JSCompiler_StaticMethods_write_data_port$self$$.$g$ = $JSCompiler_StaticMethods_write_data_port$self$$.$h$;
            $JSCompiler_StaticMethods_write_data_port$self$$.$status_reg$ = 88;
            $JSCompiler_StaticMethods_write_data_port$self$$.data[0] = 240;
            $JSCompiler_StaticMethods_write_data_port$self$$.data[2] = $JSCompiler_StaticMethods_write_data_port$self$$.$J$;
            $JSCompiler_StaticMethods_write_data_port$self$$.data[7] = 8;
            $JSCompiler_StaticMethods_write_data_port$self$$.data[12] = $JSCompiler_StaticMethods_write_data_port$self$$.$I$;
            $JSCompiler_StaticMethods_write_data_port$self$$.$J$ = 0;
            $JSCompiler_StaticMethods_write_data_port$self$$.$I$ = 0;
            break;
          case 18:
            $cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$ = $JSCompiler_StaticMethods_write_data_port$self$$.data[4];
            $JSCompiler_StaticMethods_write_data_port$self$$.$status_reg$ = 88;
            $JSCompiler_StaticMethods_write_data_port$self$$.data.set([5, 128, 1, 49, 31, 0, 0, 0, 83, 79, 78, 89, 32, 32, 32, 32, 67, 68, 45, 82, 79, 77, 32, 67, 68, 85, 45, 49, 48, 48, 48, 32, 49, 46, 49, 97, ]);
            $JSCompiler_StaticMethods_write_data_port$self$$.$g$ = $JSCompiler_StaticMethods_write_data_port$self$$.$h$ = Math.min(36, $cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$);
            break;
          case 26:
            $JSCompiler_StaticMethods_data_allocate$$($JSCompiler_StaticMethods_write_data_port$self$$, $JSCompiler_StaticMethods_write_data_port$self$$.data[4]);
            $JSCompiler_StaticMethods_write_data_port$self$$.$g$ = $JSCompiler_StaticMethods_write_data_port$self$$.$h$;
            $JSCompiler_StaticMethods_write_data_port$self$$.$status_reg$ = 88;
            break;
          case 30:
            $JSCompiler_StaticMethods_data_allocate$$($JSCompiler_StaticMethods_write_data_port$self$$, 0);
            $JSCompiler_StaticMethods_write_data_port$self$$.$g$ = $JSCompiler_StaticMethods_write_data_port$self$$.$h$;
            $JSCompiler_StaticMethods_write_data_port$self$$.$status_reg$ = 80;
            break;
          case 37:
            $cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$ = $JSCompiler_StaticMethods_write_data_port$self$$.$j$ - 1;
            $JSCompiler_StaticMethods_data_set$$($JSCompiler_StaticMethods_write_data_port$self$$, new Uint8Array([$cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$ >> 24 & 255, $cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$ >> 16 & 255, $cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$ >> 
            8 & 255, $cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$ & 255, 0, 0, $JSCompiler_StaticMethods_write_data_port$self$$.$o$ >> 8 & 255, $JSCompiler_StaticMethods_write_data_port$self$$.$o$ & 255, ]));
            $JSCompiler_StaticMethods_write_data_port$self$$.$g$ = $JSCompiler_StaticMethods_write_data_port$self$$.$h$;
            $JSCompiler_StaticMethods_write_data_port$self$$.$status_reg$ = 88;
            break;
          case 40:
          case 168:
            $JSCompiler_StaticMethods_write_data_port$self$$.$features_reg$ & 1 ? $JSCompiler_StaticMethods_atapi_read_dma$$($JSCompiler_StaticMethods_write_data_port$self$$, $JSCompiler_StaticMethods_write_data_port$self$$.data) : $JSCompiler_StaticMethods_atapi_read$$($JSCompiler_StaticMethods_write_data_port$self$$, $JSCompiler_StaticMethods_write_data_port$self$$.data);
            break;
          case 66:
            $cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$ = $JSCompiler_StaticMethods_write_data_port$self$$.data[8];
            $JSCompiler_StaticMethods_data_allocate$$($JSCompiler_StaticMethods_write_data_port$self$$, Math.min(8, $cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$));
            $JSCompiler_StaticMethods_write_data_port$self$$.$g$ = $JSCompiler_StaticMethods_write_data_port$self$$.$h$;
            $JSCompiler_StaticMethods_write_data_port$self$$.$status_reg$ = 88;
            break;
          case 67:
            $cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$ = $JSCompiler_StaticMethods_write_data_port$self$$.data[8] | $JSCompiler_StaticMethods_write_data_port$self$$.data[7] << 8;
            $cmd_flags$jscomp$inline_985_format$jscomp$inline_988_length$jscomp$29$$ = $JSCompiler_StaticMethods_write_data_port$self$$.data[9] >> 6;
            $JSCompiler_StaticMethods_data_allocate$$($JSCompiler_StaticMethods_write_data_port$self$$, $cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$);
            $JSCompiler_StaticMethods_write_data_port$self$$.$g$ = $JSCompiler_StaticMethods_write_data_port$self$$.$h$;
            0 === $cmd_flags$jscomp$inline_985_format$jscomp$inline_988_length$jscomp$29$$ ? ($cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$ = $JSCompiler_StaticMethods_write_data_port$self$$.$j$, $JSCompiler_StaticMethods_write_data_port$self$$.data.set(new Uint8Array([0, 18, 1, 1, 0, 20, 1, 0, 0, 0, 0, 0, 0, 22, 170, 0, $cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$ >> 
            24, $cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$ >> 16 & 255, $cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$ >> 8 & 255, $cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$ & 255, ]))) : 
            1 === $cmd_flags$jscomp$inline_985_format$jscomp$inline_988_length$jscomp$29$$ && $JSCompiler_StaticMethods_write_data_port$self$$.data.set(new Uint8Array([0, 10, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, ]));
            $JSCompiler_StaticMethods_write_data_port$self$$.$status_reg$ = 88;
            break;
          case 70:
            $cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$ = Math.min($JSCompiler_StaticMethods_write_data_port$self$$.data[8] | $JSCompiler_StaticMethods_write_data_port$self$$.data[7] << 8, 32);
            $JSCompiler_StaticMethods_data_allocate$$($JSCompiler_StaticMethods_write_data_port$self$$, $cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$);
            $JSCompiler_StaticMethods_write_data_port$self$$.$g$ = $JSCompiler_StaticMethods_write_data_port$self$$.$h$;
            $JSCompiler_StaticMethods_write_data_port$self$$.data[0] = $cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$ - 4 >> 24 & 255;
            $JSCompiler_StaticMethods_write_data_port$self$$.data[1] = $cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$ - 4 >> 16 & 255;
            $JSCompiler_StaticMethods_write_data_port$self$$.data[2] = $cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$ - 4 >> 8 & 255;
            $JSCompiler_StaticMethods_write_data_port$self$$.data[3] = $cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$ - 4 & 255;
            $JSCompiler_StaticMethods_write_data_port$self$$.data[6] = 8;
            $JSCompiler_StaticMethods_write_data_port$self$$.data[10] = 3;
            $JSCompiler_StaticMethods_write_data_port$self$$.$status_reg$ = 88;
            break;
          case 81:
            $JSCompiler_StaticMethods_data_allocate$$($JSCompiler_StaticMethods_write_data_port$self$$, 0);
            $JSCompiler_StaticMethods_write_data_port$self$$.$g$ = $JSCompiler_StaticMethods_write_data_port$self$$.$h$;
            $JSCompiler_StaticMethods_write_data_port$self$$.$status_reg$ = 80;
            break;
          case 82:
            $JSCompiler_StaticMethods_atapi_check_condition_response$$($JSCompiler_StaticMethods_write_data_port$self$$, 5, 36);
            break;
          case 90:
            $cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$ = $JSCompiler_StaticMethods_write_data_port$self$$.data[8] | $JSCompiler_StaticMethods_write_data_port$self$$.data[7] << 8;
            42 === $JSCompiler_StaticMethods_write_data_port$self$$.data[2] && $JSCompiler_StaticMethods_data_allocate$$($JSCompiler_StaticMethods_write_data_port$self$$, Math.min(30, $cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$));
            $JSCompiler_StaticMethods_write_data_port$self$$.$g$ = $JSCompiler_StaticMethods_write_data_port$self$$.$h$;
            $JSCompiler_StaticMethods_write_data_port$self$$.$status_reg$ = 88;
            break;
          case 189:
            $JSCompiler_StaticMethods_data_allocate$$($JSCompiler_StaticMethods_write_data_port$self$$, $JSCompiler_StaticMethods_write_data_port$self$$.data[9] | $JSCompiler_StaticMethods_write_data_port$self$$.data[8] << 8);
            $JSCompiler_StaticMethods_write_data_port$self$$.$g$ = $JSCompiler_StaticMethods_write_data_port$self$$.$h$;
            $JSCompiler_StaticMethods_write_data_port$self$$.data[5] = 1;
            $JSCompiler_StaticMethods_write_data_port$self$$.$status_reg$ = 88;
            break;
          case 27:
            $cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$ = $JSCompiler_StaticMethods_write_data_port$self$$.data[4] & 3;
            $JSCompiler_StaticMethods_write_data_port$self$$.buffer && 2 === $cmd$jscomp$inline_984_count$jscomp$inline_987_data$jscomp$201_length$jscomp$inline_986_loej_start$jscomp$inline_989_sector_count$jscomp$inline_990$$ && ($JSCompiler_StaticMethods_write_data_port$self$$.$D$ = !0, $JSCompiler_StaticMethods_write_data_port$self$$.buffer = null);
            $JSCompiler_StaticMethods_write_data_port$self$$.$status_reg$ = 80;
            $JSCompiler_StaticMethods_data_allocate$$($JSCompiler_StaticMethods_write_data_port$self$$, 0);
            $JSCompiler_StaticMethods_write_data_port$self$$.$g$ = $JSCompiler_StaticMethods_write_data_port$self$$.$h$;
            break;
          case 69:
          case 74:
            $JSCompiler_StaticMethods_atapi_check_condition_response$$($JSCompiler_StaticMethods_write_data_port$self$$, 5, 36);
            break;
          case 190:
            $JSCompiler_StaticMethods_data_allocate$$($JSCompiler_StaticMethods_write_data_port$self$$, 0);
            $JSCompiler_StaticMethods_write_data_port$self$$.$g$ = $JSCompiler_StaticMethods_write_data_port$self$$.$h$;
            $JSCompiler_StaticMethods_write_data_port$self$$.$status_reg$ = 80;
            break;
          default:
            $JSCompiler_StaticMethods_atapi_check_condition_response$$($JSCompiler_StaticMethods_write_data_port$self$$, 5, 36);
        }
        $JSCompiler_StaticMethods_write_data_port$self$$.$sector_count_reg$ = $JSCompiler_StaticMethods_write_data_port$self$$.$sector_count_reg$ & -8 | 2;
        0 === ($JSCompiler_StaticMethods_write_data_port$self$$.$status_reg$ & 128) && $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_write_data_port$self$$);
        0 === ($JSCompiler_StaticMethods_write_data_port$self$$.$status_reg$ & 128) && 0 === $JSCompiler_StaticMethods_write_data_port$self$$.$h$ && ($JSCompiler_StaticMethods_write_data_port$self$$.$sector_count_reg$ |= 1, $JSCompiler_StaticMethods_write_data_port$self$$.$status_reg$ &= -9);
      }
    } else {
      $JSCompiler_StaticMethods_write_data_port$self$$.$i$ >= $JSCompiler_StaticMethods_write_data_port$self$$.$h$ ? $JSCompiler_StaticMethods_write_data_port$self$$.$do_write$() : ($JSCompiler_StaticMethods_write_data_port$self$$.$status_reg$ = 88, $JSCompiler_StaticMethods_write_data_port$self$$.$g$ += 512, $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_write_data_port$self$$));
    }
  }
}
function $JSCompiler_StaticMethods_ata_advance$$($JSCompiler_StaticMethods_ata_advance$self$$, $cmd$jscomp$4_new_sector$$, $c$jscomp$3_sectors$$) {
  $JSCompiler_StaticMethods_ata_advance$self$$.$sector_count_reg$ -= $c$jscomp$3_sectors$$;
  36 === $cmd$jscomp$4_new_sector$$ || 41 === $cmd$jscomp$4_new_sector$$ || 37 === $cmd$jscomp$4_new_sector$$ || 52 === $cmd$jscomp$4_new_sector$$ || 57 === $cmd$jscomp$4_new_sector$$ || 53 === $cmd$jscomp$4_new_sector$$ ? ($cmd$jscomp$4_new_sector$$ = $c$jscomp$3_sectors$$ + $JSCompiler_StaticMethods_get_lba48$$($JSCompiler_StaticMethods_ata_advance$self$$), $JSCompiler_StaticMethods_ata_advance$self$$.$lba_low_reg$ = $cmd$jscomp$4_new_sector$$ & 255 | $cmd$jscomp$4_new_sector$$ >> 16 & 65280, $JSCompiler_StaticMethods_ata_advance$self$$.$lba_mid_reg$ = 
  $cmd$jscomp$4_new_sector$$ >> 8 & 255, $JSCompiler_StaticMethods_ata_advance$self$$.$lba_high_reg$ = $cmd$jscomp$4_new_sector$$ >> 16 & 255) : $JSCompiler_StaticMethods_ata_advance$self$$.$is_lba$ ? ($cmd$jscomp$4_new_sector$$ = $c$jscomp$3_sectors$$ + $JSCompiler_StaticMethods_get_lba28$$($JSCompiler_StaticMethods_ata_advance$self$$), $JSCompiler_StaticMethods_ata_advance$self$$.$lba_low_reg$ = $cmd$jscomp$4_new_sector$$ & 255, $JSCompiler_StaticMethods_ata_advance$self$$.$lba_mid_reg$ = $cmd$jscomp$4_new_sector$$ >> 
  8 & 255, $JSCompiler_StaticMethods_ata_advance$self$$.$lba_high_reg$ = $cmd$jscomp$4_new_sector$$ >> 16 & 255, $JSCompiler_StaticMethods_ata_advance$self$$.head = $JSCompiler_StaticMethods_ata_advance$self$$.head & -16 | $cmd$jscomp$4_new_sector$$ & 15) : ($cmd$jscomp$4_new_sector$$ = $c$jscomp$3_sectors$$ + $JSCompiler_StaticMethods_get_chs$$($JSCompiler_StaticMethods_ata_advance$self$$), $c$jscomp$3_sectors$$ = $cmd$jscomp$4_new_sector$$ / ($JSCompiler_StaticMethods_ata_advance$self$$.$A$ * $JSCompiler_StaticMethods_ata_advance$self$$.$v$) | 
  0, $JSCompiler_StaticMethods_ata_advance$self$$.$lba_mid_reg$ = $c$jscomp$3_sectors$$ & 255, $JSCompiler_StaticMethods_ata_advance$self$$.$lba_high_reg$ = $c$jscomp$3_sectors$$ >> 8 & 255, $JSCompiler_StaticMethods_ata_advance$self$$.head = ($cmd$jscomp$4_new_sector$$ / $JSCompiler_StaticMethods_ata_advance$self$$.$v$ | 0) % $JSCompiler_StaticMethods_ata_advance$self$$.$A$ & 15, $JSCompiler_StaticMethods_ata_advance$self$$.$lba_low_reg$ = $cmd$jscomp$4_new_sector$$ % $JSCompiler_StaticMethods_ata_advance$self$$.$v$ + 
  1 & 255, $JSCompiler_StaticMethods_get_chs$$($JSCompiler_StaticMethods_ata_advance$self$$));
}
function $JSCompiler_StaticMethods_ata_read_sectors$$($JSCompiler_StaticMethods_ata_read_sectors$self$$, $cmd$jscomp$5$$) {
  var $is_lba48_lba$jscomp$2_start$jscomp$32$$ = 36 === $cmd$jscomp$5$$ || 41 === $cmd$jscomp$5$$, $count$jscomp$61$$ = $JSCompiler_StaticMethods_get_count$$($JSCompiler_StaticMethods_ata_read_sectors$self$$, $is_lba48_lba$jscomp$2_start$jscomp$32$$);
  $is_lba48_lba$jscomp$2_start$jscomp$32$$ = $JSCompiler_StaticMethods_get_lba$$($JSCompiler_StaticMethods_ata_read_sectors$self$$, $is_lba48_lba$jscomp$2_start$jscomp$32$$);
  var $is_single$$ = 32 === $cmd$jscomp$5$$ || 36 === $cmd$jscomp$5$$, $byte_count$jscomp$3$$ = $count$jscomp$61$$ * $JSCompiler_StaticMethods_ata_read_sectors$self$$.$o$;
  $is_lba48_lba$jscomp$2_start$jscomp$32$$ *= $JSCompiler_StaticMethods_ata_read_sectors$self$$.$o$;
  $is_lba48_lba$jscomp$2_start$jscomp$32$$ + $byte_count$jscomp$3$$ > $JSCompiler_StaticMethods_ata_read_sectors$self$$.buffer.byteLength ? ($JSCompiler_StaticMethods_ata_read_sectors$self$$.$status_reg$ = 255, $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_ata_read_sectors$self$$)) : ($JSCompiler_StaticMethods_ata_read_sectors$self$$.$status_reg$ = 192, $JSCompiler_StaticMethods_report_read_start$$($JSCompiler_StaticMethods_ata_read_sectors$self$$), $JSCompiler_StaticMethods_ata_read_sectors$self$$.$read_buffer$($is_lba48_lba$jscomp$2_start$jscomp$32$$, 
  $byte_count$jscomp$3$$, $data$jscomp$205$$ => {
    $JSCompiler_StaticMethods_data_set$$($JSCompiler_StaticMethods_ata_read_sectors$self$$, $data$jscomp$205$$);
    $JSCompiler_StaticMethods_ata_read_sectors$self$$.$status_reg$ = 88;
    $JSCompiler_StaticMethods_ata_read_sectors$self$$.$g$ = $is_single$$ ? 512 : Math.min($byte_count$jscomp$3$$, 512 * $JSCompiler_StaticMethods_ata_read_sectors$self$$.$F$);
    $JSCompiler_StaticMethods_ata_advance$$($JSCompiler_StaticMethods_ata_read_sectors$self$$, $cmd$jscomp$5$$, $is_single$$ ? 1 : Math.min($count$jscomp$61$$, $JSCompiler_StaticMethods_ata_read_sectors$self$$.$v$));
    $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_ata_read_sectors$self$$);
    $JSCompiler_StaticMethods_report_read_end$$($JSCompiler_StaticMethods_ata_read_sectors$self$$, $byte_count$jscomp$3$$);
  }));
}
function $JSCompiler_StaticMethods_do_ata_read_sectors_dma$$($JSCompiler_StaticMethods_do_ata_read_sectors_dma$self$$) {
  var $is_lba48$jscomp$2_lba$jscomp$4_start$jscomp$34$$ = 37 === $JSCompiler_StaticMethods_do_ata_read_sectors_dma$self$$.$u$, $count$jscomp$63$$ = $JSCompiler_StaticMethods_get_count$$($JSCompiler_StaticMethods_do_ata_read_sectors_dma$self$$, $is_lba48$jscomp$2_lba$jscomp$4_start$jscomp$34$$);
  $is_lba48$jscomp$2_lba$jscomp$4_start$jscomp$34$$ = $JSCompiler_StaticMethods_get_lba$$($JSCompiler_StaticMethods_do_ata_read_sectors_dma$self$$, $is_lba48$jscomp$2_lba$jscomp$4_start$jscomp$34$$);
  var $byte_count$jscomp$5$$ = $count$jscomp$63$$ * $JSCompiler_StaticMethods_do_ata_read_sectors_dma$self$$.$o$;
  $is_lba48$jscomp$2_lba$jscomp$4_start$jscomp$34$$ *= $JSCompiler_StaticMethods_do_ata_read_sectors_dma$self$$.$o$;
  $JSCompiler_StaticMethods_report_read_start$$($JSCompiler_StaticMethods_do_ata_read_sectors_dma$self$$);
  $JSCompiler_StaticMethods_do_ata_read_sectors_dma$self$$.$read_buffer$($is_lba48$jscomp$2_lba$jscomp$4_start$jscomp$34$$, $byte_count$jscomp$5$$, $data$jscomp$206$$ => {
    var $prdt_start$jscomp$1$$ = $JSCompiler_StaticMethods_do_ata_read_sectors_dma$self$$.$l$.$i$, $offset$jscomp$71$$ = 0;
    do {
      var $prd_addr$$ = $JSCompiler_StaticMethods_do_ata_read_sectors_dma$self$$.$cpu$.$h$($prdt_start$jscomp$1$$), $prd_count$$ = $JSCompiler_StaticMethods_do_ata_read_sectors_dma$self$$.$cpu$.$read16$($prdt_start$jscomp$1$$ + 4), $end$jscomp$21$$ = $JSCompiler_StaticMethods_do_ata_read_sectors_dma$self$$.$cpu$.$read8$($prdt_start$jscomp$1$$ + 7) & 128;
      $prd_count$$ || ($prd_count$$ = 65536);
      $JSCompiler_StaticMethods_write_blob$$($JSCompiler_StaticMethods_do_ata_read_sectors_dma$self$$.$cpu$, $data$jscomp$206$$.subarray($offset$jscomp$71$$, $offset$jscomp$71$$ + $prd_count$$), $prd_addr$$);
      $offset$jscomp$71$$ += $prd_count$$;
      $prdt_start$jscomp$1$$ += 8;
    } while (!$end$jscomp$21$$);
    $JSCompiler_StaticMethods_ata_advance$$($JSCompiler_StaticMethods_do_ata_read_sectors_dma$self$$, $JSCompiler_StaticMethods_do_ata_read_sectors_dma$self$$.$u$, $count$jscomp$63$$);
    $JSCompiler_StaticMethods_do_ata_read_sectors_dma$self$$.$status_reg$ = 80;
    $JSCompiler_StaticMethods_do_ata_read_sectors_dma$self$$.$l$.$g$ &= -2;
    $JSCompiler_StaticMethods_do_ata_read_sectors_dma$self$$.$u$ = -1;
    $JSCompiler_StaticMethods_report_read_end$$($JSCompiler_StaticMethods_do_ata_read_sectors_dma$self$$, $byte_count$jscomp$5$$);
    $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_do_ata_read_sectors_dma$self$$);
  });
}
function $JSCompiler_StaticMethods_do_ata_write_sectors_dma$$($JSCompiler_StaticMethods_do_ata_write_sectors_dma$self$$) {
  var $byte_count$jscomp$8_is_lba48$jscomp$5$$ = 53 === $JSCompiler_StaticMethods_do_ata_write_sectors_dma$self$$.$u$, $count$jscomp$66$$ = $JSCompiler_StaticMethods_get_count$$($JSCompiler_StaticMethods_do_ata_write_sectors_dma$self$$, $byte_count$jscomp$8_is_lba48$jscomp$5$$), $lba$jscomp$7_start$jscomp$37$$ = $JSCompiler_StaticMethods_get_lba$$($JSCompiler_StaticMethods_do_ata_write_sectors_dma$self$$, $byte_count$jscomp$8_is_lba48$jscomp$5$$);
  $byte_count$jscomp$8_is_lba48$jscomp$5$$ = $count$jscomp$66$$ * $JSCompiler_StaticMethods_do_ata_write_sectors_dma$self$$.$o$;
  $lba$jscomp$7_start$jscomp$37$$ *= $JSCompiler_StaticMethods_do_ata_write_sectors_dma$self$$.$o$;
  var $prdt_start$jscomp$2$$ = $JSCompiler_StaticMethods_do_ata_write_sectors_dma$self$$.$l$.$i$, $offset$jscomp$72$$ = 0;
  const $buffer$jscomp$51$$ = new Uint8Array($byte_count$jscomp$8_is_lba48$jscomp$5$$);
  do {
    var $prd_addr$jscomp$1$$ = $JSCompiler_StaticMethods_do_ata_write_sectors_dma$self$$.$cpu$.$h$($prdt_start$jscomp$2$$), $prd_count$jscomp$1$$ = $JSCompiler_StaticMethods_do_ata_write_sectors_dma$self$$.$cpu$.$read16$($prdt_start$jscomp$2$$ + 4), $end$jscomp$22$$ = $JSCompiler_StaticMethods_do_ata_write_sectors_dma$self$$.$cpu$.$read8$($prdt_start$jscomp$2$$ + 7) & 128;
    $prd_count$jscomp$1$$ || ($prd_count$jscomp$1$$ = 65536);
    $buffer$jscomp$51$$.set($JSCompiler_StaticMethods_do_ata_write_sectors_dma$self$$.$cpu$.$mem8$.subarray($prd_addr$jscomp$1$$, $prd_addr$jscomp$1$$ + $prd_count$jscomp$1$$), $offset$jscomp$72$$);
    $offset$jscomp$72$$ += $prd_count$jscomp$1$$;
    $prdt_start$jscomp$2$$ += 8;
  } while (!$end$jscomp$22$$);
  $JSCompiler_StaticMethods_do_ata_write_sectors_dma$self$$.buffer.set($lba$jscomp$7_start$jscomp$37$$, $buffer$jscomp$51$$, () => {
    $JSCompiler_StaticMethods_ata_advance$$($JSCompiler_StaticMethods_do_ata_write_sectors_dma$self$$, $JSCompiler_StaticMethods_do_ata_write_sectors_dma$self$$.$u$, $count$jscomp$66$$);
    $JSCompiler_StaticMethods_do_ata_write_sectors_dma$self$$.$status_reg$ = 80;
    $JSCompiler_StaticMethods_JSC$2013_push_irq$$($JSCompiler_StaticMethods_do_ata_write_sectors_dma$self$$);
    $JSCompiler_StaticMethods_do_ata_write_sectors_dma$self$$.$l$.$g$ &= -2;
    $JSCompiler_StaticMethods_do_ata_write_sectors_dma$self$$.$u$ = -1;
  });
  $JSCompiler_StaticMethods_report_write$$($JSCompiler_StaticMethods_do_ata_write_sectors_dma$self$$, $byte_count$jscomp$8_is_lba48$jscomp$5$$);
}
function $JSCompiler_StaticMethods_get_chs$$($JSCompiler_StaticMethods_get_chs$self$$) {
  return (($JSCompiler_StaticMethods_get_chs$self$$.$lba_mid_reg$ & 255 | $JSCompiler_StaticMethods_get_chs$self$$.$lba_high_reg$ << 8 & 65280) * $JSCompiler_StaticMethods_get_chs$self$$.$A$ + $JSCompiler_StaticMethods_get_chs$self$$.head) * $JSCompiler_StaticMethods_get_chs$self$$.$v$ + ($JSCompiler_StaticMethods_get_chs$self$$.$lba_low_reg$ & 255) - 1;
}
function $JSCompiler_StaticMethods_get_lba28$$($JSCompiler_StaticMethods_get_lba28$self$$) {
  return $JSCompiler_StaticMethods_get_lba28$self$$.$lba_low_reg$ & 255 | $JSCompiler_StaticMethods_get_lba28$self$$.$lba_mid_reg$ << 8 & 65280 | $JSCompiler_StaticMethods_get_lba28$self$$.$lba_high_reg$ << 16 & 16711680 | ($JSCompiler_StaticMethods_get_lba28$self$$.head & 15) << 24;
}
function $JSCompiler_StaticMethods_get_lba48$$($JSCompiler_StaticMethods_get_lba48$self$$) {
  return ($JSCompiler_StaticMethods_get_lba48$self$$.$lba_low_reg$ & 255 | $JSCompiler_StaticMethods_get_lba48$self$$.$lba_mid_reg$ << 8 & 65280 | $JSCompiler_StaticMethods_get_lba48$self$$.$lba_high_reg$ << 16 & 16711680 | $JSCompiler_StaticMethods_get_lba48$self$$.$lba_low_reg$ >> 8 << 24 & 4278190080) >>> 0;
}
function $JSCompiler_StaticMethods_get_lba$$($JSCompiler_StaticMethods_get_lba$self$$, $is_lba48$jscomp$6$$) {
  return $is_lba48$jscomp$6$$ ? $JSCompiler_StaticMethods_get_lba48$$($JSCompiler_StaticMethods_get_lba$self$$) : $JSCompiler_StaticMethods_get_lba$self$$.$is_lba$ ? $JSCompiler_StaticMethods_get_lba28$$($JSCompiler_StaticMethods_get_lba$self$$) : $JSCompiler_StaticMethods_get_chs$$($JSCompiler_StaticMethods_get_lba$self$$);
}
function $JSCompiler_StaticMethods_get_count$$($JSCompiler_StaticMethods_get_count$self_count$jscomp$67$$, $is_lba48$jscomp$7$$) {
  $is_lba48$jscomp$7$$ ? ($JSCompiler_StaticMethods_get_count$self_count$jscomp$67$$ = $JSCompiler_StaticMethods_get_count$self_count$jscomp$67$$.$sector_count_reg$, 0 === $JSCompiler_StaticMethods_get_count$self_count$jscomp$67$$ && ($JSCompiler_StaticMethods_get_count$self_count$jscomp$67$$ = 65536)) : ($JSCompiler_StaticMethods_get_count$self_count$jscomp$67$$ = $JSCompiler_StaticMethods_get_count$self_count$jscomp$67$$.$sector_count_reg$ & 255, 0 === $JSCompiler_StaticMethods_get_count$self_count$jscomp$67$$ && 
  ($JSCompiler_StaticMethods_get_count$self_count$jscomp$67$$ = 256));
  return $JSCompiler_StaticMethods_get_count$self_count$jscomp$67$$;
}
function $JSCompiler_StaticMethods_create_identify_packet$$($JSCompiler_StaticMethods_create_identify_packet$self$$) {
  const $cylinder_count$$ = Math.min(16383, $JSCompiler_StaticMethods_create_identify_packet$self$$.$B$), $strcpy_be16$$ = ($out_buffer$$, $ofs16_ofs8$$, $end8_len16$$, $str$jscomp$13$$) => {
    $ofs16_ofs8$$ <<= 1;
    var $i_str_len8$$ = $end8_len16$$ << 1;
    $end8_len16$$ = $ofs16_ofs8$$ + $i_str_len8$$;
    $out_buffer$$.fill(32, $ofs16_ofs8$$, $i_str_len8$$);
    for ($i_str_len8$$ = 0; $i_str_len8$$ < $str$jscomp$13$$.length && $ofs16_ofs8$$ < $end8_len16$$; $i_str_len8$$++) {
      $i_str_len8$$ & 1 ? ($out_buffer$$[$ofs16_ofs8$$] = $str$jscomp$13$$.charCodeAt($i_str_len8$$), $ofs16_ofs8$$ += 2) : $out_buffer$$[$ofs16_ofs8$$ + 1] = $str$jscomp$13$$.charCodeAt($i_str_len8$$);
    }
  }, $general_cfg$$ = $JSCompiler_StaticMethods_create_identify_packet$self$$.$s$ ? 34112 : 64, $multiword_dma_mode$$ = 160 === $JSCompiler_StaticMethods_create_identify_packet$self$$.$u$ ? 0 : 1031, $feat_82$$ = $JSCompiler_StaticMethods_create_identify_packet$self$$.$s$ ? 16928 : 16384, $feat_83$$ = $JSCompiler_StaticMethods_create_identify_packet$self$$.$s$ ? 20480 : 29696;
  $JSCompiler_StaticMethods_create_identify_packet$self$$.data.fill(0, 0, 512);
  $JSCompiler_StaticMethods_data_set$$($JSCompiler_StaticMethods_create_identify_packet$self$$, [$general_cfg$$ & 255, $general_cfg$$ >> 8 & 255, $cylinder_count$$ & 255, $cylinder_count$$ >> 8 & 255, 0, 0, $JSCompiler_StaticMethods_create_identify_packet$self$$.$A$ & 255, $JSCompiler_StaticMethods_create_identify_packet$self$$.$A$ >> 8 & 255, $JSCompiler_StaticMethods_create_identify_packet$self$$.$v$ / 512 & 255, $JSCompiler_StaticMethods_create_identify_packet$self$$.$v$ / 512 >> 8 & 255, 0, 2, 
  $JSCompiler_StaticMethods_create_identify_packet$self$$.$v$ & 255, $JSCompiler_StaticMethods_create_identify_packet$self$$.$v$ >> 8 & 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 2, 4, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 128, 0, 1, 0, 0, 2, 0, 0, 0, 2, 0, 2, 7, 0, $cylinder_count$$ & 255, $cylinder_count$$ >> 8 & 255, $JSCompiler_StaticMethods_create_identify_packet$self$$.$A$ & 
  255, $JSCompiler_StaticMethods_create_identify_packet$self$$.$A$ >> 8 & 255, $JSCompiler_StaticMethods_create_identify_packet$self$$.$v$, 0, $JSCompiler_StaticMethods_create_identify_packet$self$$.$j$ & 255, $JSCompiler_StaticMethods_create_identify_packet$self$$.$j$ >> 8 & 255, $JSCompiler_StaticMethods_create_identify_packet$self$$.$j$ >> 16 & 255, $JSCompiler_StaticMethods_create_identify_packet$self$$.$j$ >> 24 & 255, 0, 0, $JSCompiler_StaticMethods_create_identify_packet$self$$.$j$ & 255, 
  $JSCompiler_StaticMethods_create_identify_packet$self$$.$j$ >> 8 & 255, $JSCompiler_StaticMethods_create_identify_packet$self$$.$j$ >> 16 & 255, $JSCompiler_StaticMethods_create_identify_packet$self$$.$j$ >> 24 & 255, 0, 0, $multiword_dma_mode$$ & 255, $multiword_dma_mode$$ >> 8 & 255, 0, 0, 30, 0, 30, 0, 30, 0, 30, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, $feat_82$$ & 255, $feat_82$$ >> 8 & 255, $feat_83$$ & 255, $feat_83$$ >> 8 & 255, 0, 64, $feat_82$$ & 
  255, $feat_82$$ >> 8 & 255, $feat_83$$ & 255, $feat_83$$ >> 8 & 255, 0, 64, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 96, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, $JSCompiler_StaticMethods_create_identify_packet$self$$.$j$ & 255, $JSCompiler_StaticMethods_create_identify_packet$self$$.$j$ >> 8 & 255, $JSCompiler_StaticMethods_create_identify_packet$self$$.$j$ >> 16 & 255, $JSCompiler_StaticMethods_create_identify_packet$self$$.$j$ >> 24 & 255, ]);
  $strcpy_be16$$($JSCompiler_StaticMethods_create_identify_packet$self$$.data, 10, 10, `8086-86${$JSCompiler_StaticMethods_create_identify_packet$self$$.$C$}${$JSCompiler_StaticMethods_create_identify_packet$self$$.$P$}`);
  $strcpy_be16$$($JSCompiler_StaticMethods_create_identify_packet$self$$.data, 23, 4, "1.00");
  $strcpy_be16$$($JSCompiler_StaticMethods_create_identify_packet$self$$.data, 27, 20, $JSCompiler_StaticMethods_create_identify_packet$self$$.$s$ ? "v86 ATAPI CD-ROM" : "v86 ATA HD");
  $JSCompiler_StaticMethods_create_identify_packet$self$$.$h$ = 512;
  $JSCompiler_StaticMethods_create_identify_packet$self$$.$g$ = 512;
}
function $JSCompiler_StaticMethods_data_allocate$$($JSCompiler_StaticMethods_data_allocate$self$$, $len$jscomp$26$$) {
  $JSCompiler_StaticMethods_data_allocate_noclear$$($JSCompiler_StaticMethods_data_allocate$self$$, $len$jscomp$26$$);
  $JSCompiler_StaticMethods_data_allocate$self$$.$G$.fill(0, 0, $len$jscomp$26$$ + 3 >> 2);
}
function $JSCompiler_StaticMethods_data_allocate_noclear$$($JSCompiler_StaticMethods_data_allocate_noclear$self$$, $len$jscomp$27$$) {
  $JSCompiler_StaticMethods_data_allocate_noclear$self$$.data.length < $len$jscomp$27$$ && ($JSCompiler_StaticMethods_data_allocate_noclear$self$$.data = new Uint8Array($len$jscomp$27$$ + 3 & -4), $JSCompiler_StaticMethods_data_allocate_noclear$self$$.$K$ = new Uint16Array($JSCompiler_StaticMethods_data_allocate_noclear$self$$.data.buffer), $JSCompiler_StaticMethods_data_allocate_noclear$self$$.$G$ = new Int32Array($JSCompiler_StaticMethods_data_allocate_noclear$self$$.data.buffer));
  $JSCompiler_StaticMethods_data_allocate_noclear$self$$.$h$ = $len$jscomp$27$$;
  $JSCompiler_StaticMethods_data_allocate_noclear$self$$.$i$ = 0;
}
function $JSCompiler_StaticMethods_data_set$$($JSCompiler_StaticMethods_data_set$self$$, $data$jscomp$207$$) {
  $JSCompiler_StaticMethods_data_allocate_noclear$$($JSCompiler_StaticMethods_data_set$self$$, $data$jscomp$207$$.length);
  $JSCompiler_StaticMethods_data_set$self$$.data.set($data$jscomp$207$$);
}
function $JSCompiler_StaticMethods_report_read_start$$($JSCompiler_StaticMethods_report_read_start$self$$) {
  $JSCompiler_StaticMethods_report_read_start$self$$.$bus$.send("ide-read-start");
}
function $JSCompiler_StaticMethods_report_read_end$$($JSCompiler_StaticMethods_report_read_end$self$$, $byte_count$jscomp$9$$) {
  $JSCompiler_StaticMethods_report_read_end$self$$.$bus$.send("ide-read-end", [$JSCompiler_StaticMethods_report_read_end$self$$.$C$, $byte_count$jscomp$9$$, $byte_count$jscomp$9$$ / $JSCompiler_StaticMethods_report_read_end$self$$.$o$ | 0]);
}
function $JSCompiler_StaticMethods_report_write$$($JSCompiler_StaticMethods_report_write$self$$, $byte_count$jscomp$10$$) {
  $JSCompiler_StaticMethods_report_write$self$$.$bus$.send("ide-write-end", [$JSCompiler_StaticMethods_report_write$self$$.$C$, $byte_count$jscomp$10$$, $byte_count$jscomp$10$$ / $JSCompiler_StaticMethods_report_write$self$$.$o$ | 0]);
}
$JSCompiler_prototypeAlias$$.$read_buffer$ = function($start$jscomp$38$$, $length$jscomp$30$$, $callback$jscomp$46$$) {
  const $id$jscomp$24$$ = this.$R$++;
  this.$H$.add($id$jscomp$24$$);
  this.buffer.get($start$jscomp$38$$, $length$jscomp$30$$, $data$jscomp$208$$ => {
    this.$O$.delete($id$jscomp$24$$) ? this.$H$.has($id$jscomp$24$$) : (this.$H$.delete($id$jscomp$24$$), $callback$jscomp$46$$($data$jscomp$208$$));
  });
};
$JSCompiler_prototypeAlias$$.$get_state$ = function() {
  var $state$jscomp$48$$ = [];
  $state$jscomp$48$$[0] = this.$sector_count_reg$;
  $state$jscomp$48$$[1] = this.$B$;
  $state$jscomp$48$$[2] = this.$lba_high_reg$;
  $state$jscomp$48$$[3] = this.$lba_mid_reg$;
  $state$jscomp$48$$[4] = this.$i$;
  $state$jscomp$48$$[5] = 0;
  $state$jscomp$48$$[6] = 0;
  $state$jscomp$48$$[7] = 0;
  $state$jscomp$48$$[8] = 0;
  $state$jscomp$48$$[9] = this.$device_reg$;
  $state$jscomp$48$$[10] = this.$error_reg$;
  $state$jscomp$48$$[11] = this.head;
  $state$jscomp$48$$[12] = this.$A$;
  $state$jscomp$48$$[13] = this.$s$;
  $state$jscomp$48$$[14] = this.$is_lba$;
  $state$jscomp$48$$[15] = this.$features_reg$;
  $state$jscomp$48$$[16] = this.data;
  $state$jscomp$48$$[17] = this.$h$;
  $state$jscomp$48$$[18] = this.$lba_low_reg$;
  $state$jscomp$48$$[19] = this.$j$;
  $state$jscomp$48$$[20] = this.$o$;
  $state$jscomp$48$$[21] = this.$F$;
  $state$jscomp$48$$[22] = this.$v$;
  $state$jscomp$48$$[23] = this.$status_reg$;
  $state$jscomp$48$$[24] = this.$M$;
  $state$jscomp$48$$[25] = this.$u$;
  $state$jscomp$48$$[26] = this.$g$;
  $state$jscomp$48$$[27] = this.$N$;
  $state$jscomp$48$$[28] = this.buffer;
  return $state$jscomp$48$$;
};
$JSCompiler_prototypeAlias$$.$set_state$ = function($state$jscomp$49$$) {
  this.$sector_count_reg$ = $state$jscomp$49$$[0];
  this.$B$ = $state$jscomp$49$$[1];
  this.$lba_high_reg$ = $state$jscomp$49$$[2];
  this.$lba_mid_reg$ = $state$jscomp$49$$[3];
  this.$i$ = $state$jscomp$49$$[4];
  this.$device_reg$ = $state$jscomp$49$$[9];
  this.$error_reg$ = $state$jscomp$49$$[10];
  this.head = $state$jscomp$49$$[11];
  this.$A$ = $state$jscomp$49$$[12];
  this.$s$ = $state$jscomp$49$$[13];
  this.$is_lba$ = $state$jscomp$49$$[14];
  this.$features_reg$ = $state$jscomp$49$$[15];
  this.data = $state$jscomp$49$$[16];
  this.$h$ = $state$jscomp$49$$[17];
  this.$lba_low_reg$ = $state$jscomp$49$$[18];
  this.$j$ = $state$jscomp$49$$[19];
  this.$o$ = $state$jscomp$49$$[20];
  this.$F$ = $state$jscomp$49$$[21];
  this.$v$ = $state$jscomp$49$$[22];
  this.$status_reg$ = $state$jscomp$49$$[23];
  this.$M$ = $state$jscomp$49$$[24];
  this.$u$ = $state$jscomp$49$$[25];
  this.$g$ = $state$jscomp$49$$[26];
  this.$N$ = $state$jscomp$49$$[27];
  this.$K$ = new Uint16Array(this.data.buffer);
  this.$G$ = new Int32Array(this.data.buffer);
  this.buffer && this.buffer.$set_state$($state$jscomp$49$$[28]);
  this.$L$ = this.$s$ || this.buffer;
  this.$D$ = !1;
};
function $VirtioNet$$module$src$virtio_net$$($cpu$jscomp$23$$, $bus$jscomp$23_queues$jscomp$1$$, $i$jscomp$86_preserve_mac_from_state_image$jscomp$1$$) {
  this.$bus$ = $bus$jscomp$23_queues$jscomp$1$$;
  this.id = $cpu$jscomp$23$$.$devices$.$net$ ? 1 : 0;
  this.status = 1;
  this.$preserve_mac_from_state_image$ = $i$jscomp$86_preserve_mac_from_state_image$jscomp$1$$;
  this.$mac$ = new Uint8Array([0, 34, 21, 255 * Math.random() | 0, 255 * Math.random() | 0, 255 * Math.random() | 0, ]);
  this.$bus$.send("net" + this.id + "-mac", $format_mac$$module$src$ne2k$$(this.$mac$));
  $bus$jscomp$23_queues$jscomp$1$$ = [];
  for ($i$jscomp$86_preserve_mac_from_state_image$jscomp$1$$ = 0; 1 > $i$jscomp$86_preserve_mac_from_state_image$jscomp$1$$; ++$i$jscomp$86_preserve_mac_from_state_image$jscomp$1$$) {
    $bus$jscomp$23_queues$jscomp$1$$.push({$size_supported$:1024, $notify_offset$:0}), $bus$jscomp$23_queues$jscomp$1$$.push({$size_supported$:1024, $notify_offset$:1});
  }
  $bus$jscomp$23_queues$jscomp$1$$.push({$size_supported$:16, $notify_offset$:2, });
  this.$virtio$ = new $VirtIO$$module$src$virtio$$($cpu$jscomp$23$$, {name:"virtio-net", $pci_id$:80, $device_id$:4161, $subsystem_device_id$:1, $common$:{$initial_port$:51200, $queues$:$bus$jscomp$23_queues$jscomp$1$$, features:[5, 16, 22, 3, 17, 23, 32, ], $on_driver_ok$:() => {
  }, }, notification:{$initial_port$:51456, $single_handler$:!1, $handlers$:[() => {
  }, $queue_id$jscomp$8$$ => {
    const $queue$jscomp$5$$ = this.$virtio$.$queues$[$queue_id$jscomp$8$$];
    for (; $JSCompiler_StaticMethods_has_request$$($queue$jscomp$5$$);) {
      const $bufchain$jscomp$8$$ = $JSCompiler_StaticMethods_pop_request$$($queue$jscomp$5$$), $buffer$jscomp$52$$ = new Uint8Array($bufchain$jscomp$8$$.$length_readable$);
      $JSCompiler_StaticMethods_get_next_blob$$($bufchain$jscomp$8$$, $buffer$jscomp$52$$);
      this.$bus$.send("net" + this.id + "-send", $buffer$jscomp$52$$.subarray(12));
      this.$bus$.send("eth-transmit-end", [$buffer$jscomp$52$$.length - 12]);
      $JSCompiler_StaticMethods_push_reply$$(this.$virtio$.$queues$[$queue_id$jscomp$8$$], $bufchain$jscomp$8$$);
    }
    $JSCompiler_StaticMethods_flush_replies$$(this.$virtio$.$queues$[$queue_id$jscomp$8$$]);
  }, $queue_id$jscomp$9$$ => {
    if (2 === $queue_id$jscomp$9$$) {
      for (var $queue$jscomp$6$$ = this.$virtio$.$queues$[$queue_id$jscomp$9$$]; $JSCompiler_StaticMethods_has_request$$($queue$jscomp$6$$);) {
        const $bufchain$jscomp$9$$ = $JSCompiler_StaticMethods_pop_request$$($queue$jscomp$6$$), $buffer$jscomp$53$$ = new Uint8Array($bufchain$jscomp$9$$.$length_readable$);
        $JSCompiler_StaticMethods_get_next_blob$$($bufchain$jscomp$9$$, $buffer$jscomp$53$$);
        const $parts$jscomp$6$$ = $Unmarshall$$module$lib$marshall$$(["b", "b"], $buffer$jscomp$53$$, {offset:0});
        switch($parts$jscomp$6$$[0] << 8 | $parts$jscomp$6$$[1]) {
          case 1024:
            $Unmarshall$$module$lib$marshall$$(["h"], $buffer$jscomp$53$$, {offset:2});
            this.$Send$($queue_id$jscomp$9$$, $bufchain$jscomp$9$$, new Uint8Array([0]));
            break;
          case 257:
            this.$mac$ = $buffer$jscomp$53$$.subarray(2, 8);
            this.$Send$($queue_id$jscomp$9$$, $bufchain$jscomp$9$$, new Uint8Array([0]));
            this.$bus$.send("net" + this.id + "-mac", $format_mac$$module$src$ne2k$$(this.$mac$));
            break;
          default:
            this.$Send$($queue_id$jscomp$9$$, $bufchain$jscomp$9$$, new Uint8Array([1]));
            return;
        }
      }
    }
  }, ], }, $isr_status$:{$initial_port$:50944, }, $device_specific$:{$initial_port$:50688, $struct$:[0, 1, 2, 3, 4, 5].map(($v$jscomp$1$$, $k$$) => ({bytes:1, name:"mac_" + $k$$, read:() => this.$mac$[$k$$], write:() => {
  }, })).concat([{bytes:2, name:"status", read:() => this.status, write:() => {
  }, }, {bytes:2, name:"max_pairs", read:() => 1, write:() => {
  }, }, {bytes:2, name:"mtu", read:() => 1500, write:() => {
  }, }])}, });
  this.$bus$.register("net" + this.id + "-receive", $bufchain$jscomp$10_data$jscomp$214_queue$jscomp$7$$ => {
    this.$bus$.send("eth-receive-end", [$bufchain$jscomp$10_data$jscomp$214_queue$jscomp$7$$.length]);
    const $with_header$$ = new Uint8Array(12 + $bufchain$jscomp$10_data$jscomp$214_queue$jscomp$7$$.byteLength);
    (new DataView($with_header$$.buffer, $with_header$$.byteOffset, $with_header$$.byteLength)).setInt16(10, 1);
    $with_header$$.set($bufchain$jscomp$10_data$jscomp$214_queue$jscomp$7$$, 12);
    $bufchain$jscomp$10_data$jscomp$214_queue$jscomp$7$$ = this.$virtio$.$queues$[0];
    $JSCompiler_StaticMethods_has_request$$($bufchain$jscomp$10_data$jscomp$214_queue$jscomp$7$$) ? ($bufchain$jscomp$10_data$jscomp$214_queue$jscomp$7$$ = $JSCompiler_StaticMethods_pop_request$$($bufchain$jscomp$10_data$jscomp$214_queue$jscomp$7$$), $JSCompiler_StaticMethods_set_next_blob$$($bufchain$jscomp$10_data$jscomp$214_queue$jscomp$7$$, $with_header$$), $JSCompiler_StaticMethods_push_reply$$(this.$virtio$.$queues$[0], $bufchain$jscomp$10_data$jscomp$214_queue$jscomp$7$$), $JSCompiler_StaticMethods_flush_replies$$(this.$virtio$.$queues$[0])) : 
    console.log("No buffer to write into!");
  }, this);
}
$VirtioNet$$module$src$virtio_net$$.prototype.$get_state$ = function() {
  const $state$jscomp$50$$ = [];
  $state$jscomp$50$$[0] = this.$virtio$;
  $state$jscomp$50$$[1] = this.id;
  $state$jscomp$50$$[2] = this.$mac$;
  return $state$jscomp$50$$;
};
$VirtioNet$$module$src$virtio_net$$.prototype.$set_state$ = function($state$jscomp$51$$) {
  this.$virtio$.$set_state$($state$jscomp$51$$[0]);
  this.id = $state$jscomp$51$$[1];
  this.$preserve_mac_from_state_image$ && (this.$mac$ = $state$jscomp$51$$[2], this.$bus$.send("net" + this.id + "-mac", $format_mac$$module$src$ne2k$$(this.$mac$)));
};
$VirtioNet$$module$src$virtio_net$$.prototype.reset = function() {
  this.$virtio$.reset();
};
$VirtioNet$$module$src$virtio_net$$.prototype.$Send$ = function($queue_id$jscomp$10$$, $bufchain$jscomp$11$$, $blob$jscomp$15$$) {
  $JSCompiler_StaticMethods_set_next_blob$$($bufchain$jscomp$11$$, $blob$jscomp$15$$);
  $JSCompiler_StaticMethods_push_reply$$(this.$virtio$.$queues$[$queue_id$jscomp$10$$], $bufchain$jscomp$11$$);
  $JSCompiler_StaticMethods_flush_replies$$(this.$virtio$.$queues$[$queue_id$jscomp$10$$]);
};
const $VGA_HOST_MEMORY_SPACE_START$$module$src$vga$$ = Uint32Array.from([655360, 655360, 720896, 753664, ]), $VGA_HOST_MEMORY_SPACE_SIZE$$module$src$vga$$ = Uint32Array.from([131072, 65536, 32768, 32768, ]);
function $VGAScreen$$module$src$vga$$($cpu$jscomp$24$$, $bus$jscomp$24_io$jscomp$4$$, $screen$jscomp$3_vga_offset$$, $vga_memory_size$$) {
  this.$cpu$ = $cpu$jscomp$24$$;
  this.$bus$ = $bus$jscomp$24_io$jscomp$4$$;
  this.screen = $screen$jscomp$3_vga_offset$$;
  this.$vga_memory_size$ = $vga_memory_size$$;
  this.$F$ = 0;
  this.$ja$ = 14;
  this.$Aa$ = 15;
  this.$S$ = 80;
  this.$qa$ = 25;
  this.$La$ = this.$l$ = this.$va$ = this.$V$ = 0;
  this.$pa$ = [];
  this.$Ka$ = this.$h$ = 0;
  this.$ia$ = new Uint8Array(25);
  this.$B$ = this.$J$ = this.$Ja$ = this.$W$ = this.$u$ = this.$A$ = this.$ma$ = this.$na$ = this.$o$ = 0;
  this.$g$ = !1;
  this.$H$ = new Int32Array(256);
  this.$v$ = 0;
  this.$Sa$ = 45253;
  this.$G$ = this.$s$ = 0;
  this.$j$ = !1;
  this.$M$ = 32;
  this.$za$ = this.$ya$ = this.$$$ = this.$ga$ = 0;
  void 0 === this.$vga_memory_size$ || 262144 > this.$vga_memory_size$ ? this.$vga_memory_size$ = 262144 : 268435456 < this.$vga_memory_size$ ? this.$vga_memory_size$ = 268435456 : this.$vga_memory_size$ = $round_up_to_next_power_of_2$$module$src$lib$$(this.$vga_memory_size$);
  this.$pci_space$ = [52, 18, 17, 17, 3, 1, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0, 8, 14680064, 57344, 224, 0, 0, 0, 0, 0, 0, 191, 254, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 244, 26, 0, 17, 0, 0, 190, 254, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, ];
  this.$pci_id$ = 144;
  this.$pci_bars$ = [{size:this.$vga_memory_size$, }, ];
  this.$pci_rom_size$ = 65536;
  this.$pci_rom_address$ = 4272947200;
  this.name = "vga";
  this.$ca$ = this.$ka$ = this.$ba$ = this.$L$ = 0;
  this.$P$ = 255;
  this.$O$ = new Uint8Array(16);
  this.$D$ = -1;
  this.$ra$ = 32;
  this.$aa$ = this.$oa$ = this.$ha$ = this.$i$ = 0;
  this.$wa$ = -1;
  this.$U$ = 15;
  this.$X$ = this.$xa$ = 0;
  this.$la$ = -1;
  this.$fa$ = this.$T$ = this.$Ia$ = this.$N$ = 0;
  this.$Ga$ = 255;
  this.$I$ = this.$Z$ = this.$Y$ = this.$ea$ = this.$Ha$ = this.$ta$ = 0;
  this.$C$ = this.$Ma$ = 255;
  this.$da$ = !1;
  $bus$jscomp$24_io$jscomp$4$$ = $cpu$jscomp$24$$.$io$;
  $JSCompiler_StaticMethods_register_write$$($bus$jscomp$24_io$jscomp$4$$, 960, this, this.$port3C0_write$);
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$24_io$jscomp$4$$, 960, this, this.$port3C0_read$, this.$port3C0_read16$);
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$24_io$jscomp$4$$, 961, this, this.$port3C1_read$);
  $JSCompiler_StaticMethods_register_write$$($bus$jscomp$24_io$jscomp$4$$, 962, this, this.$port3C2_write$);
  $bus$jscomp$24_io$jscomp$4$$.$register_write_consecutive$(964, this, this.$port3C4_write$, this.$port3C5_write$);
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$24_io$jscomp$4$$, 964, this, this.$port3C4_read$);
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$24_io$jscomp$4$$, 965, this, this.$port3C5_read$);
  $bus$jscomp$24_io$jscomp$4$$.$register_write_consecutive$(974, this, this.$port3CE_write$, this.$port3CF_write$);
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$24_io$jscomp$4$$, 974, this, this.$port3CE_read$);
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$24_io$jscomp$4$$, 975, this, this.$port3CF_read$);
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$24_io$jscomp$4$$, 966, this, this.$port3C6_read$);
  $JSCompiler_StaticMethods_register_write$$($bus$jscomp$24_io$jscomp$4$$, 966, this, this.$port3C6_write$);
  $JSCompiler_StaticMethods_register_write$$($bus$jscomp$24_io$jscomp$4$$, 967, this, this.$port3C7_write$);
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$24_io$jscomp$4$$, 967, this, this.$port3C7_read$);
  $JSCompiler_StaticMethods_register_write$$($bus$jscomp$24_io$jscomp$4$$, 968, this, this.$port3C8_write$);
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$24_io$jscomp$4$$, 968, this, this.$port3C8_read$);
  $JSCompiler_StaticMethods_register_write$$($bus$jscomp$24_io$jscomp$4$$, 969, this, this.$port3C9_write$);
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$24_io$jscomp$4$$, 969, this, this.$port3C9_read$);
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$24_io$jscomp$4$$, 972, this, this.$port3CC_read$);
  $JSCompiler_StaticMethods_register_write$$($bus$jscomp$24_io$jscomp$4$$, 980, this, this.$port3D4_write$, this.$port3D4_write16$);
  $JSCompiler_StaticMethods_register_write$$($bus$jscomp$24_io$jscomp$4$$, 981, this, this.$port3D5_write$, this.$port3D5_write16$);
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$24_io$jscomp$4$$, 980, this, this.$port3D4_read$);
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$24_io$jscomp$4$$, 981, this, this.$port3D5_read$, this.$port3D5_read16$);
  $JSCompiler_StaticMethods_register_write$$($bus$jscomp$24_io$jscomp$4$$, 948, this, this.$port3D4_write$, this.$port3D4_write16$);
  $JSCompiler_StaticMethods_register_write$$($bus$jscomp$24_io$jscomp$4$$, 949, this, this.$port3D5_write$, this.$port3D5_write16$);
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$24_io$jscomp$4$$, 948, this, this.$port3D4_read$);
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$24_io$jscomp$4$$, 949, this, this.$port3D5_read$, this.$port3D5_read16$);
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$24_io$jscomp$4$$, 970, this, function() {
    return 0;
  });
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$24_io$jscomp$4$$, 986, this, this.$port3DA_read$);
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$24_io$jscomp$4$$, 954, this, this.$port3DA_read$);
  this.$Fa$ = -1;
  this.$R$ = 0;
  $JSCompiler_StaticMethods_register_write$$($bus$jscomp$24_io$jscomp$4$$, 462, this, void 0, this.$port1CE_write$);
  $JSCompiler_StaticMethods_register_write$$($bus$jscomp$24_io$jscomp$4$$, 463, this, void 0, this.$port1CF_write$);
  $JSCompiler_StaticMethods_register_read$$($bus$jscomp$24_io$jscomp$4$$, 463, this, void 0, this.$port1CF_read$);
  $screen$jscomp$3_vga_offset$$ = $cpu$jscomp$24$$.$Na$(this.$vga_memory_size$) >>> 0;
  this.$Qa$ = $view$$module$src$lib$$(Uint8Array, $cpu$jscomp$24$$.$wasm_memory$, $screen$jscomp$3_vga_offset$$, this.$vga_memory_size$);
  this.$Ca$ = this.$vga_memory_size$;
  this.$Ba$ = 0;
  this.$Ea$ = this.$vga_memory_size$;
  this.$Da$ = 0;
  this.$image_data$ = null;
  this.$K$ = new Uint8Array(262144);
  this.$Na$ = new Uint8Array(this.$K$.buffer, 0, 65536);
  this.$Oa$ = new Uint8Array(this.$K$.buffer, 65536, 65536);
  this.$ua$ = new Uint8Array(this.$K$.buffer, 131072, 65536);
  this.$Pa$ = new Uint8Array(this.$K$.buffer, 196608, 65536);
  this.$sa$ = new Uint8Array(524288);
  $JSCompiler_StaticMethods_mmap_register$$($bus$jscomp$24_io$jscomp$4$$, 655360, 131072, $addr$jscomp$30$$ => $JSCompiler_StaticMethods_vga_memory_read$$(this, $addr$jscomp$30$$), ($addr$jscomp$31_addr$jscomp$inline_550_addr$jscomp$inline_993_col$jscomp$inline_1009_max_cols$jscomp$inline_1007$$, $bitmask$jscomp$inline_996_chr$jscomp$inline_1010_max$jscomp$inline_1002_plane_select$jscomp$inline_1000_value$jscomp$168$$) => {
    if (this.$j$) {
      this.$cpu$.$write8$(($addr$jscomp$31_addr$jscomp$inline_550_addr$jscomp$inline_993_col$jscomp$inline_1009_max_cols$jscomp$inline_1007$$ - 655360 | this.$ga$) + 3758096384 | 0, $bitmask$jscomp$inline_996_chr$jscomp$inline_1010_max$jscomp$inline_1002_plane_select$jscomp$inline_1000_value$jscomp$168$$);
    } else {
      var $addr$jscomp$inline_1005_flags$jscomp$inline_1013_memory_space_select$jscomp$inline_552_setreset_enable_dword$jscomp$inline_998$$ = this.$ea$ >> 2 & 3;
      $addr$jscomp$31_addr$jscomp$inline_550_addr$jscomp$inline_993_col$jscomp$inline_1009_max_cols$jscomp$inline_1007$$ -= $VGA_HOST_MEMORY_SPACE_START$$module$src$vga$$[$addr$jscomp$inline_1005_flags$jscomp$inline_1013_memory_space_select$jscomp$inline_552_setreset_enable_dword$jscomp$inline_998$$];
      if (!(0 > $addr$jscomp$31_addr$jscomp$inline_550_addr$jscomp$inline_993_col$jscomp$inline_1009_max_cols$jscomp$inline_1007$$ || $addr$jscomp$31_addr$jscomp$inline_550_addr$jscomp$inline_993_col$jscomp$inline_1009_max_cols$jscomp$inline_1007$$ >= $VGA_HOST_MEMORY_SPACE_SIZE$$module$src$vga$$[$addr$jscomp$inline_1005_flags$jscomp$inline_1013_memory_space_select$jscomp$inline_552_setreset_enable_dword$jscomp$inline_998$$])) {
        if (this.$g$) {
          var $color$jscomp$inline_1011_memory_start$jscomp$inline_1016_memory_start$jscomp$inline_1017_setreset_dword$jscomp$inline_999_value$jscomp$inline_994$$ = $bitmask$jscomp$inline_996_chr$jscomp$inline_1010_max$jscomp$inline_1002_plane_select$jscomp$inline_1000_value$jscomp$168$$;
          $bitmask$jscomp$inline_996_chr$jscomp$inline_1010_max$jscomp$inline_1002_plane_select$jscomp$inline_1000_value$jscomp$168$$ = $JSCompiler_StaticMethods_apply_feed$$(this.$Ga$);
          var $fg_color_mask$jscomp$inline_1014_setreset_dword$jscomp$inline_997$$ = $JSCompiler_StaticMethods_apply_expand$$(this.$ta$);
          $addr$jscomp$inline_1005_flags$jscomp$inline_1013_memory_space_select$jscomp$inline_552_setreset_enable_dword$jscomp$inline_998$$ = $JSCompiler_StaticMethods_apply_expand$$(this.$Ha$);
          switch(this.$T$ & 3) {
            case 0:
              $color$jscomp$inline_1011_memory_start$jscomp$inline_1016_memory_start$jscomp$inline_1017_setreset_dword$jscomp$inline_999_value$jscomp$inline_994$$ = ($color$jscomp$inline_1011_memory_start$jscomp$inline_1016_memory_start$jscomp$inline_1017_setreset_dword$jscomp$inline_999_value$jscomp$inline_994$$ | $color$jscomp$inline_1011_memory_start$jscomp$inline_1016_memory_start$jscomp$inline_1017_setreset_dword$jscomp$inline_999_value$jscomp$inline_994$$ << 8) >>> (this.$fa$ & 7) & 255;
              var $pixel_addr$jscomp$inline_1001_plane_dword$jscomp$inline_995_row$jscomp$inline_1008$$ = $JSCompiler_StaticMethods_apply_feed$$($color$jscomp$inline_1011_memory_start$jscomp$inline_1016_memory_start$jscomp$inline_1017_setreset_dword$jscomp$inline_999_value$jscomp$inline_994$$);
              $color$jscomp$inline_1011_memory_start$jscomp$inline_1016_memory_start$jscomp$inline_1017_setreset_dword$jscomp$inline_999_value$jscomp$inline_994$$ = $JSCompiler_StaticMethods_apply_expand$$(this.$ta$);
              $pixel_addr$jscomp$inline_1001_plane_dword$jscomp$inline_995_row$jscomp$inline_1008$$ = $JSCompiler_StaticMethods_apply_logical$$(this, ($pixel_addr$jscomp$inline_1001_plane_dword$jscomp$inline_995_row$jscomp$inline_1008$$ | $addr$jscomp$inline_1005_flags$jscomp$inline_1013_memory_space_select$jscomp$inline_552_setreset_enable_dword$jscomp$inline_998$$ & $color$jscomp$inline_1011_memory_start$jscomp$inline_1016_memory_start$jscomp$inline_1017_setreset_dword$jscomp$inline_999_value$jscomp$inline_994$$) & 
              (~$addr$jscomp$inline_1005_flags$jscomp$inline_1013_memory_space_select$jscomp$inline_552_setreset_enable_dword$jscomp$inline_998$$ | $color$jscomp$inline_1011_memory_start$jscomp$inline_1016_memory_start$jscomp$inline_1017_setreset_dword$jscomp$inline_999_value$jscomp$inline_994$$), this.$v$);
              $pixel_addr$jscomp$inline_1001_plane_dword$jscomp$inline_995_row$jscomp$inline_1008$$ = $bitmask$jscomp$inline_996_chr$jscomp$inline_1010_max$jscomp$inline_1002_plane_select$jscomp$inline_1000_value$jscomp$168$$ & $pixel_addr$jscomp$inline_1001_plane_dword$jscomp$inline_995_row$jscomp$inline_1008$$ | ~$bitmask$jscomp$inline_996_chr$jscomp$inline_1010_max$jscomp$inline_1002_plane_select$jscomp$inline_1000_value$jscomp$168$$ & this.$v$;
              break;
            case 1:
              $pixel_addr$jscomp$inline_1001_plane_dword$jscomp$inline_995_row$jscomp$inline_1008$$ = this.$v$;
              break;
            case 2:
              $pixel_addr$jscomp$inline_1001_plane_dword$jscomp$inline_995_row$jscomp$inline_1008$$ = $JSCompiler_StaticMethods_apply_expand$$($color$jscomp$inline_1011_memory_start$jscomp$inline_1016_memory_start$jscomp$inline_1017_setreset_dword$jscomp$inline_999_value$jscomp$inline_994$$);
              $pixel_addr$jscomp$inline_1001_plane_dword$jscomp$inline_995_row$jscomp$inline_1008$$ = $JSCompiler_StaticMethods_apply_logical$$(this, $pixel_addr$jscomp$inline_1001_plane_dword$jscomp$inline_995_row$jscomp$inline_1008$$, this.$v$);
              $pixel_addr$jscomp$inline_1001_plane_dword$jscomp$inline_995_row$jscomp$inline_1008$$ = $bitmask$jscomp$inline_996_chr$jscomp$inline_1010_max$jscomp$inline_1002_plane_select$jscomp$inline_1000_value$jscomp$168$$ & $pixel_addr$jscomp$inline_1001_plane_dword$jscomp$inline_995_row$jscomp$inline_1008$$ | ~$bitmask$jscomp$inline_996_chr$jscomp$inline_1010_max$jscomp$inline_1002_plane_select$jscomp$inline_1000_value$jscomp$168$$ & this.$v$;
              break;
            case 3:
              $color$jscomp$inline_1011_memory_start$jscomp$inline_1016_memory_start$jscomp$inline_1017_setreset_dword$jscomp$inline_999_value$jscomp$inline_994$$ = ($color$jscomp$inline_1011_memory_start$jscomp$inline_1016_memory_start$jscomp$inline_1017_setreset_dword$jscomp$inline_999_value$jscomp$inline_994$$ | $color$jscomp$inline_1011_memory_start$jscomp$inline_1016_memory_start$jscomp$inline_1017_setreset_dword$jscomp$inline_999_value$jscomp$inline_994$$ << 8) >>> (this.$fa$ & 7) & 255, $bitmask$jscomp$inline_996_chr$jscomp$inline_1010_max$jscomp$inline_1002_plane_select$jscomp$inline_1000_value$jscomp$168$$ &= 
              $JSCompiler_StaticMethods_apply_feed$$($color$jscomp$inline_1011_memory_start$jscomp$inline_1016_memory_start$jscomp$inline_1017_setreset_dword$jscomp$inline_999_value$jscomp$inline_994$$), $pixel_addr$jscomp$inline_1001_plane_dword$jscomp$inline_995_row$jscomp$inline_1008$$ = $bitmask$jscomp$inline_996_chr$jscomp$inline_1010_max$jscomp$inline_1002_plane_select$jscomp$inline_1000_value$jscomp$168$$ & $fg_color_mask$jscomp$inline_1014_setreset_dword$jscomp$inline_997$$ | ~$bitmask$jscomp$inline_996_chr$jscomp$inline_1010_max$jscomp$inline_1002_plane_select$jscomp$inline_1000_value$jscomp$168$$ & 
              this.$v$;
          }
          $bitmask$jscomp$inline_996_chr$jscomp$inline_1010_max$jscomp$inline_1002_plane_select$jscomp$inline_1000_value$jscomp$168$$ = 15;
          switch(this.$xa$ & 12) {
            case 0:
              $bitmask$jscomp$inline_996_chr$jscomp$inline_1010_max$jscomp$inline_1002_plane_select$jscomp$inline_1000_value$jscomp$168$$ = 5 << ($addr$jscomp$31_addr$jscomp$inline_550_addr$jscomp$inline_993_col$jscomp$inline_1009_max_cols$jscomp$inline_1007$$ & 1);
              $addr$jscomp$31_addr$jscomp$inline_550_addr$jscomp$inline_993_col$jscomp$inline_1009_max_cols$jscomp$inline_1007$$ &= -2;
              break;
            case 8:
            case 12:
              $bitmask$jscomp$inline_996_chr$jscomp$inline_1010_max$jscomp$inline_1002_plane_select$jscomp$inline_1000_value$jscomp$168$$ = 1 << ($addr$jscomp$31_addr$jscomp$inline_550_addr$jscomp$inline_993_col$jscomp$inline_1009_max_cols$jscomp$inline_1007$$ & 3), $addr$jscomp$31_addr$jscomp$inline_550_addr$jscomp$inline_993_col$jscomp$inline_1009_max_cols$jscomp$inline_1007$$ &= -4;
          }
          $bitmask$jscomp$inline_996_chr$jscomp$inline_1010_max$jscomp$inline_1002_plane_select$jscomp$inline_1000_value$jscomp$168$$ &= this.$U$;
          $bitmask$jscomp$inline_996_chr$jscomp$inline_1010_max$jscomp$inline_1002_plane_select$jscomp$inline_1000_value$jscomp$168$$ & 1 && (this.$Na$[$addr$jscomp$31_addr$jscomp$inline_550_addr$jscomp$inline_993_col$jscomp$inline_1009_max_cols$jscomp$inline_1007$$] = $pixel_addr$jscomp$inline_1001_plane_dword$jscomp$inline_995_row$jscomp$inline_1008$$ >> 0 & 255);
          $bitmask$jscomp$inline_996_chr$jscomp$inline_1010_max$jscomp$inline_1002_plane_select$jscomp$inline_1000_value$jscomp$168$$ & 2 && (this.$Oa$[$addr$jscomp$31_addr$jscomp$inline_550_addr$jscomp$inline_993_col$jscomp$inline_1009_max_cols$jscomp$inline_1007$$] = $pixel_addr$jscomp$inline_1001_plane_dword$jscomp$inline_995_row$jscomp$inline_1008$$ >> 8 & 255);
          $bitmask$jscomp$inline_996_chr$jscomp$inline_1010_max$jscomp$inline_1002_plane_select$jscomp$inline_1000_value$jscomp$168$$ & 4 && (this.$ua$[$addr$jscomp$31_addr$jscomp$inline_550_addr$jscomp$inline_993_col$jscomp$inline_1009_max_cols$jscomp$inline_1007$$] = $pixel_addr$jscomp$inline_1001_plane_dword$jscomp$inline_995_row$jscomp$inline_1008$$ >> 16 & 255);
          $bitmask$jscomp$inline_996_chr$jscomp$inline_1010_max$jscomp$inline_1002_plane_select$jscomp$inline_1000_value$jscomp$168$$ & 8 && (this.$Pa$[$addr$jscomp$31_addr$jscomp$inline_550_addr$jscomp$inline_993_col$jscomp$inline_1009_max_cols$jscomp$inline_1007$$] = $pixel_addr$jscomp$inline_1001_plane_dword$jscomp$inline_995_row$jscomp$inline_1008$$ >> 24 & 255);
          $pixel_addr$jscomp$inline_1001_plane_dword$jscomp$inline_995_row$jscomp$inline_1008$$ = $JSCompiler_StaticMethods_vga_addr_to_pixel$$(this, $addr$jscomp$31_addr$jscomp$inline_550_addr$jscomp$inline_993_col$jscomp$inline_1009_max_cols$jscomp$inline_1007$$);
          $bitmask$jscomp$inline_996_chr$jscomp$inline_1010_max$jscomp$inline_1002_plane_select$jscomp$inline_1000_value$jscomp$168$$ = $pixel_addr$jscomp$inline_1001_plane_dword$jscomp$inline_995_row$jscomp$inline_1008$$ + 7;
          $pixel_addr$jscomp$inline_1001_plane_dword$jscomp$inline_995_row$jscomp$inline_1008$$ < this.$Ea$ && (this.$Ea$ = $pixel_addr$jscomp$inline_1001_plane_dword$jscomp$inline_995_row$jscomp$inline_1008$$);
          $bitmask$jscomp$inline_996_chr$jscomp$inline_1010_max$jscomp$inline_1002_plane_select$jscomp$inline_1000_value$jscomp$168$$ > this.$Da$ && (this.$Da$ = $bitmask$jscomp$inline_996_chr$jscomp$inline_1010_max$jscomp$inline_1002_plane_select$jscomp$inline_1000_value$jscomp$168$$);
          $pixel_addr$jscomp$inline_1001_plane_dword$jscomp$inline_995_row$jscomp$inline_1008$$ < this.$Ca$ && (this.$Ca$ = $pixel_addr$jscomp$inline_1001_plane_dword$jscomp$inline_995_row$jscomp$inline_1008$$);
          $bitmask$jscomp$inline_996_chr$jscomp$inline_1010_max$jscomp$inline_1002_plane_select$jscomp$inline_1000_value$jscomp$168$$ > this.$Ba$ && (this.$Ba$ = $bitmask$jscomp$inline_996_chr$jscomp$inline_1010_max$jscomp$inline_1002_plane_select$jscomp$inline_1000_value$jscomp$168$$);
        } else {
          if (this.$U$ & 3) {
            if ($addr$jscomp$inline_1005_flags$jscomp$inline_1013_memory_space_select$jscomp$inline_552_setreset_enable_dword$jscomp$inline_998$$ = $addr$jscomp$31_addr$jscomp$inline_550_addr$jscomp$inline_993_col$jscomp$inline_1009_max_cols$jscomp$inline_1007$$, this.$K$[$addr$jscomp$inline_1005_flags$jscomp$inline_1013_memory_space_select$jscomp$inline_552_setreset_enable_dword$jscomp$inline_998$$] = $bitmask$jscomp$inline_996_chr$jscomp$inline_1010_max$jscomp$inline_1002_plane_select$jscomp$inline_1000_value$jscomp$168$$, 
            $addr$jscomp$31_addr$jscomp$inline_550_addr$jscomp$inline_993_col$jscomp$inline_1009_max_cols$jscomp$inline_1007$$ = Math.max(this.$S$, 2 * this.$J$), $addr$jscomp$inline_1005_flags$jscomp$inline_1013_memory_space_select$jscomp$inline_552_setreset_enable_dword$jscomp$inline_998$$ >> 1 >= this.$h$ ? ($color$jscomp$inline_1011_memory_start$jscomp$inline_1016_memory_start$jscomp$inline_1017_setreset_dword$jscomp$inline_999_value$jscomp$inline_994$$ = ($addr$jscomp$inline_1005_flags$jscomp$inline_1013_memory_space_select$jscomp$inline_552_setreset_enable_dword$jscomp$inline_998$$ >> 
            1) - this.$h$, $pixel_addr$jscomp$inline_1001_plane_dword$jscomp$inline_995_row$jscomp$inline_1008$$ = $color$jscomp$inline_1011_memory_start$jscomp$inline_1016_memory_start$jscomp$inline_1017_setreset_dword$jscomp$inline_999_value$jscomp$inline_994$$ / $addr$jscomp$31_addr$jscomp$inline_550_addr$jscomp$inline_993_col$jscomp$inline_1009_max_cols$jscomp$inline_1007$$ | 0, $addr$jscomp$31_addr$jscomp$inline_550_addr$jscomp$inline_993_col$jscomp$inline_1009_max_cols$jscomp$inline_1007$$ = 
            $color$jscomp$inline_1011_memory_start$jscomp$inline_1016_memory_start$jscomp$inline_1017_setreset_dword$jscomp$inline_999_value$jscomp$inline_994$$ % $addr$jscomp$31_addr$jscomp$inline_550_addr$jscomp$inline_993_col$jscomp$inline_1009_max_cols$jscomp$inline_1007$$) : ($color$jscomp$inline_1011_memory_start$jscomp$inline_1016_memory_start$jscomp$inline_1017_setreset_dword$jscomp$inline_999_value$jscomp$inline_994$$ = $addr$jscomp$inline_1005_flags$jscomp$inline_1013_memory_space_select$jscomp$inline_552_setreset_enable_dword$jscomp$inline_998$$ >> 
            1, $pixel_addr$jscomp$inline_1001_plane_dword$jscomp$inline_995_row$jscomp$inline_1008$$ = ($color$jscomp$inline_1011_memory_start$jscomp$inline_1016_memory_start$jscomp$inline_1017_setreset_dword$jscomp$inline_999_value$jscomp$inline_994$$ / $addr$jscomp$31_addr$jscomp$inline_550_addr$jscomp$inline_993_col$jscomp$inline_1009_max_cols$jscomp$inline_1007$$ | 0) + $JSCompiler_StaticMethods_scan_line_to_screen_row$$(this, this.$B$), $addr$jscomp$31_addr$jscomp$inline_550_addr$jscomp$inline_993_col$jscomp$inline_1009_max_cols$jscomp$inline_1007$$ = 
            $color$jscomp$inline_1011_memory_start$jscomp$inline_1016_memory_start$jscomp$inline_1017_setreset_dword$jscomp$inline_999_value$jscomp$inline_994$$ % $addr$jscomp$31_addr$jscomp$inline_550_addr$jscomp$inline_993_col$jscomp$inline_1009_max_cols$jscomp$inline_1007$$), !($addr$jscomp$31_addr$jscomp$inline_550_addr$jscomp$inline_993_col$jscomp$inline_1009_max_cols$jscomp$inline_1007$$ >= this.$S$ || $pixel_addr$jscomp$inline_1001_plane_dword$jscomp$inline_995_row$jscomp$inline_1008$$ >= 
            this.$qa$)) {
              $addr$jscomp$inline_1005_flags$jscomp$inline_1013_memory_space_select$jscomp$inline_552_setreset_enable_dword$jscomp$inline_998$$ & 1 ? ($color$jscomp$inline_1011_memory_start$jscomp$inline_1016_memory_start$jscomp$inline_1017_setreset_dword$jscomp$inline_999_value$jscomp$inline_994$$ = $bitmask$jscomp$inline_996_chr$jscomp$inline_1010_max$jscomp$inline_1002_plane_select$jscomp$inline_1000_value$jscomp$168$$, $bitmask$jscomp$inline_996_chr$jscomp$inline_1010_max$jscomp$inline_1002_plane_select$jscomp$inline_1000_value$jscomp$168$$ = 
              this.$K$[$addr$jscomp$inline_1005_flags$jscomp$inline_1013_memory_space_select$jscomp$inline_552_setreset_enable_dword$jscomp$inline_998$$ & -2]) : $color$jscomp$inline_1011_memory_start$jscomp$inline_1016_memory_start$jscomp$inline_1017_setreset_dword$jscomp$inline_999_value$jscomp$inline_994$$ = this.$K$[$addr$jscomp$inline_1005_flags$jscomp$inline_1013_memory_space_select$jscomp$inline_552_setreset_enable_dword$jscomp$inline_998$$ | 1];
              var $bg_color_mask$jscomp$inline_1015_blink_enabled$jscomp$inline_1012$$ = this.$i$ & 8;
              $addr$jscomp$inline_1005_flags$jscomp$inline_1013_memory_space_select$jscomp$inline_552_setreset_enable_dword$jscomp$inline_998$$ = ($bg_color_mask$jscomp$inline_1015_blink_enabled$jscomp$inline_1012$$ && $color$jscomp$inline_1011_memory_start$jscomp$inline_1016_memory_start$jscomp$inline_1017_setreset_dword$jscomp$inline_999_value$jscomp$inline_994$$ & 128 ? this.screen.$o$ : 0) | (!this.$da$ || $color$jscomp$inline_1011_memory_start$jscomp$inline_1016_memory_start$jscomp$inline_1017_setreset_dword$jscomp$inline_999_value$jscomp$inline_994$$ & 
              8 ? 0 : this.screen.$s$);
              $fg_color_mask$jscomp$inline_1014_setreset_dword$jscomp$inline_997$$ = this.$da$ ? 7 : 15;
              $bg_color_mask$jscomp$inline_1015_blink_enabled$jscomp$inline_1012$$ = $bg_color_mask$jscomp$inline_1015_blink_enabled$jscomp$inline_1012$$ ? 7 : 15;
              this.$bus$.send("screen-put-char", [$pixel_addr$jscomp$inline_1001_plane_dword$jscomp$inline_995_row$jscomp$inline_1008$$, $addr$jscomp$31_addr$jscomp$inline_550_addr$jscomp$inline_993_col$jscomp$inline_1009_max_cols$jscomp$inline_1007$$, $bitmask$jscomp$inline_996_chr$jscomp$inline_1010_max$jscomp$inline_1002_plane_select$jscomp$inline_1000_value$jscomp$168$$]);
              this.screen.$j$($pixel_addr$jscomp$inline_1001_plane_dword$jscomp$inline_995_row$jscomp$inline_1008$$, $addr$jscomp$31_addr$jscomp$inline_550_addr$jscomp$inline_993_col$jscomp$inline_1009_max_cols$jscomp$inline_1007$$, $bitmask$jscomp$inline_996_chr$jscomp$inline_1010_max$jscomp$inline_1002_plane_select$jscomp$inline_1000_value$jscomp$168$$, $addr$jscomp$inline_1005_flags$jscomp$inline_1013_memory_space_select$jscomp$inline_552_setreset_enable_dword$jscomp$inline_998$$, this.$H$[this.$P$ & 
              this.$O$[$color$jscomp$inline_1011_memory_start$jscomp$inline_1016_memory_start$jscomp$inline_1017_setreset_dword$jscomp$inline_999_value$jscomp$inline_994$$ >> 4 & $bg_color_mask$jscomp$inline_1015_blink_enabled$jscomp$inline_1012$$]], this.$H$[this.$P$ & this.$O$[$color$jscomp$inline_1011_memory_start$jscomp$inline_1016_memory_start$jscomp$inline_1017_setreset_dword$jscomp$inline_999_value$jscomp$inline_994$$ & $fg_color_mask$jscomp$inline_1014_setreset_dword$jscomp$inline_997$$]]);
            }
          } else {
            this.$U$ & 4 && (this.$ua$[$addr$jscomp$31_addr$jscomp$inline_550_addr$jscomp$inline_993_col$jscomp$inline_1009_max_cols$jscomp$inline_1007$$] = $bitmask$jscomp$inline_996_chr$jscomp$inline_1010_max$jscomp$inline_1002_plane_select$jscomp$inline_1000_value$jscomp$168$$);
          }
        }
      }
    }
  }, );
  $JSCompiler_StaticMethods_register_device$$($cpu$jscomp$24$$.$devices$.$pci$, this);
}
$JSCompiler_prototypeAlias$$ = $VGAScreen$$module$src$vga$$.prototype;
$JSCompiler_prototypeAlias$$.$get_state$ = function() {
  var $state$jscomp$52$$ = [];
  $state$jscomp$52$$[0] = this.$vga_memory_size$;
  $state$jscomp$52$$[1] = this.$F$;
  $state$jscomp$52$$[2] = this.$ja$;
  $state$jscomp$52$$[3] = this.$Aa$;
  $state$jscomp$52$$[4] = this.$S$;
  $state$jscomp$52$$[5] = this.$qa$;
  $state$jscomp$52$$[6] = this.$K$;
  $state$jscomp$52$$[7] = this.$ca$;
  $state$jscomp$52$$[8] = this.$h$;
  $state$jscomp$52$$[9] = this.$g$;
  $state$jscomp$52$$[10] = this.$H$;
  $state$jscomp$52$$[11] = this.$v$;
  $state$jscomp$52$$[12] = this.$Y$;
  $state$jscomp$52$$[13] = this.$Z$;
  $state$jscomp$52$$[14] = this.$ea$;
  $state$jscomp$52$$[15] = this.$s$;
  $state$jscomp$52$$[16] = this.$G$;
  $state$jscomp$52$$[17] = this.$o$;
  $state$jscomp$52$$[18] = this.$j$;
  $state$jscomp$52$$[19] = this.$M$;
  $state$jscomp$52$$[20] = this.$ga$;
  $state$jscomp$52$$[21] = this.$$$;
  $state$jscomp$52$$[22] = this.$L$;
  $state$jscomp$52$$[23] = this.$ba$;
  $state$jscomp$52$$[24] = this.$ka$;
  $state$jscomp$52$$[25] = this.$O$;
  $state$jscomp$52$$[26] = this.$wa$;
  $state$jscomp$52$$[27] = this.$U$;
  $state$jscomp$52$$[28] = this.$xa$;
  $state$jscomp$52$$[29] = this.$la$;
  $state$jscomp$52$$[30] = this.$Ia$;
  $state$jscomp$52$$[31] = this.$T$;
  $state$jscomp$52$$[32] = this.$fa$;
  $state$jscomp$52$$[33] = this.$Ga$;
  $state$jscomp$52$$[34] = this.$I$;
  $state$jscomp$52$$[35] = this.$Ma$;
  $state$jscomp$52$$[36] = this.$C$;
  $state$jscomp$52$$[37] = this.$Fa$;
  $state$jscomp$52$$[38] = this.$R$;
  $state$jscomp$52$$[39] = this.$Qa$;
  $state$jscomp$52$$[41] = this.$D$;
  $state$jscomp$52$$[42] = this.$J$;
  $state$jscomp$52$$[43] = this.$ta$;
  $state$jscomp$52$$[44] = this.$Ha$;
  $state$jscomp$52$$[45] = this.$Ka$;
  $state$jscomp$52$$[46] = this.$ia$;
  $state$jscomp$52$$[47] = this.$na$;
  $state$jscomp$52$$[48] = this.$ma$;
  $state$jscomp$52$$[49] = this.$A$;
  $state$jscomp$52$$[50] = this.$u$;
  $state$jscomp$52$$[51] = this.$W$;
  $state$jscomp$52$$[52] = this.$Ja$;
  $state$jscomp$52$$[53] = this.$J$;
  $state$jscomp$52$$[54] = this.$ra$;
  $state$jscomp$52$$[55] = this.$i$;
  $state$jscomp$52$$[56] = this.$ha$;
  $state$jscomp$52$$[57] = this.$oa$;
  $state$jscomp$52$$[58] = this.$aa$;
  $state$jscomp$52$$[59] = this.$X$;
  $state$jscomp$52$$[60] = this.$B$;
  $state$jscomp$52$$[61] = this.$sa$;
  $state$jscomp$52$$[62] = this.$P$;
  $state$jscomp$52$$[63] = this.$N$;
  $state$jscomp$52$$[64] = this.$da$;
  return $state$jscomp$52$$;
};
$JSCompiler_prototypeAlias$$.$set_state$ = function($state$jscomp$53$$) {
  this.$vga_memory_size$ = $state$jscomp$53$$[0];
  this.$F$ = $state$jscomp$53$$[1];
  this.$ja$ = $state$jscomp$53$$[2];
  this.$Aa$ = $state$jscomp$53$$[3];
  this.$S$ = $state$jscomp$53$$[4];
  this.$qa$ = $state$jscomp$53$$[5];
  $state$jscomp$53$$[6] && this.$K$.set($state$jscomp$53$$[6]);
  this.$ca$ = $state$jscomp$53$$[7];
  this.$h$ = $state$jscomp$53$$[8];
  this.$g$ = $state$jscomp$53$$[9];
  this.$H$ = $state$jscomp$53$$[10];
  this.$v$ = $state$jscomp$53$$[11];
  this.$Y$ = $state$jscomp$53$$[12];
  this.$Z$ = $state$jscomp$53$$[13];
  this.$ea$ = $state$jscomp$53$$[14];
  this.$s$ = $state$jscomp$53$$[15];
  this.$G$ = $state$jscomp$53$$[16];
  this.$o$ = $state$jscomp$53$$[17];
  this.$j$ = $state$jscomp$53$$[18];
  this.$M$ = $state$jscomp$53$$[19];
  this.$ga$ = $state$jscomp$53$$[20];
  this.$$$ = $state$jscomp$53$$[21];
  this.$L$ = $state$jscomp$53$$[22];
  this.$ba$ = $state$jscomp$53$$[23];
  this.$ka$ = $state$jscomp$53$$[24];
  this.$O$ = $state$jscomp$53$$[25];
  this.$wa$ = $state$jscomp$53$$[26];
  this.$U$ = $state$jscomp$53$$[27];
  this.$xa$ = $state$jscomp$53$$[28];
  this.$la$ = $state$jscomp$53$$[29];
  this.$Ia$ = $state$jscomp$53$$[30];
  this.$T$ = $state$jscomp$53$$[31];
  this.$fa$ = $state$jscomp$53$$[32];
  this.$Ga$ = $state$jscomp$53$$[33];
  this.$I$ = $state$jscomp$53$$[34];
  this.$Ma$ = $state$jscomp$53$$[35];
  this.$C$ = $state$jscomp$53$$[36];
  this.$Fa$ = $state$jscomp$53$$[37];
  this.$R$ = $state$jscomp$53$$[38];
  this.$Qa$.set($state$jscomp$53$$[39]);
  this.$D$ = $state$jscomp$53$$[41];
  this.$J$ = $state$jscomp$53$$[42];
  this.$ta$ = $state$jscomp$53$$[43];
  this.$Ha$ = $state$jscomp$53$$[44];
  this.$Ka$ = $state$jscomp$53$$[45];
  this.$ia$.set($state$jscomp$53$$[46]);
  this.$na$ = $state$jscomp$53$$[47];
  this.$ma$ = $state$jscomp$53$$[48];
  this.$A$ = $state$jscomp$53$$[49];
  this.$u$ = $state$jscomp$53$$[50];
  this.$W$ = $state$jscomp$53$$[51];
  this.$Ja$ = $state$jscomp$53$$[52];
  this.$J$ = $state$jscomp$53$$[53];
  this.$ra$ = $state$jscomp$53$$[54];
  this.$i$ = $state$jscomp$53$$[55];
  this.$ha$ = $state$jscomp$53$$[56];
  this.$oa$ = $state$jscomp$53$$[57];
  this.$aa$ = $state$jscomp$53$$[58];
  this.$X$ = $state$jscomp$53$$[59];
  this.$B$ = $state$jscomp$53$$[60];
  $state$jscomp$53$$[61] && this.$sa$.set($state$jscomp$53$$[61]);
  this.$P$ = void 0 === $state$jscomp$53$$[62] ? 255 : $state$jscomp$53$$[62];
  this.$N$ = void 0 === $state$jscomp$53$$[63] ? 0 : $state$jscomp$53$$[63];
  this.$da$ = void 0 === $state$jscomp$53$$[64] ? 0 : $state$jscomp$53$$[64];
  this.screen.$g$(this.$g$);
  this.$g$ ? (this.$va$ = this.$V$ = 0, this.$j$ ? ($JSCompiler_StaticMethods_JSC$2019_set_size_graphical$$(this, this.$s$, this.$G$, this.$s$, this.$G$, this.$M$), $JSCompiler_StaticMethods_update_layers$$(this)) : ($JSCompiler_StaticMethods_update_vga_size$$(this), $JSCompiler_StaticMethods_update_layers$$(this), $JSCompiler_StaticMethods_complete_replot$$(this))) : ($JSCompiler_StaticMethods_JSC$2019_set_font_bitmap$$(this, !0), $JSCompiler_StaticMethods_JSC$2019_set_size_text$$(this, this.$S$, 
  this.$qa$), $JSCompiler_StaticMethods_JSC$2019_set_font_page$$(this), $JSCompiler_StaticMethods_JSC$2019_update_cursor_scanline$$(this), $JSCompiler_StaticMethods_JSC$2019_update_cursor$$(this));
  $JSCompiler_StaticMethods_complete_redraw$$(this);
};
function $JSCompiler_StaticMethods_vga_memory_read$$($JSCompiler_StaticMethods_vga_memory_read$self$$, $addr$jscomp$32$$) {
  if ($JSCompiler_StaticMethods_vga_memory_read$self$$.$j$) {
    return $JSCompiler_StaticMethods_vga_memory_read$self$$.$cpu$.$read8$(($addr$jscomp$32$$ - 655360 | $JSCompiler_StaticMethods_vga_memory_read$self$$.$ga$) + 3758096384 | 0);
  }
  var $memory_space_select_plane_reading$$ = $JSCompiler_StaticMethods_vga_memory_read$self$$.$ea$ >> 2 & 3;
  $addr$jscomp$32$$ -= $VGA_HOST_MEMORY_SPACE_START$$module$src$vga$$[$memory_space_select_plane_reading$$];
  if (0 > $addr$jscomp$32$$ || $addr$jscomp$32$$ >= $VGA_HOST_MEMORY_SPACE_SIZE$$module$src$vga$$[$memory_space_select_plane_reading$$]) {
    return 0;
  }
  $JSCompiler_StaticMethods_vga_memory_read$self$$.$v$ = $JSCompiler_StaticMethods_vga_memory_read$self$$.$Na$[$addr$jscomp$32$$];
  $JSCompiler_StaticMethods_vga_memory_read$self$$.$v$ |= $JSCompiler_StaticMethods_vga_memory_read$self$$.$Oa$[$addr$jscomp$32$$] << 8;
  $JSCompiler_StaticMethods_vga_memory_read$self$$.$v$ |= $JSCompiler_StaticMethods_vga_memory_read$self$$.$ua$[$addr$jscomp$32$$] << 16;
  $JSCompiler_StaticMethods_vga_memory_read$self$$.$v$ |= $JSCompiler_StaticMethods_vga_memory_read$self$$.$Pa$[$addr$jscomp$32$$] << 24;
  if ($JSCompiler_StaticMethods_vga_memory_read$self$$.$T$ & 8) {
    return $memory_space_select_plane_reading$$ = 255, $JSCompiler_StaticMethods_vga_memory_read$self$$.$Z$ & 1 && ($memory_space_select_plane_reading$$ &= $JSCompiler_StaticMethods_vga_memory_read$self$$.$Na$[$addr$jscomp$32$$] ^ ~($JSCompiler_StaticMethods_vga_memory_read$self$$.$Y$ & 1 ? 255 : 0)), $JSCompiler_StaticMethods_vga_memory_read$self$$.$Z$ & 2 && ($memory_space_select_plane_reading$$ &= $JSCompiler_StaticMethods_vga_memory_read$self$$.$Oa$[$addr$jscomp$32$$] ^ ~($JSCompiler_StaticMethods_vga_memory_read$self$$.$Y$ & 
    2 ? 255 : 0)), $JSCompiler_StaticMethods_vga_memory_read$self$$.$Z$ & 4 && ($memory_space_select_plane_reading$$ &= $JSCompiler_StaticMethods_vga_memory_read$self$$.$ua$[$addr$jscomp$32$$] ^ ~($JSCompiler_StaticMethods_vga_memory_read$self$$.$Y$ & 4 ? 255 : 0)), $JSCompiler_StaticMethods_vga_memory_read$self$$.$Z$ & 8 && ($memory_space_select_plane_reading$$ &= $JSCompiler_StaticMethods_vga_memory_read$self$$.$Pa$[$addr$jscomp$32$$] ^ ~($JSCompiler_StaticMethods_vga_memory_read$self$$.$Y$ & 8 ? 
    255 : 0)), $memory_space_select_plane_reading$$;
  }
  $memory_space_select_plane_reading$$ = $JSCompiler_StaticMethods_vga_memory_read$self$$.$Ia$;
  $JSCompiler_StaticMethods_vga_memory_read$self$$.$g$ ? $JSCompiler_StaticMethods_vga_memory_read$self$$.$xa$ & 8 ? ($memory_space_select_plane_reading$$ = $addr$jscomp$32$$ & 3, $addr$jscomp$32$$ &= -4) : $JSCompiler_StaticMethods_vga_memory_read$self$$.$T$ & 16 && ($memory_space_select_plane_reading$$ = $addr$jscomp$32$$ & 1, $addr$jscomp$32$$ &= -2) : $memory_space_select_plane_reading$$ &= 3;
  return $JSCompiler_StaticMethods_vga_memory_read$self$$.$K$[$memory_space_select_plane_reading$$ << 16 | $addr$jscomp$32$$];
}
function $JSCompiler_StaticMethods_apply_feed$$($data_byte$jscomp$27$$) {
  return $data_byte$jscomp$27$$ | $data_byte$jscomp$27$$ << 8 | $data_byte$jscomp$27$$ << 16 | $data_byte$jscomp$27$$ << 24;
}
function $JSCompiler_StaticMethods_apply_expand$$($data_byte$jscomp$28$$) {
  return ($data_byte$jscomp$28$$ & 1 ? 255 : 0) | ($data_byte$jscomp$28$$ & 2 ? 255 : 0) << 8 | ($data_byte$jscomp$28$$ & 4 ? 255 : 0) << 16 | ($data_byte$jscomp$28$$ & 8 ? 255 : 0) << 24;
}
function $JSCompiler_StaticMethods_apply_logical$$($JSCompiler_StaticMethods_apply_logical$self$$, $data_dword$jscomp$1$$, $latch_dword$$) {
  switch($JSCompiler_StaticMethods_apply_logical$self$$.$fa$ & 24) {
    case 8:
      return $data_dword$jscomp$1$$ & $latch_dword$$;
    case 16:
      return $data_dword$jscomp$1$$ | $latch_dword$$;
    case 24:
      return $data_dword$jscomp$1$$ ^ $latch_dword$$;
  }
  return $data_dword$jscomp$1$$;
}
function $JSCompiler_StaticMethods_text_mode_redraw$$($JSCompiler_StaticMethods_text_mode_redraw$self$$) {
  const $split_screen_row$$ = $JSCompiler_StaticMethods_scan_line_to_screen_row$$($JSCompiler_StaticMethods_text_mode_redraw$self$$, $JSCompiler_StaticMethods_text_mode_redraw$self$$.$B$), $row_offset$$ = Math.max(0, 2 * (2 * $JSCompiler_StaticMethods_text_mode_redraw$self$$.$J$ - $JSCompiler_StaticMethods_text_mode_redraw$self$$.$S$)), $blink_enabled$$ = $JSCompiler_StaticMethods_text_mode_redraw$self$$.$i$ & 8, $fg_color_mask$$ = $JSCompiler_StaticMethods_text_mode_redraw$self$$.$da$ ? 7 : 15, 
  $bg_color_mask$$ = $blink_enabled$$ ? 7 : 15, $FLAG_BLINKING$jscomp$1$$ = $JSCompiler_StaticMethods_text_mode_redraw$self$$.screen.$o$, $FLAG_FONT_PAGE_B$jscomp$1$$ = $JSCompiler_StaticMethods_text_mode_redraw$self$$.screen.$s$;
  let $addr$jscomp$35$$ = $JSCompiler_StaticMethods_text_mode_redraw$self$$.$h$ << 1;
  for (let $row$jscomp$7$$ = 0; $row$jscomp$7$$ < $JSCompiler_StaticMethods_text_mode_redraw$self$$.$qa$; $row$jscomp$7$$++) {
    $row$jscomp$7$$ === $split_screen_row$$ && ($addr$jscomp$35$$ = 0);
    for (let $col$jscomp$4$$ = 0; $col$jscomp$4$$ < $JSCompiler_StaticMethods_text_mode_redraw$self$$.$S$; $col$jscomp$4$$++) {
      const $chr$jscomp$11$$ = $JSCompiler_StaticMethods_text_mode_redraw$self$$.$K$[$addr$jscomp$35$$], $color$jscomp$2$$ = $JSCompiler_StaticMethods_text_mode_redraw$self$$.$K$[$addr$jscomp$35$$ | 1], $flags$jscomp$13$$ = ($blink_enabled$$ && $color$jscomp$2$$ & 128 ? $FLAG_BLINKING$jscomp$1$$ : 0) | (!$JSCompiler_StaticMethods_text_mode_redraw$self$$.$da$ || $color$jscomp$2$$ & 8 ? 0 : $FLAG_FONT_PAGE_B$jscomp$1$$);
      $JSCompiler_StaticMethods_text_mode_redraw$self$$.$bus$.send("screen-put-char", [$row$jscomp$7$$, $col$jscomp$4$$, $chr$jscomp$11$$]);
      $JSCompiler_StaticMethods_text_mode_redraw$self$$.screen.$j$($row$jscomp$7$$, $col$jscomp$4$$, $chr$jscomp$11$$, $flags$jscomp$13$$, $JSCompiler_StaticMethods_text_mode_redraw$self$$.$H$[$JSCompiler_StaticMethods_text_mode_redraw$self$$.$P$ & $JSCompiler_StaticMethods_text_mode_redraw$self$$.$O$[$color$jscomp$2$$ >> 4 & $bg_color_mask$$]], $JSCompiler_StaticMethods_text_mode_redraw$self$$.$H$[$JSCompiler_StaticMethods_text_mode_redraw$self$$.$P$ & $JSCompiler_StaticMethods_text_mode_redraw$self$$.$O$[$color$jscomp$2$$ & 
      $fg_color_mask$$]]);
      $addr$jscomp$35$$ += 2;
    }
    $addr$jscomp$35$$ += $row_offset$$;
  }
}
function $JSCompiler_StaticMethods_JSC$2019_update_cursor$$($JSCompiler_StaticMethods_JSC$2019_update_cursor$self$$) {
  var $col$jscomp$6_max_cols$jscomp$1$$ = Math.max($JSCompiler_StaticMethods_JSC$2019_update_cursor$self$$.$S$, 2 * $JSCompiler_StaticMethods_JSC$2019_update_cursor$self$$.$J$);
  let $row$jscomp$9$$;
  $JSCompiler_StaticMethods_JSC$2019_update_cursor$self$$.$F$ >= $JSCompiler_StaticMethods_JSC$2019_update_cursor$self$$.$h$ ? ($row$jscomp$9$$ = ($JSCompiler_StaticMethods_JSC$2019_update_cursor$self$$.$F$ - $JSCompiler_StaticMethods_JSC$2019_update_cursor$self$$.$h$) / $col$jscomp$6_max_cols$jscomp$1$$ | 0, $col$jscomp$6_max_cols$jscomp$1$$ = ($JSCompiler_StaticMethods_JSC$2019_update_cursor$self$$.$F$ - $JSCompiler_StaticMethods_JSC$2019_update_cursor$self$$.$h$) % $col$jscomp$6_max_cols$jscomp$1$$) : 
  ($row$jscomp$9$$ = ($JSCompiler_StaticMethods_JSC$2019_update_cursor$self$$.$F$ / $col$jscomp$6_max_cols$jscomp$1$$ | 0) + $JSCompiler_StaticMethods_scan_line_to_screen_row$$($JSCompiler_StaticMethods_JSC$2019_update_cursor$self$$, $JSCompiler_StaticMethods_JSC$2019_update_cursor$self$$.$B$), $col$jscomp$6_max_cols$jscomp$1$$ = $JSCompiler_StaticMethods_JSC$2019_update_cursor$self$$.$F$ % $col$jscomp$6_max_cols$jscomp$1$$);
  $JSCompiler_StaticMethods_JSC$2019_update_cursor$self$$.screen.$A$($row$jscomp$9$$, $col$jscomp$6_max_cols$jscomp$1$$);
}
function $JSCompiler_StaticMethods_complete_redraw$$($JSCompiler_StaticMethods_complete_redraw$self$$) {
  $JSCompiler_StaticMethods_complete_redraw$self$$.$g$ ? $JSCompiler_StaticMethods_complete_redraw$self$$.$j$ ? $JSCompiler_StaticMethods_complete_redraw$self$$.$cpu$.$pa$() : ($JSCompiler_StaticMethods_complete_redraw$self$$.$Ca$ = 0, $JSCompiler_StaticMethods_complete_redraw$self$$.$Ba$ = 524288) : $JSCompiler_StaticMethods_text_mode_redraw$$($JSCompiler_StaticMethods_complete_redraw$self$$);
}
function $JSCompiler_StaticMethods_complete_replot$$($JSCompiler_StaticMethods_complete_replot$self$$) {
  $JSCompiler_StaticMethods_complete_replot$self$$.$g$ && !$JSCompiler_StaticMethods_complete_replot$self$$.$j$ && ($JSCompiler_StaticMethods_complete_replot$self$$.$Ea$ = 0, $JSCompiler_StaticMethods_complete_replot$self$$.$Da$ = 524288, $JSCompiler_StaticMethods_complete_redraw$$($JSCompiler_StaticMethods_complete_replot$self$$));
}
$JSCompiler_prototypeAlias$$.$destroy$ = function() {
};
function $JSCompiler_StaticMethods_vga_addr_shift_count$$($JSCompiler_StaticMethods_vga_addr_shift_count$self$$) {
  var $shift_count$$ = 128 + (~$JSCompiler_StaticMethods_vga_addr_shift_count$self$$.$W$ & $JSCompiler_StaticMethods_vga_addr_shift_count$self$$.$o$ & 64);
  $shift_count$$ -= $JSCompiler_StaticMethods_vga_addr_shift_count$self$$.$W$ & 64;
  $shift_count$$ -= $JSCompiler_StaticMethods_vga_addr_shift_count$self$$.$i$ & 64;
  return $shift_count$$ >>> 6;
}
function $JSCompiler_StaticMethods_vga_addr_to_pixel$$($JSCompiler_StaticMethods_vga_addr_to_pixel$self$$, $addr$jscomp$37$$) {
  var $shift_count$jscomp$1$$ = $JSCompiler_StaticMethods_vga_addr_shift_count$$($JSCompiler_StaticMethods_vga_addr_to_pixel$self$$);
  if (~$JSCompiler_StaticMethods_vga_addr_to_pixel$self$$.$o$ & 3) {
    var $col$jscomp$7_pixel_addr$jscomp$1$$ = $addr$jscomp$37$$ - $JSCompiler_StaticMethods_vga_addr_to_pixel$self$$.$h$;
    $col$jscomp$7_pixel_addr$jscomp$1$$ &= $JSCompiler_StaticMethods_vga_addr_to_pixel$self$$.$o$ << 13 | -24577;
    $col$jscomp$7_pixel_addr$jscomp$1$$ <<= $shift_count$jscomp$1$$;
    var $row$jscomp$10$$ = $col$jscomp$7_pixel_addr$jscomp$1$$ / $JSCompiler_StaticMethods_vga_addr_to_pixel$self$$.$l$ | 0;
    $col$jscomp$7_pixel_addr$jscomp$1$$ %= $JSCompiler_StaticMethods_vga_addr_to_pixel$self$$.$l$;
    switch($JSCompiler_StaticMethods_vga_addr_to_pixel$self$$.$o$ & 3) {
      case 2:
        $row$jscomp$10$$ = $row$jscomp$10$$ << 1 | $addr$jscomp$37$$ >> 13 & 1;
        break;
      case 1:
        $row$jscomp$10$$ = $row$jscomp$10$$ << 1 | $addr$jscomp$37$$ >> 14 & 1;
        break;
      case 0:
        $row$jscomp$10$$ = $row$jscomp$10$$ << 2 | $addr$jscomp$37$$ >> 13 & 3;
    }
    return $row$jscomp$10$$ * $JSCompiler_StaticMethods_vga_addr_to_pixel$self$$.$l$ + $col$jscomp$7_pixel_addr$jscomp$1$$ + ($JSCompiler_StaticMethods_vga_addr_to_pixel$self$$.$h$ << $shift_count$jscomp$1$$);
  }
  return $addr$jscomp$37$$ << $shift_count$jscomp$1$$;
}
function $JSCompiler_StaticMethods_scan_line_to_screen_row$$($JSCompiler_StaticMethods_scan_line_to_screen_row$self$$, $scan_line$$) {
  $JSCompiler_StaticMethods_scan_line_to_screen_row$self$$.$I$ & 128 && ($scan_line$$ >>>= 1);
  $scan_line$$ = Math.ceil($scan_line$$ / (1 + ($JSCompiler_StaticMethods_scan_line_to_screen_row$self$$.$I$ & 31)));
  $JSCompiler_StaticMethods_scan_line_to_screen_row$self$$.$o$ & 1 || ($scan_line$$ <<= 1);
  $JSCompiler_StaticMethods_scan_line_to_screen_row$self$$.$o$ & 2 || ($scan_line$$ <<= 1);
  return $scan_line$$;
}
function $JSCompiler_StaticMethods_JSC$2019_set_size_text$$($JSCompiler_StaticMethods_JSC$2019_set_size_text$self$$, $cols_count$$, $rows_count$$) {
  $JSCompiler_StaticMethods_JSC$2019_set_size_text$self$$.$S$ = $cols_count$$;
  $JSCompiler_StaticMethods_JSC$2019_set_size_text$self$$.$qa$ = $rows_count$$;
  $JSCompiler_StaticMethods_JSC$2019_set_size_text$self$$.screen.$i$($cols_count$$, $rows_count$$);
  $JSCompiler_StaticMethods_JSC$2019_set_size_text$self$$.$bus$.send("screen-set-size", [$cols_count$$, $rows_count$$, 0]);
}
function $JSCompiler_StaticMethods_JSC$2019_set_size_graphical$$($JSCompiler_StaticMethods_JSC$2019_set_size_graphical$self$$, $width$jscomp$31$$, $height$jscomp$29$$, $virtual_width$$, $virtual_height$$, $bpp$$) {
  $virtual_width$$ = Math.max($virtual_width$$, 1);
  $virtual_height$$ = Math.max($virtual_height$$, 1);
  if ($JSCompiler_StaticMethods_JSC$2019_set_size_graphical$self$$.$V$ !== $width$jscomp$31$$ || $JSCompiler_StaticMethods_JSC$2019_set_size_graphical$self$$.$va$ !== $height$jscomp$29$$ || $JSCompiler_StaticMethods_JSC$2019_set_size_graphical$self$$.$l$ !== $virtual_width$$ || $JSCompiler_StaticMethods_JSC$2019_set_size_graphical$self$$.$La$ !== $virtual_height$$) {
    $JSCompiler_StaticMethods_JSC$2019_set_size_graphical$self$$.$V$ = $width$jscomp$31$$;
    $JSCompiler_StaticMethods_JSC$2019_set_size_graphical$self$$.$va$ = $height$jscomp$29$$;
    $JSCompiler_StaticMethods_JSC$2019_set_size_graphical$self$$.$l$ = $virtual_width$$;
    $JSCompiler_StaticMethods_JSC$2019_set_size_graphical$self$$.$La$ = $virtual_height$$;
    if ("undefined" !== typeof ImageData) {
      const $size$jscomp$39$$ = $virtual_width$$ * $virtual_height$$, $offset$jscomp$73$$ = $JSCompiler_StaticMethods_JSC$2019_set_size_graphical$self$$.$cpu$.$Ma$($size$jscomp$39$$) >>> 0;
      $JSCompiler_StaticMethods_JSC$2019_set_size_graphical$self$$.$Ra$ = $offset$jscomp$73$$;
      $JSCompiler_StaticMethods_JSC$2019_set_size_graphical$self$$.$image_data$ = new ImageData(new Uint8ClampedArray($JSCompiler_StaticMethods_JSC$2019_set_size_graphical$self$$.$cpu$.$wasm_memory$.buffer, $offset$jscomp$73$$, 4 * $size$jscomp$39$$), $virtual_width$$, $virtual_height$$);
      $JSCompiler_StaticMethods_JSC$2019_set_size_graphical$self$$.$cpu$.$pa$();
    }
    $JSCompiler_StaticMethods_JSC$2019_set_size_graphical$self$$.screen.$h$($width$jscomp$31$$, $height$jscomp$29$$);
    $JSCompiler_StaticMethods_JSC$2019_set_size_graphical$self$$.$bus$.send("screen-set-size", [$width$jscomp$31$$, $height$jscomp$29$$, $bpp$$]);
  }
}
function $JSCompiler_StaticMethods_update_vga_size$$($JSCompiler_StaticMethods_update_vga_size$self$$) {
  if (!$JSCompiler_StaticMethods_update_vga_size$self$$.$j$) {
    var $horizontal_characters_screen_width$$ = Math.min(1 + $JSCompiler_StaticMethods_update_vga_size$self$$.$na$, $JSCompiler_StaticMethods_update_vga_size$self$$.$ma$), $screen_height$jscomp$1_vertical_scans$$ = Math.min(1 + $JSCompiler_StaticMethods_update_vga_size$self$$.$A$, $JSCompiler_StaticMethods_update_vga_size$self$$.$u$);
    if ($horizontal_characters_screen_width$$ && $screen_height$jscomp$1_vertical_scans$$) {
      if ($JSCompiler_StaticMethods_update_vga_size$self$$.$g$) {
        $horizontal_characters_screen_width$$ <<= 3;
        var $height$jscomp$30_virtual_width$jscomp$1$$ = $JSCompiler_StaticMethods_update_vga_size$self$$.$J$ << 4, $bpp$jscomp$1$$ = 4;
        $JSCompiler_StaticMethods_update_vga_size$self$$.$i$ & 64 ? ($horizontal_characters_screen_width$$ >>>= 1, $height$jscomp$30_virtual_width$jscomp$1$$ >>>= 1, $bpp$jscomp$1$$ = 8) : $JSCompiler_StaticMethods_update_vga_size$self$$.$i$ & 2 && ($bpp$jscomp$1$$ = 1);
        $screen_height$jscomp$1_vertical_scans$$ = $JSCompiler_StaticMethods_scan_line_to_screen_row$$($JSCompiler_StaticMethods_update_vga_size$self$$, $screen_height$jscomp$1_vertical_scans$$);
        var $available_bytes$$ = $VGA_HOST_MEMORY_SPACE_SIZE$$module$src$vga$$[0];
        var $JSCompiler_inline_result$jscomp$71_bytes_per_line$jscomp$inline_564$$ = $JSCompiler_StaticMethods_update_vga_size$self$$.$J$ << 2;
        $JSCompiler_StaticMethods_update_vga_size$self$$.$W$ & 64 ? $JSCompiler_inline_result$jscomp$71_bytes_per_line$jscomp$inline_564$$ <<= 1 : $JSCompiler_StaticMethods_update_vga_size$self$$.$o$ & 64 && ($JSCompiler_inline_result$jscomp$71_bytes_per_line$jscomp$inline_564$$ >>>= 1);
        $JSCompiler_StaticMethods_JSC$2019_set_size_graphical$$($JSCompiler_StaticMethods_update_vga_size$self$$, $horizontal_characters_screen_width$$, $screen_height$jscomp$1_vertical_scans$$, $height$jscomp$30_virtual_width$jscomp$1$$, $JSCompiler_inline_result$jscomp$71_bytes_per_line$jscomp$inline_564$$ ? Math.ceil($available_bytes$$ / $JSCompiler_inline_result$jscomp$71_bytes_per_line$jscomp$inline_564$$) : $screen_height$jscomp$1_vertical_scans$$, $bpp$jscomp$1$$);
        $JSCompiler_StaticMethods_update_vertical_retrace$$($JSCompiler_StaticMethods_update_vga_size$self$$);
        $JSCompiler_StaticMethods_update_layers$$($JSCompiler_StaticMethods_update_vga_size$self$$);
      } else {
        $JSCompiler_StaticMethods_update_vga_size$self$$.$I$ & 128 && ($screen_height$jscomp$1_vertical_scans$$ >>>= 1), $height$jscomp$30_virtual_width$jscomp$1$$ = $screen_height$jscomp$1_vertical_scans$$ / (1 + ($JSCompiler_StaticMethods_update_vga_size$self$$.$I$ & 31)) | 0, $horizontal_characters_screen_width$$ && $height$jscomp$30_virtual_width$jscomp$1$$ && $JSCompiler_StaticMethods_JSC$2019_set_size_text$$($JSCompiler_StaticMethods_update_vga_size$self$$, $horizontal_characters_screen_width$$, 
        $height$jscomp$30_virtual_width$jscomp$1$$);
      }
    }
  }
}
function $JSCompiler_StaticMethods_update_layers$$($JSCompiler_StaticMethods_update_layers$self$$) {
  $JSCompiler_StaticMethods_update_layers$self$$.$g$ || $JSCompiler_StaticMethods_text_mode_redraw$$($JSCompiler_StaticMethods_update_layers$self$$);
  if ($JSCompiler_StaticMethods_update_layers$self$$.$j$) {
    $JSCompiler_StaticMethods_update_layers$self$$.$pa$ = [];
  } else {
    if ($JSCompiler_StaticMethods_update_layers$self$$.$l$ && $JSCompiler_StaticMethods_update_layers$self$$.$V$) {
      if (!$JSCompiler_StaticMethods_update_layers$self$$.$ra$ || $JSCompiler_StaticMethods_update_layers$self$$.$X$ & 32) {
        $JSCompiler_StaticMethods_update_layers$self$$.$pa$ = [], $JSCompiler_StaticMethods_update_layers$self$$.screen.$C$();
      } else {
        var $start_addr_start_buffer_row_start_split_col$$ = $JSCompiler_StaticMethods_update_layers$self$$.$Ka$, $pixel_panning$$ = $JSCompiler_StaticMethods_update_layers$self$$.$oa$;
        $JSCompiler_StaticMethods_update_layers$self$$.$i$ & 64 && ($pixel_panning$$ >>>= 1);
        var $byte_panning$$ = $JSCompiler_StaticMethods_update_layers$self$$.$Ja$ >> 5 & 3, $pixel_addr_start_split_screen_row$jscomp$1$$ = $JSCompiler_StaticMethods_vga_addr_to_pixel$$($JSCompiler_StaticMethods_update_layers$self$$, $start_addr_start_buffer_row_start_split_col$$ + $byte_panning$$);
        $start_addr_start_buffer_row_start_split_col$$ = $pixel_addr_start_split_screen_row$jscomp$1$$ / $JSCompiler_StaticMethods_update_layers$self$$.$l$ | 0;
        var $start_buffer_col_x$jscomp$119$$ = $pixel_addr_start_split_screen_row$jscomp$1$$ % $JSCompiler_StaticMethods_update_layers$self$$.$l$ + $pixel_panning$$;
        $pixel_addr_start_split_screen_row$jscomp$1$$ = $JSCompiler_StaticMethods_scan_line_to_screen_row$$($JSCompiler_StaticMethods_update_layers$self$$, 1 + $JSCompiler_StaticMethods_update_layers$self$$.$B$);
        $pixel_addr_start_split_screen_row$jscomp$1$$ = Math.min($pixel_addr_start_split_screen_row$jscomp$1$$, $JSCompiler_StaticMethods_update_layers$self$$.$va$);
        var $split_buffer_height$$ = $JSCompiler_StaticMethods_update_layers$self$$.$va$ - $pixel_addr_start_split_screen_row$jscomp$1$$;
        $JSCompiler_StaticMethods_update_layers$self$$.$pa$ = [];
        $start_buffer_col_x$jscomp$119$$ = -$start_buffer_col_x$jscomp$119$$;
        for (var $y$jscomp$77$$ = 0; $start_buffer_col_x$jscomp$119$$ < $JSCompiler_StaticMethods_update_layers$self$$.$V$; $start_buffer_col_x$jscomp$119$$ += $JSCompiler_StaticMethods_update_layers$self$$.$l$, $y$jscomp$77$$++) {
          $JSCompiler_StaticMethods_update_layers$self$$.$pa$.push({$image_data$:$JSCompiler_StaticMethods_update_layers$self$$.$image_data$, $screen_x$:$start_buffer_col_x$jscomp$119$$, $screen_y$:0, $buffer_x$:0, $buffer_y$:$start_addr_start_buffer_row_start_split_col$$ + $y$jscomp$77$$, $buffer_width$:$JSCompiler_StaticMethods_update_layers$self$$.$l$, $buffer_height$:$pixel_addr_start_split_screen_row$jscomp$1$$, });
        }
        $start_addr_start_buffer_row_start_split_col$$ = 0;
        $JSCompiler_StaticMethods_update_layers$self$$.$i$ & 32 || ($start_addr_start_buffer_row_start_split_col$$ = $JSCompiler_StaticMethods_vga_addr_to_pixel$$($JSCompiler_StaticMethods_update_layers$self$$, $byte_panning$$) + $pixel_panning$$);
        $start_buffer_col_x$jscomp$119$$ = -$start_addr_start_buffer_row_start_split_col$$;
        for ($y$jscomp$77$$ = 0; $start_buffer_col_x$jscomp$119$$ < $JSCompiler_StaticMethods_update_layers$self$$.$V$; $start_buffer_col_x$jscomp$119$$ += $JSCompiler_StaticMethods_update_layers$self$$.$l$, $y$jscomp$77$$++) {
          $JSCompiler_StaticMethods_update_layers$self$$.$pa$.push({$image_data$:$JSCompiler_StaticMethods_update_layers$self$$.$image_data$, $screen_x$:$start_buffer_col_x$jscomp$119$$, $screen_y$:$pixel_addr_start_split_screen_row$jscomp$1$$, $buffer_x$:0, $buffer_y$:$y$jscomp$77$$, $buffer_width$:$JSCompiler_StaticMethods_update_layers$self$$.$l$, $buffer_height$:$split_buffer_height$$, });
        }
      }
    }
  }
}
function $JSCompiler_StaticMethods_update_vertical_retrace$$($JSCompiler_StaticMethods_update_vertical_retrace$self$$) {
  $JSCompiler_StaticMethods_update_vertical_retrace$self$$.$C$ |= 8;
  $JSCompiler_StaticMethods_update_vertical_retrace$self$$.$Ka$ !== $JSCompiler_StaticMethods_update_vertical_retrace$self$$.$h$ && ($JSCompiler_StaticMethods_update_vertical_retrace$self$$.$Ka$ = $JSCompiler_StaticMethods_update_vertical_retrace$self$$.$h$, $JSCompiler_StaticMethods_update_layers$$($JSCompiler_StaticMethods_update_vertical_retrace$self$$));
}
function $JSCompiler_StaticMethods_JSC$2019_update_cursor_scanline$$($JSCompiler_StaticMethods_JSC$2019_update_cursor_scanline$self$$) {
  var $end$jscomp$23_max$jscomp$3$$ = $JSCompiler_StaticMethods_JSC$2019_update_cursor_scanline$self$$.$I$ & 31;
  const $start$jscomp$39$$ = Math.min($end$jscomp$23_max$jscomp$3$$, $JSCompiler_StaticMethods_JSC$2019_update_cursor_scanline$self$$.$ja$ & 31);
  $end$jscomp$23_max$jscomp$3$$ = Math.min($end$jscomp$23_max$jscomp$3$$, $JSCompiler_StaticMethods_JSC$2019_update_cursor_scanline$self$$.$Aa$ & 31);
  $JSCompiler_StaticMethods_JSC$2019_update_cursor_scanline$self$$.screen.$B$($start$jscomp$39$$, $end$jscomp$23_max$jscomp$3$$, !($JSCompiler_StaticMethods_JSC$2019_update_cursor_scanline$self$$.$ja$ & 32) && $start$jscomp$39$$ < $end$jscomp$23_max$jscomp$3$$);
}
$JSCompiler_prototypeAlias$$.$port3C0_write$ = function($value$jscomp$172$$) {
  if (-1 === this.$D$) {
    this.$D$ = $value$jscomp$172$$ & 31, this.$ra$ !== ($value$jscomp$172$$ & 32) && (this.$ra$ = $value$jscomp$172$$ & 32, $JSCompiler_StaticMethods_update_layers$$(this));
  } else {
    if (16 > this.$D$) {
      this.$O$[this.$D$] = $value$jscomp$172$$, this.$i$ & 64 || $JSCompiler_StaticMethods_complete_redraw$$(this);
    } else {
      switch(this.$D$) {
        case 16:
          if (this.$i$ !== $value$jscomp$172$$) {
            var $previous_mode$$ = this.$i$;
            this.$i$ = $value$jscomp$172$$;
            const $is_graphical$jscomp$1$$ = 0 !== ($value$jscomp$172$$ & 1);
            this.$j$ || this.$g$ === $is_graphical$jscomp$1$$ || (this.$g$ = $is_graphical$jscomp$1$$, this.screen.$g$(this.$g$));
            ($previous_mode$$ ^ $value$jscomp$172$$) & 64 && $JSCompiler_StaticMethods_complete_replot$$(this);
            $JSCompiler_StaticMethods_update_vga_size$$(this);
            $JSCompiler_StaticMethods_complete_redraw$$(this);
            $JSCompiler_StaticMethods_JSC$2019_set_font_bitmap$$(this, !1);
          }
          break;
        case 18:
          this.$ha$ !== $value$jscomp$172$$ && (this.$ha$ = $value$jscomp$172$$, $JSCompiler_StaticMethods_complete_redraw$$(this));
          break;
        case 19:
          this.$oa$ !== $value$jscomp$172$$ && (this.$oa$ = $value$jscomp$172$$ & 15, $JSCompiler_StaticMethods_update_layers$$(this));
          break;
        case 20:
          this.$aa$ !== $value$jscomp$172$$ && (this.$aa$ = $value$jscomp$172$$, $JSCompiler_StaticMethods_complete_redraw$$(this));
      }
    }
    this.$D$ = -1;
  }
};
$JSCompiler_prototypeAlias$$.$port3C0_read$ = function() {
  return (this.$D$ | this.$ra$) & 255;
};
$JSCompiler_prototypeAlias$$.$port3C0_read16$ = function() {
  return this.$port3C0_read$() | this.$port3C1_read$() << 8 & 65280;
};
$JSCompiler_prototypeAlias$$.$port3C1_read$ = function() {
  if (16 > this.$D$) {
    return this.$O$[this.$D$] & 255;
  }
  switch(this.$D$) {
    case 16:
      return this.$i$;
    case 18:
      return this.$ha$;
    case 19:
      return this.$oa$;
    case 20:
      return this.$aa$;
  }
  return 255;
};
$JSCompiler_prototypeAlias$$.$port3C2_write$ = function($value$jscomp$173$$) {
  this.$Ma$ = $value$jscomp$173$$;
};
$JSCompiler_prototypeAlias$$.$port3C4_write$ = function($value$jscomp$174$$) {
  this.$wa$ = $value$jscomp$174$$;
};
$JSCompiler_prototypeAlias$$.$port3C4_read$ = function() {
  return this.$wa$;
};
$JSCompiler_prototypeAlias$$.$port3C5_write$ = function($value$jscomp$175$$) {
  switch(this.$wa$) {
    case 1:
      var $previous_character_map_select_previous_clocking_mode_previous_plane_write_bm$$ = this.$X$;
      this.$X$ = $value$jscomp$175$$;
      ($previous_character_map_select_previous_clocking_mode_previous_plane_write_bm$$ ^ $value$jscomp$175$$) & 32 && $JSCompiler_StaticMethods_update_layers$$(this);
      $JSCompiler_StaticMethods_JSC$2019_set_font_bitmap$$(this, !1);
      break;
    case 2:
      $previous_character_map_select_previous_clocking_mode_previous_plane_write_bm$$ = this.$U$;
      this.$U$ = $value$jscomp$175$$;
      this.$g$ || !($previous_character_map_select_previous_clocking_mode_previous_plane_write_bm$$ & 4) || this.$U$ & 4 || $JSCompiler_StaticMethods_JSC$2019_set_font_bitmap$$(this, !0);
      break;
    case 3:
      $previous_character_map_select_previous_clocking_mode_previous_plane_write_bm$$ = this.$N$;
      this.$N$ = $value$jscomp$175$$;
      this.$g$ || $previous_character_map_select_previous_clocking_mode_previous_plane_write_bm$$ === $value$jscomp$175$$ || $JSCompiler_StaticMethods_JSC$2019_set_font_page$$(this);
      break;
    case 4:
      this.$xa$ = $value$jscomp$175$$;
  }
};
$JSCompiler_prototypeAlias$$.$port3C5_read$ = function() {
  switch(this.$wa$) {
    case 1:
      return this.$X$;
    case 2:
      return this.$U$;
    case 3:
      return this.$N$;
    case 4:
      return this.$xa$;
    case 6:
      return 18;
  }
  return 0;
};
$JSCompiler_prototypeAlias$$.$port3C6_write$ = function($data$jscomp$215$$) {
  this.$P$ !== $data$jscomp$215$$ && (this.$P$ = $data$jscomp$215$$, $JSCompiler_StaticMethods_complete_redraw$$(this));
};
$JSCompiler_prototypeAlias$$.$port3C6_read$ = function() {
  return this.$P$;
};
$JSCompiler_prototypeAlias$$.$port3C7_write$ = function($index$jscomp$83$$) {
  this.$ka$ = 3 * $index$jscomp$83$$;
  this.$ca$ &= 0;
};
$JSCompiler_prototypeAlias$$.$port3C7_read$ = function() {
  return this.$ca$;
};
$JSCompiler_prototypeAlias$$.$port3C8_write$ = function($index$jscomp$84$$) {
  this.$ba$ = 3 * $index$jscomp$84$$;
  this.$ca$ |= 3;
};
$JSCompiler_prototypeAlias$$.$port3C8_read$ = function() {
  return this.$ba$ / 3 & 255;
};
$JSCompiler_prototypeAlias$$.$port3C9_write$ = function($color_byte$$) {
  var $index$jscomp$85$$ = this.$ba$ / 3 | 0, $offset$jscomp$74$$ = this.$ba$ % 3, $color$jscomp$4$$ = this.$H$[$index$jscomp$85$$];
  if (0 === (this.$R$ & 32)) {
    $color_byte$$ &= 63;
    const $b$jscomp$2$$ = $color_byte$$ & 1;
    $color_byte$$ = $color_byte$$ << 2 | $b$jscomp$2$$ << 1 | $b$jscomp$2$$;
  }
  $color$jscomp$4$$ = 0 === $offset$jscomp$74$$ ? $color$jscomp$4$$ & -16711681 | $color_byte$$ << 16 : 1 === $offset$jscomp$74$$ ? $color$jscomp$4$$ & -65281 | $color_byte$$ << 8 : $color$jscomp$4$$ & -256 | $color_byte$$;
  this.$H$[$index$jscomp$85$$] !== $color$jscomp$4$$ && (this.$H$[$index$jscomp$85$$] = $color$jscomp$4$$, $JSCompiler_StaticMethods_complete_redraw$$(this));
  this.$ba$++;
};
$JSCompiler_prototypeAlias$$.$port3C9_read$ = function() {
  var $color8$$ = this.$H$[this.$ka$ / 3 | 0] >> 8 * (2 - this.$ka$ % 3) & 255;
  this.$ka$++;
  return this.$R$ & 32 ? $color8$$ : $color8$$ >> 2;
};
$JSCompiler_prototypeAlias$$.$port3CC_read$ = function() {
  return this.$Ma$;
};
$JSCompiler_prototypeAlias$$.$port3CE_write$ = function($value$jscomp$176$$) {
  this.$la$ = $value$jscomp$176$$;
};
$JSCompiler_prototypeAlias$$.$port3CE_read$ = function() {
  return this.$la$;
};
$JSCompiler_prototypeAlias$$.$port3CF_write$ = function($value$jscomp$177$$) {
  switch(this.$la$) {
    case 0:
      this.$ta$ = $value$jscomp$177$$;
      break;
    case 1:
      this.$Ha$ = $value$jscomp$177$$;
      break;
    case 2:
      this.$Y$ = $value$jscomp$177$$;
      break;
    case 3:
      this.$fa$ = $value$jscomp$177$$;
      break;
    case 4:
      this.$Ia$ = $value$jscomp$177$$;
      break;
    case 5:
      var $previous_planar_mode$$ = this.$T$;
      this.$T$ = $value$jscomp$177$$;
      ($previous_planar_mode$$ ^ $value$jscomp$177$$) & 96 && $JSCompiler_StaticMethods_complete_replot$$(this);
      break;
    case 6:
      this.$ea$ !== $value$jscomp$177$$ && (this.$ea$ = $value$jscomp$177$$, $JSCompiler_StaticMethods_update_vga_size$$(this));
      break;
    case 7:
      this.$Z$ = $value$jscomp$177$$;
      break;
    case 8:
      this.$Ga$ = $value$jscomp$177$$;
  }
};
$JSCompiler_prototypeAlias$$.$port3CF_read$ = function() {
  switch(this.$la$) {
    case 0:
      return this.$ta$;
    case 1:
      return this.$Ha$;
    case 2:
      return this.$Y$;
    case 3:
      return this.$fa$;
    case 4:
      return this.$Ia$;
    case 5:
      return this.$T$;
    case 6:
      return this.$ea$;
    case 7:
      return this.$Z$;
    case 8:
      return this.$Ga$;
  }
  return 0;
};
$JSCompiler_prototypeAlias$$.$port3D4_write$ = function($register$jscomp$15$$) {
  this.$L$ = $register$jscomp$15$$;
};
$JSCompiler_prototypeAlias$$.$port3D4_write16$ = function($register$jscomp$16$$) {
  this.$port3D4_write$($register$jscomp$16$$ & 255);
  this.$port3D5_write$($register$jscomp$16$$ >> 8 & 255);
};
$JSCompiler_prototypeAlias$$.$port3D4_read$ = function() {
  return this.$L$;
};
$JSCompiler_prototypeAlias$$.$port3D5_write$ = function($value$jscomp$178$$) {
  switch(this.$L$) {
    case 1:
      this.$na$ !== $value$jscomp$178$$ && (this.$na$ = $value$jscomp$178$$, $JSCompiler_StaticMethods_update_vga_size$$(this));
      break;
    case 2:
      this.$ma$ !== $value$jscomp$178$$ && (this.$ma$ = $value$jscomp$178$$, $JSCompiler_StaticMethods_update_vga_size$$(this));
      break;
    case 7:
      var $previous_mode$jscomp$1_previous_underline_previous_vertical_blank_start_previous_vertical_display_enable_end$$ = this.$A$;
      this.$A$ &= 255;
      this.$A$ = this.$A$ | $value$jscomp$178$$ << 3 & 512 | $value$jscomp$178$$ << 7 & 256;
      $previous_mode$jscomp$1_previous_underline_previous_vertical_blank_start_previous_vertical_display_enable_end$$ !== this.$A$ && $JSCompiler_StaticMethods_update_vga_size$$(this);
      this.$B$ = this.$B$ & 767 | $value$jscomp$178$$ << 4 & 256;
      $previous_mode$jscomp$1_previous_underline_previous_vertical_blank_start_previous_vertical_display_enable_end$$ = this.$u$;
      this.$u$ = this.$u$ & 767 | $value$jscomp$178$$ << 5 & 256;
      $previous_mode$jscomp$1_previous_underline_previous_vertical_blank_start_previous_vertical_display_enable_end$$ !== this.$u$ && $JSCompiler_StaticMethods_update_vga_size$$(this);
      $JSCompiler_StaticMethods_update_layers$$(this);
      break;
    case 8:
      this.$Ja$ = $value$jscomp$178$$;
      $JSCompiler_StaticMethods_update_layers$$(this);
      break;
    case 9:
      var $previous_max_scan_line$$ = this.$I$;
      this.$I$ = $value$jscomp$178$$;
      this.$B$ = this.$B$ & 511 | $value$jscomp$178$$ << 3 & 512;
      $previous_mode$jscomp$1_previous_underline_previous_vertical_blank_start_previous_vertical_display_enable_end$$ = this.$u$;
      this.$u$ = this.$u$ & 511 | $value$jscomp$178$$ << 4 & 512;
      (($previous_max_scan_line$$ ^ this.$I$) & 159 || $previous_mode$jscomp$1_previous_underline_previous_vertical_blank_start_previous_vertical_display_enable_end$$ !== this.$u$) && $JSCompiler_StaticMethods_update_vga_size$$(this);
      $JSCompiler_StaticMethods_JSC$2019_update_cursor_scanline$$(this);
      $JSCompiler_StaticMethods_update_layers$$(this);
      $JSCompiler_StaticMethods_JSC$2019_set_font_bitmap$$(this, !1);
      break;
    case 10:
      this.$ja$ = $value$jscomp$178$$;
      $JSCompiler_StaticMethods_JSC$2019_update_cursor_scanline$$(this);
      break;
    case 11:
      this.$Aa$ = $value$jscomp$178$$;
      $JSCompiler_StaticMethods_JSC$2019_update_cursor_scanline$$(this);
      break;
    case 12:
      (this.$h$ >> 8 & 255) !== $value$jscomp$178$$ && (this.$h$ = this.$h$ & 255 | $value$jscomp$178$$ << 8, $JSCompiler_StaticMethods_update_layers$$(this), ~this.$o$ & 3 && $JSCompiler_StaticMethods_complete_replot$$(this));
      break;
    case 13:
      (this.$h$ & 255) !== $value$jscomp$178$$ && (this.$h$ = this.$h$ & 65280 | $value$jscomp$178$$, $JSCompiler_StaticMethods_update_layers$$(this), ~this.$o$ & 3 && $JSCompiler_StaticMethods_complete_replot$$(this));
      break;
    case 14:
      this.$F$ = this.$F$ & 255 | $value$jscomp$178$$ << 8;
      $JSCompiler_StaticMethods_JSC$2019_update_cursor$$(this);
      break;
    case 15:
      this.$F$ = this.$F$ & 65280 | $value$jscomp$178$$;
      $JSCompiler_StaticMethods_JSC$2019_update_cursor$$(this);
      break;
    case 18:
      (this.$A$ & 255) !== $value$jscomp$178$$ && (this.$A$ = this.$A$ & 768 | $value$jscomp$178$$, $JSCompiler_StaticMethods_update_vga_size$$(this));
      break;
    case 19:
      this.$J$ !== $value$jscomp$178$$ && (this.$J$ = $value$jscomp$178$$, $JSCompiler_StaticMethods_update_vga_size$$(this), ~this.$o$ & 3 && $JSCompiler_StaticMethods_complete_replot$$(this));
      break;
    case 20:
      this.$W$ !== $value$jscomp$178$$ && ($previous_mode$jscomp$1_previous_underline_previous_vertical_blank_start_previous_vertical_display_enable_end$$ = this.$W$, this.$W$ = $value$jscomp$178$$, $JSCompiler_StaticMethods_update_vga_size$$(this), ($previous_mode$jscomp$1_previous_underline_previous_vertical_blank_start_previous_vertical_display_enable_end$$ ^ $value$jscomp$178$$) & 64 && $JSCompiler_StaticMethods_complete_replot$$(this));
      break;
    case 21:
      (this.$u$ & 255) !== $value$jscomp$178$$ && (this.$u$ = this.$u$ & 768 | $value$jscomp$178$$, $JSCompiler_StaticMethods_update_vga_size$$(this));
      break;
    case 23:
      this.$o$ !== $value$jscomp$178$$ && ($previous_mode$jscomp$1_previous_underline_previous_vertical_blank_start_previous_vertical_display_enable_end$$ = this.$o$, this.$o$ = $value$jscomp$178$$, $JSCompiler_StaticMethods_update_vga_size$$(this), ($previous_mode$jscomp$1_previous_underline_previous_vertical_blank_start_previous_vertical_display_enable_end$$ ^ $value$jscomp$178$$) & 67 && $JSCompiler_StaticMethods_complete_replot$$(this));
      break;
    case 24:
      this.$B$ = this.$B$ & 768 | $value$jscomp$178$$;
      $JSCompiler_StaticMethods_update_layers$$(this);
      break;
    default:
      this.$L$ < this.$ia$.length && (this.$ia$[this.$L$] = $value$jscomp$178$$);
  }
};
$JSCompiler_prototypeAlias$$.$port3D5_write16$ = function($register$jscomp$17$$) {
  this.$port3D5_write$($register$jscomp$17$$ & 255);
};
$JSCompiler_prototypeAlias$$.$port3D5_read$ = function() {
  switch(this.$L$) {
    case 1:
      return this.$na$;
    case 2:
      return this.$ma$;
    case 7:
      return this.$A$ >> 7 & 2 | this.$u$ >> 5 & 8 | this.$B$ >> 4 & 16 | this.$A$ >> 3 & 64;
    case 8:
      return this.$Ja$;
    case 9:
      return this.$I$;
    case 10:
      return this.$ja$;
    case 11:
      return this.$Aa$;
    case 12:
      return this.$h$ & 255;
    case 13:
      return this.$h$ >> 8;
    case 14:
      return this.$F$ >> 8;
    case 15:
      return this.$F$ & 255;
    case 18:
      return this.$A$ & 255;
    case 19:
      return this.$J$;
    case 20:
      return this.$W$;
    case 21:
      return this.$u$ & 255;
    case 23:
      return this.$o$;
    case 24:
      return this.$B$ & 255;
  }
  return this.$L$ < this.$ia$.length ? this.$ia$[this.$L$] : 0;
};
$JSCompiler_prototypeAlias$$.$port3D5_read16$ = function() {
  return this.$port3D5_read$();
};
$JSCompiler_prototypeAlias$$.$port3DA_read$ = function() {
  var $value$jscomp$179$$ = this.$C$;
  this.$g$ ? (this.$C$ ^= 1, this.$C$ &= 1) : (this.$C$ & 1 && (this.$C$ ^= 8), this.$C$ ^= 1);
  this.$D$ = -1;
  return $value$jscomp$179$$;
};
$JSCompiler_prototypeAlias$$.$port1CE_write$ = function($value$jscomp$180$$) {
  this.$Fa$ = $value$jscomp$180$$;
};
$JSCompiler_prototypeAlias$$.$port1CF_write$ = function($is_graphical$jscomp$2_value$jscomp$181$$) {
  const $was_enabled$$ = this.$j$;
  switch(this.$Fa$) {
    case 0:
      45248 <= $is_graphical$jscomp$2_value$jscomp$181$$ && 45253 >= $is_graphical$jscomp$2_value$jscomp$181$$ && (this.$Sa$ = $is_graphical$jscomp$2_value$jscomp$181$$);
      break;
    case 1:
      this.$s$ = $is_graphical$jscomp$2_value$jscomp$181$$;
      2560 < this.$s$ && (this.$s$ = 2560);
      break;
    case 2:
      this.$G$ = $is_graphical$jscomp$2_value$jscomp$181$$;
      1600 < this.$G$ && (this.$G$ = 1600);
      break;
    case 3:
      this.$M$ = $is_graphical$jscomp$2_value$jscomp$181$$;
      break;
    case 4:
      (this.$j$ = 1 === ($is_graphical$jscomp$2_value$jscomp$181$$ & 1)) && 0 === ($is_graphical$jscomp$2_value$jscomp$181$$ & 128) && this.$Qa$.fill(0);
      this.$R$ = $is_graphical$jscomp$2_value$jscomp$181$$;
      break;
    case 5:
      this.$ga$ = $is_graphical$jscomp$2_value$jscomp$181$$ << 16;
      break;
    case 8:
      this.$ya$ !== $is_graphical$jscomp$2_value$jscomp$181$$ && (this.$ya$ = $is_graphical$jscomp$2_value$jscomp$181$$, this.$$$ = this.$za$ * this.$s$ + this.$ya$, $JSCompiler_StaticMethods_complete_redraw$$(this));
      break;
    case 9:
      this.$za$ !== $is_graphical$jscomp$2_value$jscomp$181$$ && (this.$za$ = $is_graphical$jscomp$2_value$jscomp$181$$, this.$$$ = this.$za$ * this.$s$ + this.$ya$, $JSCompiler_StaticMethods_complete_redraw$$(this));
  }
  !this.$j$ || this.$s$ && this.$G$ || (this.$j$ = !1);
  this.$j$ && !$was_enabled$$ && (this.$za$ = this.$ya$ = this.$$$ = 0, this.$g$ = !0, this.screen.$g$(this.$g$), $JSCompiler_StaticMethods_JSC$2019_set_size_graphical$$(this, this.$s$, this.$G$, this.$s$, this.$G$, this.$M$));
  $was_enabled$$ && !this.$j$ && (this.$g$ = $is_graphical$jscomp$2_value$jscomp$181$$ = 0 !== (this.$i$ & 1), this.screen.$g$($is_graphical$jscomp$2_value$jscomp$181$$), $JSCompiler_StaticMethods_update_vga_size$$(this), $JSCompiler_StaticMethods_JSC$2019_set_font_bitmap$$(this, !1), $JSCompiler_StaticMethods_complete_redraw$$(this));
  this.$j$ || (this.$ga$ = 0);
  $JSCompiler_StaticMethods_update_layers$$(this);
};
$JSCompiler_prototypeAlias$$.$port1CF_read$ = function() {
  return $JSCompiler_StaticMethods_svga_register_read$$(this, this.$Fa$);
};
function $JSCompiler_StaticMethods_svga_register_read$$($JSCompiler_StaticMethods_svga_register_read$self$$, $n$jscomp$13$$) {
  switch($n$jscomp$13$$) {
    case 0:
      return $JSCompiler_StaticMethods_svga_register_read$self$$.$Sa$;
    case 1:
      return $JSCompiler_StaticMethods_svga_register_read$self$$.$R$ & 2 ? 2560 : $JSCompiler_StaticMethods_svga_register_read$self$$.$s$;
    case 2:
      return $JSCompiler_StaticMethods_svga_register_read$self$$.$R$ & 2 ? 1600 : $JSCompiler_StaticMethods_svga_register_read$self$$.$G$;
    case 3:
      return $JSCompiler_StaticMethods_svga_register_read$self$$.$R$ & 2 ? 32 : $JSCompiler_StaticMethods_svga_register_read$self$$.$M$;
    case 4:
      return $JSCompiler_StaticMethods_svga_register_read$self$$.$R$;
    case 5:
      return $JSCompiler_StaticMethods_svga_register_read$self$$.$ga$ >>> 16;
    case 6:
      return $JSCompiler_StaticMethods_svga_register_read$self$$.$V$ ? $JSCompiler_StaticMethods_svga_register_read$self$$.$V$ : 1;
    case 8:
      return $JSCompiler_StaticMethods_svga_register_read$self$$.$ya$;
    case 9:
      return $JSCompiler_StaticMethods_svga_register_read$self$$.$za$;
    case 10:
      return $JSCompiler_StaticMethods_svga_register_read$self$$.$vga_memory_size$ / 65536 | 0;
  }
  return 255;
}
$JSCompiler_prototypeAlias$$.$screen_fill_buffer$ = function() {
  if (this.$g$) {
    if (0 === this.$image_data$.data.byteLength) {
      var $buffer$jscomp$55_end$jscomp$inline_567_end$jscomp$inline_586_min_y$$ = new Uint8ClampedArray(this.$cpu$.$wasm_memory$.buffer, this.$Ra$, 4 * this.$l$ * this.$La$);
      this.$image_data$ = new ImageData($buffer$jscomp$55_end$jscomp$inline_567_end$jscomp$inline_586_min_y$$, this.$l$, this.$La$);
      $JSCompiler_StaticMethods_update_layers$$(this);
    }
    if (this.$j$) {
      $buffer$jscomp$55_end$jscomp$inline_567_end$jscomp$inline_586_min_y$$ = 0;
      $buffer$jscomp$inline_587_max_y_shift_mode$jscomp$inline_570$$ = this.$G$;
      if (8 === this.$M$) {
        $buffer$jscomp$56_pel_width$jscomp$inline_571_pixel_addr$jscomp$inline_590_start$jscomp$inline_585$$ = new Int32Array(this.$cpu$.$wasm_memory$.buffer, this.$Ra$, this.$V$ * this.$va$);
        $color$jscomp$inline_592_color256$jscomp$inline_591_pixel_addr$jscomp$inline_572_svga_memory$$ = new Uint8Array(this.$cpu$.$wasm_memory$.buffer, this.$Qa$.byteOffset, this.$vga_memory_size$);
        for (var $addr_shift$jscomp$inline_568_bytes_per_pixel_i$jscomp$88_mask$jscomp$inline_588$$ = 0; $addr_shift$jscomp$inline_568_bytes_per_pixel_i$jscomp$88_mask$jscomp$inline_588$$ < $buffer$jscomp$56_pel_width$jscomp$inline_571_pixel_addr$jscomp$inline_590_start$jscomp$inline_585$$.length; $addr_shift$jscomp$inline_568_bytes_per_pixel_i$jscomp$88_mask$jscomp$inline_588$$++) {
          var $addr_substitution$jscomp$inline_569_color$jscomp$7_colorset$jscomp$inline_589$$ = this.$H$[$color$jscomp$inline_592_color256$jscomp$inline_591_pixel_addr$jscomp$inline_572_svga_memory$$[$addr_shift$jscomp$inline_568_bytes_per_pixel_i$jscomp$88_mask$jscomp$inline_588$$]];
          $buffer$jscomp$56_pel_width$jscomp$inline_571_pixel_addr$jscomp$inline_590_start$jscomp$inline_585$$[$addr_shift$jscomp$inline_568_bytes_per_pixel_i$jscomp$88_mask$jscomp$inline_588$$] = $addr_substitution$jscomp$inline_569_color$jscomp$7_colorset$jscomp$inline_589$$ & 65280 | $addr_substitution$jscomp$inline_569_color$jscomp$7_colorset$jscomp$inline_589$$ << 16 | $addr_substitution$jscomp$inline_569_color$jscomp$7_colorset$jscomp$inline_589$$ >> 16 | 4278190080;
        }
      } else {
        this.$cpu$.$Qa$(this.$M$, this.$$$), $addr_shift$jscomp$inline_568_bytes_per_pixel_i$jscomp$88_mask$jscomp$inline_588$$ = 15 === this.$M$ ? 2 : this.$M$ / 8, $buffer$jscomp$55_end$jscomp$inline_567_end$jscomp$inline_586_min_y$$ = ((this.$cpu$.$Pa$[0] / $addr_shift$jscomp$inline_568_bytes_per_pixel_i$jscomp$88_mask$jscomp$inline_588$$ | 0) - this.$$$) / this.$s$ | 0, $buffer$jscomp$inline_587_max_y_shift_mode$jscomp$inline_570$$ = (((this.$cpu$.$Oa$[0] / $addr_shift$jscomp$inline_568_bytes_per_pixel_i$jscomp$88_mask$jscomp$inline_588$$ | 
        0) - this.$$$) / this.$s$ | 0) + 1;
      }
      $buffer$jscomp$55_end$jscomp$inline_567_end$jscomp$inline_586_min_y$$ < $buffer$jscomp$inline_587_max_y_shift_mode$jscomp$inline_570$$ && ($buffer$jscomp$55_end$jscomp$inline_567_end$jscomp$inline_586_min_y$$ = Math.max($buffer$jscomp$55_end$jscomp$inline_567_end$jscomp$inline_586_min_y$$, 0), $buffer$jscomp$inline_587_max_y_shift_mode$jscomp$inline_570$$ = Math.min($buffer$jscomp$inline_587_max_y_shift_mode$jscomp$inline_570$$, this.$G$), this.screen.$l$([{$image_data$:this.$image_data$, $screen_x$:0, 
      $screen_y$:$buffer$jscomp$55_end$jscomp$inline_567_end$jscomp$inline_586_min_y$$, $buffer_x$:0, $buffer_y$:$buffer$jscomp$55_end$jscomp$inline_567_end$jscomp$inline_586_min_y$$, $buffer_width$:this.$s$, $buffer_height$:$buffer$jscomp$inline_587_max_y_shift_mode$jscomp$inline_570$$ - $buffer$jscomp$55_end$jscomp$inline_567_end$jscomp$inline_586_min_y$$, }]));
    } else {
      $buffer$jscomp$55_end$jscomp$inline_567_end$jscomp$inline_586_min_y$$ = Math.min(this.$Da$ | 15, 524287);
      $addr_shift$jscomp$inline_568_bytes_per_pixel_i$jscomp$88_mask$jscomp$inline_588$$ = $JSCompiler_StaticMethods_vga_addr_shift_count$$(this);
      $addr_substitution$jscomp$inline_569_color$jscomp$7_colorset$jscomp$inline_589$$ = ~this.$o$ & 3;
      for (var $buffer$jscomp$inline_587_max_y_shift_mode$jscomp$inline_570$$ = this.$T$ & 96, $buffer$jscomp$56_pel_width$jscomp$inline_571_pixel_addr$jscomp$inline_590_start$jscomp$inline_585$$ = this.$i$ & 64, $color$jscomp$inline_592_color256$jscomp$inline_591_pixel_addr$jscomp$inline_572_svga_memory$$ = this.$Ea$ & -16; $color$jscomp$inline_592_color256$jscomp$inline_591_pixel_addr$jscomp$inline_572_svga_memory$$ <= $buffer$jscomp$55_end$jscomp$inline_567_end$jscomp$inline_586_min_y$$;) {
        var $addr$jscomp$inline_573_shift_loads$jscomp$inline_580$$ = $color$jscomp$inline_592_color256$jscomp$inline_591_pixel_addr$jscomp$inline_572_svga_memory$$ >>> $addr_shift$jscomp$inline_568_bytes_per_pixel_i$jscomp$88_mask$jscomp$inline_588$$;
        if ($addr_substitution$jscomp$inline_569_color$jscomp$7_colorset$jscomp$inline_589$$) {
          var $byte0$jscomp$inline_576_j$jscomp$inline_582_row$jscomp$inline_574$$ = $color$jscomp$inline_592_color256$jscomp$inline_591_pixel_addr$jscomp$inline_572_svga_memory$$ / this.$l$ | 0, $byte1$jscomp$inline_577_col$jscomp$inline_575$$ = $color$jscomp$inline_592_color256$jscomp$inline_591_pixel_addr$jscomp$inline_572_svga_memory$$ - this.$l$ * $byte0$jscomp$inline_576_j$jscomp$inline_582_row$jscomp$inline_574$$;
          switch($addr_substitution$jscomp$inline_569_color$jscomp$7_colorset$jscomp$inline_589$$) {
            case 1:
              $addr$jscomp$inline_573_shift_loads$jscomp$inline_580$$ = ($byte0$jscomp$inline_576_j$jscomp$inline_582_row$jscomp$inline_574$$ & 1) << 13;
              $byte0$jscomp$inline_576_j$jscomp$inline_582_row$jscomp$inline_574$$ >>>= 1;
              break;
            case 2:
              $addr$jscomp$inline_573_shift_loads$jscomp$inline_580$$ = ($byte0$jscomp$inline_576_j$jscomp$inline_582_row$jscomp$inline_574$$ & 1) << 14;
              $byte0$jscomp$inline_576_j$jscomp$inline_582_row$jscomp$inline_574$$ >>>= 1;
              break;
            case 3:
              $addr$jscomp$inline_573_shift_loads$jscomp$inline_580$$ = ($byte0$jscomp$inline_576_j$jscomp$inline_582_row$jscomp$inline_574$$ & 3) << 13, $byte0$jscomp$inline_576_j$jscomp$inline_582_row$jscomp$inline_574$$ >>>= 2;
          }
          $addr$jscomp$inline_573_shift_loads$jscomp$inline_580$$ |= ($byte0$jscomp$inline_576_j$jscomp$inline_582_row$jscomp$inline_574$$ * this.$l$ + $byte1$jscomp$inline_577_col$jscomp$inline_575$$ >>> $addr_shift$jscomp$inline_568_bytes_per_pixel_i$jscomp$88_mask$jscomp$inline_588$$) + this.$h$;
        }
        $byte0$jscomp$inline_576_j$jscomp$inline_582_row$jscomp$inline_574$$ = this.$Na$[$addr$jscomp$inline_573_shift_loads$jscomp$inline_580$$];
        $byte1$jscomp$inline_577_col$jscomp$inline_575$$ = this.$Oa$[$addr$jscomp$inline_573_shift_loads$jscomp$inline_580$$];
        var $byte2$jscomp$inline_578$$ = this.$ua$[$addr$jscomp$inline_573_shift_loads$jscomp$inline_580$$], $byte3$jscomp$inline_579$$ = this.$Pa$[$addr$jscomp$inline_573_shift_loads$jscomp$inline_580$$];
        $addr$jscomp$inline_573_shift_loads$jscomp$inline_580$$ = new Uint8Array(8);
        switch($buffer$jscomp$inline_587_max_y_shift_mode$jscomp$inline_570$$) {
          case 0:
            $byte0$jscomp$inline_576_j$jscomp$inline_582_row$jscomp$inline_574$$ <<= 0;
            $byte1$jscomp$inline_577_col$jscomp$inline_575$$ <<= 1;
            $byte2$jscomp$inline_578$$ <<= 2;
            $byte3$jscomp$inline_579$$ <<= 3;
            for (var $i$jscomp$inline_581$$ = 7; 0 <= $i$jscomp$inline_581$$; $i$jscomp$inline_581$$--) {
              $addr$jscomp$inline_573_shift_loads$jscomp$inline_580$$[7 - $i$jscomp$inline_581$$] = $byte0$jscomp$inline_576_j$jscomp$inline_582_row$jscomp$inline_574$$ >> $i$jscomp$inline_581$$ & 1 | $byte1$jscomp$inline_577_col$jscomp$inline_575$$ >> $i$jscomp$inline_581$$ & 2 | $byte2$jscomp$inline_578$$ >> $i$jscomp$inline_581$$ & 4 | $byte3$jscomp$inline_579$$ >> $i$jscomp$inline_581$$ & 8;
            }
            break;
          case 32:
            $addr$jscomp$inline_573_shift_loads$jscomp$inline_580$$[0] = $byte0$jscomp$inline_576_j$jscomp$inline_582_row$jscomp$inline_574$$ >> 6 & 3 | $byte2$jscomp$inline_578$$ >> 4 & 12;
            $addr$jscomp$inline_573_shift_loads$jscomp$inline_580$$[1] = $byte0$jscomp$inline_576_j$jscomp$inline_582_row$jscomp$inline_574$$ >> 4 & 3 | $byte2$jscomp$inline_578$$ >> 2 & 12;
            $addr$jscomp$inline_573_shift_loads$jscomp$inline_580$$[2] = $byte0$jscomp$inline_576_j$jscomp$inline_582_row$jscomp$inline_574$$ >> 2 & 3 | $byte2$jscomp$inline_578$$ >> 0 & 12;
            $addr$jscomp$inline_573_shift_loads$jscomp$inline_580$$[3] = $byte0$jscomp$inline_576_j$jscomp$inline_582_row$jscomp$inline_574$$ >> 0 & 3 | $byte2$jscomp$inline_578$$ << 2 & 12;
            $addr$jscomp$inline_573_shift_loads$jscomp$inline_580$$[4] = $byte1$jscomp$inline_577_col$jscomp$inline_575$$ >> 6 & 3 | $byte3$jscomp$inline_579$$ >> 4 & 12;
            $addr$jscomp$inline_573_shift_loads$jscomp$inline_580$$[5] = $byte1$jscomp$inline_577_col$jscomp$inline_575$$ >> 4 & 3 | $byte3$jscomp$inline_579$$ >> 2 & 12;
            $addr$jscomp$inline_573_shift_loads$jscomp$inline_580$$[6] = $byte1$jscomp$inline_577_col$jscomp$inline_575$$ >> 2 & 3 | $byte3$jscomp$inline_579$$ >> 0 & 12;
            $addr$jscomp$inline_573_shift_loads$jscomp$inline_580$$[7] = $byte1$jscomp$inline_577_col$jscomp$inline_575$$ >> 0 & 3 | $byte3$jscomp$inline_579$$ << 2 & 12;
            break;
          case 64:
          case 96:
            $addr$jscomp$inline_573_shift_loads$jscomp$inline_580$$[0] = $byte0$jscomp$inline_576_j$jscomp$inline_582_row$jscomp$inline_574$$ >> 4 & 15, $addr$jscomp$inline_573_shift_loads$jscomp$inline_580$$[1] = $byte0$jscomp$inline_576_j$jscomp$inline_582_row$jscomp$inline_574$$ >> 0 & 15, $addr$jscomp$inline_573_shift_loads$jscomp$inline_580$$[2] = $byte1$jscomp$inline_577_col$jscomp$inline_575$$ >> 4 & 15, $addr$jscomp$inline_573_shift_loads$jscomp$inline_580$$[3] = $byte1$jscomp$inline_577_col$jscomp$inline_575$$ >> 
            0 & 15, $addr$jscomp$inline_573_shift_loads$jscomp$inline_580$$[4] = $byte2$jscomp$inline_578$$ >> 4 & 15, $addr$jscomp$inline_573_shift_loads$jscomp$inline_580$$[5] = $byte2$jscomp$inline_578$$ >> 0 & 15, $addr$jscomp$inline_573_shift_loads$jscomp$inline_580$$[6] = $byte3$jscomp$inline_579$$ >> 4 & 15, $addr$jscomp$inline_573_shift_loads$jscomp$inline_580$$[7] = $byte3$jscomp$inline_579$$ >> 0 & 15;
        }
        if ($buffer$jscomp$56_pel_width$jscomp$inline_571_pixel_addr$jscomp$inline_590_start$jscomp$inline_585$$) {
          for ($byte0$jscomp$inline_576_j$jscomp$inline_582_row$jscomp$inline_574$$ = $i$jscomp$inline_581$$ = 0; 4 > $i$jscomp$inline_581$$; $i$jscomp$inline_581$$++, $color$jscomp$inline_592_color256$jscomp$inline_591_pixel_addr$jscomp$inline_572_svga_memory$$++, $byte0$jscomp$inline_576_j$jscomp$inline_582_row$jscomp$inline_574$$ += 2) {
            this.$sa$[$color$jscomp$inline_592_color256$jscomp$inline_591_pixel_addr$jscomp$inline_572_svga_memory$$] = $addr$jscomp$inline_573_shift_loads$jscomp$inline_580$$[$byte0$jscomp$inline_576_j$jscomp$inline_582_row$jscomp$inline_574$$] << 4 | $addr$jscomp$inline_573_shift_loads$jscomp$inline_580$$[$byte0$jscomp$inline_576_j$jscomp$inline_582_row$jscomp$inline_574$$ + 1];
          }
        } else {
          for ($i$jscomp$inline_581$$ = 0; 8 > $i$jscomp$inline_581$$; $i$jscomp$inline_581$$++, $color$jscomp$inline_592_color256$jscomp$inline_591_pixel_addr$jscomp$inline_572_svga_memory$$++) {
            this.$sa$[$color$jscomp$inline_592_color256$jscomp$inline_591_pixel_addr$jscomp$inline_572_svga_memory$$] = $addr$jscomp$inline_573_shift_loads$jscomp$inline_580$$[$i$jscomp$inline_581$$];
          }
        }
      }
      $buffer$jscomp$56_pel_width$jscomp$inline_571_pixel_addr$jscomp$inline_590_start$jscomp$inline_585$$ = this.$Ca$;
      $buffer$jscomp$55_end$jscomp$inline_567_end$jscomp$inline_586_min_y$$ = Math.min(this.$Ba$, 524287);
      $buffer$jscomp$inline_587_max_y_shift_mode$jscomp$inline_570$$ = new Int32Array(this.$cpu$.$wasm_memory$.buffer, this.$Ra$, this.$l$ * this.$La$);
      $addr_shift$jscomp$inline_568_bytes_per_pixel_i$jscomp$88_mask$jscomp$inline_588$$ = 255;
      $addr_substitution$jscomp$inline_569_color$jscomp$7_colorset$jscomp$inline_589$$ = 0;
      this.$i$ & 128 && ($addr_shift$jscomp$inline_568_bytes_per_pixel_i$jscomp$88_mask$jscomp$inline_588$$ &= 207, $addr_substitution$jscomp$inline_569_color$jscomp$7_colorset$jscomp$inline_589$$ |= this.$aa$ << 4 & 48);
      if (this.$i$ & 64) {
        for (; $buffer$jscomp$56_pel_width$jscomp$inline_571_pixel_addr$jscomp$inline_590_start$jscomp$inline_585$$ <= $buffer$jscomp$55_end$jscomp$inline_567_end$jscomp$inline_586_min_y$$; $buffer$jscomp$56_pel_width$jscomp$inline_571_pixel_addr$jscomp$inline_590_start$jscomp$inline_585$$++) {
          $color$jscomp$inline_592_color256$jscomp$inline_591_pixel_addr$jscomp$inline_572_svga_memory$$ = this.$sa$[$buffer$jscomp$56_pel_width$jscomp$inline_571_pixel_addr$jscomp$inline_590_start$jscomp$inline_585$$] & $addr_shift$jscomp$inline_568_bytes_per_pixel_i$jscomp$88_mask$jscomp$inline_588$$ | $addr_substitution$jscomp$inline_569_color$jscomp$7_colorset$jscomp$inline_589$$, $color$jscomp$inline_592_color256$jscomp$inline_591_pixel_addr$jscomp$inline_572_svga_memory$$ = this.$H$[$color$jscomp$inline_592_color256$jscomp$inline_591_pixel_addr$jscomp$inline_572_svga_memory$$], 
          $buffer$jscomp$inline_587_max_y_shift_mode$jscomp$inline_570$$[$buffer$jscomp$56_pel_width$jscomp$inline_571_pixel_addr$jscomp$inline_590_start$jscomp$inline_585$$] = $color$jscomp$inline_592_color256$jscomp$inline_591_pixel_addr$jscomp$inline_572_svga_memory$$ & 65280 | $color$jscomp$inline_592_color256$jscomp$inline_591_pixel_addr$jscomp$inline_572_svga_memory$$ << 16 | $color$jscomp$inline_592_color256$jscomp$inline_591_pixel_addr$jscomp$inline_572_svga_memory$$ >> 16 | 4278190080;
        }
      } else {
        for ($addr_shift$jscomp$inline_568_bytes_per_pixel_i$jscomp$88_mask$jscomp$inline_588$$ &= 63, $addr_substitution$jscomp$inline_569_color$jscomp$7_colorset$jscomp$inline_589$$ |= this.$aa$ << 4 & 192; $buffer$jscomp$56_pel_width$jscomp$inline_571_pixel_addr$jscomp$inline_590_start$jscomp$inline_585$$ <= $buffer$jscomp$55_end$jscomp$inline_567_end$jscomp$inline_586_min_y$$; $buffer$jscomp$56_pel_width$jscomp$inline_571_pixel_addr$jscomp$inline_590_start$jscomp$inline_585$$++) {
          $color$jscomp$inline_592_color256$jscomp$inline_591_pixel_addr$jscomp$inline_572_svga_memory$$ = this.$O$[this.$sa$[$buffer$jscomp$56_pel_width$jscomp$inline_571_pixel_addr$jscomp$inline_590_start$jscomp$inline_585$$] & this.$ha$] & $addr_shift$jscomp$inline_568_bytes_per_pixel_i$jscomp$88_mask$jscomp$inline_588$$ | $addr_substitution$jscomp$inline_569_color$jscomp$7_colorset$jscomp$inline_589$$, $color$jscomp$inline_592_color256$jscomp$inline_591_pixel_addr$jscomp$inline_572_svga_memory$$ = 
          this.$H$[$color$jscomp$inline_592_color256$jscomp$inline_591_pixel_addr$jscomp$inline_572_svga_memory$$], $buffer$jscomp$inline_587_max_y_shift_mode$jscomp$inline_570$$[$buffer$jscomp$56_pel_width$jscomp$inline_571_pixel_addr$jscomp$inline_590_start$jscomp$inline_585$$] = $color$jscomp$inline_592_color256$jscomp$inline_591_pixel_addr$jscomp$inline_572_svga_memory$$ & 65280 | $color$jscomp$inline_592_color256$jscomp$inline_591_pixel_addr$jscomp$inline_572_svga_memory$$ << 16 | $color$jscomp$inline_592_color256$jscomp$inline_591_pixel_addr$jscomp$inline_572_svga_memory$$ >> 
          16 | 4278190080;
        }
      }
      this.screen.$l$(this.$pa$);
    }
    this.$Ca$ = this.$vga_memory_size$;
    this.$Ba$ = 0;
    this.$Ea$ = this.$vga_memory_size$;
    this.$Da$ = 0;
  }
  $JSCompiler_StaticMethods_update_vertical_retrace$$(this);
};
function $JSCompiler_StaticMethods_JSC$2019_set_font_bitmap$$($JSCompiler_StaticMethods_JSC$2019_set_font_bitmap$self$$, $font_plane_dirty$$) {
  const $height$jscomp$31$$ = $JSCompiler_StaticMethods_JSC$2019_set_font_bitmap$self$$.$I$ & 31;
  if ($height$jscomp$31$$ && !$JSCompiler_StaticMethods_JSC$2019_set_font_bitmap$self$$.$g$) {
    const $width_dbl$jscomp$2$$ = !!($JSCompiler_StaticMethods_JSC$2019_set_font_bitmap$self$$.$X$ & 8);
    $JSCompiler_StaticMethods_JSC$2019_set_font_bitmap$self$$.screen.$u$($height$jscomp$31$$ + 1, !$width_dbl$jscomp$2$$ && !($JSCompiler_StaticMethods_JSC$2019_set_font_bitmap$self$$.$X$ & 1), $width_dbl$jscomp$2$$, !!($JSCompiler_StaticMethods_JSC$2019_set_font_bitmap$self$$.$i$ & 4), $JSCompiler_StaticMethods_JSC$2019_set_font_bitmap$self$$.$ua$, $font_plane_dirty$$);
  }
}
function $JSCompiler_StaticMethods_JSC$2019_set_font_page$$($JSCompiler_StaticMethods_JSC$2019_set_font_page$self$$) {
  const $linear_index_map$$ = [0, 2, 4, 6, 1, 3, 5, 7], $vga_index_A$$ = ($JSCompiler_StaticMethods_JSC$2019_set_font_page$self$$.$N$ & 12) >> 2 | ($JSCompiler_StaticMethods_JSC$2019_set_font_page$self$$.$N$ & 32) >> 3, $vga_index_B$$ = $JSCompiler_StaticMethods_JSC$2019_set_font_page$self$$.$N$ & 3 | ($JSCompiler_StaticMethods_JSC$2019_set_font_page$self$$.$N$ & 16) >> 2;
  $JSCompiler_StaticMethods_JSC$2019_set_font_page$self$$.$da$ = $vga_index_A$$ !== $vga_index_B$$;
  $JSCompiler_StaticMethods_JSC$2019_set_font_page$self$$.screen.$v$($linear_index_map$$[$vga_index_A$$], $linear_index_map$$[$vga_index_B$$]);
  $JSCompiler_StaticMethods_complete_redraw$$($JSCompiler_StaticMethods_JSC$2019_set_font_page$self$$);
}
;const $STAT_NAMES$$module$src$virtio_balloon$$ = "SWAP_IN SWAP_OUT MAJFLT MINFLT MEMFREE MEMTOT AVAIL CACHES HTLB_PGALLOC HTLB_PGFAIL".split(" ");
function $VirtioBalloon$$module$src$virtio_balloon$$($cpu$jscomp$25$$, $bus$jscomp$25$$) {
  this.$bus$ = $bus$jscomp$25$$;
  this.$j$ = this.$h$ = this.$g$ = this.$i$ = 0;
  this.$virtio$ = new $VirtIO$$module$src$virtio$$($cpu$jscomp$25$$, {name:"virtio-balloon", $pci_id$:88, $device_id$:4165, $subsystem_device_id$:5, $common$:{$initial_port$:55296, $queues$:[{$size_supported$:32, $notify_offset$:0}, {$size_supported$:32, $notify_offset$:0}, {$size_supported$:2, $notify_offset$:1}, {$size_supported$:64, $notify_offset$:2}, ], features:[1, 3, 32, ], $on_driver_ok$:() => {
  }, }, notification:{$initial_port$:55552, $single_handler$:!1, $handlers$:[$queue_id$jscomp$12$$ => {
    const $queue$jscomp$8$$ = this.$virtio$.$queues$[$queue_id$jscomp$12$$];
    for (; $JSCompiler_StaticMethods_has_request$$($queue$jscomp$8$$);) {
      var $bufchain$jscomp$13_n$jscomp$14$$ = $JSCompiler_StaticMethods_pop_request$$($queue$jscomp$8$$);
      const $buffer$jscomp$57$$ = new Uint8Array($bufchain$jscomp$13_n$jscomp$14$$.$length_readable$);
      $JSCompiler_StaticMethods_get_next_blob$$($bufchain$jscomp$13_n$jscomp$14$$, $buffer$jscomp$57$$);
      $JSCompiler_StaticMethods_push_reply$$(this.$virtio$.$queues$[$queue_id$jscomp$12$$], $bufchain$jscomp$13_n$jscomp$14$$);
      $bufchain$jscomp$13_n$jscomp$14$$ = $buffer$jscomp$57$$.byteLength / 4;
      this.$g$ += 0 === $queue_id$jscomp$12$$ ? $bufchain$jscomp$13_n$jscomp$14$$ : -$bufchain$jscomp$13_n$jscomp$14$$;
    }
    $JSCompiler_StaticMethods_flush_replies$$(this.$virtio$.$queues$[$queue_id$jscomp$12$$]);
  }, $queue_id$jscomp$13$$ => {
    var $bufchain$jscomp$14_queue$jscomp$9$$ = this.$virtio$.$queues$[$queue_id$jscomp$13$$];
    if ($JSCompiler_StaticMethods_has_request$$($bufchain$jscomp$14_queue$jscomp$9$$)) {
      $bufchain$jscomp$14_queue$jscomp$9$$ = $JSCompiler_StaticMethods_pop_request$$($bufchain$jscomp$14_queue$jscomp$9$$);
      const $buffer$jscomp$58$$ = new Uint8Array($bufchain$jscomp$14_queue$jscomp$9$$.$length_readable$);
      $JSCompiler_StaticMethods_get_next_blob$$($bufchain$jscomp$14_queue$jscomp$9$$, $buffer$jscomp$58$$);
      let $result$jscomp$22$$ = {};
      for (let $i$jscomp$89$$ = 0; $i$jscomp$89$$ < $bufchain$jscomp$14_queue$jscomp$9$$.$length_readable$; $i$jscomp$89$$ += 10) {
        let [$cat$$, $value$jscomp$182$$] = $Unmarshall$$module$lib$marshall$$(["h", "d"], $buffer$jscomp$58$$, {offset:$i$jscomp$89$$});
        $result$jscomp$22$$[$STAT_NAMES$$module$src$virtio_balloon$$[$cat$$]] = $value$jscomp$182$$;
      }
      $JSCompiler_StaticMethods_push_reply$$(this.$virtio$.$queues$[$queue_id$jscomp$13$$], $bufchain$jscomp$14_queue$jscomp$9$$);
      this.$o$ && this.$o$($result$jscomp$22$$);
    }
  }, $queue_id$jscomp$14$$ => {
    const $queue$jscomp$10$$ = this.$virtio$.$queues$[$queue_id$jscomp$14$$];
    for (; $JSCompiler_StaticMethods_has_request$$($queue$jscomp$10$$);) {
      const $bufchain$jscomp$15$$ = $JSCompiler_StaticMethods_pop_request$$($queue$jscomp$10$$);
      if (0 < $bufchain$jscomp$15$$.$length_readable$ && ($JSCompiler_StaticMethods_notify_config_changes$self$jscomp$inline_596_buffer$jscomp$59_cmd$jscomp$11_i$jscomp$90$$ = new Uint8Array($bufchain$jscomp$15$$.$length_readable$), $JSCompiler_StaticMethods_get_next_blob$$($bufchain$jscomp$15$$, $JSCompiler_StaticMethods_notify_config_changes$self$jscomp$inline_596_buffer$jscomp$59_cmd$jscomp$11_i$jscomp$90$$), [$JSCompiler_StaticMethods_notify_config_changes$self$jscomp$inline_596_buffer$jscomp$59_cmd$jscomp$11_i$jscomp$90$$] = 
      $Unmarshall$$module$lib$marshall$$(["w"], $JSCompiler_StaticMethods_notify_config_changes$self$jscomp$inline_596_buffer$jscomp$59_cmd$jscomp$11_i$jscomp$90$$, {offset:0}), 0 === $JSCompiler_StaticMethods_notify_config_changes$self$jscomp$inline_596_buffer$jscomp$59_cmd$jscomp$11_i$jscomp$90$$)) {
        this.$l$ && this.$l$(this.$j$);
        1 < this.$h$ && (this.$h$ = 1);
        var $JSCompiler_StaticMethods_notify_config_changes$self$jscomp$inline_596_buffer$jscomp$59_cmd$jscomp$11_i$jscomp$90$$ = this.$virtio$;
        $JSCompiler_StaticMethods_notify_config_changes$self$jscomp$inline_596_buffer$jscomp$59_cmd$jscomp$11_i$jscomp$90$$.$v$ = !0;
        $JSCompiler_StaticMethods_notify_config_changes$self$jscomp$inline_596_buffer$jscomp$59_cmd$jscomp$11_i$jscomp$90$$.$i$ & 4 && $JSCompiler_StaticMethods_notify_config_changes$self$jscomp$inline_596_buffer$jscomp$59_cmd$jscomp$11_i$jscomp$90$$.$raise_irq$(2);
      }
      if (0 < $bufchain$jscomp$15$$.$j$) {
        for (new Uint8Array(0), $JSCompiler_StaticMethods_notify_config_changes$self$jscomp$inline_596_buffer$jscomp$59_cmd$jscomp$11_i$jscomp$90$$ = 0; $JSCompiler_StaticMethods_notify_config_changes$self$jscomp$inline_596_buffer$jscomp$59_cmd$jscomp$11_i$jscomp$90$$ < $bufchain$jscomp$15$$.$i$.length; ++$JSCompiler_StaticMethods_notify_config_changes$self$jscomp$inline_596_buffer$jscomp$59_cmd$jscomp$11_i$jscomp$90$$) {
          let $b$jscomp$3$$ = $bufchain$jscomp$15$$.$i$[$JSCompiler_StaticMethods_notify_config_changes$self$jscomp$inline_596_buffer$jscomp$59_cmd$jscomp$11_i$jscomp$90$$];
          this.$j$ += $b$jscomp$3$$.$len$;
          this.$virtio$.$cpu$.$va$($b$jscomp$3$$.$addr_low$, $b$jscomp$3$$.$len$);
        }
      }
      $JSCompiler_StaticMethods_push_reply$$(this.$virtio$.$queues$[$queue_id$jscomp$14$$], $bufchain$jscomp$15$$);
    }
    $JSCompiler_StaticMethods_flush_replies$$(this.$virtio$.$queues$[$queue_id$jscomp$14$$]);
  }, ], }, $isr_status$:{$initial_port$:55040, }, $device_specific$:{$initial_port$:54784, $struct$:[{bytes:4, name:"num_pages", read:() => this.$i$, write:() => {
  }, }, {bytes:4, name:"actual", read:() => this.$g$, write:() => {
  }, }, {bytes:4, name:"free_page_hint_cmd_id", read:() => this.$h$, write:() => {
  }, }]}, });
}
$VirtioBalloon$$module$src$virtio_balloon$$.prototype.$get_state$ = function() {
  const $state$jscomp$54$$ = [];
  $state$jscomp$54$$[0] = this.$virtio$;
  $state$jscomp$54$$[1] = this.$i$;
  $state$jscomp$54$$[2] = this.$g$;
  return $state$jscomp$54$$;
};
$VirtioBalloon$$module$src$virtio_balloon$$.prototype.$set_state$ = function($state$jscomp$55$$) {
  this.$virtio$.$set_state$($state$jscomp$55$$[0]);
  this.$i$ = $state$jscomp$55$$[1];
  this.$g$ = $state$jscomp$55$$[2];
};
function $load_kernel$$module$src$kernel$$($data8$jscomp$inline_600_mem8$$, $bzimage$jscomp$1_i$jscomp$inline_604_protected_mode_kernel$$, $checksum_index$jscomp$inline_602_i$jscomp$inline_601_initrd$jscomp$1$$, $cmdline_real_mode_kernel$$) {
  var $bzimage8_i$jscomp$91_ramdisk_size$$ = new Uint8Array($bzimage$jscomp$1_i$jscomp$inline_604_protected_mode_kernel$$);
  const $bzimage16$$ = new Uint16Array($bzimage$jscomp$1_i$jscomp$inline_604_protected_mode_kernel$$);
  var $bzimage32_checksum$jscomp$inline_603$$ = new Uint32Array($bzimage$jscomp$1_i$jscomp$inline_604_protected_mode_kernel$$), $prot_mode_kernel_start_ramdisk_address_setup_sects$$ = $bzimage8_i$jscomp$91_ramdisk_size$$[497] || 4;
  if (43605 === $bzimage16$$[255] && 1400005704 === ($bzimage16$$[257] | $bzimage16$$[258] << 16)) {
    var $flags$jscomp$15$$ = $bzimage8_i$jscomp$91_ramdisk_size$$[529];
    $bzimage8_i$jscomp$91_ramdisk_size$$[528] = 255;
    $bzimage8_i$jscomp$91_ramdisk_size$$[529] = $flags$jscomp$15$$ & -97 | 128;
    $bzimage16$$[274] = 56832;
    $bzimage16$$[253] = 65535;
    $cmdline_real_mode_kernel$$ += "\x00";
    $bzimage32_checksum$jscomp$inline_603$$[138] = 581632;
    for ($bzimage8_i$jscomp$91_ramdisk_size$$ = 0; $bzimage8_i$jscomp$91_ramdisk_size$$ < $cmdline_real_mode_kernel$$.length; $bzimage8_i$jscomp$91_ramdisk_size$$++) {
      $data8$jscomp$inline_600_mem8$$[581632 + $bzimage8_i$jscomp$91_ramdisk_size$$] = $cmdline_real_mode_kernel$$.charCodeAt($bzimage8_i$jscomp$91_ramdisk_size$$);
    }
    $prot_mode_kernel_start_ramdisk_address_setup_sects$$ = 512 * ($prot_mode_kernel_start_ramdisk_address_setup_sects$$ + 1);
    $cmdline_real_mode_kernel$$ = new Uint8Array($bzimage$jscomp$1_i$jscomp$inline_604_protected_mode_kernel$$, 0, $prot_mode_kernel_start_ramdisk_address_setup_sects$$);
    $bzimage$jscomp$1_i$jscomp$inline_604_protected_mode_kernel$$ = new Uint8Array($bzimage$jscomp$1_i$jscomp$inline_604_protected_mode_kernel$$, $prot_mode_kernel_start_ramdisk_address_setup_sects$$);
    $bzimage8_i$jscomp$91_ramdisk_size$$ = $prot_mode_kernel_start_ramdisk_address_setup_sects$$ = 0;
    $checksum_index$jscomp$inline_602_i$jscomp$inline_601_initrd$jscomp$1$$ && ($prot_mode_kernel_start_ramdisk_address_setup_sects$$ = 67108864, $bzimage8_i$jscomp$91_ramdisk_size$$ = $checksum_index$jscomp$inline_602_i$jscomp$inline_601_initrd$jscomp$1$$.byteLength, $data8$jscomp$inline_600_mem8$$.set(new Uint8Array($checksum_index$jscomp$inline_602_i$jscomp$inline_601_initrd$jscomp$1$$), $prot_mode_kernel_start_ramdisk_address_setup_sects$$));
    $bzimage32_checksum$jscomp$inline_603$$[134] = $prot_mode_kernel_start_ramdisk_address_setup_sects$$;
    $bzimage32_checksum$jscomp$inline_603$$[135] = $bzimage8_i$jscomp$91_ramdisk_size$$;
    $data8$jscomp$inline_600_mem8$$.set($cmdline_real_mode_kernel$$, 524288);
    $data8$jscomp$inline_600_mem8$$.set($bzimage$jscomp$1_i$jscomp$inline_604_protected_mode_kernel$$, 1048576);
    $data8$jscomp$inline_600_mem8$$ = new Uint8Array(512);
    (new Uint16Array($data8$jscomp$inline_600_mem8$$.buffer))[0] = 43605;
    $data8$jscomp$inline_600_mem8$$[2] = 1;
    $checksum_index$jscomp$inline_602_i$jscomp$inline_601_initrd$jscomp$1$$ = 3;
    $data8$jscomp$inline_600_mem8$$[$checksum_index$jscomp$inline_602_i$jscomp$inline_601_initrd$jscomp$1$$++] = 250;
    $data8$jscomp$inline_600_mem8$$[$checksum_index$jscomp$inline_602_i$jscomp$inline_601_initrd$jscomp$1$$++] = 184;
    $data8$jscomp$inline_600_mem8$$[$checksum_index$jscomp$inline_602_i$jscomp$inline_601_initrd$jscomp$1$$++] = 32768;
    $data8$jscomp$inline_600_mem8$$[$checksum_index$jscomp$inline_602_i$jscomp$inline_601_initrd$jscomp$1$$++] = 128;
    $data8$jscomp$inline_600_mem8$$[$checksum_index$jscomp$inline_602_i$jscomp$inline_601_initrd$jscomp$1$$++] = 142;
    $data8$jscomp$inline_600_mem8$$[$checksum_index$jscomp$inline_602_i$jscomp$inline_601_initrd$jscomp$1$$++] = 192;
    $data8$jscomp$inline_600_mem8$$[$checksum_index$jscomp$inline_602_i$jscomp$inline_601_initrd$jscomp$1$$++] = 142;
    $data8$jscomp$inline_600_mem8$$[$checksum_index$jscomp$inline_602_i$jscomp$inline_601_initrd$jscomp$1$$++] = 216;
    $data8$jscomp$inline_600_mem8$$[$checksum_index$jscomp$inline_602_i$jscomp$inline_601_initrd$jscomp$1$$++] = 142;
    $data8$jscomp$inline_600_mem8$$[$checksum_index$jscomp$inline_602_i$jscomp$inline_601_initrd$jscomp$1$$++] = 224;
    $data8$jscomp$inline_600_mem8$$[$checksum_index$jscomp$inline_602_i$jscomp$inline_601_initrd$jscomp$1$$++] = 142;
    $data8$jscomp$inline_600_mem8$$[$checksum_index$jscomp$inline_602_i$jscomp$inline_601_initrd$jscomp$1$$++] = 232;
    $data8$jscomp$inline_600_mem8$$[$checksum_index$jscomp$inline_602_i$jscomp$inline_601_initrd$jscomp$1$$++] = 142;
    $data8$jscomp$inline_600_mem8$$[$checksum_index$jscomp$inline_602_i$jscomp$inline_601_initrd$jscomp$1$$++] = 208;
    $data8$jscomp$inline_600_mem8$$[$checksum_index$jscomp$inline_602_i$jscomp$inline_601_initrd$jscomp$1$$++] = 188;
    $data8$jscomp$inline_600_mem8$$[$checksum_index$jscomp$inline_602_i$jscomp$inline_601_initrd$jscomp$1$$++] = 57344;
    $data8$jscomp$inline_600_mem8$$[$checksum_index$jscomp$inline_602_i$jscomp$inline_601_initrd$jscomp$1$$++] = 224;
    $data8$jscomp$inline_600_mem8$$[$checksum_index$jscomp$inline_602_i$jscomp$inline_601_initrd$jscomp$1$$++] = 234;
    $data8$jscomp$inline_600_mem8$$[$checksum_index$jscomp$inline_602_i$jscomp$inline_601_initrd$jscomp$1$$++] = 0;
    $data8$jscomp$inline_600_mem8$$[$checksum_index$jscomp$inline_602_i$jscomp$inline_601_initrd$jscomp$1$$++] = 0;
    $data8$jscomp$inline_600_mem8$$[$checksum_index$jscomp$inline_602_i$jscomp$inline_601_initrd$jscomp$1$$++] = 32800;
    $data8$jscomp$inline_600_mem8$$[$checksum_index$jscomp$inline_602_i$jscomp$inline_601_initrd$jscomp$1$$++] = 128;
    $bzimage32_checksum$jscomp$inline_603$$ = $data8$jscomp$inline_600_mem8$$[$checksum_index$jscomp$inline_602_i$jscomp$inline_601_initrd$jscomp$1$$] = 0;
    for ($bzimage$jscomp$1_i$jscomp$inline_604_protected_mode_kernel$$ = 0; $bzimage$jscomp$1_i$jscomp$inline_604_protected_mode_kernel$$ < $data8$jscomp$inline_600_mem8$$.length; $bzimage$jscomp$1_i$jscomp$inline_604_protected_mode_kernel$$++) {
      $bzimage32_checksum$jscomp$inline_603$$ += $data8$jscomp$inline_600_mem8$$[$bzimage$jscomp$1_i$jscomp$inline_604_protected_mode_kernel$$];
    }
    $data8$jscomp$inline_600_mem8$$[$checksum_index$jscomp$inline_602_i$jscomp$inline_601_initrd$jscomp$1$$] = -$bzimage32_checksum$jscomp$inline_603$$;
    return {name:"genroms/kernel.bin", data:$data8$jscomp$inline_600_mem8$$, };
  }
}
;function $CPU$$module$src$cpu$$($bus$jscomp$26$$, $jit_imports$jscomp$inline_607_wm$$, $stop_idling$$) {
  this.$Ka$ = $stop_idling$$;
  this.$wm$ = $jit_imports$jscomp$inline_607_wm$$;
  $JSCompiler_StaticMethods_wasm_patch$$(this);
  $jit_imports$jscomp$inline_607_wm$$ = Object.create(null);
  $jit_imports$jscomp$inline_607_wm$$.m = this.$wm$.exports.memory;
  for ($memory$jscomp$1_name$jscomp$inline_608$$ of Object.keys(this.$wm$.exports)) {
    $memory$jscomp$1_name$jscomp$inline_608$$.startsWith("_") || $memory$jscomp$1_name$jscomp$inline_608$$.startsWith("zstd") || $memory$jscomp$1_name$jscomp$inline_608$$.endsWith("_js") || ($jit_imports$jscomp$inline_607_wm$$[$memory$jscomp$1_name$jscomp$inline_608$$] = this.$wm$.exports[$memory$jscomp$1_name$jscomp$inline_608$$]);
  }
  this.$Ga$ = $jit_imports$jscomp$inline_607_wm$$;
  var $memory$jscomp$1_name$jscomp$inline_608$$ = this.$wm$.exports.memory;
  this.$wasm_memory$ = $memory$jscomp$1_name$jscomp$inline_608$$;
  this.$memory_size$ = $view$$module$src$lib$$(Uint32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 812, 1);
  this.$mem8$ = new Uint8Array(0);
  new Int32Array(this.$mem8$.buffer);
  this.$u$ = $view$$module$src$lib$$(Uint8Array, $memory$jscomp$1_name$jscomp$inline_608$$, 724, 8);
  this.$R$ = $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 736, 8);
  this.$P$ = $view$$module$src$lib$$(Uint32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 768, 8);
  this.$s$ = $view$$module$src$lib$$(Uint8Array, $memory$jscomp$1_name$jscomp$inline_608$$, 512, 8);
  this.$N$ = $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 800, 1);
  this.$ea$ = $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 564, 1);
  this.$da$ = $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 568, 1);
  this.$aa$ = $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 572, 1);
  this.$$$ = $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 576, 1);
  this.$ta$ = $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 1128, 1);
  this.$ja$ = $view$$module$src$lib$$(Uint32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 540, 8);
  this.$cr$ = $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 580, 8);
  this.$V$ = $view$$module$src$lib$$(Uint8Array, $memory$jscomp$1_name$jscomp$inline_608$$, 612, 1);
  this.$L$ = $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 804, 1);
  this.$T$ = $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 808, 1);
  this.$fa$ = $view$$module$src$lib$$(Uint8Array, $memory$jscomp$1_name$jscomp$inline_608$$, 616, 1);
  this.$ia$ = $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 620, 1);
  this.$X$ = $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 624, 1);
  this.$qa$ = $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 636, 1);
  this.$sa$ = $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 640, 1);
  this.$ra$ = $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 644, 1);
  this.$ka$ = $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 648, 1);
  this.flags = $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 120, 1);
  this.$Y$ = $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 100, 1);
  this.$ha$ = $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 96, 1);
  this.$ga$ = $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 104, 1);
  $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 112, 1);
  this.$za$ = $view$$module$src$lib$$(Uint32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 960, 2);
  this.$devices$ = {};
  this.$K$ = $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 556, 1);
  this.$la$ = $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 560, 1);
  $view$$module$src$lib$$(Uint8Array, $memory$jscomp$1_name$jscomp$inline_608$$, 548, 1);
  this.$U$ = $view$$module$src$lib$$(Uint8Array, $memory$jscomp$1_name$jscomp$inline_608$$, 552, 1);
  this.$g$ = [];
  this.$j$ = [];
  this.$M$ = [];
  this.$i$ = [];
  this.$bios$ = {$main$:null, $vga$:null, };
  this.$instruction_counter$ = $view$$module$src$lib$$(Uint32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 664, 1);
  this.$o$ = $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 64, 8);
  this.$Z$ = $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 1152, 32);
  this.$G$ = $view$$module$src$lib$$(Uint8Array, $memory$jscomp$1_name$jscomp$inline_608$$, 816, 1);
  this.$G$[0] = 255;
  this.$H$ = $view$$module$src$lib$$(Uint8Array, $memory$jscomp$1_name$jscomp$inline_608$$, 1032, 1);
  this.$H$[0] = 0;
  this.$v$ = $view$$module$src$lib$$(Uint16Array, $memory$jscomp$1_name$jscomp$inline_608$$, 1036, 1);
  this.$v$[0] = 895;
  this.$Aa$ = $view$$module$src$lib$$(Uint16Array, $memory$jscomp$1_name$jscomp$inline_608$$, 1040, 1);
  this.$Aa$[0] = 0;
  this.$C$ = $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 1048, 1);
  this.$C$[0] = 0;
  this.$D$ = $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 1052, 1);
  this.$D$[0] = 0;
  this.$F$ = $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 1044, 1);
  this.$F$[0] = 0;
  this.$A$ = $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 1056, 1);
  this.$A$[0] = 0;
  this.$B$ = $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 1060, 1);
  this.$B$[0] = 0;
  this.$na$ = $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 832, 32);
  $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 824, 1);
  this.$S$ = $view$$module$src$lib$$(Uint16Array, $memory$jscomp$1_name$jscomp$inline_608$$, 668, 8);
  this.$W$ = $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 684, 8);
  this.$ma$ = $view$$module$src$lib$$(Int32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 968, 8);
  this.$Pa$ = $view$$module$src$lib$$(Uint32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 716, 1);
  this.$Oa$ = $view$$module$src$lib$$(Uint32Array, $memory$jscomp$1_name$jscomp$inline_608$$, 720, 1);
  this.$fw_value$ = [];
  this.$fw_pointer$ = 0;
  this.$option_roms$ = [];
  this.$io$ = void 0;
  this.$bus$ = $bus$jscomp$26$$;
  this.$oa$(0, 0);
}
function $JSCompiler_StaticMethods_write_blob$$($JSCompiler_StaticMethods_write_blob$self$$, $blob$jscomp$16$$, $offset$jscomp$76$$) {
  $blob$jscomp$16$$.length && ($JSCompiler_StaticMethods_write_blob$self$$.$l$($offset$jscomp$76$$), $JSCompiler_StaticMethods_write_blob$self$$.$l$($offset$jscomp$76$$ + $blob$jscomp$16$$.length - 1), $JSCompiler_StaticMethods_write_blob$self$$.$Fa$($offset$jscomp$76$$, $offset$jscomp$76$$ + $blob$jscomp$16$$.length), $JSCompiler_StaticMethods_write_blob$self$$.$mem8$.set($blob$jscomp$16$$, $offset$jscomp$76$$));
}
function $JSCompiler_StaticMethods_wasm_patch$$($JSCompiler_StaticMethods_wasm_patch$self$$) {
  const $get_import$$ = $name$jscomp$107$$ => {
    const $f$jscomp$4$$ = $JSCompiler_StaticMethods_wasm_patch$self$$.$wm$.exports[$name$jscomp$107$$];
    console.assert($f$jscomp$4$$, "Missing import: " + $name$jscomp$107$$);
    return $f$jscomp$4$$;
  };
  $JSCompiler_StaticMethods_wasm_patch$self$$.$O$ = $get_import$$("reset_cpu");
  $get_import$$("getiopl");
  $get_import$$("get_eflags");
  $get_import$$("handle_irqs");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$Ha$ = $get_import$$("main_loop");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$Ja$ = $get_import$$("set_jit_config");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$read8$ = $get_import$$("read8");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$read16$ = $get_import$$("read16");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$h$ = $get_import$$("read32s");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$write8$ = $get_import$$("write8");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$write16$ = $get_import$$("write16");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$write32$ = $get_import$$("write32");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$l$ = $get_import$$("in_mapped_range");
  $get_import$$("fpu_load_tag_word");
  $get_import$$("fpu_load_status_word");
  $get_import$$("fpu_get_sti_f64");
  $get_import$$("translate_address_system_read_js");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$Ca$ = $get_import$$("get_seg_cs");
  $get_import$$("get_real_eip");
  $get_import$$("clear_tlb");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$Ba$ = $get_import$$("full_clear_tlb");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$ua$ = $get_import$$("update_state_flags");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$oa$ = $get_import$$("set_tsc");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$La$ = $get_import$$("store_current_tsc");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$Ia$ = $get_import$$("set_cpuid_level");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$device_raise_irq$ = $get_import$$("device_raise_irq");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$device_lower_irq$ = $get_import$$("device_lower_irq");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$xa$ = $get_import$$("apic_timer");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$Ea$ = $get_import$$("jit_clear_cache_js");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$Fa$ = $get_import$$("jit_dirty_cache");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$ya$ = $get_import$$("codegen_finalize_finished");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$wa$ = $get_import$$("allocate_memory");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$va$ = $get_import$$("zero_memory");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$Da$ = $get_import$$("is_memory_zeroed");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$Na$ = $get_import$$("svga_allocate_memory");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$Ma$ = $get_import$$("svga_allocate_dest_buffer");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$Qa$ = $get_import$$("svga_fill_pixel_buffer");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$pa$ = $get_import$$("svga_mark_dirty");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$ba$ = $get_import$$("get_pic_addr_master");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$ca$ = $get_import$$("get_pic_addr_slave");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$I$ = $get_import$$("get_apic_addr");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$J$ = $get_import$$("get_ioapic_addr");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$zstd_create_ctx$ = $get_import$$("zstd_create_ctx");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$zstd_get_src_ptr$ = $get_import$$("zstd_get_src_ptr");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$zstd_free_ctx$ = $get_import$$("zstd_free_ctx");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$zstd_read$ = $get_import$$("zstd_read");
  $JSCompiler_StaticMethods_wasm_patch$self$$.$zstd_read_free$ = $get_import$$("zstd_read_free");
}
$CPU$$module$src$cpu$$.prototype.$get_state$ = function() {
  var $state$jscomp$56$$ = [];
  $state$jscomp$56$$[0] = this.$memory_size$[0];
  $state$jscomp$56$$[1] = new Uint8Array([...this.$u$, ...this.$s$]);
  $state$jscomp$56$$[2] = this.$R$;
  $state$jscomp$56$$[3] = this.$P$;
  $state$jscomp$56$$[4] = this.$N$[0];
  $state$jscomp$56$$[5] = this.$da$[0];
  $state$jscomp$56$$[6] = this.$ea$[0];
  $state$jscomp$56$$[7] = this.$$$[0];
  $state$jscomp$56$$[8] = this.$aa$[0];
  $state$jscomp$56$$[9] = this.$ja$[0];
  $state$jscomp$56$$[10] = this.$cr$;
  $state$jscomp$56$$[11] = this.$V$[0];
  $state$jscomp$56$$[13] = this.$L$[0];
  $state$jscomp$56$$[16] = this.$T$[0];
  $state$jscomp$56$$[17] = this.$fa$[0];
  $state$jscomp$56$$[18] = this.$ia$[0];
  $state$jscomp$56$$[19] = this.$X$[0];
  $state$jscomp$56$$[22] = this.$qa$[0];
  $state$jscomp$56$$[23] = this.$ra$[0];
  $state$jscomp$56$$[24] = this.$sa$[0];
  $state$jscomp$56$$[25] = this.$ka$[0];
  $state$jscomp$56$$[26] = this.flags[0];
  $state$jscomp$56$$[27] = this.$Y$[0];
  $state$jscomp$56$$[28] = this.$ga$[0];
  $state$jscomp$56$$[30] = this.$ha$[0];
  $state$jscomp$56$$[37] = this.$K$[0];
  $state$jscomp$56$$[38] = this.$la$[0];
  $state$jscomp$56$$[39] = this.$o$;
  $state$jscomp$56$$[40] = this.$S$;
  $state$jscomp$56$$[41] = this.$W$;
  $state$jscomp$56$$[42] = this.$ma$;
  this.$La$();
  $state$jscomp$56$$[43] = this.$za$;
  $state$jscomp$56$$[45] = this.$devices$.$virtio_9p$;
  $state$jscomp$56$$[46] = new Uint8Array(this.$wasm_memory$.buffer, this.$I$(), 184);
  $state$jscomp$56$$[47] = this.$devices$.$rtc$;
  $state$jscomp$56$$[48] = this.$devices$.$pci$;
  $state$jscomp$56$$[49] = this.$devices$.$dma$;
  $state$jscomp$56$$[50] = this.$devices$.$acpi$;
  $state$jscomp$56$$[52] = this.$devices$.$vga$;
  $state$jscomp$56$$[53] = this.$devices$.$ps2$;
  $state$jscomp$56$$[54] = this.$devices$.$uart0$;
  $state$jscomp$56$$[55] = this.$devices$.$fdc$;
  this.$devices$.$ide$.$secondary$ ? $state$jscomp$56$$[85] = this.$devices$.$ide$ : this.$devices$.$ide$.$primary$?.$master$.$is_atapi$ ? $state$jscomp$56$$[56] = this.$devices$.$ide$.$primary$ : $state$jscomp$56$$[57] = this.$devices$.$ide$.$primary$;
  $state$jscomp$56$$[58] = this.$devices$.$pit$;
  $state$jscomp$56$$[59] = this.$devices$.$net$;
  var $nonzero_pages$jscomp$inline_626_offset$jscomp$inline_632_pic$jscomp$inline_619$$ = new Uint8Array(this.$wasm_memory$.buffer, this.$ba$(), 13), $bitmap$jscomp$inline_627_page_count$jscomp$inline_625_pic_slave$jscomp$inline_620$$ = new Uint8Array(this.$wasm_memory$.buffer, this.$ca$(), 13), $packed_memory$jscomp$inline_628_page$jscomp$inline_629_state$jscomp$inline_621$$ = [];
  const $state_slave$jscomp$inline_622$$ = [];
  $packed_memory$jscomp$inline_628_page$jscomp$inline_629_state$jscomp$inline_621$$[0] = $nonzero_pages$jscomp$inline_626_offset$jscomp$inline_632_pic$jscomp$inline_619$$[0];
  $packed_memory$jscomp$inline_628_page$jscomp$inline_629_state$jscomp$inline_621$$[1] = $nonzero_pages$jscomp$inline_626_offset$jscomp$inline_632_pic$jscomp$inline_619$$[1];
  $packed_memory$jscomp$inline_628_page$jscomp$inline_629_state$jscomp$inline_621$$[2] = $nonzero_pages$jscomp$inline_626_offset$jscomp$inline_632_pic$jscomp$inline_619$$[2];
  $packed_memory$jscomp$inline_628_page$jscomp$inline_629_state$jscomp$inline_621$$[3] = $nonzero_pages$jscomp$inline_626_offset$jscomp$inline_632_pic$jscomp$inline_619$$[3];
  $packed_memory$jscomp$inline_628_page$jscomp$inline_629_state$jscomp$inline_621$$[4] = $nonzero_pages$jscomp$inline_626_offset$jscomp$inline_632_pic$jscomp$inline_619$$[4];
  $packed_memory$jscomp$inline_628_page$jscomp$inline_629_state$jscomp$inline_621$$[5] = $state_slave$jscomp$inline_622$$;
  $packed_memory$jscomp$inline_628_page$jscomp$inline_629_state$jscomp$inline_621$$[6] = $nonzero_pages$jscomp$inline_626_offset$jscomp$inline_632_pic$jscomp$inline_619$$[6];
  $packed_memory$jscomp$inline_628_page$jscomp$inline_629_state$jscomp$inline_621$$[7] = $nonzero_pages$jscomp$inline_626_offset$jscomp$inline_632_pic$jscomp$inline_619$$[7];
  $packed_memory$jscomp$inline_628_page$jscomp$inline_629_state$jscomp$inline_621$$[8] = $nonzero_pages$jscomp$inline_626_offset$jscomp$inline_632_pic$jscomp$inline_619$$[8];
  $packed_memory$jscomp$inline_628_page$jscomp$inline_629_state$jscomp$inline_621$$[9] = $nonzero_pages$jscomp$inline_626_offset$jscomp$inline_632_pic$jscomp$inline_619$$[9];
  $packed_memory$jscomp$inline_628_page$jscomp$inline_629_state$jscomp$inline_621$$[10] = $nonzero_pages$jscomp$inline_626_offset$jscomp$inline_632_pic$jscomp$inline_619$$[10];
  $packed_memory$jscomp$inline_628_page$jscomp$inline_629_state$jscomp$inline_621$$[11] = $nonzero_pages$jscomp$inline_626_offset$jscomp$inline_632_pic$jscomp$inline_619$$[11];
  $packed_memory$jscomp$inline_628_page$jscomp$inline_629_state$jscomp$inline_621$$[12] = $nonzero_pages$jscomp$inline_626_offset$jscomp$inline_632_pic$jscomp$inline_619$$[12];
  $state_slave$jscomp$inline_622$$[0] = $bitmap$jscomp$inline_627_page_count$jscomp$inline_625_pic_slave$jscomp$inline_620$$[0];
  $state_slave$jscomp$inline_622$$[1] = $bitmap$jscomp$inline_627_page_count$jscomp$inline_625_pic_slave$jscomp$inline_620$$[1];
  $state_slave$jscomp$inline_622$$[2] = $bitmap$jscomp$inline_627_page_count$jscomp$inline_625_pic_slave$jscomp$inline_620$$[2];
  $state_slave$jscomp$inline_622$$[3] = $bitmap$jscomp$inline_627_page_count$jscomp$inline_625_pic_slave$jscomp$inline_620$$[3];
  $state_slave$jscomp$inline_622$$[4] = $bitmap$jscomp$inline_627_page_count$jscomp$inline_625_pic_slave$jscomp$inline_620$$[4];
  $state_slave$jscomp$inline_622$$[5] = null;
  $state_slave$jscomp$inline_622$$[6] = $bitmap$jscomp$inline_627_page_count$jscomp$inline_625_pic_slave$jscomp$inline_620$$[6];
  $state_slave$jscomp$inline_622$$[7] = $bitmap$jscomp$inline_627_page_count$jscomp$inline_625_pic_slave$jscomp$inline_620$$[7];
  $state_slave$jscomp$inline_622$$[8] = $bitmap$jscomp$inline_627_page_count$jscomp$inline_625_pic_slave$jscomp$inline_620$$[8];
  $state_slave$jscomp$inline_622$$[9] = $bitmap$jscomp$inline_627_page_count$jscomp$inline_625_pic_slave$jscomp$inline_620$$[9];
  $state_slave$jscomp$inline_622$$[10] = $bitmap$jscomp$inline_627_page_count$jscomp$inline_625_pic_slave$jscomp$inline_620$$[10];
  $state_slave$jscomp$inline_622$$[11] = $bitmap$jscomp$inline_627_page_count$jscomp$inline_625_pic_slave$jscomp$inline_620$$[11];
  $state_slave$jscomp$inline_622$$[12] = $bitmap$jscomp$inline_627_page_count$jscomp$inline_625_pic_slave$jscomp$inline_620$$[12];
  $state$jscomp$56$$[60] = $packed_memory$jscomp$inline_628_page$jscomp$inline_629_state$jscomp$inline_621$$;
  $state$jscomp$56$$[61] = this.$devices$.$sb16$;
  $state$jscomp$56$$[62] = this.$fw_value$;
  $state$jscomp$56$$[63] = new Uint8Array(this.$wasm_memory$.buffer, this.$J$(), 208);
  $state$jscomp$56$$[64] = this.$ta$[0];
  $state$jscomp$56$$[66] = this.$na$;
  $state$jscomp$56$$[67] = this.$Z$;
  $state$jscomp$56$$[68] = this.$G$[0];
  $state$jscomp$56$$[69] = this.$H$[0];
  $state$jscomp$56$$[70] = this.$v$[0];
  $state$jscomp$56$$[71] = this.$C$[0];
  $state$jscomp$56$$[72] = this.$D$[0];
  $state$jscomp$56$$[73] = this.$A$[0];
  $state$jscomp$56$$[74] = this.$B$[0];
  $state$jscomp$56$$[75] = this.$F$[0];
  $bitmap$jscomp$inline_627_page_count$jscomp$inline_625_pic_slave$jscomp$inline_620$$ = this.$mem8$.length >> 12;
  $nonzero_pages$jscomp$inline_626_offset$jscomp$inline_632_pic$jscomp$inline_619$$ = [];
  for ($packed_memory$jscomp$inline_628_page$jscomp$inline_629_state$jscomp$inline_621$$ = 0; $packed_memory$jscomp$inline_628_page$jscomp$inline_629_state$jscomp$inline_621$$ < $bitmap$jscomp$inline_627_page_count$jscomp$inline_625_pic_slave$jscomp$inline_620$$; $packed_memory$jscomp$inline_628_page$jscomp$inline_629_state$jscomp$inline_621$$++) {
    this.$Da$($packed_memory$jscomp$inline_628_page$jscomp$inline_629_state$jscomp$inline_621$$ << 12, 4096) || $nonzero_pages$jscomp$inline_626_offset$jscomp$inline_632_pic$jscomp$inline_619$$.push($packed_memory$jscomp$inline_628_page$jscomp$inline_629_state$jscomp$inline_621$$);
  }
  $bitmap$jscomp$inline_627_page_count$jscomp$inline_625_pic_slave$jscomp$inline_620$$ = new $Bitmap$$module$src$lib$$($bitmap$jscomp$inline_627_page_count$jscomp$inline_625_pic_slave$jscomp$inline_620$$);
  $packed_memory$jscomp$inline_628_page$jscomp$inline_629_state$jscomp$inline_621$$ = new Uint8Array($nonzero_pages$jscomp$inline_626_offset$jscomp$inline_632_pic$jscomp$inline_619$$.length << 12);
  for (const [$i$jscomp$inline_630$$, $page$jscomp$inline_631$$] of $nonzero_pages$jscomp$inline_626_offset$jscomp$inline_632_pic$jscomp$inline_619$$.entries()) {
    $bitmap$jscomp$inline_627_page_count$jscomp$inline_625_pic_slave$jscomp$inline_620$$.set($page$jscomp$inline_631$$, 1), $nonzero_pages$jscomp$inline_626_offset$jscomp$inline_632_pic$jscomp$inline_619$$ = $page$jscomp$inline_631$$ << 12, $packed_memory$jscomp$inline_628_page$jscomp$inline_629_state$jscomp$inline_621$$.set(this.$mem8$.subarray($nonzero_pages$jscomp$inline_626_offset$jscomp$inline_632_pic$jscomp$inline_619$$, $nonzero_pages$jscomp$inline_626_offset$jscomp$inline_632_pic$jscomp$inline_619$$ + 
    4096), $i$jscomp$inline_630$$ << 12);
  }
  const {$packed_memory$:$packed_memory$$, $bitmap$:$bitmap$jscomp$1$$} = {$bitmap$:$bitmap$jscomp$inline_627_page_count$jscomp$inline_625_pic_slave$jscomp$inline_620$$, $packed_memory$:$packed_memory$jscomp$inline_628_page$jscomp$inline_629_state$jscomp$inline_621$$};
  $state$jscomp$56$$[77] = $packed_memory$$;
  $state$jscomp$56$$[78] = new Uint8Array($bitmap$jscomp$1$$.$get_buffer$());
  $state$jscomp$56$$[79] = this.$devices$.$uart1$;
  $state$jscomp$56$$[80] = this.$devices$.$uart2$;
  $state$jscomp$56$$[81] = this.$devices$.$uart3$;
  $state$jscomp$56$$[82] = this.$devices$.$virtio_console$;
  $state$jscomp$56$$[83] = this.$devices$.$virtio_net$;
  $state$jscomp$56$$[84] = this.$devices$.$virtio_balloon$;
  return $state$jscomp$56$$;
};
$CPU$$module$src$cpu$$.prototype.$set_state$ = function($packed_memory$jscomp$inline_652_state$jscomp$58$$) {
  this.$memory_size$[0] = $packed_memory$jscomp$inline_652_state$jscomp$58$$[0];
  this.$mem8$.length !== this.$memory_size$[0] && console.warn("Note: Memory size mismatch. we=" + this.$mem8$.length + " state=" + this.$memory_size$[0]);
  8 === $packed_memory$jscomp$inline_652_state$jscomp$58$$[1].length ? (this.$u$.set($packed_memory$jscomp$inline_652_state$jscomp$58$$[1]), this.$s$.fill(242), this.$s$[1] = 250) : 16 === $packed_memory$jscomp$inline_652_state$jscomp$58$$[1].length && (this.$u$.set($packed_memory$jscomp$inline_652_state$jscomp$58$$[1].subarray(0, 8)), this.$s$.set($packed_memory$jscomp$inline_652_state$jscomp$58$$[1].subarray(8, 16)));
  this.$R$.set($packed_memory$jscomp$inline_652_state$jscomp$58$$[2]);
  this.$P$.set($packed_memory$jscomp$inline_652_state$jscomp$58$$[3]);
  this.$N$[0] = $packed_memory$jscomp$inline_652_state$jscomp$58$$[4];
  this.$da$[0] = $packed_memory$jscomp$inline_652_state$jscomp$58$$[5];
  this.$ea$[0] = $packed_memory$jscomp$inline_652_state$jscomp$58$$[6];
  this.$$$[0] = $packed_memory$jscomp$inline_652_state$jscomp$58$$[7];
  this.$aa$[0] = $packed_memory$jscomp$inline_652_state$jscomp$58$$[8];
  this.$ja$[0] = $packed_memory$jscomp$inline_652_state$jscomp$58$$[9];
  this.$cr$.set($packed_memory$jscomp$inline_652_state$jscomp$58$$[10]);
  this.$V$[0] = $packed_memory$jscomp$inline_652_state$jscomp$58$$[11];
  this.$L$[0] = $packed_memory$jscomp$inline_652_state$jscomp$58$$[13];
  this.$T$[0] = $packed_memory$jscomp$inline_652_state$jscomp$58$$[16];
  this.$fa$[0] = $packed_memory$jscomp$inline_652_state$jscomp$58$$[17];
  this.$ia$[0] = $packed_memory$jscomp$inline_652_state$jscomp$58$$[18];
  this.$X$[0] = $packed_memory$jscomp$inline_652_state$jscomp$58$$[19];
  this.$qa$[0] = $packed_memory$jscomp$inline_652_state$jscomp$58$$[22];
  this.$ra$[0] = $packed_memory$jscomp$inline_652_state$jscomp$58$$[23];
  this.$sa$[0] = $packed_memory$jscomp$inline_652_state$jscomp$58$$[24];
  this.$ka$[0] = $packed_memory$jscomp$inline_652_state$jscomp$58$$[25];
  this.flags[0] = $packed_memory$jscomp$inline_652_state$jscomp$58$$[26];
  this.$Y$[0] = $packed_memory$jscomp$inline_652_state$jscomp$58$$[27];
  this.$ga$[0] = $packed_memory$jscomp$inline_652_state$jscomp$58$$[28];
  this.$ha$[0] = $packed_memory$jscomp$inline_652_state$jscomp$58$$[30];
  this.$K$[0] = $packed_memory$jscomp$inline_652_state$jscomp$58$$[37];
  this.$la$[0] = $packed_memory$jscomp$inline_652_state$jscomp$58$$[38];
  this.$o$.set($packed_memory$jscomp$inline_652_state$jscomp$58$$[39]);
  this.$S$.set($packed_memory$jscomp$inline_652_state$jscomp$58$$[40]);
  this.$W$.set($packed_memory$jscomp$inline_652_state$jscomp$58$$[41]);
  $packed_memory$jscomp$inline_652_state$jscomp$58$$[42] && this.$ma$.set($packed_memory$jscomp$inline_652_state$jscomp$58$$[42]);
  this.$oa$($packed_memory$jscomp$inline_652_state$jscomp$58$$[43][0], $packed_memory$jscomp$inline_652_state$jscomp$58$$[43][1]);
  this.$devices$.$virtio_9p$ && this.$devices$.$virtio_9p$.$set_state$($packed_memory$jscomp$inline_652_state$jscomp$58$$[45]);
  if ($packed_memory$jscomp$inline_652_state$jscomp$58$$[46]) {
    var $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$ = $packed_memory$jscomp$inline_652_state$jscomp$58$$[46];
    $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$ instanceof Array ? ($apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$ = new Int32Array(this.$wasm_memory$.buffer, this.$I$(), 46), $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[0] = $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[0], 
    $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[1] = $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[1], $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[2] = $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[2], $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[3] = 
    $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[3], $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[4] = $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[4], $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[8] = $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[6], 
    $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[9] = $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[7], $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[10] = $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[8], $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[11] = 
    $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[9], $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[12] = $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[10], $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[13] = $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[11], 
    $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[14] = $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[12], $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[15] = $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[13], $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$.set($bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[15], 
    16), $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$.set($bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[15], 24), $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$.set($bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[16], 32), $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[40] = 
    $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[17], $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[41] = $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[18], $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[42] = $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[19], 
    $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[43] = $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[20], $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[44] = $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[21], $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[45] = 
    $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[22] || 65536) : (new Uint8Array(this.$wasm_memory$.buffer, this.$I$(), 184)).set($bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$);
  }
  this.$devices$.$rtc$ && this.$devices$.$rtc$.$set_state$($packed_memory$jscomp$inline_652_state$jscomp$58$$[47]);
  this.$devices$.$dma$ && this.$devices$.$dma$.$set_state$($packed_memory$jscomp$inline_652_state$jscomp$58$$[49]);
  this.$devices$.$acpi$ && this.$devices$.$acpi$.$set_state$($packed_memory$jscomp$inline_652_state$jscomp$58$$[50]);
  this.$devices$.$vga$ && this.$devices$.$vga$.$set_state$($packed_memory$jscomp$inline_652_state$jscomp$58$$[52]);
  this.$devices$.$ps2$ && this.$devices$.$ps2$.$set_state$($packed_memory$jscomp$inline_652_state$jscomp$58$$[53]);
  this.$devices$.$uart0$ && this.$devices$.$uart0$.$set_state$($packed_memory$jscomp$inline_652_state$jscomp$58$$[54]);
  this.$devices$.$fdc$ && this.$devices$.$fdc$.$set_state$($packed_memory$jscomp$inline_652_state$jscomp$58$$[55]);
  $packed_memory$jscomp$inline_652_state$jscomp$58$$[56] || $packed_memory$jscomp$inline_652_state$jscomp$58$$[57] ? ($bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$ = [[void 0, void 0], [void 0, void 0]], $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[0][0] = $packed_memory$jscomp$inline_652_state$jscomp$58$$[56] ? {$is_cdrom$:!0, buffer:this.$devices$.$cdrom$.buffer} : 
  {$is_cdrom$:!1, buffer:this.$devices$.$ide$.$primary$.$master$.buffer}, this.$devices$.$ide$ = new $IDEController$$module$src$ide$$(this, this.$devices$.$ide$.$bus$, $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$), this.$devices$.$cdrom$ = $packed_memory$jscomp$inline_652_state$jscomp$58$$[56] ? this.$devices$.$ide$.$primary$.$master$ : void 0, this.$devices$.$ide$.$primary$.$set_state$($packed_memory$jscomp$inline_652_state$jscomp$58$$[56] || 
  $packed_memory$jscomp$inline_652_state$jscomp$58$$[57])) : $packed_memory$jscomp$inline_652_state$jscomp$58$$[85] && this.$devices$.$ide$.$set_state$($packed_memory$jscomp$inline_652_state$jscomp$58$$[85]);
  this.$devices$.$pci$ && this.$devices$.$pci$.$set_state$($packed_memory$jscomp$inline_652_state$jscomp$58$$[48]);
  this.$devices$.$pit$ && this.$devices$.$pit$.$set_state$($packed_memory$jscomp$inline_652_state$jscomp$58$$[58]);
  this.$devices$.$net$ && this.$devices$.$net$.$set_state$($packed_memory$jscomp$inline_652_state$jscomp$58$$[59]);
  $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$ = $packed_memory$jscomp$inline_652_state$jscomp$58$$[60];
  var $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$ = new Uint8Array(this.$wasm_memory$.buffer, this.$ba$(), 13), $packed_page$jscomp$inline_654_pic_slave$jscomp$inline_642$$ = new Uint8Array(this.$wasm_memory$.buffer, this.$ca$(), 13);
  $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[0] = $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[0];
  $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[1] = $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[1];
  $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[2] = $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[2];
  $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[3] = $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[3];
  $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[4] = $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[4];
  var $page$jscomp$inline_655_state_slave$jscomp$inline_643$$ = $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[5];
  $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[6] = $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[6];
  $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[7] = $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[7];
  $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[8] = $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[8];
  $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[9] = $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[9];
  $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[10] = $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[10];
  $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[11] = $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[11];
  $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[12] = $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[12];
  $packed_page$jscomp$inline_654_pic_slave$jscomp$inline_642$$[0] = $page$jscomp$inline_655_state_slave$jscomp$inline_643$$[0];
  $packed_page$jscomp$inline_654_pic_slave$jscomp$inline_642$$[1] = $page$jscomp$inline_655_state_slave$jscomp$inline_643$$[1];
  $packed_page$jscomp$inline_654_pic_slave$jscomp$inline_642$$[2] = $page$jscomp$inline_655_state_slave$jscomp$inline_643$$[2];
  $packed_page$jscomp$inline_654_pic_slave$jscomp$inline_642$$[3] = $page$jscomp$inline_655_state_slave$jscomp$inline_643$$[3];
  $packed_page$jscomp$inline_654_pic_slave$jscomp$inline_642$$[4] = $page$jscomp$inline_655_state_slave$jscomp$inline_643$$[4];
  $packed_page$jscomp$inline_654_pic_slave$jscomp$inline_642$$[6] = $page$jscomp$inline_655_state_slave$jscomp$inline_643$$[6];
  $packed_page$jscomp$inline_654_pic_slave$jscomp$inline_642$$[7] = $page$jscomp$inline_655_state_slave$jscomp$inline_643$$[7];
  $packed_page$jscomp$inline_654_pic_slave$jscomp$inline_642$$[8] = $page$jscomp$inline_655_state_slave$jscomp$inline_643$$[8];
  $packed_page$jscomp$inline_654_pic_slave$jscomp$inline_642$$[9] = $page$jscomp$inline_655_state_slave$jscomp$inline_643$$[9];
  $packed_page$jscomp$inline_654_pic_slave$jscomp$inline_642$$[10] = $page$jscomp$inline_655_state_slave$jscomp$inline_643$$[10];
  $packed_page$jscomp$inline_654_pic_slave$jscomp$inline_642$$[11] = $page$jscomp$inline_655_state_slave$jscomp$inline_643$$[11];
  $packed_page$jscomp$inline_654_pic_slave$jscomp$inline_642$$[12] = $page$jscomp$inline_655_state_slave$jscomp$inline_643$$[12];
  this.$devices$.$sb16$ && this.$devices$.$sb16$.$set_state$($packed_memory$jscomp$inline_652_state$jscomp$58$$[61]);
  this.$devices$.$uart1$ && this.$devices$.$uart1$.$set_state$($packed_memory$jscomp$inline_652_state$jscomp$58$$[79]);
  this.$devices$.$uart2$ && this.$devices$.$uart2$.$set_state$($packed_memory$jscomp$inline_652_state$jscomp$58$$[80]);
  this.$devices$.$uart3$ && this.$devices$.$uart3$.$set_state$($packed_memory$jscomp$inline_652_state$jscomp$58$$[81]);
  this.$devices$.$virtio_console$ && this.$devices$.$virtio_console$.$set_state$($packed_memory$jscomp$inline_652_state$jscomp$58$$[82]);
  this.$devices$.$virtio_net$ && this.$devices$.$virtio_net$.$set_state$($packed_memory$jscomp$inline_652_state$jscomp$58$$[83]);
  this.$devices$.$virtio_balloon$ && this.$devices$.$virtio_balloon$.$set_state$($packed_memory$jscomp$inline_652_state$jscomp$58$$[84]);
  this.$fw_value$ = $packed_memory$jscomp$inline_652_state$jscomp$58$$[62];
  $packed_memory$jscomp$inline_652_state$jscomp$58$$[63] && ($bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$ = $packed_memory$jscomp$inline_652_state$jscomp$58$$[63], $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$ instanceof Array ? ($apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$ = new Int32Array(this.$wasm_memory$.buffer, 
  this.$J$(), 52), $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$.set($bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[0], 0), $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$.set($bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[1], 24), $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[48] = 
  $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[2], $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[49] = $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[3], $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[50] = $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[4], 
  $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$[51] = $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$[5]) : (new Uint8Array(this.$wasm_memory$.buffer, this.$J$(), 208)).set($bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$));
  this.$ta$[0] = $packed_memory$jscomp$inline_652_state$jscomp$58$$[64];
  this.$na$.set($packed_memory$jscomp$inline_652_state$jscomp$58$$[66]);
  this.$Z$.set($packed_memory$jscomp$inline_652_state$jscomp$58$$[67]);
  this.$G$[0] = $packed_memory$jscomp$inline_652_state$jscomp$58$$[68];
  this.$H$[0] = $packed_memory$jscomp$inline_652_state$jscomp$58$$[69];
  this.$v$[0] = $packed_memory$jscomp$inline_652_state$jscomp$58$$[70];
  this.$C$[0] = $packed_memory$jscomp$inline_652_state$jscomp$58$$[71];
  this.$D$[0] = $packed_memory$jscomp$inline_652_state$jscomp$58$$[72];
  this.$A$[0] = $packed_memory$jscomp$inline_652_state$jscomp$58$$[73];
  this.$B$[0] = $packed_memory$jscomp$inline_652_state$jscomp$58$$[74];
  this.$F$[0] = $packed_memory$jscomp$inline_652_state$jscomp$58$$[75];
  $bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$ = new $Bitmap$$module$src$lib$$($packed_memory$jscomp$inline_652_state$jscomp$58$$[78].buffer);
  $packed_memory$jscomp$inline_652_state$jscomp$58$$ = $packed_memory$jscomp$inline_652_state$jscomp$58$$[77];
  this.$va$(0, this.$memory_size$[0]);
  $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$ = this.$memory_size$[0] >> 12;
  $packed_page$jscomp$inline_654_pic_slave$jscomp$inline_642$$ = 0;
  for ($page$jscomp$inline_655_state_slave$jscomp$inline_643$$ = 0; $page$jscomp$inline_655_state_slave$jscomp$inline_643$$ < $apic$jscomp$inline_636_ioapic$jscomp$inline_647_page_count$jscomp$inline_653_pic$jscomp$inline_641$$; $page$jscomp$inline_655_state_slave$jscomp$inline_643$$++) {
    if ($bitmap$jscomp$inline_651_ide_config$jscomp$1_state$jscomp$inline_635_state$jscomp$inline_640_state$jscomp$inline_646$$.get($page$jscomp$inline_655_state_slave$jscomp$inline_643$$)) {
      const $offset$jscomp$inline_656$$ = $packed_page$jscomp$inline_654_pic_slave$jscomp$inline_642$$ << 12;
      this.$mem8$.set($packed_memory$jscomp$inline_652_state$jscomp$58$$.subarray($offset$jscomp$inline_656$$, $offset$jscomp$inline_656$$ + 4096), $page$jscomp$inline_655_state_slave$jscomp$inline_643$$ << 12);
      $packed_page$jscomp$inline_654_pic_slave$jscomp$inline_642$$++;
    }
  }
  this.$ua$();
  this.$Ba$();
  this.$Ea$();
};
function $JSCompiler_StaticMethods_reboot_internal$$($JSCompiler_StaticMethods_reboot_internal$self$$) {
  $JSCompiler_StaticMethods_reboot_internal$self$$.$O$();
  $JSCompiler_StaticMethods_reboot_internal$self$$.$fw_value$ = [];
  $JSCompiler_StaticMethods_reboot_internal$self$$.$devices$.$virtio_9p$ && $JSCompiler_StaticMethods_reboot_internal$self$$.$devices$.$virtio_9p$.reset();
  $JSCompiler_StaticMethods_reboot_internal$self$$.$devices$.$virtio_console$ && $JSCompiler_StaticMethods_reboot_internal$self$$.$devices$.$virtio_console$.reset();
  $JSCompiler_StaticMethods_reboot_internal$self$$.$devices$.$virtio_net$ && $JSCompiler_StaticMethods_reboot_internal$self$$.$devices$.$virtio_net$.reset();
  $JSCompiler_StaticMethods_reboot_internal$self$$.$devices$.$ps2$ && $JSCompiler_StaticMethods_reboot_internal$self$$.$devices$.$ps2$.reset();
  $JSCompiler_StaticMethods_load_bios$$($JSCompiler_StaticMethods_reboot_internal$self$$);
}
function $JSCompiler_StaticMethods_create_memory$$($JSCompiler_StaticMethods_create_memory$self$$, $size$jscomp$40$$, $memory_offset_minimum_size$$) {
  $size$jscomp$40$$ < $memory_offset_minimum_size$$ ? $size$jscomp$40$$ = $memory_offset_minimum_size$$ : 0 > ($size$jscomp$40$$ | 0) && ($size$jscomp$40$$ = Math.pow(2, 31) - 131072);
  $size$jscomp$40$$ = ($size$jscomp$40$$ - 1 | 131071) + 1 | 0;
  console.assert(0 === $JSCompiler_StaticMethods_create_memory$self$$.$memory_size$[0], "Expected uninitialised memory");
  $JSCompiler_StaticMethods_create_memory$self$$.$memory_size$[0] = $size$jscomp$40$$;
  $memory_offset_minimum_size$$ = $JSCompiler_StaticMethods_create_memory$self$$.$wa$($size$jscomp$40$$);
  $JSCompiler_StaticMethods_create_memory$self$$.$mem8$ = $view$$module$src$lib$$(Uint8Array, $JSCompiler_StaticMethods_create_memory$self$$.$wasm_memory$, $memory_offset_minimum_size$$, $size$jscomp$40$$);
  $view$$module$src$lib$$(Uint32Array, $JSCompiler_StaticMethods_create_memory$self$$.$wasm_memory$, $memory_offset_minimum_size$$, $size$jscomp$40$$ >> 2);
}
$CPU$$module$src$cpu$$.prototype.$init$ = function($option_rom$jscomp$1_settings$jscomp$2$$, $device_bus$$) {
  $JSCompiler_StaticMethods_create_memory$$(this, $option_rom$jscomp$1_settings$jscomp$2$$.$memory_size$ || 67108864, $option_rom$jscomp$1_settings$jscomp$2$$.$initrd$ ? 67108864 : 1048576, );
  $option_rom$jscomp$1_settings$jscomp$2$$.$disable_jit$ && this.$Ja$(0, 1);
  $option_rom$jscomp$1_settings$jscomp$2$$.$cpuid_level$ && this.$Ia$($option_rom$jscomp$1_settings$jscomp$2$$.$cpuid_level$);
  this.$U$[0] = +$option_rom$jscomp$1_settings$jscomp$2$$.$acpi$;
  this.$O$();
  var $ide_config$jscomp$2_io$jscomp$5$$ = new $IO$$module$src$io$$(this);
  this.$io$ = $ide_config$jscomp$2_io$jscomp$5$$;
  this.$bios$.$main$ = $option_rom$jscomp$1_settings$jscomp$2$$.$bios$;
  this.$bios$.$vga$ = $option_rom$jscomp$1_settings$jscomp$2$$.$vga_bios$;
  $JSCompiler_StaticMethods_load_bios$$(this);
  if ($option_rom$jscomp$1_settings$jscomp$2$$.$bzimage$) {
    const $option_rom$$ = $load_kernel$$module$src$kernel$$(this.$mem8$, $option_rom$jscomp$1_settings$jscomp$2$$.$bzimage$, $option_rom$jscomp$1_settings$jscomp$2$$.$initrd$, $option_rom$jscomp$1_settings$jscomp$2$$.$cmdline$ || "");
    $option_rom$$ && this.$option_roms$.push($option_rom$$);
  }
  $JSCompiler_StaticMethods_register_read$$($ide_config$jscomp$2_io$jscomp$5$$, 179, this, function() {
    return 0;
  });
  var $a20_byte$$ = 0;
  $JSCompiler_StaticMethods_register_read$$($ide_config$jscomp$2_io$jscomp$5$$, 146, this, function() {
    return $a20_byte$$;
  });
  $JSCompiler_StaticMethods_register_write$$($ide_config$jscomp$2_io$jscomp$5$$, 146, this, function($out_byte$jscomp$14$$) {
    $a20_byte$$ = $out_byte$jscomp$14$$;
  });
  $JSCompiler_StaticMethods_register_read$$($ide_config$jscomp$2_io$jscomp$5$$, 1297, this, function() {
    return this.$fw_pointer$ < this.$fw_value$.length ? this.$fw_value$[this.$fw_pointer$++] : 0;
  });
  $JSCompiler_StaticMethods_register_write$$($ide_config$jscomp$2_io$jscomp$5$$, 1296, this, void 0, function($buffer32_value$jscomp$188$$) {
    function $i32$$($x$jscomp$120$$) {
      return new Uint8Array(Int32Array.of($x$jscomp$120$$).buffer);
    }
    function $to_be16$$($x$jscomp$121$$) {
      return $x$jscomp$121$$ >> 8 | $x$jscomp$121$$ << 8 & 65280;
    }
    function $to_be32$$($x$jscomp$122$$) {
      return $x$jscomp$122$$ << 24 | $x$jscomp$122$$ << 8 & 16711680 | $x$jscomp$122$$ >> 8 & 65280 | $x$jscomp$122$$ >>> 24;
    }
    this.$fw_pointer$ = 0;
    if (0 === $buffer32_value$jscomp$188$$) {
      this.$fw_value$ = $i32$$(1431127377);
    } else {
      if (1 === $buffer32_value$jscomp$188$$) {
        this.$fw_value$ = $i32$$(0);
      } else {
        if (3 === $buffer32_value$jscomp$188$$) {
          this.$fw_value$ = $i32$$(this.$memory_size$[0]);
        } else {
          if (5 === $buffer32_value$jscomp$188$$) {
            this.$fw_value$ = $i32$$(1);
          } else {
            if (15 === $buffer32_value$jscomp$188$$) {
              this.$fw_value$ = $i32$$(1);
            } else {
              if (13 === $buffer32_value$jscomp$188$$) {
                this.$fw_value$ = new Uint8Array(16);
              } else {
                if (25 === $buffer32_value$jscomp$188$$) {
                  $buffer32_value$jscomp$188$$ = new Int32Array(4 + 64 * this.$option_roms$.length);
                  const $buffer8$$ = new Uint8Array($buffer32_value$jscomp$188$$.buffer);
                  $buffer32_value$jscomp$188$$[0] = $to_be32$$(this.$option_roms$.length);
                  for (let $i$jscomp$96$$ = 0; $i$jscomp$96$$ < this.$option_roms$.length; $i$jscomp$96$$++) {
                    const {name:$name$jscomp$108$$, data:$data$jscomp$220$$} = this.$option_roms$[$i$jscomp$96$$], $file_struct_ptr$$ = 4 + 64 * $i$jscomp$96$$;
                    $buffer32_value$jscomp$188$$[$file_struct_ptr$$ >> 2] = $to_be32$$($data$jscomp$220$$.length);
                    $buffer32_value$jscomp$188$$[$file_struct_ptr$$ + 4 >> 2] = $to_be16$$(49152 + $i$jscomp$96$$);
                    for (let $j$jscomp$11$$ = 0; $j$jscomp$11$$ < $name$jscomp$108$$.length; $j$jscomp$11$$++) {
                      $buffer8$$[$file_struct_ptr$$ + 8 + $j$jscomp$11$$] = $name$jscomp$108$$.charCodeAt($j$jscomp$11$$);
                    }
                  }
                  this.$fw_value$ = $buffer8$$;
                } else {
                  this.$fw_value$ = 32768 <= $buffer32_value$jscomp$188$$ && 49152 > $buffer32_value$jscomp$188$$ ? $i32$$(0) : 49152 <= $buffer32_value$jscomp$188$$ && $buffer32_value$jscomp$188$$ - 49152 < this.$option_roms$.length ? this.$option_roms$[$buffer32_value$jscomp$188$$ - 49152].data : $i32$$(0);
                }
              }
            }
          }
        }
      }
    }
  });
  this.$devices$ = {};
  $option_rom$jscomp$1_settings$jscomp$2$$.$load_devices$ && (this.$devices$.$pci$ = new $PCI$$module$src$pci$$(this), this.$U$[0] && (this.$devices$.$acpi$ = new $ACPI$$module$src$acpi$$(this)), this.$devices$.$rtc$ = new $RTC$$module$src$rtc$$(this), $JSCompiler_StaticMethods_fill_cmos$$(this, this.$devices$.$rtc$, $option_rom$jscomp$1_settings$jscomp$2$$), this.$devices$.$dma$ = new $DMA$$module$src$dma$$(this), this.$devices$.$vga$ = new $VGAScreen$$module$src$vga$$(this, $device_bus$$, $option_rom$jscomp$1_settings$jscomp$2$$.screen, 
  $option_rom$jscomp$1_settings$jscomp$2$$.$vga_memory_size$ || 8388608), this.$devices$.$ps2$ = new $PS2$$module$src$ps2$$(this, $device_bus$$), this.$devices$.$uart0$ = new $UART$$module$src$uart$$(this, 1016, $device_bus$$), $option_rom$jscomp$1_settings$jscomp$2$$.$uart1$ && (this.$devices$.$uart1$ = new $UART$$module$src$uart$$(this, 760, $device_bus$$)), $option_rom$jscomp$1_settings$jscomp$2$$.$uart2$ && (this.$devices$.$uart2$ = new $UART$$module$src$uart$$(this, 1E3, $device_bus$$)), $option_rom$jscomp$1_settings$jscomp$2$$.$uart3$ && 
  (this.$devices$.$uart3$ = new $UART$$module$src$uart$$(this, 744, $device_bus$$)), this.$devices$.$fdc$ = new $FloppyController$$module$src$floppy$$(this, $option_rom$jscomp$1_settings$jscomp$2$$.$fda$, $option_rom$jscomp$1_settings$jscomp$2$$.$fdb$), $ide_config$jscomp$2_io$jscomp$5$$ = [[void 0, void 0], [void 0, void 0]], $option_rom$jscomp$1_settings$jscomp$2$$.$hda$ && ($ide_config$jscomp$2_io$jscomp$5$$[0][0] = {buffer:$option_rom$jscomp$1_settings$jscomp$2$$.$hda$}, $ide_config$jscomp$2_io$jscomp$5$$[0][1] = 
  {buffer:$option_rom$jscomp$1_settings$jscomp$2$$.$hdb$}), $ide_config$jscomp$2_io$jscomp$5$$[1][0] = {$is_cdrom$:!0, buffer:$option_rom$jscomp$1_settings$jscomp$2$$.$cdrom$}, this.$devices$.$ide$ = new $IDEController$$module$src$ide$$(this, $device_bus$$, $ide_config$jscomp$2_io$jscomp$5$$), this.$devices$.$cdrom$ = this.$devices$.$ide$.$secondary$.$master$, this.$devices$.$pit$ = new $PIT$$module$src$pit$$(this, $device_bus$$), "ne2k" === $option_rom$jscomp$1_settings$jscomp$2$$.$net_device$.type ? 
  this.$devices$.$net$ = new $Ne2k$$module$src$ne2k$$(this, $device_bus$$, $option_rom$jscomp$1_settings$jscomp$2$$.$preserve_mac_from_state_image$, $option_rom$jscomp$1_settings$jscomp$2$$.$mac_address_translation$) : "virtio" === $option_rom$jscomp$1_settings$jscomp$2$$.$net_device$.type && (this.$devices$.$virtio_net$ = new $VirtioNet$$module$src$virtio_net$$(this, $device_bus$$, $option_rom$jscomp$1_settings$jscomp$2$$.$preserve_mac_from_state_image$)), $option_rom$jscomp$1_settings$jscomp$2$$.$fs9p$ ? 
  this.$devices$.$virtio_9p$ = new $Virtio9p$$module$lib$9p$$($option_rom$jscomp$1_settings$jscomp$2$$.$fs9p$, this, $device_bus$$) : $option_rom$jscomp$1_settings$jscomp$2$$.$handle9p$ ? this.$devices$.$virtio_9p$ = new $Virtio9pHandler$$module$lib$9p$$($option_rom$jscomp$1_settings$jscomp$2$$.$handle9p$, this) : $option_rom$jscomp$1_settings$jscomp$2$$.$proxy9p$ && (this.$devices$.$virtio_9p$ = new $Virtio9pProxy$$module$lib$9p$$($option_rom$jscomp$1_settings$jscomp$2$$.$proxy9p$, this)), $option_rom$jscomp$1_settings$jscomp$2$$.$virtio_console$ && 
  (this.$devices$.$virtio_console$ = new $VirtioConsole$$module$src$virtio_console$$(this, $device_bus$$)), $option_rom$jscomp$1_settings$jscomp$2$$.$virtio_balloon$ && (this.$devices$.$virtio_balloon$ = new $VirtioBalloon$$module$src$virtio_balloon$$(this, $device_bus$$)), this.$devices$.$sb16$ = new $SB16$$module$src$sb16$$(this, $device_bus$$));
  $option_rom$jscomp$1_settings$jscomp$2$$.$multiboot$ && ($option_rom$jscomp$1_settings$jscomp$2$$ = $JSCompiler_StaticMethods_load_multiboot_option_rom$$(this, $option_rom$jscomp$1_settings$jscomp$2$$.$multiboot$, $option_rom$jscomp$1_settings$jscomp$2$$.$initrd$, $option_rom$jscomp$1_settings$jscomp$2$$.$cmdline$)) && (this.$bios$.$main$ ? this.$option_roms$.push($option_rom$jscomp$1_settings$jscomp$2$$) : this.$o$[0] = $JSCompiler_StaticMethods_port_read32$$(this.$io$, 244));
};
function $JSCompiler_StaticMethods_load_multiboot_option_rom$$($JSCompiler_StaticMethods_load_multiboot_option_rom$self_data8$jscomp$1$$, $buffer$jscomp$61$$, $initrd$jscomp$2$$, $cmdline$jscomp$1$$) {
  if (8192 > $buffer$jscomp$61$$.byteLength) {
    var $buf32$$ = new Int32Array(2048);
    (new Uint8Array($buf32$$.buffer)).set(new Uint8Array($buffer$jscomp$61$$));
  } else {
    $buf32$$ = new Int32Array($buffer$jscomp$61$$, 0, 2048);
  }
  for (var $offset$jscomp$80$$ = 0; 8192 > $offset$jscomp$80$$; $offset$jscomp$80$$ += 4) {
    if (464367618 === $buf32$$[$offset$jscomp$80$$ >> 2]) {
      var $flags$jscomp$16$$ = $buf32$$[$offset$jscomp$80$$ + 4 >> 2];
      if (464367618 + $flags$jscomp$16$$ + $buf32$$[$offset$jscomp$80$$ + 8 >> 2] | 0) {
        continue;
      }
    } else {
      continue;
    }
    var $cpu$jscomp$26$$ = $JSCompiler_StaticMethods_load_multiboot_option_rom$self_data8$jscomp$1$$;
    $JSCompiler_StaticMethods_register_read$$($JSCompiler_StaticMethods_load_multiboot_option_rom$self_data8$jscomp$1$$.$io$, 244, $JSCompiler_StaticMethods_load_multiboot_option_rom$self_data8$jscomp$1$$, function() {
      return 0;
    }, function() {
      return 0;
    }, function() {
      var $i$jscomp$99_multiboot_data$$ = 31860, $entrypoint_info$jscomp$1_load_addr_program_headers$jscomp$inline_662$$ = 0;
      $cmdline$jscomp$1$$ && ($entrypoint_info$jscomp$1_load_addr_program_headers$jscomp$inline_662$$ |= 4, $cpu$jscomp$26$$.$write32$(31760, $i$jscomp$99_multiboot_data$$), $cmdline$jscomp$1$$ += "\x00", $bss_end_addr_cmdline_utf8_multiboot_mmap_count_ramdisk_top_top_of_load$$ = (new TextEncoder).encode($cmdline$jscomp$1$$), $JSCompiler_StaticMethods_write_blob$$($cpu$jscomp$26$$, $bss_end_addr_cmdline_utf8_multiboot_mmap_count_ramdisk_top_top_of_load$$, $i$jscomp$99_multiboot_data$$), $i$jscomp$99_multiboot_data$$ += 
      $bss_end_addr_cmdline_utf8_multiboot_mmap_count_ramdisk_top_top_of_load$$.length);
      if ($flags$jscomp$16$$ & 2) {
        $entrypoint_info$jscomp$1_load_addr_program_headers$jscomp$inline_662$$ |= 64;
        $bss_end_addr_cmdline_utf8_multiboot_mmap_count_ramdisk_top_top_of_load$$ = 0;
        $cpu$jscomp$26$$.$write32$(31788, 0);
        $cpu$jscomp$26$$.$write32$(31792, $i$jscomp$99_multiboot_data$$);
        var $JSCompiler_object_inline_header_865_entry_addr_start$jscomp$42_view$jscomp$inline_659$$ = 0;
        var $JSCompiler_object_inline_program_headers_866_blob$jscomp$17_blob$jscomp$18_was_memory$$ = !1;
        for (let $addr$jscomp$48$$ = 0; 4294967296 > $addr$jscomp$48$$; $addr$jscomp$48$$ += 131072) {
          $JSCompiler_object_inline_program_headers_866_blob$jscomp$17_blob$jscomp$18_was_memory$$ && void 0 !== $cpu$jscomp$26$$.$g$[$addr$jscomp$48$$ >>> 17] ? ($cpu$jscomp$26$$.$write32$($i$jscomp$99_multiboot_data$$, 20), $cpu$jscomp$26$$.$write32$($i$jscomp$99_multiboot_data$$ + 4, $JSCompiler_object_inline_header_865_entry_addr_start$jscomp$42_view$jscomp$inline_659$$), $cpu$jscomp$26$$.$write32$($i$jscomp$99_multiboot_data$$ + 8, 0), $cpu$jscomp$26$$.$write32$($i$jscomp$99_multiboot_data$$ + 
          12, $addr$jscomp$48$$ - $JSCompiler_object_inline_header_865_entry_addr_start$jscomp$42_view$jscomp$inline_659$$), $cpu$jscomp$26$$.$write32$($i$jscomp$99_multiboot_data$$ + 16, 0), $cpu$jscomp$26$$.$write32$($i$jscomp$99_multiboot_data$$ + 20, 1), $i$jscomp$99_multiboot_data$$ += 24, $bss_end_addr_cmdline_utf8_multiboot_mmap_count_ramdisk_top_top_of_load$$ += 24, $JSCompiler_object_inline_program_headers_866_blob$jscomp$17_blob$jscomp$18_was_memory$$ = !1) : $JSCompiler_object_inline_program_headers_866_blob$jscomp$17_blob$jscomp$18_was_memory$$ || 
          void 0 !== $cpu$jscomp$26$$.$g$[$addr$jscomp$48$$ >>> 17] || ($JSCompiler_object_inline_header_865_entry_addr_start$jscomp$42_view$jscomp$inline_659$$ = $addr$jscomp$48$$, $JSCompiler_object_inline_program_headers_866_blob$jscomp$17_blob$jscomp$18_was_memory$$ = !0);
        }
        $cpu$jscomp$26$$.$write32$(31788, $bss_end_addr_cmdline_utf8_multiboot_mmap_count_ramdisk_top_top_of_load$$);
      }
      $cpu$jscomp$26$$.$write32$(31744, $entrypoint_info$jscomp$1_load_addr_program_headers$jscomp$inline_662$$);
      var $bss_end_addr_cmdline_utf8_multiboot_mmap_count_ramdisk_top_top_of_load$$ = $entrypoint_info$jscomp$1_load_addr_program_headers$jscomp$inline_662$$ = 0;
      if ($flags$jscomp$16$$ & 65536) {
        $entrypoint_info$jscomp$1_load_addr_program_headers$jscomp$inline_662$$ = $buf32$$[$offset$jscomp$80$$ + 16 >> 2];
        var $load_end_addr_program$jscomp$64_ramdisk_address$jscomp$1$$ = $buf32$$[$offset$jscomp$80$$ + 20 >> 2];
        $bss_end_addr_cmdline_utf8_multiboot_mmap_count_ramdisk_top_top_of_load$$ = $buf32$$[$offset$jscomp$80$$ + 24 >> 2];
        $JSCompiler_object_inline_header_865_entry_addr_start$jscomp$42_view$jscomp$inline_659$$ = $buf32$$[$offset$jscomp$80$$ + 28 >> 2];
        $JSCompiler_object_inline_program_headers_866_blob$jscomp$17_blob$jscomp$18_was_memory$$ = new Uint8Array($buffer$jscomp$61$$, $offset$jscomp$80$$ - ($buf32$$[$offset$jscomp$80$$ + 12 >> 2] - $entrypoint_info$jscomp$1_load_addr_program_headers$jscomp$inline_662$$), 0 === $load_end_addr_program$jscomp$64_ramdisk_address$jscomp$1$$ ? void 0 : $load_end_addr_program$jscomp$64_ramdisk_address$jscomp$1$$ - $entrypoint_info$jscomp$1_load_addr_program_headers$jscomp$inline_662$$);
        $JSCompiler_StaticMethods_write_blob$$($cpu$jscomp$26$$, $JSCompiler_object_inline_program_headers_866_blob$jscomp$17_blob$jscomp$18_was_memory$$, $entrypoint_info$jscomp$1_load_addr_program_headers$jscomp$inline_662$$);
        $entrypoint_info$jscomp$1_load_addr_program_headers$jscomp$inline_662$$ = $JSCompiler_object_inline_header_865_entry_addr_start$jscomp$42_view$jscomp$inline_659$$ | 0;
        $bss_end_addr_cmdline_utf8_multiboot_mmap_count_ramdisk_top_top_of_load$$ = Math.max($load_end_addr_program$jscomp$64_ramdisk_address$jscomp$1$$, $bss_end_addr_cmdline_utf8_multiboot_mmap_count_ramdisk_top_top_of_load$$);
      } else {
        if (1179403647 === $buf32$$[0]) {
          $JSCompiler_object_inline_header_865_entry_addr_start$jscomp$42_view$jscomp$inline_659$$ = new DataView($buffer$jscomp$61$$);
          const [$header$jscomp$inline_660$$, $offset$jscomp$inline_661$$] = $read_struct$$module$src$elf$$($JSCompiler_object_inline_header_865_entry_addr_start$jscomp$42_view$jscomp$inline_659$$, $Header$$module$src$elf$$);
          console.assert(52 === $offset$jscomp$inline_661$$);
          console.assert(1179403647 === $header$jscomp$inline_660$$.$magic$, "Bad magic");
          console.assert(1 === $header$jscomp$inline_660$$.$class$, "Unimplemented: 64 bit elf");
          console.assert(1 === $header$jscomp$inline_660$$.data, "Unimplemented: big endian");
          console.assert(1 === $header$jscomp$inline_660$$.$version0$, "Bad version0");
          console.assert(2 === $header$jscomp$inline_660$$.type, "Unimplemented type");
          console.assert(1 === $header$jscomp$inline_660$$.$version1$, "Bad version1");
          console.assert(52 === $header$jscomp$inline_660$$.$ehsize$, "Bad header size");
          console.assert(32 === $header$jscomp$inline_660$$.$phentsize$, "Bad program header size");
          console.assert(40 === $header$jscomp$inline_660$$.$shentsize$, "Bad section header size");
          [$entrypoint_info$jscomp$1_load_addr_program_headers$jscomp$inline_662$$] = $read_structs$$module$src$elf$$(new DataView($JSCompiler_object_inline_header_865_entry_addr_start$jscomp$42_view$jscomp$inline_659$$.buffer, $JSCompiler_object_inline_header_865_entry_addr_start$jscomp$42_view$jscomp$inline_659$$.byteOffset + $header$jscomp$inline_660$$.$phoff$, $header$jscomp$inline_660$$.$phentsize$ * $header$jscomp$inline_660$$.$phnum$), $ProgramHeader$$module$src$elf$$, $header$jscomp$inline_660$$.$phnum$);
          $read_structs$$module$src$elf$$(new DataView($JSCompiler_object_inline_header_865_entry_addr_start$jscomp$42_view$jscomp$inline_659$$.buffer, $JSCompiler_object_inline_header_865_entry_addr_start$jscomp$42_view$jscomp$inline_659$$.byteOffset + $header$jscomp$inline_660$$.$shoff$, $header$jscomp$inline_660$$.$shentsize$ * $header$jscomp$inline_660$$.$shnum$), $SectionHeader$$module$src$elf$$, $header$jscomp$inline_660$$.$shnum$);
          $JSCompiler_object_inline_header_865_entry_addr_start$jscomp$42_view$jscomp$inline_659$$ = $header$jscomp$inline_660$$;
          $JSCompiler_object_inline_program_headers_866_blob$jscomp$17_blob$jscomp$18_was_memory$$ = $entrypoint_info$jscomp$1_load_addr_program_headers$jscomp$inline_662$$;
          $entrypoint_info$jscomp$1_load_addr_program_headers$jscomp$inline_662$$ = $JSCompiler_object_inline_header_865_entry_addr_start$jscomp$42_view$jscomp$inline_659$$.$entry$;
          for ($load_end_addr_program$jscomp$64_ramdisk_address$jscomp$1$$ of $JSCompiler_object_inline_program_headers_866_blob$jscomp$17_blob$jscomp$18_was_memory$$) {
            0 !== $load_end_addr_program$jscomp$64_ramdisk_address$jscomp$1$$.type && 1 === $load_end_addr_program$jscomp$64_ramdisk_address$jscomp$1$$.type && $load_end_addr_program$jscomp$64_ramdisk_address$jscomp$1$$.$paddr$ + $load_end_addr_program$jscomp$64_ramdisk_address$jscomp$1$$.$memsz$ < $cpu$jscomp$26$$.$memory_size$[0] && ($load_end_addr_program$jscomp$64_ramdisk_address$jscomp$1$$.$filesz$ && ($JSCompiler_object_inline_program_headers_866_blob$jscomp$17_blob$jscomp$18_was_memory$$ = 
            new Uint8Array($buffer$jscomp$61$$, $load_end_addr_program$jscomp$64_ramdisk_address$jscomp$1$$.offset, $load_end_addr_program$jscomp$64_ramdisk_address$jscomp$1$$.$filesz$), $JSCompiler_StaticMethods_write_blob$$($cpu$jscomp$26$$, $JSCompiler_object_inline_program_headers_866_blob$jscomp$17_blob$jscomp$18_was_memory$$, $load_end_addr_program$jscomp$64_ramdisk_address$jscomp$1$$.$paddr$)), $bss_end_addr_cmdline_utf8_multiboot_mmap_count_ramdisk_top_top_of_load$$ = Math.max($bss_end_addr_cmdline_utf8_multiboot_mmap_count_ramdisk_top_top_of_load$$, 
            $load_end_addr_program$jscomp$64_ramdisk_address$jscomp$1$$.$paddr$ + $load_end_addr_program$jscomp$64_ramdisk_address$jscomp$1$$.$memsz$), $entrypoint_info$jscomp$1_load_addr_program_headers$jscomp$inline_662$$ === $JSCompiler_object_inline_header_865_entry_addr_start$jscomp$42_view$jscomp$inline_659$$.$entry$ && $load_end_addr_program$jscomp$64_ramdisk_address$jscomp$1$$.$vaddr$ <= $entrypoint_info$jscomp$1_load_addr_program_headers$jscomp$inline_662$$ && $load_end_addr_program$jscomp$64_ramdisk_address$jscomp$1$$.$vaddr$ + 
            $load_end_addr_program$jscomp$64_ramdisk_address$jscomp$1$$.$memsz$ > $entrypoint_info$jscomp$1_load_addr_program_headers$jscomp$inline_662$$ && ($entrypoint_info$jscomp$1_load_addr_program_headers$jscomp$inline_662$$ = $entrypoint_info$jscomp$1_load_addr_program_headers$jscomp$inline_662$$ - $load_end_addr_program$jscomp$64_ramdisk_address$jscomp$1$$.$vaddr$ + $load_end_addr_program$jscomp$64_ramdisk_address$jscomp$1$$.$paddr$));
          }
        }
      }
      $initrd$jscomp$2$$ && ($cpu$jscomp$26$$.$write32$(31764, 1), $cpu$jscomp$26$$.$write32$(31768, $i$jscomp$99_multiboot_data$$), $load_end_addr_program$jscomp$64_ramdisk_address$jscomp$1$$ = $bss_end_addr_cmdline_utf8_multiboot_mmap_count_ramdisk_top_top_of_load$$, 0 !== ($load_end_addr_program$jscomp$64_ramdisk_address$jscomp$1$$ & 4095) && ($load_end_addr_program$jscomp$64_ramdisk_address$jscomp$1$$ = ($load_end_addr_program$jscomp$64_ramdisk_address$jscomp$1$$ & -4096) + 4096), $bss_end_addr_cmdline_utf8_multiboot_mmap_count_ramdisk_top_top_of_load$$ = 
      $load_end_addr_program$jscomp$64_ramdisk_address$jscomp$1$$ + $initrd$jscomp$2$$.byteLength, $cpu$jscomp$26$$.$write32$($i$jscomp$99_multiboot_data$$, $load_end_addr_program$jscomp$64_ramdisk_address$jscomp$1$$), $cpu$jscomp$26$$.$write32$($i$jscomp$99_multiboot_data$$ + 4, $bss_end_addr_cmdline_utf8_multiboot_mmap_count_ramdisk_top_top_of_load$$), $cpu$jscomp$26$$.$write32$($i$jscomp$99_multiboot_data$$ + 8, 0), $cpu$jscomp$26$$.$write32$($i$jscomp$99_multiboot_data$$ + 12, 0), $JSCompiler_StaticMethods_write_blob$$($cpu$jscomp$26$$, 
      new Uint8Array($initrd$jscomp$2$$), $load_end_addr_program$jscomp$64_ramdisk_address$jscomp$1$$));
      $cpu$jscomp$26$$.$o$[3] = 31744;
      $cpu$jscomp$26$$.$cr$[0] = 1;
      $cpu$jscomp$26$$.$N$[0] = 1;
      $cpu$jscomp$26$$.flags[0] = 2;
      $cpu$jscomp$26$$.$L$[0] = 1;
      $cpu$jscomp$26$$.$T$[0] = 1;
      for ($i$jscomp$99_multiboot_data$$ = 0; 6 > $i$jscomp$99_multiboot_data$$; $i$jscomp$99_multiboot_data$$++) {
        $cpu$jscomp$26$$.$u$[$i$jscomp$99_multiboot_data$$] = 0, $cpu$jscomp$26$$.$R$[$i$jscomp$99_multiboot_data$$] = 0, $cpu$jscomp$26$$.$P$[$i$jscomp$99_multiboot_data$$] = 4294967295, $cpu$jscomp$26$$.$S$[$i$jscomp$99_multiboot_data$$] = 45058;
      }
      $cpu$jscomp$26$$.$K$[0] = $cpu$jscomp$26$$.$Ca$() + $entrypoint_info$jscomp$1_load_addr_program_headers$jscomp$inline_662$$ | 0;
      $cpu$jscomp$26$$.$ua$();
      return 732803074;
    });
    $JSCompiler_StaticMethods_load_multiboot_option_rom$self_data8$jscomp$1$$.$io$.$register_write_consecutive$(244, $JSCompiler_StaticMethods_load_multiboot_option_rom$self_data8$jscomp$1$$, function($value$jscomp$189$$) {
      console.log("Test exited with code " + $h$$module$src$lib$$($value$jscomp$189$$, 2));
      throw "HALT";
    }, function() {
    }, function() {
    }, function() {
    });
    for (let $i$jscomp$100$$ = 0; 15 >= $i$jscomp$100$$; $i$jscomp$100$$++) {
      function $handle_write$$($value$jscomp$190$$) {
        $value$jscomp$190$$ ? this.$device_raise_irq$($i$jscomp$100$$) : this.$device_lower_irq$($i$jscomp$100$$);
      }
      $JSCompiler_StaticMethods_register_write$$($JSCompiler_StaticMethods_load_multiboot_option_rom$self_data8$jscomp$1$$.$io$, 8192 + $i$jscomp$100$$, $JSCompiler_StaticMethods_load_multiboot_option_rom$self_data8$jscomp$1$$, $handle_write$$, $handle_write$$, $handle_write$$);
    }
    $JSCompiler_StaticMethods_load_multiboot_option_rom$self_data8$jscomp$1$$ = new Uint8Array(512);
    (new Uint16Array($JSCompiler_StaticMethods_load_multiboot_option_rom$self_data8$jscomp$1$$.buffer))[0] = 43605;
    $JSCompiler_StaticMethods_load_multiboot_option_rom$self_data8$jscomp$1$$[2] = 1;
    var $checksum_index$jscomp$1_i$jscomp$98$$ = 3;
    $JSCompiler_StaticMethods_load_multiboot_option_rom$self_data8$jscomp$1$$[$checksum_index$jscomp$1_i$jscomp$98$$++] = 102;
    $JSCompiler_StaticMethods_load_multiboot_option_rom$self_data8$jscomp$1$$[$checksum_index$jscomp$1_i$jscomp$98$$++] = 229;
    $JSCompiler_StaticMethods_load_multiboot_option_rom$self_data8$jscomp$1$$[$checksum_index$jscomp$1_i$jscomp$98$$++] = 244;
    let $rom_checksum$$ = $JSCompiler_StaticMethods_load_multiboot_option_rom$self_data8$jscomp$1$$[$checksum_index$jscomp$1_i$jscomp$98$$] = 0;
    for (let $i$jscomp$101$$ = 0; $i$jscomp$101$$ < $JSCompiler_StaticMethods_load_multiboot_option_rom$self_data8$jscomp$1$$.length; $i$jscomp$101$$++) {
      $rom_checksum$$ += $JSCompiler_StaticMethods_load_multiboot_option_rom$self_data8$jscomp$1$$[$i$jscomp$101$$];
    }
    $JSCompiler_StaticMethods_load_multiboot_option_rom$self_data8$jscomp$1$$[$checksum_index$jscomp$1_i$jscomp$98$$] = -$rom_checksum$$;
    return {name:"genroms/multiboot.bin", data:$JSCompiler_StaticMethods_load_multiboot_option_rom$self_data8$jscomp$1$$};
  }
}
function $JSCompiler_StaticMethods_fill_cmos$$($JSCompiler_StaticMethods_fill_cmos$self$$, $rtc$jscomp$1$$, $settings$jscomp$3$$) {
  var $boot_order$jscomp$1_memory_above_16m_memory_above_1m$$ = $settings$jscomp$3$$.$boot_order$ || 291;
  $rtc$jscomp$1$$.$cmos_data$[56] = 1 | $boot_order$jscomp$1_memory_above_16m_memory_above_1m$$ >> 4 & 240;
  $rtc$jscomp$1$$.$cmos_data$[61] = $boot_order$jscomp$1_memory_above_16m_memory_above_1m$$ & 255;
  $rtc$jscomp$1$$.$cmos_data$[21] = 128;
  $rtc$jscomp$1$$.$cmos_data$[22] = 2;
  $boot_order$jscomp$1_memory_above_16m_memory_above_1m$$ = 0;
  1048576 <= $JSCompiler_StaticMethods_fill_cmos$self$$.$memory_size$[0] && ($boot_order$jscomp$1_memory_above_16m_memory_above_1m$$ = $JSCompiler_StaticMethods_fill_cmos$self$$.$memory_size$[0] - 1048576 >> 10, $boot_order$jscomp$1_memory_above_16m_memory_above_1m$$ = Math.min($boot_order$jscomp$1_memory_above_16m_memory_above_1m$$, 65535));
  $rtc$jscomp$1$$.$cmos_data$[23] = $boot_order$jscomp$1_memory_above_16m_memory_above_1m$$ & 255;
  $rtc$jscomp$1$$.$cmos_data$[24] = $boot_order$jscomp$1_memory_above_16m_memory_above_1m$$ >> 8 & 255;
  $rtc$jscomp$1$$.$cmos_data$[48] = $boot_order$jscomp$1_memory_above_16m_memory_above_1m$$ & 255;
  $rtc$jscomp$1$$.$cmos_data$[49] = $boot_order$jscomp$1_memory_above_16m_memory_above_1m$$ >> 8 & 255;
  $boot_order$jscomp$1_memory_above_16m_memory_above_1m$$ = 0;
  16777216 <= $JSCompiler_StaticMethods_fill_cmos$self$$.$memory_size$[0] && ($boot_order$jscomp$1_memory_above_16m_memory_above_1m$$ = $JSCompiler_StaticMethods_fill_cmos$self$$.$memory_size$[0] - 16777216 >> 16, $boot_order$jscomp$1_memory_above_16m_memory_above_1m$$ = Math.min($boot_order$jscomp$1_memory_above_16m_memory_above_1m$$, 65535));
  $rtc$jscomp$1$$.$cmos_data$[52] = $boot_order$jscomp$1_memory_above_16m_memory_above_1m$$ & 255;
  $rtc$jscomp$1$$.$cmos_data$[53] = $boot_order$jscomp$1_memory_above_16m_memory_above_1m$$ >> 8 & 255;
  $rtc$jscomp$1$$.$cmos_data$[91] = 0;
  $rtc$jscomp$1$$.$cmos_data$[92] = 0;
  $rtc$jscomp$1$$.$cmos_data$[93] = 0;
  $rtc$jscomp$1$$.$cmos_data$[20] = 47;
  $rtc$jscomp$1$$.$cmos_data$[95] = 0;
  $settings$jscomp$3$$.$fastboot$ && ($rtc$jscomp$1$$.$cmos_data$[63] = 1);
}
function $JSCompiler_StaticMethods_load_bios$$($JSCompiler_StaticMethods_load_bios$self$$) {
  var $bios$$ = $JSCompiler_StaticMethods_load_bios$self$$.$bios$.$main$, $vga_bios$$ = $JSCompiler_StaticMethods_load_bios$self$$.$bios$.$vga$;
  if ($bios$$) {
    var $data$jscomp$221$$ = new Uint8Array($bios$$);
    $JSCompiler_StaticMethods_write_blob$$($JSCompiler_StaticMethods_load_bios$self$$, $data$jscomp$221$$, 1048576 - $bios$$.byteLength);
    if ($vga_bios$$) {
      var $vga_bios8$$ = new Uint8Array($vga_bios$$);
      $JSCompiler_StaticMethods_write_blob$$($JSCompiler_StaticMethods_load_bios$self$$, $vga_bios8$$, 786432);
      $JSCompiler_StaticMethods_mmap_register$$($JSCompiler_StaticMethods_load_bios$self$$.$io$, 4272947200, 1048576, function($addr$jscomp$49$$) {
        $addr$jscomp$49$$ = $addr$jscomp$49$$ - 4272947200 | 0;
        return $addr$jscomp$49$$ < $vga_bios8$$.length ? $vga_bios8$$[$addr$jscomp$49$$] : 0;
      }, function() {
      });
    }
    $JSCompiler_StaticMethods_mmap_register$$($JSCompiler_StaticMethods_load_bios$self$$.$io$, 4293918720, 1048576, function($addr$jscomp$51$$) {
      return this.$mem8$[$addr$jscomp$51$$ & 1048575];
    }.bind($JSCompiler_StaticMethods_load_bios$self$$), function($addr$jscomp$52$$, $value$jscomp$192$$) {
      this.$mem8$[$addr$jscomp$52$$ & 1048575] = $value$jscomp$192$$;
    }.bind($JSCompiler_StaticMethods_load_bios$self$$));
  }
}
function $JSCompiler_StaticMethods_codegen_finalize$$($JSCompiler_StaticMethods_codegen_finalize$self$$, $wasm_table_index$jscomp$2$$, $start$jscomp$44$$, $state_flags$jscomp$1$$, $ptr$jscomp$7$$, $len$jscomp$28$$) {
  const $code$jscomp$9$$ = new Uint8Array($JSCompiler_StaticMethods_codegen_finalize$self$$.$wasm_memory$.buffer, $ptr$jscomp$7$$ >>> 0, $len$jscomp$28$$ >>> 0);
  WebAssembly.instantiate($code$jscomp$9$$, {e:$JSCompiler_StaticMethods_codegen_finalize$self$$.$Ga$}).then($result$jscomp$25$$ => {
    $JSCompiler_StaticMethods_codegen_finalize$self$$.$wm$.$wasm_table$.set($wasm_table_index$jscomp$2$$ + 1024, $result$jscomp$25$$.instance.exports.f);
    $JSCompiler_StaticMethods_codegen_finalize$self$$.$ya$($wasm_table_index$jscomp$2$$, $start$jscomp$44$$, $state_flags$jscomp$1$$);
    $JSCompiler_StaticMethods_codegen_finalize$self$$.$Ra$ && $JSCompiler_StaticMethods_codegen_finalize$self$$.$Ra$($code$jscomp$9$$);
  });
}
;function $VirtIO$$module$src$virtio$$($cpu$jscomp$27$$, $JSCompiler_inline_result$jscomp$88_options$jscomp$44_options$jscomp$inline_668$$) {
  this.$cpu$ = $cpu$jscomp$27$$;
  this.$pci$ = $cpu$jscomp$27$$.$devices$.$pci$;
  this.$device_id$ = $JSCompiler_inline_result$jscomp$88_options$jscomp$44_options$jscomp$inline_668$$.$device_id$;
  this.$pci_space$ = [244, 26, $JSCompiler_inline_result$jscomp$88_options$jscomp$44_options$jscomp$inline_668$$.$device_id$ & 255, $JSCompiler_inline_result$jscomp$88_options$jscomp$44_options$jscomp$inline_668$$.$device_id$ >> 8, 7, 5, 16, 0, 1, 0, 2, 0, 0, 0, 0, 0, 1, 168, 0, 0, 0, 16, 191, 254, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 244, 26, $JSCompiler_inline_result$jscomp$88_options$jscomp$44_options$jscomp$inline_668$$.$subsystem_device_id$ & 255, $JSCompiler_inline_result$jscomp$88_options$jscomp$44_options$jscomp$inline_668$$.$subsystem_device_id$ >> 
  8, 0, 0, 0, 0, 64, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, ];
  this.$pci_space$ = this.$pci_space$.concat(Array(256 - this.$pci_space$.length).fill(0));
  this.$pci_id$ = $JSCompiler_inline_result$jscomp$88_options$jscomp$44_options$jscomp$inline_668$$.$pci_id$;
  this.$pci_bars$ = [];
  this.name = $JSCompiler_inline_result$jscomp$88_options$jscomp$44_options$jscomp$inline_668$$.name;
  this.$j$ = this.$s$ = 0;
  this.$o$ = new Uint32Array(4);
  this.$h$ = new Uint32Array(4);
  for ($capabilities_f$jscomp$7$$ of $JSCompiler_inline_result$jscomp$88_options$jscomp$44_options$jscomp$inline_668$$.$common$.features) {
    this.$o$[$capabilities_f$jscomp$7$$ >>> 5] |= 1 << ($capabilities_f$jscomp$7$$ & 31), this.$h$[$capabilities_f$jscomp$7$$ >>> 5] |= 1 << ($capabilities_f$jscomp$7$$ & 31);
  }
  $JSCompiler_inline_result$jscomp$88_options$jscomp$44_options$jscomp$inline_668$$.$common$.features.includes(32);
  this.$u$ = !0;
  this.$i$ = 0;
  this.$v$ = !1;
  this.$A$ = 0;
  this.$queues$ = [];
  for ($JSCompiler_temp_const$jscomp$86_queue_options$$ of $JSCompiler_inline_result$jscomp$88_options$jscomp$44_options$jscomp$inline_668$$.$common$.$queues$) {
    this.$queues$.push(new $VirtQueue$$module$src$virtio$$($cpu$jscomp$27$$, this, $JSCompiler_temp_const$jscomp$86_queue_options$$));
  }
  this.$l$ = 0;
  this.$g$ = this.$queues$[0];
  this.$isr_status$ = 0;
  var $capabilities_f$jscomp$7$$ = [];
  $capabilities_f$jscomp$7$$.push($JSCompiler_StaticMethods_create_common_capability$$(this, $JSCompiler_inline_result$jscomp$88_options$jscomp$44_options$jscomp$inline_668$$.$common$));
  $capabilities_f$jscomp$7$$.push($JSCompiler_StaticMethods_create_notification_capability$$($JSCompiler_inline_result$jscomp$88_options$jscomp$44_options$jscomp$inline_668$$.notification));
  $capabilities_f$jscomp$7$$.push($JSCompiler_StaticMethods_create_isr_capability$$(this, $JSCompiler_inline_result$jscomp$88_options$jscomp$44_options$jscomp$inline_668$$.$isr_status$));
  if ($JSCompiler_inline_result$jscomp$88_options$jscomp$44_options$jscomp$inline_668$$.$device_specific$) {
    var $JSCompiler_temp_const$jscomp$86_queue_options$$ = $capabilities_f$jscomp$7$$.push;
    $JSCompiler_inline_result$jscomp$88_options$jscomp$44_options$jscomp$inline_668$$ = $JSCompiler_inline_result$jscomp$88_options$jscomp$44_options$jscomp$inline_668$$.$device_specific$;
    $JSCompiler_inline_result$jscomp$88_options$jscomp$44_options$jscomp$inline_668$$ = {type:4, $bar$:3, port:$JSCompiler_inline_result$jscomp$88_options$jscomp$44_options$jscomp$inline_668$$.$initial_port$, $use_mmio$:!1, offset:0, $extra$:new Uint8Array(0), $struct$:$JSCompiler_inline_result$jscomp$88_options$jscomp$44_options$jscomp$inline_668$$.$struct$, };
    $JSCompiler_temp_const$jscomp$86_queue_options$$.call($capabilities_f$jscomp$7$$, $JSCompiler_inline_result$jscomp$88_options$jscomp$44_options$jscomp$inline_668$$);
  }
  $JSCompiler_StaticMethods_init_capabilities$$(this, $capabilities_f$jscomp$7$$);
  $JSCompiler_StaticMethods_register_device$$($cpu$jscomp$27$$.$devices$.$pci$, this);
  this.reset();
}
function $JSCompiler_StaticMethods_create_common_capability$$($JSCompiler_StaticMethods_create_common_capability$self$$, $options$jscomp$45$$) {
  return {type:1, $bar$:0, port:$options$jscomp$45$$.$initial_port$, $use_mmio$:!1, offset:0, $extra$:new Uint8Array(0), $struct$:[{bytes:4, name:"device_feature_select", read:() => $JSCompiler_StaticMethods_create_common_capability$self$$.$s$, write:$data$jscomp$222$$ => {
    $JSCompiler_StaticMethods_create_common_capability$self$$.$s$ = $data$jscomp$222$$;
  }, }, {bytes:4, name:"device_feature", read:() => $JSCompiler_StaticMethods_create_common_capability$self$$.$o$[$JSCompiler_StaticMethods_create_common_capability$self$$.$s$] || 0, write:() => {
  }, }, {bytes:4, name:"driver_feature_select", read:() => $JSCompiler_StaticMethods_create_common_capability$self$$.$j$, write:$data$jscomp$224$$ => {
    $JSCompiler_StaticMethods_create_common_capability$self$$.$j$ = $data$jscomp$224$$;
  }, }, {bytes:4, name:"driver_feature", read:() => $JSCompiler_StaticMethods_create_common_capability$self$$.$h$[$JSCompiler_StaticMethods_create_common_capability$self$$.$j$] || 0, write:$data$jscomp$225$$ => {
    const $supported_feature$$ = $JSCompiler_StaticMethods_create_common_capability$self$$.$o$[$JSCompiler_StaticMethods_create_common_capability$self$$.$j$];
    $JSCompiler_StaticMethods_create_common_capability$self$$.$j$ < $JSCompiler_StaticMethods_create_common_capability$self$$.$h$.length && ($JSCompiler_StaticMethods_create_common_capability$self$$.$h$[$JSCompiler_StaticMethods_create_common_capability$self$$.$j$] = $data$jscomp$225$$ & $supported_feature$$);
    $JSCompiler_StaticMethods_create_common_capability$self$$.$u$ = $JSCompiler_StaticMethods_create_common_capability$self$$.$u$ && !($data$jscomp$225$$ & ~$supported_feature$$);
  }, }, {bytes:2, name:"msix_config", read:() => 65535, write:() => {
  }, }, {bytes:2, name:"num_queues", read:() => $JSCompiler_StaticMethods_create_common_capability$self$$.$queues$.length, write:() => {
  }, }, {bytes:1, name:"device_status", read:() => $JSCompiler_StaticMethods_create_common_capability$self$$.$i$, write:$data$jscomp$228$$ => {
    0 === $data$jscomp$228$$ && $JSCompiler_StaticMethods_create_common_capability$self$$.reset();
    $data$jscomp$228$$ & ~$JSCompiler_StaticMethods_create_common_capability$self$$.$i$ & 4 && $JSCompiler_StaticMethods_create_common_capability$self$$.$i$ & 64 && ($JSCompiler_StaticMethods_create_common_capability$self$$.$v$ = !0, $JSCompiler_StaticMethods_create_common_capability$self$$.$i$ & 4 && $JSCompiler_StaticMethods_create_common_capability$self$$.$raise_irq$(2));
    $JSCompiler_StaticMethods_create_common_capability$self$$.$u$ || ($data$jscomp$228$$ &= -9);
    $JSCompiler_StaticMethods_create_common_capability$self$$.$i$ = $data$jscomp$228$$;
  }, }, {bytes:1, name:"config_generation", read:() => $JSCompiler_StaticMethods_create_common_capability$self$$.$A$, write:() => {
  }, }, {bytes:2, name:"queue_select", read:() => $JSCompiler_StaticMethods_create_common_capability$self$$.$l$, write:$data$jscomp$230$$ => {
    $JSCompiler_StaticMethods_create_common_capability$self$$.$l$ = $data$jscomp$230$$;
    $JSCompiler_StaticMethods_create_common_capability$self$$.$l$ < $JSCompiler_StaticMethods_create_common_capability$self$$.$queues$.length ? $JSCompiler_StaticMethods_create_common_capability$self$$.$g$ = $JSCompiler_StaticMethods_create_common_capability$self$$.$queues$[$JSCompiler_StaticMethods_create_common_capability$self$$.$l$] : $JSCompiler_StaticMethods_create_common_capability$self$$.$g$ = null;
  }, }, {bytes:2, name:"queue_size", read:() => $JSCompiler_StaticMethods_create_common_capability$self$$.$g$ ? $JSCompiler_StaticMethods_create_common_capability$self$$.$g$.size : 0, write:$data$jscomp$231_size$jscomp$inline_673$$ => {
    if ($JSCompiler_StaticMethods_create_common_capability$self$$.$g$) {
      $data$jscomp$231_size$jscomp$inline_673$$ & $data$jscomp$231_size$jscomp$inline_673$$ - 1 && ($data$jscomp$231_size$jscomp$inline_673$$ = 1 << $int_log2$$module$src$lib$$($data$jscomp$231_size$jscomp$inline_673$$ - 1) + 1);
      $data$jscomp$231_size$jscomp$inline_673$$ > $JSCompiler_StaticMethods_create_common_capability$self$$.$g$.$size_supported$ && ($data$jscomp$231_size$jscomp$inline_673$$ = $JSCompiler_StaticMethods_create_common_capability$self$$.$g$.$size_supported$);
      var $JSCompiler_StaticMethods_set_size$self$jscomp$inline_672$$ = $JSCompiler_StaticMethods_create_common_capability$self$$.$g$;
      $JSCompiler_StaticMethods_set_size$self$jscomp$inline_672$$.size = $data$jscomp$231_size$jscomp$inline_673$$;
      $JSCompiler_StaticMethods_set_size$self$jscomp$inline_672$$.$mask$ = $data$jscomp$231_size$jscomp$inline_673$$ - 1;
    }
  }, }, {bytes:2, name:"queue_msix_vector", read:() => 65535, write:() => {
  }, }, {bytes:2, name:"queue_enable", read:() => $JSCompiler_StaticMethods_create_common_capability$self$$.$g$ ? $JSCompiler_StaticMethods_create_common_capability$self$$.$g$.enabled | 0 : 0, write:$data$jscomp$233$$ => {
    $JSCompiler_StaticMethods_create_common_capability$self$$.$g$ && 1 === $data$jscomp$233$$ && $JSCompiler_StaticMethods_is_configured$$($JSCompiler_StaticMethods_create_common_capability$self$$.$g$) && ($JSCompiler_StaticMethods_create_common_capability$self$$.$g$.enabled = !0);
  }, }, {bytes:2, name:"queue_notify_off", read:() => $JSCompiler_StaticMethods_create_common_capability$self$$.$g$ ? $JSCompiler_StaticMethods_create_common_capability$self$$.$g$.$notify_offset$ : 0, write:() => {
  }, }, {bytes:4, name:"queue_desc (low dword)", read:() => $JSCompiler_StaticMethods_create_common_capability$self$$.$g$ ? $JSCompiler_StaticMethods_create_common_capability$self$$.$g$.$l$ : 0, write:$data$jscomp$235$$ => {
    $JSCompiler_StaticMethods_create_common_capability$self$$.$g$ && ($JSCompiler_StaticMethods_create_common_capability$self$$.$g$.$l$ = $data$jscomp$235$$);
  }, }, {bytes:4, name:"queue_desc (high dword)", read:() => 0, write:() => {
  }, }, {bytes:4, name:"queue_avail (low dword)", read:() => $JSCompiler_StaticMethods_create_common_capability$self$$.$g$ ? $JSCompiler_StaticMethods_create_common_capability$self$$.$g$.$g$ : 0, write:$data$jscomp$237$$ => {
    $JSCompiler_StaticMethods_create_common_capability$self$$.$g$ && ($JSCompiler_StaticMethods_create_common_capability$self$$.$g$.$g$ = $data$jscomp$237$$);
  }, }, {bytes:4, name:"queue_avail (high dword)", read:() => 0, write:() => {
  }, }, {bytes:4, name:"queue_used (low dword)", read:() => $JSCompiler_StaticMethods_create_common_capability$self$$.$g$ ? $JSCompiler_StaticMethods_create_common_capability$self$$.$g$.$h$ : 0, write:$data$jscomp$239$$ => {
    $JSCompiler_StaticMethods_create_common_capability$self$$.$g$ && ($JSCompiler_StaticMethods_create_common_capability$self$$.$g$.$h$ = $data$jscomp$239$$);
  }, }, {bytes:4, name:"queue_used (high dword)", read:() => 0, write:() => {
  }, }, ], };
}
function $JSCompiler_StaticMethods_create_notification_capability$$($options$jscomp$46$$) {
  const $notify_struct$$ = [];
  let $notify_off_multiplier$$;
  $notify_off_multiplier$$ = $options$jscomp$46$$.$single_handler$ ? 0 : 2;
  for (const [$i$jscomp$115$$, $handler$jscomp$15$$] of $options$jscomp$46$$.$handlers$.entries()) {
    $notify_struct$$.push({bytes:2, name:"notify" + $i$jscomp$115$$, read:() => 65535, write:$handler$jscomp$15$$ || (() => {
    }), });
  }
  return {type:2, $bar$:1, port:$options$jscomp$46$$.$initial_port$, $use_mmio$:!1, offset:0, $extra$:new Uint8Array([$notify_off_multiplier$$ & 255, $notify_off_multiplier$$ >> 8 & 255, $notify_off_multiplier$$ >> 16 & 255, $notify_off_multiplier$$ >> 24, ]), $struct$:$notify_struct$$, };
}
function $JSCompiler_StaticMethods_create_isr_capability$$($JSCompiler_StaticMethods_create_isr_capability$self$$, $options$jscomp$47$$) {
  return {type:3, $bar$:2, port:$options$jscomp$47$$.$initial_port$, $use_mmio$:!1, offset:0, $extra$:new Uint8Array(0), $struct$:[{bytes:1, name:"isr_status", read:() => {
    const $isr_status$$ = $JSCompiler_StaticMethods_create_isr_capability$self$$.$isr_status$;
    $JSCompiler_StaticMethods_create_isr_capability$self$$.$isr_status$ = 0;
    $JSCompiler_StaticMethods_JSC$1939_lower_irq$$($JSCompiler_StaticMethods_create_isr_capability$self$$.$pci$, $JSCompiler_StaticMethods_create_isr_capability$self$$.$pci_id$);
    return $isr_status$$;
  }, write:() => {
  }, }, ], };
}
function $JSCompiler_StaticMethods_init_capabilities$$($JSCompiler_StaticMethods_init_capabilities$self$$, $cap_len$jscomp$1_capabilities$jscomp$1_write$$) {
  let $cap_next$$ = $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[52] = 64;
  var $bar_offset_cap_ptr_port$jscomp$10$$ = $cap_next$$;
  for (const $cap$jscomp$2$$ of $cap_len$jscomp$1_capabilities$jscomp$1_write$$) {
    $cap_len$jscomp$1_capabilities$jscomp$1_write$$ = 16 + $cap$jscomp$2$$.$extra$.length;
    $bar_offset_cap_ptr_port$jscomp$10$$ = $cap_next$$;
    $cap_next$$ = $bar_offset_cap_ptr_port$jscomp$10$$ + $cap_len$jscomp$1_capabilities$jscomp$1_write$$;
    var $bar_size_shim_read8_on_16$$ = $cap$jscomp$2$$.$struct$.reduce(($bytes$jscomp$6$$, $field$$) => $bytes$jscomp$6$$ + $field$$.bytes, 0);
    $bar_size_shim_read8_on_16$$ += $cap$jscomp$2$$.offset;
    $bar_size_shim_read8_on_16$$ = 16 > $bar_size_shim_read8_on_16$$ ? 16 : 1 << $int_log2$$module$src$lib$$($bar_size_shim_read8_on_16$$ - 1) + 1;
    $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_bars$[$cap$jscomp$2$$.$bar$] = {size:$bar_size_shim_read8_on_16$$, };
    $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$bar_offset_cap_ptr_port$jscomp$10$$] = 9;
    $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$bar_offset_cap_ptr_port$jscomp$10$$ + 1] = $cap_next$$;
    $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$bar_offset_cap_ptr_port$jscomp$10$$ + 2] = $cap_len$jscomp$1_capabilities$jscomp$1_write$$;
    $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$bar_offset_cap_ptr_port$jscomp$10$$ + 3] = $cap$jscomp$2$$.type;
    $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$bar_offset_cap_ptr_port$jscomp$10$$ + 4] = $cap$jscomp$2$$.$bar$;
    $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$bar_offset_cap_ptr_port$jscomp$10$$ + 5] = 0;
    $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$bar_offset_cap_ptr_port$jscomp$10$$ + 6] = 0;
    $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$bar_offset_cap_ptr_port$jscomp$10$$ + 7] = 0;
    $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$bar_offset_cap_ptr_port$jscomp$10$$ + 8] = $cap$jscomp$2$$.offset & 255;
    $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$bar_offset_cap_ptr_port$jscomp$10$$ + 9] = $cap$jscomp$2$$.offset >>> 8 & 255;
    $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$bar_offset_cap_ptr_port$jscomp$10$$ + 10] = $cap$jscomp$2$$.offset >>> 16 & 255;
    $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$bar_offset_cap_ptr_port$jscomp$10$$ + 11] = $cap$jscomp$2$$.offset >>> 24;
    $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$bar_offset_cap_ptr_port$jscomp$10$$ + 12] = $bar_size_shim_read8_on_16$$ & 255;
    $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$bar_offset_cap_ptr_port$jscomp$10$$ + 13] = $bar_size_shim_read8_on_16$$ >>> 8 & 255;
    $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$bar_offset_cap_ptr_port$jscomp$10$$ + 14] = $bar_size_shim_read8_on_16$$ >>> 16 & 255;
    $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$bar_offset_cap_ptr_port$jscomp$10$$ + 15] = $bar_size_shim_read8_on_16$$ >>> 24;
    for (const [$i$jscomp$116$$, $extra_byte$$] of $cap$jscomp$2$$.$extra$.entries()) {
      $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$bar_offset_cap_ptr_port$jscomp$10$$ + 16 + $i$jscomp$116$$] = $extra_byte$$;
    }
    $bar_offset_cap_ptr_port$jscomp$10$$ = 16 + 4 * $cap$jscomp$2$$.$bar$;
    $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$bar_offset_cap_ptr_port$jscomp$10$$] = $cap$jscomp$2$$.port & 254 | !$cap$jscomp$2$$.$use_mmio$;
    $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$bar_offset_cap_ptr_port$jscomp$10$$ + 1] = $cap$jscomp$2$$.port >>> 8 & 255;
    $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$bar_offset_cap_ptr_port$jscomp$10$$ + 2] = $cap$jscomp$2$$.port >>> 16 & 255;
    $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$bar_offset_cap_ptr_port$jscomp$10$$ + 3] = $cap$jscomp$2$$.port >>> 24 & 255;
    $bar_offset_cap_ptr_port$jscomp$10$$ = $cap$jscomp$2$$.port + $cap$jscomp$2$$.offset;
    for (const $field$jscomp$1$$ of $cap$jscomp$2$$.$struct$) {
      let $read$$ = $field$jscomp$1$$.read;
      $cap_len$jscomp$1_capabilities$jscomp$1_write$$ = $field$jscomp$1$$.write;
      if (!$cap$jscomp$2$$.$use_mmio$) {
        $bar_size_shim_read8_on_16$$ = function($addr$jscomp$58$$) {
          return $read$$($addr$jscomp$58$$ & -2) >> (($addr$jscomp$58$$ & 1) << 3) & 255;
        };
        const $shim_read8_on_32$$ = function($addr$jscomp$59$$) {
          return $read$$($addr$jscomp$59$$ & -4) >> (($addr$jscomp$59$$ & 3) << 3) & 255;
        }, $shim_read32_on_16$$ = function($addr$jscomp$60$$) {
          return $read$$($addr$jscomp$60$$);
        };
        switch($field$jscomp$1$$.bytes) {
          case 4:
            $JSCompiler_StaticMethods_register_read$$($JSCompiler_StaticMethods_init_capabilities$self$$.$cpu$.$io$, $bar_offset_cap_ptr_port$jscomp$10$$, $JSCompiler_StaticMethods_init_capabilities$self$$, $shim_read8_on_32$$, void 0, $read$$);
            $JSCompiler_StaticMethods_register_read$$($JSCompiler_StaticMethods_init_capabilities$self$$.$cpu$.$io$, $bar_offset_cap_ptr_port$jscomp$10$$ + 1, $JSCompiler_StaticMethods_init_capabilities$self$$, $shim_read8_on_32$$);
            $JSCompiler_StaticMethods_register_read$$($JSCompiler_StaticMethods_init_capabilities$self$$.$cpu$.$io$, $bar_offset_cap_ptr_port$jscomp$10$$ + 2, $JSCompiler_StaticMethods_init_capabilities$self$$, $shim_read8_on_32$$);
            $JSCompiler_StaticMethods_register_read$$($JSCompiler_StaticMethods_init_capabilities$self$$.$cpu$.$io$, $bar_offset_cap_ptr_port$jscomp$10$$ + 3, $JSCompiler_StaticMethods_init_capabilities$self$$, $shim_read8_on_32$$);
            $JSCompiler_StaticMethods_register_write$$($JSCompiler_StaticMethods_init_capabilities$self$$.$cpu$.$io$, $bar_offset_cap_ptr_port$jscomp$10$$, $JSCompiler_StaticMethods_init_capabilities$self$$, void 0, void 0, $cap_len$jscomp$1_capabilities$jscomp$1_write$$);
            break;
          case 2:
            $JSCompiler_StaticMethods_register_read$$($JSCompiler_StaticMethods_init_capabilities$self$$.$cpu$.$io$, $bar_offset_cap_ptr_port$jscomp$10$$, $JSCompiler_StaticMethods_init_capabilities$self$$, $bar_size_shim_read8_on_16$$, $read$$, $shim_read32_on_16$$);
            $JSCompiler_StaticMethods_register_read$$($JSCompiler_StaticMethods_init_capabilities$self$$.$cpu$.$io$, $bar_offset_cap_ptr_port$jscomp$10$$ + 1, $JSCompiler_StaticMethods_init_capabilities$self$$, $bar_size_shim_read8_on_16$$);
            $JSCompiler_StaticMethods_register_write$$($JSCompiler_StaticMethods_init_capabilities$self$$.$cpu$.$io$, $bar_offset_cap_ptr_port$jscomp$10$$, $JSCompiler_StaticMethods_init_capabilities$self$$, void 0, $cap_len$jscomp$1_capabilities$jscomp$1_write$$);
            break;
          case 1:
            $JSCompiler_StaticMethods_register_read$$($JSCompiler_StaticMethods_init_capabilities$self$$.$cpu$.$io$, $bar_offset_cap_ptr_port$jscomp$10$$, $JSCompiler_StaticMethods_init_capabilities$self$$, $read$$), $JSCompiler_StaticMethods_register_write$$($JSCompiler_StaticMethods_init_capabilities$self$$.$cpu$.$io$, $bar_offset_cap_ptr_port$jscomp$10$$, $JSCompiler_StaticMethods_init_capabilities$self$$, $cap_len$jscomp$1_capabilities$jscomp$1_write$$);
        }
      }
      $bar_offset_cap_ptr_port$jscomp$10$$ += $field$jscomp$1$$.bytes;
    }
  }
  $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$cap_next$$] = 9;
  $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$cap_next$$ + 1] = 0;
  $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$cap_next$$ + 2] = 20;
  $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$cap_next$$ + 3] = 5;
  $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$cap_next$$ + 4] = 0;
  $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$cap_next$$ + 5] = 0;
  $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$cap_next$$ + 6] = 0;
  $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$cap_next$$ + 7] = 0;
  $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$cap_next$$ + 8] = 0;
  $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$cap_next$$ + 9] = 0;
  $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$cap_next$$ + 10] = 0;
  $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$cap_next$$ + 11] = 0;
  $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$cap_next$$ + 12] = 0;
  $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$cap_next$$ + 13] = 0;
  $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$cap_next$$ + 14] = 0;
  $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$cap_next$$ + 15] = 0;
  $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$cap_next$$ + 16] = 0;
  $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$cap_next$$ + 17] = 0;
  $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$cap_next$$ + 18] = 0;
  $JSCompiler_StaticMethods_init_capabilities$self$$.$pci_space$[$cap_next$$ + 19] = 0;
}
$VirtIO$$module$src$virtio$$.prototype.$get_state$ = function() {
  let $state$jscomp$62$$ = [];
  $state$jscomp$62$$[0] = this.$s$;
  $state$jscomp$62$$[1] = this.$j$;
  $state$jscomp$62$$[2] = this.$o$;
  $state$jscomp$62$$[3] = this.$h$;
  $state$jscomp$62$$[4] = this.$u$;
  $state$jscomp$62$$[5] = this.$i$;
  $state$jscomp$62$$[6] = this.$v$;
  $state$jscomp$62$$[7] = this.$A$;
  $state$jscomp$62$$[8] = this.$isr_status$;
  $state$jscomp$62$$[9] = this.$l$;
  return $state$jscomp$62$$ = $state$jscomp$62$$.concat(this.$queues$);
};
$VirtIO$$module$src$virtio$$.prototype.$set_state$ = function($state$jscomp$63$$) {
  this.$s$ = $state$jscomp$63$$[0];
  this.$j$ = $state$jscomp$63$$[1];
  this.$o$ = $state$jscomp$63$$[2];
  this.$h$ = $state$jscomp$63$$[3];
  this.$u$ = $state$jscomp$63$$[4];
  this.$i$ = $state$jscomp$63$$[5];
  this.$v$ = $state$jscomp$63$$[6];
  this.$A$ = $state$jscomp$63$$[7];
  this.$isr_status$ = $state$jscomp$63$$[8];
  this.$l$ = $state$jscomp$63$$[9];
  let $i$jscomp$117$$ = 0;
  for (const $queue$jscomp$12$$ of $state$jscomp$63$$.slice(10)) {
    this.$queues$[$i$jscomp$117$$].$set_state$($queue$jscomp$12$$), $i$jscomp$117$$++;
  }
  this.$g$ = this.$queues$[this.$l$] || null;
};
$VirtIO$$module$src$virtio$$.prototype.reset = function() {
  this.$j$ = this.$s$ = 0;
  this.$h$.set(this.$o$);
  this.$u$ = !0;
  this.$l$ = this.$i$ = 0;
  this.$g$ = this.$queues$[0];
  for (const $queue$jscomp$13$$ of this.$queues$) {
    $queue$jscomp$13$$.reset();
  }
  this.$v$ = !1;
  this.$isr_status$ = this.$A$ = 0;
  $JSCompiler_StaticMethods_JSC$1939_lower_irq$$(this.$pci$, this.$pci_id$);
};
$VirtIO$$module$src$virtio$$.prototype.$raise_irq$ = function($type$jscomp$157$$) {
  this.$isr_status$ |= $type$jscomp$157$$;
  this.$pci$.$raise_irq$(this.$pci_id$);
};
function $VirtQueue$$module$src$virtio$$($cpu$jscomp$28$$, $virtio$$, $options$jscomp$49$$) {
  this.$cpu$ = $cpu$jscomp$28$$;
  this.$virtio$ = $virtio$$;
  this.$size_supported$ = this.size = $options$jscomp$49$$.$size_supported$;
  this.$mask$ = this.size - 1;
  this.enabled = !1;
  this.$notify_offset$ = $options$jscomp$49$$.$notify_offset$;
  this.$j$ = this.$h$ = this.$i$ = this.$g$ = this.$l$ = 0;
  this.reset();
}
$VirtQueue$$module$src$virtio$$.prototype.$get_state$ = function() {
  const $state$jscomp$64$$ = [];
  $state$jscomp$64$$[0] = this.size;
  $state$jscomp$64$$[1] = this.$size_supported$;
  $state$jscomp$64$$[2] = this.enabled;
  $state$jscomp$64$$[3] = this.$notify_offset$;
  $state$jscomp$64$$[4] = this.$l$;
  $state$jscomp$64$$[5] = this.$g$;
  $state$jscomp$64$$[6] = this.$i$;
  $state$jscomp$64$$[7] = this.$h$;
  $state$jscomp$64$$[8] = this.$j$;
  $state$jscomp$64$$[9] = 1;
  return $state$jscomp$64$$;
};
$VirtQueue$$module$src$virtio$$.prototype.$set_state$ = function($state$jscomp$65$$) {
  this.size = $state$jscomp$65$$[0];
  this.$size_supported$ = $state$jscomp$65$$[1];
  this.enabled = $state$jscomp$65$$[2];
  this.$notify_offset$ = $state$jscomp$65$$[3];
  this.$l$ = $state$jscomp$65$$[4];
  this.$g$ = $state$jscomp$65$$[5];
  this.$i$ = $state$jscomp$65$$[6];
  this.$h$ = $state$jscomp$65$$[7];
  this.$j$ = $state$jscomp$65$$[8];
  this.$mask$ = this.size - 1;
  this.$o$ = 1 !== $state$jscomp$65$$[9];
};
$VirtQueue$$module$src$virtio$$.prototype.reset = function() {
  this.enabled = !1;
  this.$j$ = this.$h$ = this.$i$ = this.$g$ = this.$l$ = 0;
  var $size$jscomp$inline_678$$ = this.$size_supported$;
  this.size = $size$jscomp$inline_678$$;
  this.$mask$ = $size$jscomp$inline_678$$ - 1;
};
function $JSCompiler_StaticMethods_is_configured$$($JSCompiler_StaticMethods_is_configured$self$$) {
  return $JSCompiler_StaticMethods_is_configured$self$$.$l$ && $JSCompiler_StaticMethods_is_configured$self$$.$g$ && $JSCompiler_StaticMethods_is_configured$self$$.$h$;
}
function $JSCompiler_StaticMethods_count_requests$$($JSCompiler_StaticMethods_count_requests$self$$) {
  $JSCompiler_StaticMethods_count_requests$self$$.$o$ && ($JSCompiler_StaticMethods_count_requests$self$$.$o$ = !1, $JSCompiler_StaticMethods_count_requests$self$$.$i$ = ($JSCompiler_StaticMethods_count_requests$self$$.$cpu$.$read16$($JSCompiler_StaticMethods_count_requests$self$$.$g$ + 2) & ~$JSCompiler_StaticMethods_count_requests$self$$.$mask$) + ($JSCompiler_StaticMethods_count_requests$self$$.$i$ & $JSCompiler_StaticMethods_count_requests$self$$.$mask$));
  return $JSCompiler_StaticMethods_count_requests$self$$.$cpu$.$read16$($JSCompiler_StaticMethods_count_requests$self$$.$g$ + 2) - $JSCompiler_StaticMethods_count_requests$self$$.$i$ & 65535;
}
function $JSCompiler_StaticMethods_has_request$$($JSCompiler_StaticMethods_has_request$self$$) {
  return 0 !== $JSCompiler_StaticMethods_count_requests$$($JSCompiler_StaticMethods_has_request$self$$);
}
function $JSCompiler_StaticMethods_pop_request$$($JSCompiler_StaticMethods_pop_request$self$$) {
  $JSCompiler_StaticMethods_has_request$$($JSCompiler_StaticMethods_pop_request$self$$);
  var $bufchain$jscomp$17_desc_idx$$ = $JSCompiler_StaticMethods_pop_request$self$$.$cpu$.$read16$($JSCompiler_StaticMethods_pop_request$self$$.$g$ + 4 + 2 * ($JSCompiler_StaticMethods_pop_request$self$$.$i$ & $JSCompiler_StaticMethods_pop_request$self$$.$mask$));
  $bufchain$jscomp$17_desc_idx$$ = new $VirtQueueBufferChain$$module$src$virtio$$($JSCompiler_StaticMethods_pop_request$self$$, $bufchain$jscomp$17_desc_idx$$);
  $JSCompiler_StaticMethods_pop_request$self$$.$i$ = $JSCompiler_StaticMethods_pop_request$self$$.$i$ + 1 & 65535;
  return $bufchain$jscomp$17_desc_idx$$;
}
function $JSCompiler_StaticMethods_push_reply$$($JSCompiler_StaticMethods_push_reply$self$$, $bufchain$jscomp$18$$) {
  const $used_idx$$ = $JSCompiler_StaticMethods_push_reply$self$$.$cpu$.$read16$($JSCompiler_StaticMethods_push_reply$self$$.$h$ + 2) + $JSCompiler_StaticMethods_push_reply$self$$.$j$ & $JSCompiler_StaticMethods_push_reply$self$$.$mask$;
  var $length_written$jscomp$inline_685$$ = $bufchain$jscomp$18$$.$l$;
  $JSCompiler_StaticMethods_push_reply$self$$.$cpu$.$write32$($JSCompiler_StaticMethods_push_reply$self$$.$h$ + 4 + 8 * $used_idx$$, $bufchain$jscomp$18$$.$v$);
  $JSCompiler_StaticMethods_push_reply$self$$.$cpu$.$write32$($JSCompiler_StaticMethods_push_reply$self$$.$h$ + 8 + 8 * $used_idx$$, $length_written$jscomp$inline_685$$);
  $JSCompiler_StaticMethods_push_reply$self$$.$j$++;
}
function $JSCompiler_StaticMethods_flush_replies$$($JSCompiler_StaticMethods_flush_replies$self$$) {
  if (0 !== $JSCompiler_StaticMethods_flush_replies$self$$.$j$) {
    var $new_idx$$ = $JSCompiler_StaticMethods_flush_replies$self$$.$cpu$.$read16$($JSCompiler_StaticMethods_flush_replies$self$$.$h$ + 2) + $JSCompiler_StaticMethods_flush_replies$self$$.$j$ & 65535;
    $JSCompiler_StaticMethods_flush_replies$self$$.$cpu$.$write16$($JSCompiler_StaticMethods_flush_replies$self$$.$h$ + 2, $new_idx$$);
    $JSCompiler_StaticMethods_flush_replies$self$$.$j$ = 0;
    0 < ($JSCompiler_StaticMethods_flush_replies$self$$.$virtio$.$h$[0] & 536870912) ? ($JSCompiler_StaticMethods_flush_replies$self$$.$cpu$.$read16$($JSCompiler_StaticMethods_flush_replies$self$$.$g$ + 4 + 2 * $JSCompiler_StaticMethods_flush_replies$self$$.size), $JSCompiler_StaticMethods_flush_replies$self$$.$virtio$.$raise_irq$(1)) : ~$JSCompiler_StaticMethods_flush_replies$self$$.$cpu$.$read16$($JSCompiler_StaticMethods_flush_replies$self$$.$g$) & 1 && $JSCompiler_StaticMethods_flush_replies$self$$.$virtio$.$raise_irq$(1);
  }
}
function $VirtQueueBufferChain$$module$src$virtio$$($virtqueue$$, $chain_length_head_idx$$) {
  this.$cpu$ = $virtqueue$$.$cpu$;
  this.$virtio$ = $virtqueue$$.$virtio$;
  this.$v$ = $chain_length_head_idx$$;
  this.$s$ = [];
  this.$length_readable$ = this.$g$ = this.$o$ = 0;
  this.$i$ = [];
  this.$j$ = this.$l$ = this.$h$ = this.$u$ = 0;
  let $table_address$jscomp$1$$ = $virtqueue$$.$l$;
  var $desc_idx$jscomp$2_i$jscomp$inline_694$$ = $chain_length_head_idx$$;
  $chain_length_head_idx$$ = 0;
  let $chain_max$$ = $virtqueue$$.size, $writable_region$$ = !1;
  const $has_indirect_feature$$ = 0 < (this.$virtio$.$h$[0] & 268435456);
  do {
    var $JSCompiler_StaticMethods_get_descriptor$self$jscomp$inline_692_desc$$ = $virtqueue$$, $table_address$jscomp$inline_693$$ = $table_address$jscomp$1$$;
    $JSCompiler_StaticMethods_get_descriptor$self$jscomp$inline_692_desc$$ = {$addr_low$:$JSCompiler_StaticMethods_get_descriptor$self$jscomp$inline_692_desc$$.$cpu$.$h$($table_address$jscomp$inline_693$$ + 16 * $desc_idx$jscomp$2_i$jscomp$inline_694$$), $addr_high$:$JSCompiler_StaticMethods_get_descriptor$self$jscomp$inline_692_desc$$.$cpu$.$h$($table_address$jscomp$inline_693$$ + 16 * $desc_idx$jscomp$2_i$jscomp$inline_694$$ + 4), $len$:$JSCompiler_StaticMethods_get_descriptor$self$jscomp$inline_692_desc$$.$cpu$.$h$($table_address$jscomp$inline_693$$ + 
    16 * $desc_idx$jscomp$2_i$jscomp$inline_694$$ + 8), flags:$JSCompiler_StaticMethods_get_descriptor$self$jscomp$inline_692_desc$$.$cpu$.$read16$($table_address$jscomp$inline_693$$ + 16 * $desc_idx$jscomp$2_i$jscomp$inline_694$$ + 12), next:$JSCompiler_StaticMethods_get_descriptor$self$jscomp$inline_692_desc$$.$cpu$.$read16$($table_address$jscomp$inline_693$$ + 16 * $desc_idx$jscomp$2_i$jscomp$inline_694$$ + 14), };
    if ($has_indirect_feature$$ && $JSCompiler_StaticMethods_get_descriptor$self$jscomp$inline_692_desc$$.flags & 4) {
      $table_address$jscomp$1$$ = $JSCompiler_StaticMethods_get_descriptor$self$jscomp$inline_692_desc$$.$addr_low$, $chain_length_head_idx$$ = $desc_idx$jscomp$2_i$jscomp$inline_694$$ = 0, $chain_max$$ = $JSCompiler_StaticMethods_get_descriptor$self$jscomp$inline_692_desc$$.$len$ / 16;
    } else {
      if ($JSCompiler_StaticMethods_get_descriptor$self$jscomp$inline_692_desc$$.flags & 2) {
        $writable_region$$ = !0, this.$i$.push($JSCompiler_StaticMethods_get_descriptor$self$jscomp$inline_692_desc$$), this.$j$ += $JSCompiler_StaticMethods_get_descriptor$self$jscomp$inline_692_desc$$.$len$;
      } else {
        if ($writable_region$$) {
          break;
        }
        this.$s$.push($JSCompiler_StaticMethods_get_descriptor$self$jscomp$inline_692_desc$$);
        this.$length_readable$ += $JSCompiler_StaticMethods_get_descriptor$self$jscomp$inline_692_desc$$.$len$;
      }
      $chain_length_head_idx$$++;
      if ($chain_length_head_idx$$ > $chain_max$$) {
        break;
      }
      if ($JSCompiler_StaticMethods_get_descriptor$self$jscomp$inline_692_desc$$.flags & 1) {
        $desc_idx$jscomp$2_i$jscomp$inline_694$$ = $JSCompiler_StaticMethods_get_descriptor$self$jscomp$inline_692_desc$$.next;
      } else {
        break;
      }
    }
  } while (1);
}
function $JSCompiler_StaticMethods_get_next_blob$$($JSCompiler_StaticMethods_get_next_blob$self$$, $dest_buffer$$) {
  let $dest_offset$$ = 0, $remaining$jscomp$2$$ = $dest_buffer$$.length;
  for (; $remaining$jscomp$2$$ && $JSCompiler_StaticMethods_get_next_blob$self$$.$o$ !== $JSCompiler_StaticMethods_get_next_blob$self$$.$s$.length;) {
    $JSCompiler_temp_const$jscomp$76_buf$jscomp$4$$ = $JSCompiler_StaticMethods_get_next_blob$self$$.$s$[$JSCompiler_StaticMethods_get_next_blob$self$$.$o$];
    $offset$jscomp$inline_697_read_address$$ = $JSCompiler_temp_const$jscomp$76_buf$jscomp$4$$.$addr_low$ + $JSCompiler_StaticMethods_get_next_blob$self$$.$g$;
    let $read_length$$ = $JSCompiler_temp_const$jscomp$76_buf$jscomp$4$$.$len$ - $JSCompiler_StaticMethods_get_next_blob$self$$.$g$;
    $read_length$$ > $remaining$jscomp$2$$ ? ($read_length$$ = $remaining$jscomp$2$$, $JSCompiler_StaticMethods_get_next_blob$self$$.$g$ += $remaining$jscomp$2$$) : ($JSCompiler_StaticMethods_get_next_blob$self$$.$o$++, $JSCompiler_StaticMethods_get_next_blob$self$$.$g$ = 0);
    var $JSCompiler_temp_const$jscomp$76_buf$jscomp$4$$ = $dest_buffer$$, $JSCompiler_temp_const$jscomp$75$$ = $JSCompiler_temp_const$jscomp$76_buf$jscomp$4$$.set, $JSCompiler_StaticMethods_read_blob$self$jscomp$inline_696$$ = $JSCompiler_StaticMethods_get_next_blob$self$$.$cpu$, $offset$jscomp$inline_697_read_address$$ = $offset$jscomp$inline_697_read_address$$, $length$jscomp$inline_698$$ = $read_length$$;
    $length$jscomp$inline_698$$ && ($JSCompiler_StaticMethods_read_blob$self$jscomp$inline_696$$.$l$($offset$jscomp$inline_697_read_address$$), $JSCompiler_StaticMethods_read_blob$self$jscomp$inline_696$$.$l$($offset$jscomp$inline_697_read_address$$ + $length$jscomp$inline_698$$ - 1));
    $JSCompiler_temp_const$jscomp$75$$.call($JSCompiler_temp_const$jscomp$76_buf$jscomp$4$$, $JSCompiler_StaticMethods_read_blob$self$jscomp$inline_696$$.$mem8$.subarray($offset$jscomp$inline_697_read_address$$, $offset$jscomp$inline_697_read_address$$ + $length$jscomp$inline_698$$), $dest_offset$$);
    $dest_offset$$ += $read_length$$;
    $remaining$jscomp$2$$ -= $read_length$$;
  }
}
function $JSCompiler_StaticMethods_set_next_blob$$($JSCompiler_StaticMethods_set_next_blob$self$$, $src_buffer$$) {
  let $src_offset$$ = 0, $remaining$jscomp$3$$ = $src_buffer$$.length;
  for (; $remaining$jscomp$3$$ && $JSCompiler_StaticMethods_set_next_blob$self$$.$u$ !== $JSCompiler_StaticMethods_set_next_blob$self$$.$i$.length;) {
    var $buf$jscomp$5_write_length$$ = $JSCompiler_StaticMethods_set_next_blob$self$$.$i$[$JSCompiler_StaticMethods_set_next_blob$self$$.$u$];
    const $write_address$$ = $buf$jscomp$5_write_length$$.$addr_low$ + $JSCompiler_StaticMethods_set_next_blob$self$$.$h$;
    $buf$jscomp$5_write_length$$ = $buf$jscomp$5_write_length$$.$len$ - $JSCompiler_StaticMethods_set_next_blob$self$$.$h$;
    $buf$jscomp$5_write_length$$ > $remaining$jscomp$3$$ ? ($buf$jscomp$5_write_length$$ = $remaining$jscomp$3$$, $JSCompiler_StaticMethods_set_next_blob$self$$.$h$ += $remaining$jscomp$3$$) : ($JSCompiler_StaticMethods_set_next_blob$self$$.$u$++, $JSCompiler_StaticMethods_set_next_blob$self$$.$h$ = 0);
    $JSCompiler_StaticMethods_write_blob$$($JSCompiler_StaticMethods_set_next_blob$self$$.$cpu$, $src_buffer$$.subarray($src_offset$$, $src_offset$$ + $buf$jscomp$5_write_length$$), $write_address$$);
    $src_offset$$ += $buf$jscomp$5_write_length$$;
    $remaining$jscomp$3$$ -= $buf$jscomp$5_write_length$$;
  }
  $JSCompiler_StaticMethods_set_next_blob$self$$.$l$ += $src_offset$$;
}
;function $init_virtio$$module$lib$9p$$($cpu$jscomp$29$$, $configspace_taglen$$, $configspace_tagname$$, $receive$$) {
  const $virtio$jscomp$1$$ = new $VirtIO$$module$src$virtio$$($cpu$jscomp$29$$, {name:"virtio-9p", $pci_id$:48, $device_id$:4169, $subsystem_device_id$:9, $common$:{$initial_port$:43008, $queues$:[{$size_supported$:32, $notify_offset$:0, }, ], features:[0, 32, 29, 28, ], $on_driver_ok$:() => {
  }, }, notification:{$initial_port$:43264, $single_handler$:!1, $handlers$:[$queue_id$jscomp$15_virtqueue$jscomp$1$$ => {
    if (0 === $queue_id$jscomp$15_virtqueue$jscomp$1$$) {
      for ($queue_id$jscomp$15_virtqueue$jscomp$1$$ = $virtio$jscomp$1$$.$queues$[0]; $JSCompiler_StaticMethods_has_request$$($queue_id$jscomp$15_virtqueue$jscomp$1$$);) {
        $avail_event$jscomp$inline_702_bufchain$jscomp$19$$ = $JSCompiler_StaticMethods_pop_request$$($queue_id$jscomp$15_virtqueue$jscomp$1$$), $receive$$($avail_event$jscomp$inline_702_bufchain$jscomp$19$$);
      }
      var $avail_event$jscomp$inline_702_bufchain$jscomp$19$$ = $queue_id$jscomp$15_virtqueue$jscomp$1$$.$cpu$.$read16$($queue_id$jscomp$15_virtqueue$jscomp$1$$.$g$ + 2) + 0 & 65535;
      $queue_id$jscomp$15_virtqueue$jscomp$1$$.$cpu$.$write16$($queue_id$jscomp$15_virtqueue$jscomp$1$$.$h$ + 4 + 8 * $queue_id$jscomp$15_virtqueue$jscomp$1$$.size, $avail_event$jscomp$inline_702_bufchain$jscomp$19$$);
    }
  }, ], }, $isr_status$:{$initial_port$:42752, }, $device_specific$:{$initial_port$:42496, $struct$:[{bytes:2, name:"mount tag length", read:() => $configspace_taglen$$, write:() => {
  }, }, ].concat(Array.from(Array(254).keys()).map($index$jscomp$89$$ => ({bytes:1, name:"mount tag name " + $index$jscomp$89$$, read:() => $configspace_tagname$$[$index$jscomp$89$$] || 0, write:() => {
  }, }))), }, });
  return $virtio$jscomp$1$$;
}
function $Virtio9p$$module$lib$9p$$($filesystem$jscomp$2$$, $cpu$jscomp$30$$, $bus$jscomp$27$$) {
  this.$h$ = $filesystem$jscomp$2$$;
  this.$bus$ = $bus$jscomp$27$$;
  this.$o$ = [104, 111, 115, 116, 57, 112];
  this.$v$ = this.$o$.length;
  this.$virtio$ = $init_virtio$$module$lib$9p$$($cpu$jscomp$30$$, this.$v$, this.$o$, this.$B$.bind(this));
  this.$A$ = this.$virtio$.$queues$[0];
  this.$u$ = "9P2000.L";
  this.$j$ = this.$l$ = 8192;
  this.$i$ = new Uint8Array(2 * this.$j$);
  this.$s$ = 0;
  this.$g$ = [];
}
$Virtio9p$$module$lib$9p$$.prototype.$get_state$ = function() {
  var $state$jscomp$66$$ = [];
  $state$jscomp$66$$[0] = this.$o$;
  $state$jscomp$66$$[1] = this.$v$;
  $state$jscomp$66$$[2] = this.$virtio$;
  $state$jscomp$66$$[3] = this.$u$;
  $state$jscomp$66$$[4] = this.$l$;
  $state$jscomp$66$$[5] = this.$j$;
  $state$jscomp$66$$[6] = this.$i$;
  $state$jscomp$66$$[7] = this.$s$;
  $state$jscomp$66$$[8] = this.$g$.map(function($f$jscomp$8$$) {
    return [$f$jscomp$8$$.$inodeid$, $f$jscomp$8$$.type, $f$jscomp$8$$.uid, $f$jscomp$8$$.$dbg_name$];
  });
  $state$jscomp$66$$[9] = this.$h$;
  return $state$jscomp$66$$;
};
$Virtio9p$$module$lib$9p$$.prototype.$set_state$ = function($state$jscomp$67$$) {
  this.$o$ = $state$jscomp$67$$[0];
  this.$v$ = $state$jscomp$67$$[1];
  this.$virtio$.$set_state$($state$jscomp$67$$[2]);
  this.$A$ = this.$virtio$.$queues$[0];
  this.$u$ = $state$jscomp$67$$[3];
  this.$l$ = $state$jscomp$67$$[4];
  this.$j$ = $state$jscomp$67$$[5];
  this.$i$ = $state$jscomp$67$$[6];
  this.$s$ = $state$jscomp$67$$[7];
  this.$g$ = $state$jscomp$67$$[8].map(function($f$jscomp$9$$) {
    return {$inodeid$:$f$jscomp$9$$[0], type:$f$jscomp$9$$[1], uid:$f$jscomp$9$$[2], $dbg_name$:$f$jscomp$9$$[3]};
  });
  this.$h$.$set_state$($state$jscomp$67$$[9]);
};
$Virtio9p$$module$lib$9p$$.prototype.reset = function() {
  this.$g$ = [];
  this.$virtio$.reset();
};
function $JSCompiler_StaticMethods_BuildReply$$($JSCompiler_StaticMethods_BuildReply$self$$, $id$jscomp$26$$, $tag$jscomp$1$$, $payloadsize$$) {
  $Marshall$$module$lib$marshall$$(["w", "b", "h"], [$payloadsize$$ + 7, $id$jscomp$26$$ + 1, $tag$jscomp$1$$], $JSCompiler_StaticMethods_BuildReply$self$$.$i$, 0);
  $JSCompiler_StaticMethods_BuildReply$self$$.$s$ = $payloadsize$$ + 7;
}
function $JSCompiler_StaticMethods_SendError$$($JSCompiler_StaticMethods_SendError$self$$, $tag$jscomp$2$$, $errorcode_size$jscomp$45$$) {
  $errorcode_size$jscomp$45$$ = $Marshall$$module$lib$marshall$$(["w"], [$errorcode_size$jscomp$45$$], $JSCompiler_StaticMethods_SendError$self$$.$i$, 7);
  $JSCompiler_StaticMethods_BuildReply$$($JSCompiler_StaticMethods_SendError$self$$, 6, $tag$jscomp$2$$, $errorcode_size$jscomp$45$$);
}
function $JSCompiler_StaticMethods_SendReply$$($JSCompiler_StaticMethods_SendReply$self$$, $bufchain$jscomp$20$$) {
  $JSCompiler_StaticMethods_set_next_blob$$($bufchain$jscomp$20$$, $JSCompiler_StaticMethods_SendReply$self$$.$i$.subarray(0, $JSCompiler_StaticMethods_SendReply$self$$.$s$));
  $JSCompiler_StaticMethods_push_reply$$($JSCompiler_StaticMethods_SendReply$self$$.$A$, $bufchain$jscomp$20$$);
  $JSCompiler_StaticMethods_flush_replies$$($JSCompiler_StaticMethods_SendReply$self$$.$A$);
}
$Virtio9p$$module$lib$9p$$.prototype.$B$ = async function($bufchain$jscomp$21$$) {
  var $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$ = new Uint8Array($bufchain$jscomp$21$$.$length_readable$);
  $JSCompiler_StaticMethods_get_next_blob$$($bufchain$jscomp$21$$, $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$);
  var $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$ = {offset:0}, $header$jscomp$6_tag$jscomp$3$$ = $Unmarshall$$module$lib$marshall$$(["w", "b", "h"], $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$, $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$), $id$jscomp$27$$ = $header$jscomp$6_tag$jscomp$3$$[1];
  $header$jscomp$6_tag$jscomp$3$$ = $header$jscomp$6_tag$jscomp$3$$[2];
  switch($id$jscomp$27$$) {
    case 8:
      var $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$ = $JSCompiler_StaticMethods_GetTotalSize$$(this.$h$);
      var $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$ = $JSCompiler_StaticMethods_GetSpace$$(this.$h$), $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = [16914839];
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[1] = this.$l$;
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[2] = Math.floor($data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$ / $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[1]);
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[3] = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[2] - Math.floor($fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$ / $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[1]);
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[4] = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[2] - Math.floor($fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$ / $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[1]);
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[5] = $JSCompiler_StaticMethods_CountUsedInodes$$(this.$h$);
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[6] = $JSCompiler_StaticMethods_CountFreeInodes$$(this.$h$);
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[7] = 0;
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[8] = 256;
      $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$ = $Marshall$$module$lib$marshall$$("wwddddddw".split(""), $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$, this.$i$, 7);
      $JSCompiler_StaticMethods_BuildReply$$(this, $id$jscomp$27$$, $header$jscomp$6_tag$jscomp$3$$, $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$);
      $JSCompiler_StaticMethods_SendReply$$(this, $bufchain$jscomp$21$$);
      break;
    case 112:
    case 12:
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = $Unmarshall$$module$lib$marshall$$(["w", "w"], $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$, $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$);
      $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[0];
      $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[1];
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].$inodeid$;
      $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$ = $JSCompiler_StaticMethods_GetInode$$(this.$h$, $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$);
      await $JSCompiler_StaticMethods_OpenInode$$(this.$h$, $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$, $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$);
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = [];
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[0] = $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.$qid$;
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[1] = this.$j$ - 24;
      $Marshall$$module$lib$marshall$$(["Q", "w"], $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$, this.$i$, 7);
      $JSCompiler_StaticMethods_BuildReply$$(this, $id$jscomp$27$$, $header$jscomp$6_tag$jscomp$3$$, 17);
      $JSCompiler_StaticMethods_SendReply$$(this, $bufchain$jscomp$21$$);
      break;
    case 70:
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = $Unmarshall$$module$lib$marshall$$(["w", "w", "s"], $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$, $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$);
      $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[0];
      $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[1];
      $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[2];
      $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$ = $JSCompiler_StaticMethods_Link$$(this.$h$, this.$g$[$buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$].$inodeid$, this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].$inodeid$, $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$);
      if (0 > $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$) {
        $JSCompiler_StaticMethods_SendError$$(this, $header$jscomp$6_tag$jscomp$3$$, -$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$);
        $JSCompiler_StaticMethods_SendReply$$(this, $bufchain$jscomp$21$$);
        break;
      }
      $JSCompiler_StaticMethods_BuildReply$$(this, $id$jscomp$27$$, $header$jscomp$6_tag$jscomp$3$$, 0);
      $JSCompiler_StaticMethods_SendReply$$(this, $bufchain$jscomp$21$$);
      break;
    case 16:
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = $Unmarshall$$module$lib$marshall$$(["w", "s", "s", "w"], $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$, $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$);
      $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[0];
      $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[1];
      var $filename$jscomp$13_gid_i$jscomp$121_offset$jscomp$inline_708$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[3];
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = $JSCompiler_StaticMethods_CreateSymlink$$(this.$h$, $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$, this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].$inodeid$, $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[2]);
      $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$ = $JSCompiler_StaticMethods_GetInode$$(this.$h$, $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$);
      $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.uid = this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].uid;
      $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.$gid$ = $filename$jscomp$13_gid_i$jscomp$121_offset$jscomp$inline_708$$;
      $Marshall$$module$lib$marshall$$(["Q"], [$buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.$qid$], this.$i$, 7);
      $JSCompiler_StaticMethods_BuildReply$$(this, $id$jscomp$27$$, $header$jscomp$6_tag$jscomp$3$$, 13);
      $JSCompiler_StaticMethods_SendReply$$(this, $bufchain$jscomp$21$$);
      break;
    case 18:
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = $Unmarshall$$module$lib$marshall$$("wswwww".split(""), $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$, $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$);
      $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[0];
      $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[1];
      $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[2];
      $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[3];
      var $data$jscomp$inline_707_minor$jscomp$1_nwfid$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[4];
      $filename$jscomp$13_gid_i$jscomp$121_offset$jscomp$inline_708$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[5];
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = $JSCompiler_StaticMethods_CreateNode$$(this.$h$, $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$, this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].$inodeid$, $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$, $data$jscomp$inline_707_minor$jscomp$1_nwfid$$);
      $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$ = $JSCompiler_StaticMethods_GetInode$$(this.$h$, $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$);
      $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.mode = $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$;
      $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.uid = this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].uid;
      $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.$gid$ = $filename$jscomp$13_gid_i$jscomp$121_offset$jscomp$inline_708$$;
      $Marshall$$module$lib$marshall$$(["Q"], [$buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.$qid$], this.$i$, 7);
      $JSCompiler_StaticMethods_BuildReply$$(this, $id$jscomp$27$$, $header$jscomp$6_tag$jscomp$3$$, 13);
      $JSCompiler_StaticMethods_SendReply$$(this, $bufchain$jscomp$21$$);
      break;
    case 22:
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = $Unmarshall$$module$lib$marshall$$(["w"], $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$, $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$);
      $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[0];
      $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$ = $JSCompiler_StaticMethods_GetInode$$(this.$h$, this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].$inodeid$);
      $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$ = $Marshall$$module$lib$marshall$$(["s"], [$buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.$symlink$], this.$i$, 7);
      $JSCompiler_StaticMethods_BuildReply$$(this, $id$jscomp$27$$, $header$jscomp$6_tag$jscomp$3$$, $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$);
      $JSCompiler_StaticMethods_SendReply$$(this, $bufchain$jscomp$21$$);
      break;
    case 72:
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = $Unmarshall$$module$lib$marshall$$(["w", "s", "w", "w"], $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$, $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$);
      $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[0];
      $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[1];
      $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[2];
      $filename$jscomp$13_gid_i$jscomp$121_offset$jscomp$inline_708$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[3];
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = $JSCompiler_StaticMethods_CreateDirectory$$(this.$h$, $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$, this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].$inodeid$);
      $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$ = $JSCompiler_StaticMethods_GetInode$$(this.$h$, $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$);
      $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.mode = $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$ | 16384;
      $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.uid = this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].uid;
      $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.$gid$ = $filename$jscomp$13_gid_i$jscomp$121_offset$jscomp$inline_708$$;
      $Marshall$$module$lib$marshall$$(["Q"], [$buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.$qid$], this.$i$, 7);
      $JSCompiler_StaticMethods_BuildReply$$(this, $id$jscomp$27$$, $header$jscomp$6_tag$jscomp$3$$, 13);
      $JSCompiler_StaticMethods_SendReply$$(this, $bufchain$jscomp$21$$);
      break;
    case 14:
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = $Unmarshall$$module$lib$marshall$$(["w", "s", "w", "w", "w"], $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$, $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$);
      $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[0];
      $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[1];
      $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[3];
      $filename$jscomp$13_gid_i$jscomp$121_offset$jscomp$inline_708$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[4];
      this.$bus$.send("9p-create", [$data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$, this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].$inodeid$]);
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = $JSCompiler_StaticMethods_CreateFile$$(this.$h$, $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$, this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].$inodeid$);
      this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].$inodeid$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$;
      this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].type = 1;
      this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].$dbg_name$ = $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$;
      $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$ = $JSCompiler_StaticMethods_GetInode$$(this.$h$, $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$);
      $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.uid = this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].uid;
      $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.$gid$ = $filename$jscomp$13_gid_i$jscomp$121_offset$jscomp$inline_708$$;
      $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.mode = $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$ | 32768;
      $Marshall$$module$lib$marshall$$(["Q", "w"], [$buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.$qid$, this.$j$ - 24], this.$i$, 7);
      $JSCompiler_StaticMethods_BuildReply$$(this, $id$jscomp$27$$, $header$jscomp$6_tag$jscomp$3$$, 17);
      $JSCompiler_StaticMethods_SendReply$$(this, $bufchain$jscomp$21$$);
      break;
    case 52:
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = $Unmarshall$$module$lib$marshall$$("wbwddws".split(""), $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$, $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$);
      $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[0];
      $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[2];
      $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$ = 0 === $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[4] ? Infinity : $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[4];
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = $JSCompiler_StaticMethods_DescribeLock$$($JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[1], $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[3], $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$, $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[5], 
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[6]);
      $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$ = $JSCompiler_StaticMethods_Lock$$(this.$h$, this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].$inodeid$, $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$, $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$);
      $Marshall$$module$lib$marshall$$(["b"], [$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$], this.$i$, 7);
      $JSCompiler_StaticMethods_BuildReply$$(this, $id$jscomp$27$$, $header$jscomp$6_tag$jscomp$3$$, 1);
      $JSCompiler_StaticMethods_SendReply$$(this, $bufchain$jscomp$21$$);
      break;
    case 54:
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = $Unmarshall$$module$lib$marshall$$("wbddws".split(""), $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$, $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$);
      $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[0];
      $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$ = 0 === $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[3] ? Infinity : $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[3];
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = $JSCompiler_StaticMethods_DescribeLock$$($JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[1], $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[2], $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$, $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[4], 
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[5]);
      $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$ = $JSCompiler_StaticMethods_GetLock$$(this.$h$, this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].$inodeid$, $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$);
      $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$ || ($fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$, $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$.type = 2);
      $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$ = $Marshall$$module$lib$marshall$$(["b", "d", "d", "w", "s"], [$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$.type, $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$.start, Infinity === $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$.length ? 0 : $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$.length, $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$.$h$, $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$.$g$], 
      this.$i$, 7);
      $JSCompiler_StaticMethods_BuildReply$$(this, $id$jscomp$27$$, $header$jscomp$6_tag$jscomp$3$$, $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$);
      $JSCompiler_StaticMethods_SendReply$$(this, $bufchain$jscomp$21$$);
      break;
    case 24:
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = $Unmarshall$$module$lib$marshall$$(["w", "d"], $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$, $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$);
      $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[0];
      $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$ = $JSCompiler_StaticMethods_GetInode$$(this.$h$, this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].$inodeid$);
      if (!$buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$ || 4 === $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.status) {
        $JSCompiler_StaticMethods_SendError$$(this, $header$jscomp$6_tag$jscomp$3$$, 2);
        $JSCompiler_StaticMethods_SendReply$$(this, $bufchain$jscomp$21$$);
        break;
      }
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[0] = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[1];
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[1] = $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.$qid$;
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[2] = $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.mode;
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[3] = $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.uid;
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[4] = $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.$gid$;
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[5] = $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.$nlinks$;
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[6] = $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.$major$ << 8 | $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.$minor$;
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[7] = $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.size;
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[8] = this.$l$;
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[9] = Math.floor($buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.size / 512 + 1);
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[10] = $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.$atime$;
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[11] = 0;
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[12] = $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.$mtime$;
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[13] = 0;
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[14] = $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.$ctime$;
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[15] = 0;
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[16] = 0;
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[17] = 0;
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[18] = 0;
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[19] = 0;
      $Marshall$$module$lib$marshall$$("dQwwwddddddddddddddd".split(""), $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$, this.$i$, 7);
      $JSCompiler_StaticMethods_BuildReply$$(this, $id$jscomp$27$$, $header$jscomp$6_tag$jscomp$3$$, 153);
      $JSCompiler_StaticMethods_SendReply$$(this, $bufchain$jscomp$21$$);
      break;
    case 26:
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = $Unmarshall$$module$lib$marshall$$("wwwwwddddd".split(""), $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$, $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$);
      $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[0];
      $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$ = $JSCompiler_StaticMethods_GetInode$$(this.$h$, this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].$inodeid$);
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[1] & 1 && ($buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.mode = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[2]);
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[1] & 2 && ($buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.uid = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[3]);
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[1] & 4 && ($buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.$gid$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[4]);
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[1] & 16 && ($buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.$atime$ = Math.floor((new Date).getTime() / 1000));
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[1] & 32 && ($buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.$mtime$ = Math.floor((new Date).getTime() / 1000));
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[1] & 64 && ($buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.$ctime$ = Math.floor((new Date).getTime() / 1000));
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[1] & 128 && ($buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.$atime$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[6]);
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[1] & 256 && ($buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.$mtime$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[8]);
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[1] & 8 && await $JSCompiler_StaticMethods_ChangeSize$$(this.$h$, this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].$inodeid$, $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[5]);
      $JSCompiler_StaticMethods_BuildReply$$(this, $id$jscomp$27$$, $header$jscomp$6_tag$jscomp$3$$, 0);
      $JSCompiler_StaticMethods_SendReply$$(this, $bufchain$jscomp$21$$);
      break;
    case 50:
      $Unmarshall$$module$lib$marshall$$(["w", "d"], $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$, $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$);
      $JSCompiler_StaticMethods_BuildReply$$(this, $id$jscomp$27$$, $header$jscomp$6_tag$jscomp$3$$, 0);
      $JSCompiler_StaticMethods_SendReply$$(this, $bufchain$jscomp$21$$);
      break;
    case 40:
    case 116:
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = $Unmarshall$$module$lib$marshall$$(["w", "d", "w"], $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$, $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$);
      $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[0];
      $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[1];
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[2];
      $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$ = $JSCompiler_StaticMethods_GetInode$$(this.$h$, this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].$inodeid$);
      if (!$buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$ || 4 === $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.status) {
        $JSCompiler_StaticMethods_SendError$$(this, $header$jscomp$6_tag$jscomp$3$$, 2);
        $JSCompiler_StaticMethods_SendReply$$(this, $bufchain$jscomp$21$$);
        break;
      }
      if (2 === this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].type) {
        (void 0).length < $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$ + $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ && ($JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = (void 0).length - $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$);
        for ($filename$jscomp$13_gid_i$jscomp$121_offset$jscomp$inline_708$$ = 0; $filename$jscomp$13_gid_i$jscomp$121_offset$jscomp$inline_708$$ < $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$; $filename$jscomp$13_gid_i$jscomp$121_offset$jscomp$inline_708$$++) {
          this.$i$[11 + $filename$jscomp$13_gid_i$jscomp$121_offset$jscomp$inline_708$$] = (void 0)[$data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$ + $filename$jscomp$13_gid_i$jscomp$121_offset$jscomp$inline_708$$];
        }
        $Marshall$$module$lib$marshall$$(["w"], [$JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$], this.$i$, 7);
        $JSCompiler_StaticMethods_BuildReply$$(this, $id$jscomp$27$$, $header$jscomp$6_tag$jscomp$3$$, 4 + $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$);
      } else {
        await $JSCompiler_StaticMethods_OpenInode$$(this.$h$, this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].$inodeid$, void 0);
        $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$ = this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].$inodeid$;
        $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = Math.min($JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$, this.$i$.length - 11);
        if ($buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.size < $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$ + $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$) {
          $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.size - $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$;
        } else {
          if (40 === $id$jscomp$27$$) {
            $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$ + $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$;
            $data$jscomp$inline_707_minor$jscomp$1_nwfid$$ = this.$h$.$h$[$inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$];
            if ($JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ >= $data$jscomp$inline_707_minor$jscomp$1_nwfid$$.length) {
              $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = $data$jscomp$inline_707_minor$jscomp$1_nwfid$$.length;
            } else {
              for ($filename$jscomp$13_gid_i$jscomp$121_offset$jscomp$inline_708$$ = 0;;) {
                $next_offset$jscomp$inline_709_nwname$$ = $Unmarshall$$module$lib$marshall$$(["Q", "d"], $data$jscomp$inline_707_minor$jscomp$1_nwfid$$, {offset:$filename$jscomp$13_gid_i$jscomp$121_offset$jscomp$inline_708$$})[1];
                if ($next_offset$jscomp$inline_709_nwname$$ > $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$) {
                  break;
                }
                $filename$jscomp$13_gid_i$jscomp$121_offset$jscomp$inline_708$$ = $next_offset$jscomp$inline_709_nwname$$;
              }
              $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = $filename$jscomp$13_gid_i$jscomp$121_offset$jscomp$inline_708$$;
            }
            $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ -= $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$;
          }
        }
        $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$ > $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.size && ($JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = 0);
        this.$bus$.send("9p-read-start", [this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].$dbg_name$]);
        $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$ = await $JSCompiler_StaticMethods_Read$$(this.$h$, $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$, $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$, $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$);
        this.$bus$.send("9p-read-end", [this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].$dbg_name$, $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$]);
        $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$ && this.$i$.set($data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$, 11);
        $Marshall$$module$lib$marshall$$(["w"], [$JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$], this.$i$, 7);
        $JSCompiler_StaticMethods_BuildReply$$(this, $id$jscomp$27$$, $header$jscomp$6_tag$jscomp$3$$, 4 + $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$);
      }
      $JSCompiler_StaticMethods_SendReply$$(this, $bufchain$jscomp$21$$);
      break;
    case 118:
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = $Unmarshall$$module$lib$marshall$$(["w", "d", "w"], $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$, $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$);
      $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[0];
      $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[1];
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[2];
      $filename$jscomp$13_gid_i$jscomp$121_offset$jscomp$inline_708$$ = this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].$dbg_name$;
      if (2 === this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].type) {
        $JSCompiler_StaticMethods_SendError$$(this, $header$jscomp$6_tag$jscomp$3$$, 95);
        $JSCompiler_StaticMethods_SendReply$$(this, $bufchain$jscomp$21$$);
        break;
      } else {
        await $JSCompiler_StaticMethods_Write$$(this.$h$, this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].$inodeid$, $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$, $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$, $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.subarray($inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$.offset));
      }
      this.$bus$.send("9p-write-end", [$filename$jscomp$13_gid_i$jscomp$121_offset$jscomp$inline_708$$, $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$]);
      $Marshall$$module$lib$marshall$$(["w"], [$JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$], this.$i$, 7);
      $JSCompiler_StaticMethods_BuildReply$$(this, $id$jscomp$27$$, $header$jscomp$6_tag$jscomp$3$$, 4);
      $JSCompiler_StaticMethods_SendReply$$(this, $bufchain$jscomp$21$$);
      break;
    case 74:
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = $Unmarshall$$module$lib$marshall$$(["w", "s", "w", "s"], $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$, $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$);
      $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$ = await $JSCompiler_StaticMethods_Rename$$(this.$h$, this.$g$[$JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[0]].$inodeid$, $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[1], this.$g$[$JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[2]].$inodeid$, 
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[3]);
      if (0 > $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$) {
        $JSCompiler_StaticMethods_SendError$$(this, $header$jscomp$6_tag$jscomp$3$$, -$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$);
        $JSCompiler_StaticMethods_SendReply$$(this, $bufchain$jscomp$21$$);
        break;
      }
      $JSCompiler_StaticMethods_BuildReply$$(this, $id$jscomp$27$$, $header$jscomp$6_tag$jscomp$3$$, 0);
      $JSCompiler_StaticMethods_SendReply$$(this, $bufchain$jscomp$21$$);
      break;
    case 76:
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = $Unmarshall$$module$lib$marshall$$(["w", "s", "w"], $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$, $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$);
      $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[0];
      $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[1];
      $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$ = $JSCompiler_StaticMethods_Search$$(this.$h$, this.$g$[$buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$].$inodeid$, $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$);
      if (-1 === $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$) {
        $JSCompiler_StaticMethods_SendError$$(this, $header$jscomp$6_tag$jscomp$3$$, 2);
        $JSCompiler_StaticMethods_SendReply$$(this, $bufchain$jscomp$21$$);
        break;
      }
      $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$ = $JSCompiler_StaticMethods_Unlink$$(this.$h$, this.$g$[$buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$].$inodeid$, $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$);
      if (0 > $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$) {
        $JSCompiler_StaticMethods_SendError$$(this, $header$jscomp$6_tag$jscomp$3$$, -$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$);
        $JSCompiler_StaticMethods_SendReply$$(this, $bufchain$jscomp$21$$);
        break;
      }
      $JSCompiler_StaticMethods_BuildReply$$(this, $id$jscomp$27$$, $header$jscomp$6_tag$jscomp$3$$, 0);
      $JSCompiler_StaticMethods_SendReply$$(this, $bufchain$jscomp$21$$);
      break;
    case 100:
      $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$ = $Unmarshall$$module$lib$marshall$$(["w", "s"], $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$, $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$);
      this.$j$ !== $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$[0] && (this.$j$ = $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$[0], this.$i$ = new Uint8Array(Math.min(16777216, 2 * this.$j$)));
      $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$ = $Marshall$$module$lib$marshall$$(["w", "s"], [this.$j$, this.$u$], this.$i$, 7);
      $JSCompiler_StaticMethods_BuildReply$$(this, $id$jscomp$27$$, $header$jscomp$6_tag$jscomp$3$$, $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$);
      $JSCompiler_StaticMethods_SendReply$$(this, $bufchain$jscomp$21$$);
      break;
    case 104:
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = $Unmarshall$$module$lib$marshall$$(["w", "w", "s", "s", "w"], $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$, $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$);
      $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[0];
      this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$] = {$inodeid$:0, type:1, uid:$JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[4], $dbg_name$:""};
      $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$ = $JSCompiler_StaticMethods_GetInode$$(this.$h$, this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].$inodeid$);
      $Marshall$$module$lib$marshall$$(["Q"], [$buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$.$qid$], this.$i$, 7);
      $JSCompiler_StaticMethods_BuildReply$$(this, $id$jscomp$27$$, $header$jscomp$6_tag$jscomp$3$$, 13);
      $JSCompiler_StaticMethods_SendReply$$(this, $bufchain$jscomp$21$$);
      this.$bus$.send("9p-attach");
      break;
    case 108:
      $Unmarshall$$module$lib$marshall$$(["h"], $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$, $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$);
      $JSCompiler_StaticMethods_BuildReply$$(this, $id$jscomp$27$$, $header$jscomp$6_tag$jscomp$3$$, 0);
      $JSCompiler_StaticMethods_SendReply$$(this, $bufchain$jscomp$21$$);
      break;
    case 110:
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = $Unmarshall$$module$lib$marshall$$(["w", "w", "h"], $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$, $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$);
      $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[0];
      $data$jscomp$inline_707_minor$jscomp$1_nwfid$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[1];
      var $next_offset$jscomp$inline_709_nwname$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[2];
      if (0 === $next_offset$jscomp$inline_709_nwname$$) {
        this.$g$[$data$jscomp$inline_707_minor$jscomp$1_nwfid$$] = {$inodeid$:this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].$inodeid$, type:1, uid:this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].uid, $dbg_name$:this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].$dbg_name$};
        $Marshall$$module$lib$marshall$$(["h"], [0], this.$i$, 7);
        $JSCompiler_StaticMethods_BuildReply$$(this, $id$jscomp$27$$, $header$jscomp$6_tag$jscomp$3$$, 2);
        $JSCompiler_StaticMethods_SendReply$$(this, $bufchain$jscomp$21$$);
        break;
      }
      $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$ = [];
      for ($filename$jscomp$13_gid_i$jscomp$121_offset$jscomp$inline_708$$ = 0; $filename$jscomp$13_gid_i$jscomp$121_offset$jscomp$inline_708$$ < $next_offset$jscomp$inline_709_nwname$$; $filename$jscomp$13_gid_i$jscomp$121_offset$jscomp$inline_708$$++) {
        $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$.push("s");
      }
      $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$ = $Unmarshall$$module$lib$marshall$$($data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$, $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$, $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$);
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].$inodeid$;
      $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$ = 9;
      for ($filename$jscomp$13_gid_i$jscomp$121_offset$jscomp$inline_708$$ = $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$ = 0; $filename$jscomp$13_gid_i$jscomp$121_offset$jscomp$inline_708$$ < $next_offset$jscomp$inline_709_nwname$$; $filename$jscomp$13_gid_i$jscomp$121_offset$jscomp$inline_708$$++) {
        $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = $JSCompiler_StaticMethods_Search$$(this.$h$, $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$, $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$[$filename$jscomp$13_gid_i$jscomp$121_offset$jscomp$inline_708$$]);
        if (-1 === $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$) {
          break;
        }
        $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$ += $Marshall$$module$lib$marshall$$(["Q"], [$JSCompiler_StaticMethods_GetInode$$(this.$h$, $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$).$qid$], this.$i$, $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$);
        $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$++;
        this.$g$[$data$jscomp$inline_707_minor$jscomp$1_nwfid$$] = {$inodeid$:$JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$, type:1, uid:this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].uid, $dbg_name$:$buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$[$filename$jscomp$13_gid_i$jscomp$121_offset$jscomp$inline_708$$]};
      }
      $Marshall$$module$lib$marshall$$(["h"], [$inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$], this.$i$, 7);
      $JSCompiler_StaticMethods_BuildReply$$(this, $id$jscomp$27$$, $header$jscomp$6_tag$jscomp$3$$, $data$jscomp$246_flags$jscomp$20_name$jscomp$109_offset$jscomp$82_space$jscomp$7_wnames$$ - 7);
      $JSCompiler_StaticMethods_SendReply$$(this, $bufchain$jscomp$21$$);
      break;
    case 120:
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = $Unmarshall$$module$lib$marshall$$(["w"], $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$, $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$);
      this.$g$[$JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[0]] && 0 <= this.$g$[$JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[0]].$inodeid$ && (await $JSCompiler_StaticMethods_CloseInode$$(this.$h$, this.$g$[$JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[0]].$inodeid$), this.$g$[$JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[0]].$inodeid$ = 
      -1, this.$g$[$JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[0]].type = -1);
      $JSCompiler_StaticMethods_BuildReply$$(this, $id$jscomp$27$$, $header$jscomp$6_tag$jscomp$3$$, 0);
      $JSCompiler_StaticMethods_SendReply$$(this, $bufchain$jscomp$21$$);
      break;
    case 32:
      $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$ = $Unmarshall$$module$lib$marshall$$(["w", "s", "d", "w"], $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$, $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$);
      $fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$ = $JSCompiler_inline_result$jscomp$58_count$jscomp$71_idx$jscomp$22_lock_request_offset_target$jscomp$inline_706_req$$[0];
      this.$g$[$fid$jscomp$1_ret$jscomp$12_size$jscomp$46_version$jscomp$6$$].type = 2;
      $JSCompiler_StaticMethods_BuildReply$$(this, $id$jscomp$27$$, $header$jscomp$6_tag$jscomp$3$$, 0);
      $JSCompiler_StaticMethods_SendReply$$(this, $bufchain$jscomp$21$$);
      break;
    case 30:
      $Unmarshall$$module$lib$marshall$$(["w", "w", "s"], $buffer$jscomp$67_dfid_dirfd_inode$jscomp$35_lock_length_major$jscomp$1_walk$jscomp$1$$, $inodeid$jscomp$2_mode$jscomp$22_nwidx_state$jscomp$68$$), $JSCompiler_StaticMethods_SendError$$(this, $header$jscomp$6_tag$jscomp$3$$, 95), $JSCompiler_StaticMethods_SendReply$$(this, $bufchain$jscomp$21$$);
  }
};
function $Virtio9pHandler$$module$lib$9p$$($handle_fn$$, $cpu$jscomp$31$$) {
  this.$l$ = $handle_fn$$;
  this.$g$ = new Map;
  this.$h$ = [104, 111, 115, 116, 57, 112];
  this.$i$ = this.$h$.length;
  this.$virtio$ = $init_virtio$$module$lib$9p$$($cpu$jscomp$31$$, this.$i$, this.$h$, async $bufchain$jscomp$22$$ => {
    const $reqbuf$$ = new Uint8Array($bufchain$jscomp$22$$.$length_readable$);
    $JSCompiler_StaticMethods_get_next_blob$$($bufchain$jscomp$22$$, $reqbuf$$);
    var $reqtag$$ = $Unmarshall$$module$lib$marshall$$(["w", "b", "h"], $reqbuf$$, {offset:0})[2];
    this.$g$.set($reqtag$$, $bufchain$jscomp$22$$);
    this.$l$($reqbuf$$, $replybuf$$ => {
      var $replytag$$ = $Unmarshall$$module$lib$marshall$$(["w", "b", "h"], $replybuf$$, {offset:0})[2];
      const $bufchain$jscomp$23$$ = this.$g$.get($replytag$$);
      $bufchain$jscomp$23$$ ? ($JSCompiler_StaticMethods_set_next_blob$$($bufchain$jscomp$23$$, $replybuf$$), $JSCompiler_StaticMethods_push_reply$$(this.$j$, $bufchain$jscomp$23$$), $JSCompiler_StaticMethods_flush_replies$$(this.$j$), this.$g$.delete($replytag$$)) : console.error("No bufchain found for tag: " + $replytag$$);
    });
  });
  this.$j$ = this.$virtio$.$queues$[0];
}
$Virtio9pHandler$$module$lib$9p$$.prototype.$get_state$ = function() {
  var $state$jscomp$69$$ = [];
  $state$jscomp$69$$[0] = this.$h$;
  $state$jscomp$69$$[1] = this.$i$;
  $state$jscomp$69$$[2] = this.$virtio$;
  $state$jscomp$69$$[3] = this.$g$;
  return $state$jscomp$69$$;
};
$Virtio9pHandler$$module$lib$9p$$.prototype.$set_state$ = function($state$jscomp$70$$) {
  this.$h$ = $state$jscomp$70$$[0];
  this.$i$ = $state$jscomp$70$$[1];
  this.$virtio$.$set_state$($state$jscomp$70$$[2]);
  this.$j$ = this.$virtio$.$queues$[0];
  this.$g$ = $state$jscomp$70$$[3];
};
$Virtio9pHandler$$module$lib$9p$$.prototype.reset = function() {
  this.$virtio$.reset();
};
function $Virtio9pProxy$$module$lib$9p$$($url$jscomp$28$$, $cpu$jscomp$32$$) {
  this.$g$ = void 0;
  this.$cpu$ = $cpu$jscomp$32$$;
  this.$h$ = [];
  this.url = $url$jscomp$28$$;
  this.$u$ = Date.now() - 10000;
  this.$s$ = !1;
  this.$i$ = new Map;
  this.$j$ = [104, 111, 115, 116, 57, 112];
  this.$l$ = this.$j$.length;
  this.$virtio$ = $init_virtio$$module$lib$9p$$($cpu$jscomp$32$$, this.$l$, this.$j$, async $bufchain$jscomp$24$$ => {
    const $reqbuf$jscomp$1$$ = new Uint8Array($bufchain$jscomp$24$$.$length_readable$);
    $JSCompiler_StaticMethods_get_next_blob$$($bufchain$jscomp$24$$, $reqbuf$jscomp$1$$);
    const $reqtag$jscomp$1$$ = $Unmarshall$$module$lib$marshall$$(["w", "b", "h"], $reqbuf$jscomp$1$$, {offset:0})[2];
    this.$i$.set($reqtag$jscomp$1$$, $bufchain$jscomp$24$$);
    this.send($reqbuf$jscomp$1$$);
  });
  this.$o$ = this.$virtio$.$queues$[0];
}
$JSCompiler_prototypeAlias$$ = $Virtio9pProxy$$module$lib$9p$$.prototype;
$JSCompiler_prototypeAlias$$.$get_state$ = function() {
  var $state$jscomp$71$$ = [];
  $state$jscomp$71$$[0] = this.$j$;
  $state$jscomp$71$$[1] = this.$l$;
  $state$jscomp$71$$[2] = this.$virtio$;
  $state$jscomp$71$$[3] = this.$i$;
  return $state$jscomp$71$$;
};
$JSCompiler_prototypeAlias$$.$set_state$ = function($state$jscomp$72$$) {
  this.$j$ = $state$jscomp$72$$[0];
  this.$l$ = $state$jscomp$72$$[1];
  this.$virtio$.$set_state$($state$jscomp$72$$[2]);
  this.$o$ = this.$virtio$.$queues$[0];
  this.$i$ = $state$jscomp$72$$[3];
};
$JSCompiler_prototypeAlias$$.reset = function() {
  this.$virtio$.reset();
};
$JSCompiler_prototypeAlias$$.$JSC$2056_handle_message$ = function($e$jscomp$52_replybuf$jscomp$1$$) {
  $e$jscomp$52_replybuf$jscomp$1$$ = new Uint8Array($e$jscomp$52_replybuf$jscomp$1$$.data);
  const $replytag$jscomp$1$$ = $Unmarshall$$module$lib$marshall$$(["w", "b", "h"], $e$jscomp$52_replybuf$jscomp$1$$, {offset:0})[2], $bufchain$jscomp$25$$ = this.$i$.get($replytag$jscomp$1$$);
  $bufchain$jscomp$25$$ ? ($JSCompiler_StaticMethods_set_next_blob$$($bufchain$jscomp$25$$, $e$jscomp$52_replybuf$jscomp$1$$), $JSCompiler_StaticMethods_push_reply$$(this.$o$, $bufchain$jscomp$25$$), $JSCompiler_StaticMethods_flush_replies$$(this.$o$), this.$i$.delete($replytag$jscomp$1$$)) : console.error("Virtio9pProxy: No bufchain found for tag: " + $replytag$jscomp$1$$);
};
$JSCompiler_prototypeAlias$$.$JSC$2056_handle_close$ = function() {
  this.$s$ || (this.connect(), setTimeout(this.connect.bind(this), 10000));
};
$JSCompiler_prototypeAlias$$.$JSC$2056_handle_open$ = function() {
  for (var $i$jscomp$122$$ = 0; $i$jscomp$122$$ < this.$h$.length; $i$jscomp$122$$++) {
    this.send(this.$h$[$i$jscomp$122$$]);
  }
  this.$h$ = [];
};
$JSCompiler_prototypeAlias$$.$JSC$2056_handle_error$ = function() {
};
$JSCompiler_prototypeAlias$$.$destroy$ = function() {
  this.$s$ = !0;
  this.$g$ && this.$g$.close();
};
$JSCompiler_prototypeAlias$$.connect = function() {
  if ("undefined" !== typeof WebSocket) {
    if (this.$g$) {
      var $state$jscomp$73$$ = this.$g$.readyState;
      if (0 === $state$jscomp$73$$ || 1 === $state$jscomp$73$$) {
        return;
      }
    }
    if (!(this.$u$ + 10000 > Date.now())) {
      this.$u$ = Date.now();
      try {
        this.$g$ = new WebSocket(this.url);
      } catch ($e$jscomp$56$$) {
        console.error($e$jscomp$56$$);
        return;
      }
      this.$g$.binaryType = "arraybuffer";
      this.$g$.onopen = this.$JSC$2056_handle_open$.bind(this);
      this.$g$.onmessage = this.$JSC$2056_handle_message$.bind(this);
      this.$g$.onclose = this.$JSC$2056_handle_close$.bind(this);
      this.$g$.onerror = this.$JSC$2056_handle_error$.bind(this);
    }
  }
};
$JSCompiler_prototypeAlias$$.send = function($data$jscomp$247$$) {
  this.$g$ && 1 === this.$g$.readyState ? this.$g$.send($data$jscomp$247$$) : (this.$h$.push($data$jscomp$247$$), 128 < this.$h$.length && (this.$h$ = this.$h$.slice(-64)), this.connect());
};
function $generate$$module$src$iso9660$$($files$$) {
  function $round_byte_size_to_block_size$$($n$jscomp$16$$) {
    return 1 + Math.floor(($n$jscomp$16$$ - 1) / 2048);
  }
  function $to_msdos_filename$$($name$jscomp$113$$) {
    const $dot$$ = $name$jscomp$113$$.lastIndexOf(".");
    return -1 === $dot$$ ? $name$jscomp$113$$.substr(0, 8) : $name$jscomp$113$$.substr(0, Math.min(8, $dot$$)) + "." + $name$jscomp$113$$.substr($dot$$ + 1, 3);
  }
  const $te$$ = new TextEncoder, $date$jscomp$3$$ = new Date, $write_le16$$ = ($b$jscomp$5$$, $v$jscomp$3$$) => {
    $b$jscomp$5$$.buffer[$b$jscomp$5$$.offset++] = $v$jscomp$3$$;
    $b$jscomp$5$$.buffer[$b$jscomp$5$$.offset++] = $v$jscomp$3$$ >> 8;
  }, $write_le32$$ = ($b$jscomp$6$$, $v$jscomp$4$$) => {
    $b$jscomp$6$$.buffer[$b$jscomp$6$$.offset++] = $v$jscomp$4$$;
    $b$jscomp$6$$.buffer[$b$jscomp$6$$.offset++] = $v$jscomp$4$$ >> 8;
    $b$jscomp$6$$.buffer[$b$jscomp$6$$.offset++] = $v$jscomp$4$$ >> 16;
    $b$jscomp$6$$.buffer[$b$jscomp$6$$.offset++] = $v$jscomp$4$$ >> 24;
  }, $write_be16$$ = ($b$jscomp$7$$, $v$jscomp$5$$) => {
    $b$jscomp$7$$.buffer[$b$jscomp$7$$.offset++] = $v$jscomp$5$$ >> 8;
    $b$jscomp$7$$.buffer[$b$jscomp$7$$.offset++] = $v$jscomp$5$$;
  }, $write_be32$$ = ($b$jscomp$8$$, $v$jscomp$6$$) => {
    $b$jscomp$8$$.buffer[$b$jscomp$8$$.offset++] = $v$jscomp$6$$ >> 24;
    $b$jscomp$8$$.buffer[$b$jscomp$8$$.offset++] = $v$jscomp$6$$ >> 16;
    $b$jscomp$8$$.buffer[$b$jscomp$8$$.offset++] = $v$jscomp$6$$ >> 8;
    $b$jscomp$8$$.buffer[$b$jscomp$8$$.offset++] = $v$jscomp$6$$;
  }, $write_lebe16$$ = ($b$jscomp$9$$, $v$jscomp$7$$) => {
    $write_le16$$($b$jscomp$9$$, $v$jscomp$7$$);
    $write_be16$$($b$jscomp$9$$, $v$jscomp$7$$);
  }, $write_lebe32$$ = ($b$jscomp$10$$, $v$jscomp$8$$) => {
    $write_le32$$($b$jscomp$10$$, $v$jscomp$8$$);
    $write_be32$$($b$jscomp$10$$, $v$jscomp$8$$);
  }, $fill$$ = ($b$jscomp$11$$, $len$jscomp$29$$, $v$jscomp$9$$) => {
    $b$jscomp$11$$.buffer.fill($v$jscomp$9$$, $b$jscomp$11$$.offset, $b$jscomp$11$$.offset += $len$jscomp$29$$);
  }, $write_ascii$$ = ($b$jscomp$12$$, $v$jscomp$10$$) => {
    $b$jscomp$12$$.offset += $te$$.encodeInto($v$jscomp$10$$, $b$jscomp$12$$.buffer.subarray($b$jscomp$12$$.offset)).written;
  }, $write_dummy_date_ascii$$ = $b$jscomp$14$$ => {
    $fill$$($b$jscomp$14$$, 16, 32);
    $b$jscomp$14$$.buffer[$b$jscomp$14$$.offset++] = 0;
  }, $write_record$$ = ($b$jscomp$17_name_len$$, $name$jscomp$110_pad$$, $flags$jscomp$21$$, $is_special$$, $b$jscomp$inline_741_lba$jscomp$8$$, $len$jscomp$32_v$jscomp$inline_1031_v$jscomp$inline_1034_v$jscomp$inline_1037_v$jscomp$inline_1040_v$jscomp$inline_1043_v$jscomp$inline_1046$$) => {
    $is_special$$ || ($name$jscomp$110_pad$$ = $to_msdos_filename$$($name$jscomp$110_pad$$.toUpperCase().replace(/[^A-Z0-9_.]/g, "")) + ";1");
    $b$jscomp$17_name_len$$ = $te$$.encodeInto($name$jscomp$110_pad$$, $b$jscomp$17_name_len$$.buffer.subarray($b$jscomp$17_name_len$$.offset + 33)).written;
    $name$jscomp$110_pad$$ = $b$jscomp$17_name_len$$ & 1 ? 0 : 1;
    $buffer$jscomp$68$$.buffer[$buffer$jscomp$68$$.offset++] = 33 + $b$jscomp$17_name_len$$ + $name$jscomp$110_pad$$;
    $buffer$jscomp$68$$.buffer[$buffer$jscomp$68$$.offset++] = 0;
    $write_lebe32$$($buffer$jscomp$68$$, $b$jscomp$inline_741_lba$jscomp$8$$);
    $write_lebe32$$($buffer$jscomp$68$$, $len$jscomp$32_v$jscomp$inline_1031_v$jscomp$inline_1034_v$jscomp$inline_1037_v$jscomp$inline_1040_v$jscomp$inline_1043_v$jscomp$inline_1046$$);
    $b$jscomp$inline_741_lba$jscomp$8$$ = $buffer$jscomp$68$$;
    $len$jscomp$32_v$jscomp$inline_1031_v$jscomp$inline_1034_v$jscomp$inline_1037_v$jscomp$inline_1040_v$jscomp$inline_1043_v$jscomp$inline_1046$$ = $date$jscomp$3$$.getUTCFullYear() - 1900;
    $b$jscomp$inline_741_lba$jscomp$8$$.buffer[$b$jscomp$inline_741_lba$jscomp$8$$.offset++] = $len$jscomp$32_v$jscomp$inline_1031_v$jscomp$inline_1034_v$jscomp$inline_1037_v$jscomp$inline_1040_v$jscomp$inline_1043_v$jscomp$inline_1046$$;
    $len$jscomp$32_v$jscomp$inline_1031_v$jscomp$inline_1034_v$jscomp$inline_1037_v$jscomp$inline_1040_v$jscomp$inline_1043_v$jscomp$inline_1046$$ = 1 + $date$jscomp$3$$.getUTCMonth();
    $b$jscomp$inline_741_lba$jscomp$8$$.buffer[$b$jscomp$inline_741_lba$jscomp$8$$.offset++] = $len$jscomp$32_v$jscomp$inline_1031_v$jscomp$inline_1034_v$jscomp$inline_1037_v$jscomp$inline_1040_v$jscomp$inline_1043_v$jscomp$inline_1046$$;
    $len$jscomp$32_v$jscomp$inline_1031_v$jscomp$inline_1034_v$jscomp$inline_1037_v$jscomp$inline_1040_v$jscomp$inline_1043_v$jscomp$inline_1046$$ = $date$jscomp$3$$.getUTCDate();
    $b$jscomp$inline_741_lba$jscomp$8$$.buffer[$b$jscomp$inline_741_lba$jscomp$8$$.offset++] = $len$jscomp$32_v$jscomp$inline_1031_v$jscomp$inline_1034_v$jscomp$inline_1037_v$jscomp$inline_1040_v$jscomp$inline_1043_v$jscomp$inline_1046$$;
    $len$jscomp$32_v$jscomp$inline_1031_v$jscomp$inline_1034_v$jscomp$inline_1037_v$jscomp$inline_1040_v$jscomp$inline_1043_v$jscomp$inline_1046$$ = $date$jscomp$3$$.getUTCHours();
    $b$jscomp$inline_741_lba$jscomp$8$$.buffer[$b$jscomp$inline_741_lba$jscomp$8$$.offset++] = $len$jscomp$32_v$jscomp$inline_1031_v$jscomp$inline_1034_v$jscomp$inline_1037_v$jscomp$inline_1040_v$jscomp$inline_1043_v$jscomp$inline_1046$$;
    $len$jscomp$32_v$jscomp$inline_1031_v$jscomp$inline_1034_v$jscomp$inline_1037_v$jscomp$inline_1040_v$jscomp$inline_1043_v$jscomp$inline_1046$$ = $date$jscomp$3$$.getUTCMinutes();
    $b$jscomp$inline_741_lba$jscomp$8$$.buffer[$b$jscomp$inline_741_lba$jscomp$8$$.offset++] = $len$jscomp$32_v$jscomp$inline_1031_v$jscomp$inline_1034_v$jscomp$inline_1037_v$jscomp$inline_1040_v$jscomp$inline_1043_v$jscomp$inline_1046$$;
    $len$jscomp$32_v$jscomp$inline_1031_v$jscomp$inline_1034_v$jscomp$inline_1037_v$jscomp$inline_1040_v$jscomp$inline_1043_v$jscomp$inline_1046$$ = $date$jscomp$3$$.getUTCSeconds();
    $b$jscomp$inline_741_lba$jscomp$8$$.buffer[$b$jscomp$inline_741_lba$jscomp$8$$.offset++] = $len$jscomp$32_v$jscomp$inline_1031_v$jscomp$inline_1034_v$jscomp$inline_1037_v$jscomp$inline_1040_v$jscomp$inline_1043_v$jscomp$inline_1046$$;
    $b$jscomp$inline_741_lba$jscomp$8$$.buffer[$b$jscomp$inline_741_lba$jscomp$8$$.offset++] = 0;
    $buffer$jscomp$68$$.buffer[$buffer$jscomp$68$$.offset++] = $flags$jscomp$21$$;
    $buffer$jscomp$68$$.buffer[$buffer$jscomp$68$$.offset++] = 0;
    $buffer$jscomp$68$$.buffer[$buffer$jscomp$68$$.offset++] = 0;
    $write_lebe16$$($buffer$jscomp$68$$, 1);
    $buffer$jscomp$68$$.buffer[$buffer$jscomp$68$$.offset++] = $b$jscomp$17_name_len$$;
    $buffer$jscomp$68$$.offset += $b$jscomp$17_name_len$$ + $name$jscomp$110_pad$$;
  };
  $dbg_assert$$module$src$log$$(0 === $round_byte_size_to_block_size$$(0));
  $dbg_assert$$module$src$log$$(1 === $round_byte_size_to_block_size$$(1));
  $dbg_assert$$module$src$log$$(1 === $round_byte_size_to_block_size$$(2047));
  $dbg_assert$$module$src$log$$(1 === $round_byte_size_to_block_size$$(2048));
  $dbg_assert$$module$src$log$$(2 === $round_byte_size_to_block_size$$(2049));
  $dbg_assert$$module$src$log$$(2 === $round_byte_size_to_block_size$$(4096));
  $dbg_assert$$module$src$log$$(3 === $round_byte_size_to_block_size$$(4097));
  $dbg_assert$$module$src$log$$(11 === $round_byte_size_to_block_size$$(20481));
  $dbg_assert$$module$src$log$$("abcdefgh.qwe" === $to_msdos_filename$$("abcdefghijkl.qwerty"));
  $dbg_assert$$module$src$log$$("abcdefgh" === $to_msdos_filename$$("abcdefghijkl"));
  let $next_file_lba$$ = 24;
  $files$$ = $files$$.map(({name:$name$jscomp$115$$, $contents$:$contents$jscomp$2$$}) => {
    const $lba$jscomp$11$$ = $next_file_lba$$;
    $next_file_lba$$ += $round_byte_size_to_block_size$$($contents$jscomp$2$$.length);
    $name$jscomp$115$$ = $to_msdos_filename$$($name$jscomp$115$$);
    return {name:$name$jscomp$115$$, $contents$:$contents$jscomp$2$$, $lba$:$lba$jscomp$11$$};
  });
  const $N_LBAS$$ = $next_file_lba$$, $buffer$jscomp$68$$ = {buffer:new Uint8Array(2048 * $N_LBAS$$), offset:32768, };
  $buffer$jscomp$68$$.buffer[$buffer$jscomp$68$$.offset++] = 1;
  $write_ascii$$($buffer$jscomp$68$$, "CD001");
  $buffer$jscomp$68$$.buffer[$buffer$jscomp$68$$.offset++] = 1;
  $buffer$jscomp$68$$.buffer[$buffer$jscomp$68$$.offset++] = 0;
  $buffer$jscomp$68$$.offset += $te$$.encodeInto("V86".padEnd(32), $buffer$jscomp$68$$.buffer.subarray($buffer$jscomp$68$$.offset)).written;
  $buffer$jscomp$68$$.offset += $te$$.encodeInto("CDROM".padEnd(32), $buffer$jscomp$68$$.buffer.subarray($buffer$jscomp$68$$.offset)).written;
  $buffer$jscomp$68$$.offset += 8;
  $write_lebe32$$($buffer$jscomp$68$$, $N_LBAS$$);
  $buffer$jscomp$68$$.offset += 32;
  $write_lebe16$$($buffer$jscomp$68$$, 1);
  $write_lebe16$$($buffer$jscomp$68$$, 1);
  $write_lebe16$$($buffer$jscomp$68$$, 2048);
  $write_lebe32$$($buffer$jscomp$68$$, 10);
  $write_le32$$($buffer$jscomp$68$$, 19);
  $write_le32$$($buffer$jscomp$68$$, 0);
  $write_be32$$($buffer$jscomp$68$$, 21);
  $write_be32$$($buffer$jscomp$68$$, 0);
  $write_record$$($buffer$jscomp$68$$, "\x00", 2, !0, 23, 2048);
  $fill$$($buffer$jscomp$68$$, 128, 32);
  $fill$$($buffer$jscomp$68$$, 128, 32);
  $fill$$($buffer$jscomp$68$$, 128, 32);
  $fill$$($buffer$jscomp$68$$, 128, 32);
  $fill$$($buffer$jscomp$68$$, 37, 32);
  $fill$$($buffer$jscomp$68$$, 37, 32);
  $fill$$($buffer$jscomp$68$$, 37, 32);
  $write_dummy_date_ascii$$($buffer$jscomp$68$$);
  $write_dummy_date_ascii$$($buffer$jscomp$68$$);
  $write_dummy_date_ascii$$($buffer$jscomp$68$$);
  $write_dummy_date_ascii$$($buffer$jscomp$68$$);
  $buffer$jscomp$68$$.buffer[$buffer$jscomp$68$$.offset++] = 1;
  $buffer$jscomp$68$$.buffer[$buffer$jscomp$68$$.offset++] = 0;
  $buffer$jscomp$68$$.offset += 512;
  $buffer$jscomp$68$$.offset += 653;
  $buffer$jscomp$68$$.buffer[$buffer$jscomp$68$$.offset++] = 255;
  $write_ascii$$($buffer$jscomp$68$$, "CD001");
  $buffer$jscomp$68$$.buffer[$buffer$jscomp$68$$.offset++] = 1;
  $buffer$jscomp$68$$.offset = 38912;
  $buffer$jscomp$68$$.buffer[$buffer$jscomp$68$$.offset++] = 1;
  $buffer$jscomp$68$$.buffer[$buffer$jscomp$68$$.offset++] = 0;
  $write_le32$$($buffer$jscomp$68$$, 23);
  $write_le16$$($buffer$jscomp$68$$, 1);
  $write_ascii$$($buffer$jscomp$68$$, "\x00");
  $buffer$jscomp$68$$.offset = 43008;
  $buffer$jscomp$68$$.buffer[$buffer$jscomp$68$$.offset++] = 1;
  $buffer$jscomp$68$$.buffer[$buffer$jscomp$68$$.offset++] = 0;
  $write_be32$$($buffer$jscomp$68$$, 23);
  $write_be16$$($buffer$jscomp$68$$, 1);
  $write_ascii$$($buffer$jscomp$68$$, "\x00");
  $buffer$jscomp$68$$.offset = 47104;
  $write_record$$($buffer$jscomp$68$$, "\x00", 2, !0, 23, 2048);
  $write_record$$($buffer$jscomp$68$$, "\u0001", 2, !0, 23, 2048);
  for (const {name:$name$jscomp$116$$, $contents$:$contents$jscomp$3$$, $lba$:$lba$jscomp$12$$} of $files$$) {
    $write_record$$($buffer$jscomp$68$$, $name$jscomp$116$$, 0, !1, $lba$jscomp$12$$, $contents$jscomp$3$$.length);
  }
  for (let {$contents$:$contents$jscomp$4$$, $lba$:$lba$jscomp$13$$} of $files$$) {
    $buffer$jscomp$68$$.buffer.set($contents$jscomp$4$$, 2048 * $lba$jscomp$13$$);
  }
  return $buffer$jscomp$68$$.buffer;
}
;const $ON_LOCALHOST$$module$src$browser$main$$ = !location.hostname.endsWith("copy.sh"), $DEFAULT_NETWORKING_PROXIES$$module$src$browser$main$$ = ["wss://relay.widgetry.org/", "ws://localhost:8080/"];
function $query_append$$module$src$browser$main$$() {
  const $version$jscomp$7$$ = $$$$module$src$browser$main$$("version");
  return $version$jscomp$7$$ ? "?" + $version$jscomp$7$$.textContent : "";
}
function $set_title$$module$src$browser$main$$($text$jscomp$13$$) {
  document.title = $text$jscomp$13$$ + " - v86";
  const $description$jscomp$4$$ = document.querySelector("meta[name=description]");
  $description$jscomp$4$$ && ($description$jscomp$4$$.content = "Running " + $text$jscomp$13$$);
}
function $bool_arg$$module$src$browser$main$$($x$jscomp$125$$) {
  return !!$x$jscomp$125$$ && "0" !== $x$jscomp$125$$;
}
function $read_file$$module$src$browser$main$$($file$jscomp$10$$) {
  return new Promise(($resolve$jscomp$11$$, $reject$jscomp$2$$) => {
    const $fr$jscomp$1$$ = new FileReader;
    $fr$jscomp$1$$.onload = () => $resolve$jscomp$11$$($fr$jscomp$1$$.result);
    $fr$jscomp$1$$.onerror = $e$jscomp$57$$ => $reject$jscomp$2$$($e$jscomp$57$$);
    $fr$jscomp$1$$.readAsArrayBuffer($file$jscomp$10$$);
  });
}
let $progress_ticks$$module$src$browser$main$$ = 0;
function $$$$module$src$browser$main$$($id$jscomp$28$$) {
  return document.getElementById($id$jscomp$28$$);
}
const $elements_to_restore$$module$src$browser$main$$ = "memory_size video_memory_size networking_proxy disable_audio enable_acpi boot_order".split(" ");
for (const $item$jscomp$9$$ of $elements_to_restore$$module$src$browser$main$$) {
  try {
    window.localStorage.removeItem($item$jscomp$9$$);
  } catch ($e$jscomp$59$$) {
  }
}
function $onload$$module$src$browser$main$$() {
  function $update_filters$$() {
    const $conjunction$$ = [];
    for (const $category$jscomp$1$$ of $defined_filter$$) {
      const $disjunction$$ = $category$jscomp$1$$.filter($filter$jscomp$4$$ => $filter$jscomp$4$$.element.checked);
      $disjunction$$.length && $conjunction$$.push($disjunction$$);
    }
    for (const $os$jscomp$25$$ of $os_info$$) {
      $os$jscomp$25$$.element.style.display = $conjunction$$.every($disjunction$jscomp$1$$ => $disjunction$jscomp$1$$.some($filter$jscomp$5$$ => $filter$jscomp$5$$.$condition$($os$jscomp$25$$))) ? "" : "none";
    }
  }
  function $set_proxy_value$$($elem$jscomp$4_id$jscomp$29$$, $value$jscomp$196$$) {
    if ($elem$jscomp$4_id$jscomp$29$$ = $$$$module$src$browser$main$$($elem$jscomp$4_id$jscomp$29$$)) {
      $elem$jscomp$4_id$jscomp$29$$.onclick = () => $$$$module$src$browser$main$$("relay_url").value = $value$jscomp$196$$;
    }
  }
  if (window.WebAssembly) {
    $$$$module$src$browser$main$$("start_emulation").onclick = function($e$jscomp$60$$) {
      $start_emulation$$module$src$browser$main$$(null, null);
      $$$$module$src$browser$main$$("start_emulation").blur();
      $e$jscomp$60$$.preventDefault();
    };
    var $query_args$$ = new URLSearchParams(location.search), $category_host_known_filter_oses$$ = $query_args$$.get("cdn") || ($ON_LOCALHOST$$module$src$browser$main$$ ? "images/" : "//i.copy.sh/");
    $category_host_known_filter_oses$$ = [{id:"archlinux", name:"Arch Linux", $memory_size$:536870912, $vga_memory_size$:8388608, state:{url:$category_host_known_filter_oses$$ + "arch_state-v3.bin.zst"}, filesystem:{$baseurl$:$category_host_known_filter_oses$$ + "arch/", }, $net_device_type$:"virtio", }, {id:"archlinux-boot", name:"Arch Linux", $memory_size$:536870912, $vga_memory_size$:8388608, filesystem:{$baseurl$:$category_host_known_filter_oses$$ + "arch/", $basefs$:{url:$category_host_known_filter_oses$$ + 
    "fs.json"}, }, $cmdline$:"rw apm=off vga=0x344 video=vesafb:ypan,vremap:8 root=host9p rootfstype=9p rootflags=trans=virtio,cache=loose mitigations=off audit=0 init_on_free=on tsc=reliable random.trust_cpu=on nowatchdog init=/usr/bin/init-openrc net.ifnames=0 biosdevname=0", $bzimage_initrd_from_filesystem$:!0, $net_device_type$:"virtio", }, {id:"copy/skiffos", name:"SkiffOS", $cdrom$:{url:$category_host_known_filter_oses$$ + "skiffos/.iso", size:124672000, async:!0, $fixed_chunk_size$:1048576, 
    $use_parts$:!0, }, $memory_size$:536870912, }, {id:"serenity", name:"SerenityOS", $hda$:{url:$category_host_known_filter_oses$$ + "serenity-v3/.img.zst", size:734003200, async:!0, $fixed_chunk_size$:1048576, $use_parts$:!0, }, $memory_size$:536870912, state:{url:$category_host_known_filter_oses$$ + "serenity_state-v4.bin.zst"}, $homepage$:"https://serenityos.org/", $mac_address_translation$:!0, }, {id:"serenity-boot", name:"SerenityOS", $hda$:{url:$category_host_known_filter_oses$$ + "serenity-v3/.img.zst", 
    size:734003200, async:!0, $fixed_chunk_size$:1048576, $use_parts$:!0, }, $memory_size$:536870912, $homepage$:"https://serenityos.org/", }, {id:"redox", name:"Redox", $hda$:{url:$category_host_known_filter_oses$$ + "redox_demo_i686_2024-09-07_1225_harddrive/.img", size:671088640, async:!0, $fixed_chunk_size$:1048576, $use_parts$:!0, }, $memory_size$:1073741824, state:{url:$category_host_known_filter_oses$$ + "redox_state-v2.bin.zst"}, $homepage$:"https://www.redox-os.org/", $acpi$:!0, }, {id:"redox-boot", 
    name:"Redox", $hda$:{url:$category_host_known_filter_oses$$ + "redox_demo_i686_2024-09-07_1225_harddrive/.img", size:671088640, async:!0, $fixed_chunk_size$:1048576, $use_parts$:!0, }, $memory_size$:1073741824, $homepage$:"https://www.redox-os.org/", $acpi$:!0, }, {id:"helenos", $memory_size$:268435456, $cdrom$:{url:$category_host_known_filter_oses$$ + "HelenOS-0.14.1-ia32.iso", size:25792512, async:!1, }, name:"HelenOS", $homepage$:"http://www.helenos.org/", }, {id:"fiwix", $memory_size$:268435456, 
    $hda$:{url:$category_host_known_filter_oses$$ + "FiwixOS-3.4-i386/.img", size:1073741824, async:!0, $fixed_chunk_size$:1048576, $use_parts$:!0, }, name:"FiwixOS", $homepage$:"https://www.fiwix.org/", }, {id:"haiku", $memory_size$:536870912, $hda$:{url:$category_host_known_filter_oses$$ + "haiku-v5/.img", size:1342177280, async:!0, $fixed_chunk_size$:1048576, $use_parts$:!0, }, state:{url:$category_host_known_filter_oses$$ + "haiku_state-v5.bin.zst"}, name:"Haiku", $homepage$:"https://www.haiku-os.org/", 
    $acpi$:!0, }, {id:"haiku-boot", $memory_size$:536870912, $hda$:{url:$category_host_known_filter_oses$$ + "haiku-v5/.img", size:1342177280, async:!0, $fixed_chunk_size$:1048576, $use_parts$:!0, }, name:"Haiku", $homepage$:"https://www.haiku-os.org/", $acpi$:!0, }, {id:"beos", $memory_size$:536870912, $hda$:{url:$category_host_known_filter_oses$$ + "beos5/.img", size:536870912, async:!0, $fixed_chunk_size$:1048576, $use_parts$:!0, }, name:"BeOS 5", }, {id:"msdos", $hda$:{url:$category_host_known_filter_oses$$ + 
    "msdos622/.img", size:67108864, async:!0, $fixed_chunk_size$:262144, $use_parts$:!0, }, name:"MS-DOS 6.22", }, {id:"msdos4", $fda$:{url:$category_host_known_filter_oses$$ + "msdos4.img", size:1474560, }, name:"MS-DOS 4", }, {id:"freedos", $fda$:{url:$category_host_known_filter_oses$$ + "freedos722.img", size:737280, }, name:"FreeDOS", }, {id:"freegem", $hda$:{url:$category_host_known_filter_oses$$ + "freegem/.bin", size:209715200, async:!0, $fixed_chunk_size$:262144, $use_parts$:!0, }, name:"Freedos with FreeGEM", 
    }, {id:"xcom", $fda$:{url:$category_host_known_filter_oses$$ + "xcom144.img", size:1474560, }, name:"Freedos with Xcom", $homepage$:"http://xcom.infora.hu/index.html", }, {id:"psychdos", $hda$:{url:$category_host_known_filter_oses$$ + "psychdos/.img", size:549453824, async:!0, $fixed_chunk_size$:262144, $use_parts$:!0, }, name:"PsychDOS", $homepage$:"https://psychoslinux.gitlab.io/DOS/INDEX.HTM", }, {id:"86dos", $fda$:{url:$category_host_known_filter_oses$$ + "pc86dos.img", size:163840, }, name:"86-DOS", 
    $homepage$:"https://www.os2museum.com/wp/pc-86-dos/", }, {id:"oberon", $hda$:{url:$category_host_known_filter_oses$$ + "oberon.img", size:25165824, async:!1, }, name:"Oberon", }, {id:"windows1", $fda$:{url:$category_host_known_filter_oses$$ + "windows101.img", size:1474560, }, name:"Windows 1.01", }, {id:"windows2", $hda$:{url:$category_host_known_filter_oses$$ + "windows2.img", size:4177920, async:!1, }, name:"Windows 2.03", }, {id:"linux26", $cdrom$:{url:$category_host_known_filter_oses$$ + 
    "linux.iso", size:6547456, async:!1, }, name:"Linux", }, {id:"linux3", $cdrom$:{url:$category_host_known_filter_oses$$ + "linux3.iso", size:8638464, async:!1, }, name:"Linux", }, {id:"linux4", $cdrom$:{url:$category_host_known_filter_oses$$ + "linux4.iso", size:7731200, async:!1, }, name:"Linux", filesystem:{}, }, {id:"buildroot", $bzimage$:{url:$category_host_known_filter_oses$$ + "buildroot-bzimage.bin", size:5166352, async:!1, }, name:"Buildroot Linux", filesystem:{}, $cmdline$:"tsc=reliable mitigations=off random.trust_cpu=on", 
    $mouse_disabled_default$:!0, }, {id:"buildroot6", $bzimage$:{url:$category_host_known_filter_oses$$ + "buildroot-bzimage68.bin", size:10068480, async:!1, }, name:"Buildroot Linux 6.8", filesystem:{}, $cmdline$:"tsc=reliable mitigations=off random.trust_cpu=on", }, {id:"basiclinux", $hda$:{url:$category_host_known_filter_oses$$ + "bl3-5.img", size:104857600, async:!1, }, name:"BasicLinux", }, {id:"xpud", $cdrom$:{url:$category_host_known_filter_oses$$ + "xpud-0.9.2.iso", size:67108864, async:!1, 
    }, name:"xPUD", $memory_size$:268435456, }, {id:"elks", $hda$:{url:$category_host_known_filter_oses$$ + "elks-hd32-fat.img", size:32514048, async:!1, }, name:"ELKS", $homepage$:"https://github.com/ghaerr/elks", }, {id:"nodeos", $bzimage$:{url:$category_host_known_filter_oses$$ + "nodeos-kernel.bin", size:14452000, async:!1, }, name:"NodeOS", $cmdline$:"tsc=reliable mitigations=off random.trust_cpu=on", }, {id:"dsl", $memory_size$:268435456, $cdrom$:{url:$category_host_known_filter_oses$$ + "dsl-4.11.rc2.iso", 
    size:52824064, async:!1, }, name:"Damn Small Linux", $homepage$:"http://www.damnsmalllinux.org/", }, {id:"xwoaf", $memory_size$:268435456, $cdrom$:{url:$category_host_known_filter_oses$$ + "xwoaf_rebuild4.iso", size:2205696, async:!1, }, name:"xwoaf", $homepage$:"https://pupngo.dk/xwinflpy/xwoaf_rebuild.html", }, {id:"minix", name:"Minix", $memory_size$:268435456, $cdrom$:{url:$category_host_known_filter_oses$$ + "minix-3.3.0/.iso", size:605581312, async:!0, $fixed_chunk_size$:1048576, $use_parts$:!0, 
    }, $homepage$:"https://www.minix3.org/", }, {id:"unix-v7", name:"Unix V7", $hda$:{url:$category_host_known_filter_oses$$ + "unix-v7x86-0.8a/.img", size:152764416, async:!0, $fixed_chunk_size$:262144, $use_parts$:!0, }, }, {id:"kolibrios", $fda$:{url:$ON_LOCALHOST$$module$src$browser$main$$ ? $category_host_known_filter_oses$$ + "kolibri.img" : "//builds.kolibrios.org/en_US/data/data/kolibri.img", size:1474560, }, name:"KolibriOS", $homepage$:"https://kolibrios.org/en/", }, {id:"kolibrios-fallback", 
    $fda$:{url:$category_host_known_filter_oses$$ + "kolibri.img", size:1474560, }, name:"KolibriOS", }, {id:"mu", $hda$:{url:$category_host_known_filter_oses$$ + "mu-shell.img", size:10321920, async:!1, }, $memory_size$:268435456, name:"Mu", $homepage$:"https://github.com/akkartik/mu", }, {id:"openbsd", $hda$:{url:$category_host_known_filter_oses$$ + "openbsd/.img", size:1073741824, async:!0, $fixed_chunk_size$:1048576, $use_parts$:!0, }, state:{url:$category_host_known_filter_oses$$ + "openbsd_state-v2.bin.zst"}, 
    $memory_size$:268435456, name:"OpenBSD", }, {id:"sortix", $cdrom$:{url:$category_host_known_filter_oses$$ + "sortix-1.0-i686.iso", size:71075840, async:!1, }, $memory_size$:536870912, name:"Sortix", }, {id:"openbsd-boot", $hda$:{url:$category_host_known_filter_oses$$ + "openbsd/.img", size:1073741824, async:!0, $fixed_chunk_size$:1048576, $use_parts$:!0, }, $memory_size$:268435456, name:"OpenBSD", }, {id:"netbsd", $hda$:{url:$category_host_known_filter_oses$$ + "netbsd/.img", size:511000064, 
    async:!0, $fixed_chunk_size$:1048576, $use_parts$:!0, }, $memory_size$:268435456, name:"NetBSD", }, {id:"crazierl", $multiboot$:{url:$category_host_known_filter_oses$$ + "crazierl-elf.img", size:896592, async:!1, }, $initrd$:{url:$category_host_known_filter_oses$$ + "crazierl-initrd.img", size:18448316, async:!1, }, $acpi$:!0, $cmdline$:"kernel /libexec/ld-elf32.so.1", $memory_size$:134217728, name:"Crazierl", }, {id:"solos", $fda$:{url:$category_host_known_filter_oses$$ + "os8.img", size:1474560, 
    }, name:"Sol OS", $homepage$:"http://oby.ro/os/", }, {id:"bootchess", $fda$:{url:$category_host_known_filter_oses$$ + "bootchess.img", size:1474560, }, name:"BootChess", $homepage$:"http://www.pouet.net/prod.php?which=64962", }, {id:"bootbasic", $fda$:{url:$category_host_known_filter_oses$$ + "bootbasic.img", size:512, }, name:"bootBASIC", $homepage$:"https://github.com/nanochess/bootBASIC", }, {id:"bootlogo", $fda$:{url:$category_host_known_filter_oses$$ + "bootlogo.img", size:512, }, name:"bootLogo", 
    $homepage$:"https://github.com/nanochess/bootLogo", }, {id:"pillman", $fda$:{url:$category_host_known_filter_oses$$ + "pillman.img", size:512, }, name:"Pillman", $homepage$:"https://github.com/nanochess/Pillman", }, {id:"invaders", $fda$:{url:$category_host_known_filter_oses$$ + "invaders.img", size:512, }, name:"Invaders", $homepage$:"https://github.com/nanochess/Invaders", }, {id:"sectorlisp", $fda$:{url:$category_host_known_filter_oses$$ + "sectorlisp-friendly.bin", size:512, }, name:"SectorLISP", 
    $homepage$:"https://justine.lol/sectorlisp2/", }, {id:"sectorforth", $fda$:{url:$category_host_known_filter_oses$$ + "sectorforth.img", size:512, }, name:"sectorforth", $homepage$:"https://github.com/cesarblum/sectorforth", }, {id:"floppybird", $fda$:{url:$category_host_known_filter_oses$$ + "floppybird.img", size:1474560, }, name:"Floppy Bird", $homepage$:"http://mihail.co/floppybird", }, {id:"stillalive", $fda$:{url:$category_host_known_filter_oses$$ + "stillalive-os.img", size:368640, }, name:"Still Alive", 
    $homepage$:"https://github.com/maniekx86/stillalive-os", }, {id:"hello-v86", $fda$:{url:$category_host_known_filter_oses$$ + "hello-v86.img", size:512, }, name:"Hello v86", }, {id:"tetros", $fda$:{url:$category_host_known_filter_oses$$ + "tetros.img", size:512, }, name:"TetrOS", $homepage$:"https://github.com/daniel-e/tetros", }, {id:"dino", $fda$:{url:$category_host_known_filter_oses$$ + "bootdino.img", size:512, }, name:"dino", $homepage$:"https://github.com/franeklubi/dino", }, {id:"bootrogue", 
    $fda$:{url:$category_host_known_filter_oses$$ + "bootrogue.img", size:512, }, name:"bootRogue", $homepage$:"https://github.com/nanochess/bootRogue", }, {id:"duskos", $hda$:{url:$category_host_known_filter_oses$$ + "duskos.img", async:!1, size:8388608, }, name:"Dusk OS", $homepage$:"http://duskos.org/", }, {id:"windows2000", $memory_size$:536870912, $hda$:{url:$category_host_known_filter_oses$$ + "windows2k-v2/.img", size:2147483648, async:!0, $fixed_chunk_size$:262144, $use_parts$:!0, }, name:"Windows 2000", 
    state:{url:$category_host_known_filter_oses$$ + "windows2k_state-v4.bin.zst"}, $mac_address_translation$:!0, }, {id:"windows2000-boot", $memory_size$:536870912, $hda$:{url:$category_host_known_filter_oses$$ + "windows2k-v2/.img", size:2147483648, async:!0, $fixed_chunk_size$:262144, $use_parts$:!0, }, name:"Windows 2000", }, {id:"windows-me", $memory_size$:268435456, $hda$:{url:$category_host_known_filter_oses$$ + "windowsme-v2/.img", size:834666496, async:!0, $fixed_chunk_size$:262144, $use_parts$:!0, 
    }, state:{url:$category_host_known_filter_oses$$ + "windows-me_state-v2.bin.zst"}, name:"Windows ME", }, {id:"windowsnt4", $memory_size$:536870912, $hda$:{url:$category_host_known_filter_oses$$ + "winnt4_noacpi/.img", size:523837440, async:!0, $fixed_chunk_size$:262144, $use_parts$:!0, }, name:"Windows NT 4.0", $cpuid_level$:2, }, {id:"windowsnt35", $memory_size$:268435456, $hda$:{url:$category_host_known_filter_oses$$ + "windowsnt351/.img", size:163577856, async:!0, $fixed_chunk_size$:262144, 
    $use_parts$:!0, }, name:"Windows NT 3.51", }, {id:"windowsnt3", $memory_size$:268435456, $hda$:{url:$category_host_known_filter_oses$$ + "winnt31/.img", size:91226112, async:!0, $fixed_chunk_size$:262144, $use_parts$:!0, }, name:"Windows NT 3.1", }, {id:"windows98", $memory_size$:134217728, $hda$:{url:$category_host_known_filter_oses$$ + "windows98/.img", size:314572800, async:!0, $fixed_chunk_size$:262144, $use_parts$:!0, }, name:"Windows 98", state:{url:$category_host_known_filter_oses$$ + 
    "windows98_state-v2.bin.zst"}, $mac_address_translation$:!0, }, {id:"windows98-boot", $memory_size$:134217728, $hda$:{url:$category_host_known_filter_oses$$ + "windows98/.img", size:314572800, async:!0, $fixed_chunk_size$:262144, $use_parts$:!0, }, name:"Windows 98", }, {id:"windows95", $memory_size$:67108864, $hda$:{url:$category_host_known_filter_oses$$ + "windows95-v2/.img", size:471859200, async:!0, $fixed_chunk_size$:262144, $use_parts$:!0, }, name:"Windows 95", }, {id:"windows95-boot", 
    $memory_size$:67108864, $hda$:{url:$category_host_known_filter_oses$$ + "windows95-v2/.img", size:471859200, async:!0, $fixed_chunk_size$:262144, $use_parts$:!0, }, name:"Windows 95", }, {id:"windows30", $memory_size$:67108864, $cdrom$:{url:$category_host_known_filter_oses$$ + "Win30.iso", size:7774208, async:!1, }, name:"Windows 3.0", }, {id:"windows31", $memory_size$:67108864, $hda$:{url:$category_host_known_filter_oses$$ + "win31.img", async:!1, size:34463744, }, name:"Windows 3.1", }, {id:"tilck", 
    $memory_size$:134217728, $hda$:{url:$category_host_known_filter_oses$$ + "tilck.img", async:!1, size:37748736, }, name:"Tilck", $homepage$:"https://github.com/vvaltchev/tilck", }, {id:"littlekernel", $multiboot$:{url:$category_host_known_filter_oses$$ + "littlekernel-multiboot.img", async:!1, size:969580, }, name:"Little Kernel", $homepage$:"https://github.com/littlekernel/lk", }, {id:"sanos", $memory_size$:134217728, $hda$:{url:$category_host_known_filter_oses$$ + "sanos-flp.img", async:!1, 
    size:1474560, }, name:"Sanos", $homepage$:"http://www.jbox.dk/sanos/", }, {id:"freebsd", $memory_size$:268435456, $hda$:{url:$category_host_known_filter_oses$$ + "freebsd/.img", size:2147483648, async:!0, $fixed_chunk_size$:1048576, $use_parts$:!0, }, state:{url:$category_host_known_filter_oses$$ + "freebsd_state-v2.bin.zst"}, name:"FreeBSD", }, {id:"freebsd-boot", $memory_size$:268435456, $hda$:{url:$category_host_known_filter_oses$$ + "freebsd/.img", size:2147483648, async:!0, $fixed_chunk_size$:1048576, 
    $use_parts$:!0, }, name:"FreeBSD", }, {id:"reactos", $memory_size$:536870912, $hda$:{url:$category_host_known_filter_oses$$ + "reactos-v3/.img", size:734003200, async:!0, $fixed_chunk_size$:1048576, $use_parts$:!0, }, state:{url:$category_host_known_filter_oses$$ + "reactos_state-v3.bin.zst"}, $mac_address_translation$:!0, name:"ReactOS", $acpi$:!0, $net_device_type$:"virtio", $homepage$:"https://reactos.org/", }, {id:"reactos-boot", $memory_size$:536870912, $hda$:{url:$category_host_known_filter_oses$$ + 
    "reactos-v2/.img", size:681574400, async:!0, $fixed_chunk_size$:1048576, $use_parts$:!0, }, name:"ReactOS", $acpi$:!0, $homepage$:"https://reactos.org/", }, {id:"skift", $cdrom$:{url:$category_host_known_filter_oses$$ + "skift-20200910.iso", size:64452608, async:!1, }, name:"Skift", $homepage$:"https://skiftos.org/", }, {id:"snowdrop", $fda$:{url:$category_host_known_filter_oses$$ + "snowdrop.img", size:1474560, }, name:"Snowdrop", $homepage$:"http://www.sebastianmihai.com/snowdrop/", }, {id:"openwrt", 
    $hda$:{url:$category_host_known_filter_oses$$ + "openwrt-18.06.1-x86-legacy-combined-squashfs.img", size:19846474, async:!1, }, name:"OpenWrt", }, {id:"qnx", $fda$:{url:$category_host_known_filter_oses$$ + "qnx-demo-network-4.05.img", size:1474560, }, name:"QNX 4.05", }, {id:"9front", $memory_size$:134217728, $hda$:{url:$category_host_known_filter_oses$$ + "9front-10931.386/.iso", size:489453568, async:!0, $fixed_chunk_size$:1048576, $use_parts$:!0, }, state:{url:$category_host_known_filter_oses$$ + 
    "9front_state-v3.bin.zst"}, $acpi$:!0, name:"9front", $homepage$:"https://9front.org/", }, {id:"9front-boot", $memory_size$:134217728, $hda$:{url:$category_host_known_filter_oses$$ + "9front-10931.386/.iso", size:489453568, async:!0, $fixed_chunk_size$:1048576, $use_parts$:!0, }, $acpi$:!0, name:"9front", $homepage$:"https://9front.org/", }, {id:"9legacy", $memory_size$:536870912, $hda$:{url:$category_host_known_filter_oses$$ + "9legacy.img", async:!1, size:16000000, }, name:"9legacy", $homepage$:"http://www.9legacy.org/", 
    }, {id:"mobius", $fda$:{url:$category_host_known_filter_oses$$ + "mobius-fd-release5.img", size:1474560, }, name:"Mobius", }, {id:"android", $memory_size$:536870912, $cdrom$:{url:$category_host_known_filter_oses$$ + "android-x86-1.6-r2/.iso", size:54661120, async:!0, $fixed_chunk_size$:1048576, $use_parts$:!0, }, name:"Android", }, {id:"android4", $memory_size$:536870912, $cdrom$:{url:$category_host_known_filter_oses$$ + "android_x86_nonsse3_4.4r1_20140904/.iso", size:247463936, async:!0, $fixed_chunk_size$:1048576, 
    $use_parts$:!0, }, name:"Android 4", }, {id:"tinycore", $memory_size$:268435456, $hda$:{url:$category_host_known_filter_oses$$ + "TinyCore-11.0.iso", size:19922944, async:!1, }, name:"Tinycore", $homepage$:"http://www.tinycorelinux.net/", }, {id:"slitaz", $memory_size$:536870912, $hda$:{url:$category_host_known_filter_oses$$ + "slitaz-rolling-2024.iso", size:56573952, async:!1, }, name:"SliTaz", $homepage$:"https://slitaz.org/", }, {id:"freenos", $memory_size$:268435456, $cdrom$:{url:$category_host_known_filter_oses$$ + 
    "FreeNOS-1.0.3.iso", async:!1, size:11014144, }, name:"FreeNOS", $acpi$:!0, $homepage$:"http://www.freenos.org/", }, {id:"syllable", $memory_size$:536870912, $hda$:{url:$category_host_known_filter_oses$$ + "syllable-destop-0.6.7/.img", async:!0, size:524288E3, $fixed_chunk_size$:524288, $use_parts$:!0, }, name:"Syllable", $homepage$:"http://syllable.metaproject.frl/", }, {id:"toaruos", $memory_size$:536870912, $cdrom$:{url:$category_host_known_filter_oses$$ + "toaruos-1.6.1-core.iso", size:67567616, 
    async:!1, }, name:"ToaruOS", $acpi$:!0, $homepage$:"https://toaruos.org/", }, {id:"nopeos", $cdrom$:{url:$category_host_known_filter_oses$$ + "nopeos-0.1.iso", size:532480, async:!1, }, name:"Nope OS", $homepage$:"https://github.com/d99kris/nopeos", }, {id:"soso", $cdrom$:{url:$category_host_known_filter_oses$$ + "soso.iso", size:22546432, async:!1, }, name:"Soso", $homepage$:"https://github.com/ozkl/soso", }, {id:"pcmos", $fda$:{url:$category_host_known_filter_oses$$ + "PCMOS386-9-user-patched.img", 
    size:1474560, }, name:"PC-MOS/386", $homepage$:"https://github.com/roelandjansen/pcmos386v501", }, {id:"jx", $fda$:{url:$category_host_known_filter_oses$$ + "jx-demo.img", size:1474560, }, name:"JX", $homepage$:"https://www4.cs.fau.de/Projects/JX/index.html", }, {id:"house", $fda$:{url:$category_host_known_filter_oses$$ + "hOp-0.8.img", size:1474560, }, name:"House", $homepage$:"https://programatica.cs.pdx.edu/House/", }, {id:"bleskos", name:"BleskOS", $cdrom$:{url:$category_host_known_filter_oses$$ + 
    "bleskos_2024u32.iso", size:1835008, async:!1, }, $homepage$:"https://github.com/VendelinSlezak/BleskOS", }, {id:"boneos", name:"BoneOS", $cdrom$:{url:$category_host_known_filter_oses$$ + "BoneOS.iso", size:11429888, async:!1, }, $homepage$:"https://amanuel.io/projects/BoneOS/", }, {id:"mikeos", name:"MikeOS", $cdrom$:{url:$category_host_known_filter_oses$$ + "mikeos.iso", size:3311616, async:!1, }, $homepage$:"https://mikeos.sourceforge.net/", }, {id:"bluejay", name:"Blue Jay", $fda$:{url:$category_host_known_filter_oses$$ + 
    "bj050.img", size:1474560, }, $homepage$:"https://archiveos.org/blue-jay/", }, {id:"t3xforth", name:"T3XFORTH", $fda$:{url:$category_host_known_filter_oses$$ + "t3xforth.img", size:1474560, }, $homepage$:"https://t3x.org/t3xforth/", }, {id:"nanoshell", name:"NanoShell", $cdrom$:{url:$category_host_known_filter_oses$$ + "nanoshell.iso", size:6785024, async:!1, }, $homepage$:"https://github.com/iProgramMC/NanoShellOS", }, {id:"catk", name:"CatK", $cdrom$:{url:$category_host_known_filter_oses$$ + 
    "catkernel.iso", size:11968512, async:!1, }, $homepage$:"https://catk.neocities.org/", }, {id:"mcp", name:"M/CP", $fda$:{url:$category_host_known_filter_oses$$ + "mcp2.img", size:512, }, $homepage$:"https://github.com/ybuzoku/MCP", }, {id:"ibm-exploring", name:"Exploring The IBM Personal Computer", $fda$:{url:$category_host_known_filter_oses$$ + "ibm-exploring.img", size:368640, }, }, {id:"leetos", name:"lEEt/OS", $fda$:{url:$category_host_known_filter_oses$$ + "leetos.img", size:1474560, }, 
    $homepage$:"http://sininenankka.dy.fi/leetos/index.php", }, {id:"newos", name:"NewOS", $fda$:{url:$category_host_known_filter_oses$$ + "newos-flp.img", size:1474560, async:!1, }, $homepage$:"https://newos.org/", }, {id:"aros-broadway", name:"AROS Broadway", $memory_size$:536870912, $cdrom$:{url:$category_host_known_filter_oses$$ + "broadway10/.iso", size:742051840, async:!0, $fixed_chunk_size$:524288, $use_parts$:!0, }, $homepage$:"https://web.archive.org/web/20231109224346/http://www.aros-broadway.de/", 
    }, {id:"icaros", name:"Icaros Desktop", $memory_size$:536870912, $cdrom$:{url:$category_host_known_filter_oses$$ + "icaros-pc-i386-2.3/.iso", size:726511616, async:!0, $fixed_chunk_size$:524288, $use_parts$:!0, }, $homepage$:"http://vmwaros.blogspot.com/", }, {id:"tinyaros", name:"Tiny Aros", $memory_size$:536870912, $cdrom$:{url:$category_host_known_filter_oses$$ + "tinyaros-pc-i386/.iso", size:111175680, async:!0, $fixed_chunk_size$:524288, $use_parts$:!0, }, $homepage$:"https://www.tinyaros.it/", 
    }, {id:"dancy", name:"Dancy", $cdrom$:{url:$category_host_known_filter_oses$$ + "dancy.iso", size:10485760, async:!1, }, $homepage$:"https://github.com/Tiihala/Dancy", }, {id:"curios", name:"CuriOS", $hda$:{url:$category_host_known_filter_oses$$ + "curios.img", size:83886080, async:!1, }, $homepage$:"https://github.com/h5n1xp/CuriOS", }, {id:"os64", name:"OS64", $cdrom$:{url:$category_host_known_filter_oses$$ + "os64boot.iso", size:5580800, async:!1, }, $homepage$:"https://os64.blogspot.com/", 
    }, {id:"ipxe", name:"iPXE", $cdrom$:{url:$category_host_known_filter_oses$$ + "ipxe.iso", size:4194304, async:!1, }, $homepage$:"https://ipxe.org/", }, {id:"netboot.xyz", name:"netboot.xyz", $cdrom$:{url:$category_host_known_filter_oses$$ + "netboot.xyz.iso", size:2398208, async:!1, }, $homepage$:"https://netboot.xyz/", $net_device_type$:"virtio", }, {id:"squeaknos", name:"SqueakNOS", $cdrom$:{url:$category_host_known_filter_oses$$ + "SqueakNOS.iso", size:61171712, async:!1, }, $memory_size$:536870912, 
    $homepage$:"https://squeaknos.blogspot.com/"}, {id:"chokanji4", name:"Chokanji 4", $hda$:{url:$category_host_known_filter_oses$$ + "chokanji4/.img.zst", size:10737418240, async:!0, $fixed_chunk_size$:262144, $use_parts$:!0, }, $memory_size$:536870912, $homepage$:"https://archive.org/details/brightv4000"}, {id:"archhurd", name:"Arch Hurd", $hda$:{url:$category_host_known_filter_oses$$ + "archhurd-2018.09.28/.img.zst", size:4294967296, async:!0, $fixed_chunk_size$:1048576, $use_parts$:!0, }, $memory_size$:536870912, 
    $homepage$:"https://archhurd.org/", }, {id:"prettyos", name:"PrettyOS", $fda$:{url:$category_host_known_filter_oses$$ + "prettyos.img", size:1474560, async:!1, }, $homepage$:"https://www.prettyos.de/Image.html", }, {id:"vanadium", name:"Vanadium OS", $cdrom$:{url:$category_host_known_filter_oses$$ + "vanadiumos.iso", size:8388608, async:!1, }, $homepage$:"https://www.durlej.net/software.html", }, {id:"xenus", name:"XENUS", $hda$:{url:$category_host_known_filter_oses$$ + "xenushdd.img", size:52428800, 
    async:!1, }, $homepage$:"https://www.durlej.net/xenus/", }, {id:"mojo", name:"Mojo OS", $cdrom$:{url:$category_host_known_filter_oses$$ + "mojo-0.2.2.iso", size:4048896, async:!1, }, $homepage$:"https://archiveos.org/mojoos/", }, {id:"bsdos", $memory_size$:134217728, name:"BSD/OS", $hda$:{url:$category_host_known_filter_oses$$ + "bsdos43/.img.zst", size:1073741824, async:!0, $fixed_chunk_size$:1048576, $use_parts$:!0, }, state:{url:$category_host_known_filter_oses$$ + "bsdos43_state.bin"}, $homepage$:"https://en.wikipedia.org/wiki/BSD/OS", 
    }, {id:"bsdos-boot", $memory_size$:134217728, name:"BSD/OS", $hda$:{url:$category_host_known_filter_oses$$ + "bsdos43/.img.zst", size:1073741824, async:!0, $fixed_chunk_size$:1048576, $use_parts$:!0, }, $homepage$:"https://en.wikipedia.org/wiki/BSD/OS", }, {id:"asuro", name:"Asuro", $cdrom$:{url:$category_host_known_filter_oses$$ + "asuro.iso", size:5361664, async:!1, }, $homepage$:"https://asuro.xyz/", }, ];
    var $profile$$ = $query_args$$.get("profile");
    $profile$$ || ($link_link$jscomp$1$$ = document.createElement("link"), $link_link$jscomp$1$$.rel = "prefetch", $link_link$jscomp$1$$.href = "build/v86.wasm" + $query_append$$module$src$browser$main$$(), document.head.appendChild($link_link$jscomp$1$$));
    var $link_link$jscomp$1$$ = document.createElement("link");
    $link_link$jscomp$1$$.rel = "prefetch";
    $link_link$jscomp$1$$.href = "build/xterm.js";
    document.head.appendChild($link_link$jscomp$1$$);
    for (const $os$$ of $category_host_known_filter_oses$$) {
      if ($profile$$ === $os$$.id) {
        $start_emulation$$module$src$browser$main$$($os$$, $query_args$$);
        return;
      }
      const $element$jscomp$11$$ = $$$$module$src$browser$main$$("start_" + $os$$.id);
      $element$jscomp$11$$ && ($element$jscomp$11$$.onclick = $e$jscomp$61$$ => {
        $e$jscomp$61$$.ctrlKey || ($e$jscomp$61$$.preventDefault(), $element$jscomp$11$$.blur(), $start_emulation$$module$src$browser$main$$($os$$, null));
      });
    }
    if ("custom" === $profile$$) {
      if ($query_args$$.has("hda.url") || $query_args$$.has("cdrom.url") || $query_args$$.has("fda.url")) {
        $start_emulation$$module$src$browser$main$$(null, $query_args$$);
        return;
      }
    } else {
      if (/^[a-zA-Z0-9\-_]+\/[a-zA-Z0-9\-_]+$/g.test($profile$$)) {
        const $base$jscomp$6$$ = "https://v86-user-images.b-cdn.net/" + $profile$$;
        fetch($base$jscomp$6$$ + "/profile.json").catch(() => alert("Profile not found: " + $profile$$)).then($response$jscomp$2$$ => $response$jscomp$2$$.json()).then($p$jscomp$3_profile$jscomp$1$$ => {
          function $handle_image$$($o$jscomp$12$$) {
            return $o$jscomp$12$$ && {url:$base$jscomp$6$$ + "/" + $o$jscomp$12$$.url, async:$o$jscomp$12$$.async, size:$o$jscomp$12$$.size};
          }
          $p$jscomp$3_profile$jscomp$1$$ = {id:$p$jscomp$3_profile$jscomp$1$$.id, name:$p$jscomp$3_profile$jscomp$1$$.name, $memory_size$:$p$jscomp$3_profile$jscomp$1$$.memory_size, $vga_memory_size$:$p$jscomp$3_profile$jscomp$1$$.vga_memory_size, $acpi$:$p$jscomp$3_profile$jscomp$1$$.acpi, $boot_order$:$p$jscomp$3_profile$jscomp$1$$.boot_order, $hda$:$handle_image$$($p$jscomp$3_profile$jscomp$1$$.hda), $cdrom$:$handle_image$$($p$jscomp$3_profile$jscomp$1$$.cdrom), $fda$:$handle_image$$($p$jscomp$3_profile$jscomp$1$$.fda), 
          $multiboot$:$handle_image$$($p$jscomp$3_profile$jscomp$1$$.multiboot), $bzimage$:$handle_image$$($p$jscomp$3_profile$jscomp$1$$.bzimage), $initrd$:$handle_image$$($p$jscomp$3_profile$jscomp$1$$.initrd), };
          $start_emulation$$module$src$browser$main$$($p$jscomp$3_profile$jscomp$1$$, $query_args$$);
        });
      }
    }
    $query_args$$.has("m") && ($$$$module$src$browser$main$$("memory_size").value = $query_args$$.get("m"));
    $query_args$$.has("vram") && ($$$$module$src$browser$main$$("vga_memory_size").value = $query_args$$.get("vram"));
    $query_args$$.has("relay_url") && ($$$$module$src$browser$main$$("relay_url").value = $query_args$$.get("relay_url"));
    $query_args$$.has("mute") && ($$$$module$src$browser$main$$("disable_audio").checked = $bool_arg$$module$src$browser$main$$($query_args$$.get("mute")));
    $query_args$$.has("acpi") && ($$$$module$src$browser$main$$("acpi").checked = $bool_arg$$module$src$browser$main$$($query_args$$.get("acpi")));
    $query_args$$.has("boot_order") && ($$$$module$src$browser$main$$("boot_order").value = $query_args$$.get("boot_order"));
    for (const $dev$jscomp$1$$ of ["fda", "fdb"]) {
      const $toggle$$ = $$$$module$src$browser$main$$($dev$jscomp$1$$ + "_toggle_empty_disk");
      $toggle$$ && ($toggle$$.onclick = function($e$jscomp$63_select$$) {
        $e$jscomp$63_select$$.preventDefault();
        $e$jscomp$63_select$$ = document.createElement("select");
        $e$jscomp$63_select$$.id = $dev$jscomp$1$$ + "_empty_size";
        for ($n_sect_parent$jscomp$7$$ of [320, 360, 400, 640, 720, 800, 1440, 2400, 2880, 3444, 5760, 7680]) {
          const $n_bytes$$ = 512 * $n_sect_parent$jscomp$7$$, $option$$ = document.createElement("option");
          $option$$.textContent = 1024E3 > $n_bytes$$ ? $n_bytes$$ / 1024 + " kB" : ($n_bytes$$ / 1024E3).toFixed(2) + " MB";
          2880 === $n_sect_parent$jscomp$7$$ && ($option$$.selected = !0);
          $option$$.value = $n_bytes$$;
          $e$jscomp$63_select$$.appendChild($option$$);
        }
        var $n_sect_parent$jscomp$7$$ = $toggle$$.parentNode;
        $n_sect_parent$jscomp$7$$.innerHTML = "";
        $n_sect_parent$jscomp$7$$.append("Empty disk of ", $e$jscomp$63_select$$);
      });
    }
    for (const $dev$jscomp$2$$ of ["hda", "hdb"]) {
      const $toggle$jscomp$1$$ = $$$$module$src$browser$main$$($dev$jscomp$2$$ + "_toggle_empty_disk");
      $toggle$jscomp$1$$ && ($toggle$jscomp$1$$.onclick = function($e$jscomp$64_input$jscomp$11$$) {
        $e$jscomp$64_input$jscomp$11$$.preventDefault();
        $e$jscomp$64_input$jscomp$11$$ = document.createElement("input");
        $e$jscomp$64_input$jscomp$11$$.id = $dev$jscomp$2$$ + "_empty_size";
        $e$jscomp$64_input$jscomp$11$$.type = "number";
        $e$jscomp$64_input$jscomp$11$$.min = "0";
        $e$jscomp$64_input$jscomp$11$$.max = "2000";
        $e$jscomp$64_input$jscomp$11$$.step = "100";
        $e$jscomp$64_input$jscomp$11$$.value = "100";
        const $parent$jscomp$8$$ = $toggle$jscomp$1$$.parentNode;
        $parent$jscomp$8$$.innerHTML = "";
        $parent$jscomp$8$$.append("Empty disk of ", $e$jscomp$64_input$jscomp$11$$, " MB");
      });
    }
    var $os_info$$ = Array.from(document.querySelectorAll("#oses a.tr")).map($element$jscomp$12$$ => {
      const [, $size_raw$$, $unit$jscomp$4$$] = $element$jscomp$12$$.children[1].textContent.match(/([\d\.]+)\+? (\w+)/);
      let $size$jscomp$47$$ = +$size_raw$$;
      "MB" === $unit$jscomp$4$$ ? $size$jscomp$47$$ *= 1048576 : "KB" === $unit$jscomp$4$$ && ($size$jscomp$47$$ *= 1024);
      return {element:$element$jscomp$12$$, size:$size$jscomp$47$$, $graphical$:"gui_icon" === $element$jscomp$12$$.children[2].firstChild.className, family:$element$jscomp$12$$.children[3].textContent.replace(/-like/, ""), $arch$:$element$jscomp$12$$.children[4].textContent, status:$element$jscomp$12$$.children[5].textContent, source:$element$jscomp$12$$.children[6].textContent, languages:new Set($element$jscomp$12$$.children[7].textContent.split(", ")), $medium$:$element$jscomp$12$$.children[8].textContent, 
      };
    });
    $category_host_known_filter_oses$$ = [[{id:"linux", $condition$:$os$jscomp$1$$ => "Linux" === $os$jscomp$1$$.family}, {id:"bsd", $condition$:$os$jscomp$2$$ => "BSD" === $os$jscomp$2$$.family}, {id:"windows", $condition$:$os$jscomp$3$$ => "Windows" === $os$jscomp$3$$.family}, {id:"unix", $condition$:$os$jscomp$4$$ => "Unix" === $os$jscomp$4$$.family}, {id:"dos", $condition$:$os$jscomp$5$$ => "DOS" === $os$jscomp$5$$.family}, {id:"custom", $condition$:$os$jscomp$6$$ => "Custom" === $os$jscomp$6$$.family}, 
    ], [{id:"graphical", $condition$:$os$jscomp$7$$ => $os$jscomp$7$$.$graphical$}, {id:"text", $condition$:$os$jscomp$8$$ => !$os$jscomp$8$$.$graphical$}, ], [{id:"floppy", $condition$:$os$jscomp$9$$ => "Floppy" === $os$jscomp$9$$.$medium$}, {id:"cd", $condition$:$os$jscomp$10$$ => "CD" === $os$jscomp$10$$.$medium$}, {id:"hd", $condition$:$os$jscomp$11$$ => "HD" === $os$jscomp$11$$.$medium$}, ], [{id:"bootsector", $condition$:$os$jscomp$12$$ => 512 >= $os$jscomp$12$$.size}, {id:"lt5mb", $condition$:$os$jscomp$13$$ => 
    5242880 >= $os$jscomp$13$$.size}, {id:"gt5mb", $condition$:$os$jscomp$14$$ => 5242880 < $os$jscomp$14$$.size}, ], [{id:"modern", $condition$:$os$jscomp$15$$ => "Modern" === $os$jscomp$15$$.status}, {id:"historic", $condition$:$os$jscomp$16$$ => "Historic" === $os$jscomp$16$$.status}, ], [{id:"opensource", $condition$:$os$jscomp$17$$ => "Open-source" === $os$jscomp$17$$.source}, {id:"proprietary", $condition$:$os$jscomp$18$$ => "Proprietary" === $os$jscomp$18$$.source}, ], [{id:"16bit", $condition$:$os$jscomp$19$$ => 
    "16-bit" === $os$jscomp$19$$.$arch$}, {id:"32bit", $condition$:$os$jscomp$20$$ => "32-bit" === $os$jscomp$20$$.$arch$}, ], [{id:"asm", $condition$:$os$jscomp$21$$ => $os$jscomp$21$$.languages.has("ASM")}, {id:"c", $condition$:$os$jscomp$22$$ => $os$jscomp$22$$.languages.has("C")}, {id:"cpp", $condition$:$os$jscomp$23$$ => $os$jscomp$23$$.languages.has("C++")}, {id:"other_lang", $condition$:$os$jscomp$24$$ => ["ASM", "C", "C++"].every($lang$$ => !$os$jscomp$24$$.languages.has($lang$$))}, ], ];
    var $defined_filter$$ = [];
    for (const $known_category$$ of $category_host_known_filter_oses$$) {
      $category_host_known_filter_oses$$ = $known_category$$.filter($filter$jscomp$3$$ => {
        const $element$jscomp$13$$ = document.getElementById(`filter_${$filter$jscomp$3$$.id}`);
        $element$jscomp$13$$ && ($element$jscomp$13$$.onchange = $update_filters$$, $filter$jscomp$3$$.element = $element$jscomp$13$$);
        return $element$jscomp$13$$;
      }), $category_host_known_filter_oses$$.length && $defined_filter$$.push($category_host_known_filter_oses$$);
    }
    $$$$module$src$browser$main$$("reset_filters").onclick = function() {
      for (const $element$jscomp$14$$ of document.querySelectorAll("#filter input[type=checkbox]")) {
        $element$jscomp$14$$.checked = !1;
      }
      $update_filters$$();
    };
    $set_proxy_value$$("network_none", "");
    $set_proxy_value$$("network_inbrowser", "inbrowser");
    $set_proxy_value$$("network_fetch", "fetch");
    $set_proxy_value$$("network_relay", "wss://relay.widgetry.org/");
    $set_proxy_value$$("network_wisp", "wisps://wisp.mercurywork.shop/v86/");
  } else {
    alert("Your browser is not supported because it doesn't support WebAssembly");
  }
}
window.addEventListener("load", $onload$$module$src$browser$main$$, !1);
window.addEventListener("load", function() {
  setTimeout(function() {
    window.addEventListener("popstate", $onpopstate$$module$src$browser$main$$);
  }, 0);
});
"complete" === document.readyState && $onload$$module$src$browser$main$$();
function $start_emulation$$module$src$browser$main$$($profile$jscomp$2$$, $query_args$jscomp$1$$) {
  $$$$module$src$browser$main$$("boot_options").style.display = "none";
  const $new_query_args$$ = new Map;
  $new_query_args$$.set("profile", $profile$jscomp$2$$?.id || "custom");
  const $settings$jscomp$4$$ = {};
  if ($profile$jscomp$2$$ && ($profile$jscomp$2$$.state && ($$$$module$src$browser$main$$("reset").style.display = "none"), $set_title$$module$src$browser$main$$($profile$jscomp$2$$.name), $settings$jscomp$4$$.$initial_state$ = $profile$jscomp$2$$.state, $settings$jscomp$4$$.filesystem = $profile$jscomp$2$$.filesystem, $settings$jscomp$4$$.$fda$ = $profile$jscomp$2$$.$fda$, $settings$jscomp$4$$.$fdb$ = $profile$jscomp$2$$.$fdb$, $settings$jscomp$4$$.$cdrom$ = $profile$jscomp$2$$.$cdrom$, $settings$jscomp$4$$.$hda$ = 
  $profile$jscomp$2$$.$hda$, $settings$jscomp$4$$.$hdb$ = $profile$jscomp$2$$.$hdb$, $settings$jscomp$4$$.$multiboot$ = $profile$jscomp$2$$.$multiboot$, $settings$jscomp$4$$.$bzimage$ = $profile$jscomp$2$$.$bzimage$, $settings$jscomp$4$$.$initrd$ = $profile$jscomp$2$$.$initrd$, $settings$jscomp$4$$.$cmdline$ = $profile$jscomp$2$$.$cmdline$, $settings$jscomp$4$$.$bzimage_initrd_from_filesystem$ = $profile$jscomp$2$$.$bzimage_initrd_from_filesystem$, $settings$jscomp$4$$.$mac_address_translation$ = 
  $profile$jscomp$2$$.$mac_address_translation$, $settings$jscomp$4$$.$cpuid_level$ = $profile$jscomp$2$$.$cpuid_level$, $settings$jscomp$4$$.$acpi$ = $profile$jscomp$2$$.$acpi$, $settings$jscomp$4$$.$memory_size$ = $profile$jscomp$2$$.$memory_size$, $settings$jscomp$4$$.$vga_memory_size$ = $profile$jscomp$2$$.$vga_memory_size$, $settings$jscomp$4$$.$boot_order$ = $profile$jscomp$2$$.$boot_order$, $settings$jscomp$4$$.$net_device_type$ = $profile$jscomp$2$$.$net_device_type$, $profile$jscomp$2$$.$homepage$)) {
    $$$$module$src$browser$main$$("description").style.display = "block";
    var $bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$ = document.createElement("a");
    $bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$.href = $profile$jscomp$2$$.$homepage$;
    $bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$.textContent = $profile$jscomp$2$$.name;
    $bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$.target = "_blank";
    $$$$module$src$browser$main$$("description").append(document.createTextNode("Running "), $bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$);
  }
  if ($query_args$jscomp$1$$) {
    if (!$settings$jscomp$4$$.$initial_state$) {
      $bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$ = parseInt($query_args$jscomp$1$$.get("chunk_size"), 10);
      0 <= $bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$ ? ($bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$ = Math.min(4194304, Math.max(512, $bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$)), $bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$ = 
      $round_up_to_next_power_of_2$$module$src$lib$$($bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$)) : $bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$ = 262144;
      if ($query_args$jscomp$1$$.has("hda.url")) {
        $settings$jscomp$4$$.$hda$ = {size:parseInt($query_args$jscomp$1$$.get("hda.size"), 10) || void 0, url:$query_args$jscomp$1$$.get("hda.url"), $fixed_chunk_size$:$bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$, async:!0, };
      } else {
        if ($query_args$jscomp$1$$.has("hda.empty")) {
          var $empty_size_empty_size$jscomp$1_fda$jscomp$1_vga_bios$jscomp$1$$ = parseInt($query_args$jscomp$1$$.get("hda.empty"), 10);
          0 < $empty_size_empty_size$jscomp$1_fda$jscomp$1_vga_bios$jscomp$1$$ && ($settings$jscomp$4$$.$hda$ = {buffer:new ArrayBuffer($empty_size_empty_size$jscomp$1_fda$jscomp$1_vga_bios$jscomp$1$$)});
        }
      }
      $query_args$jscomp$1$$.has("hdb.url") ? $settings$jscomp$4$$.$hdb$ = {size:parseInt($query_args$jscomp$1$$.get("hdb.size"), 10) || void 0, url:$query_args$jscomp$1$$.get("hdb.url"), $fixed_chunk_size$:$bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$, async:!0, } : $query_args$jscomp$1$$.has("hdb.empty") && ($empty_size_empty_size$jscomp$1_fda$jscomp$1_vga_bios$jscomp$1$$ = parseInt($query_args$jscomp$1$$.get("hdb.empty"), 
      10), 0 < $empty_size_empty_size$jscomp$1_fda$jscomp$1_vga_bios$jscomp$1$$ && ($settings$jscomp$4$$.$hdb$ = {buffer:new ArrayBuffer($empty_size_empty_size$jscomp$1_fda$jscomp$1_vga_bios$jscomp$1$$)}));
      $query_args$jscomp$1$$.has("cdrom.url") && ($settings$jscomp$4$$.$cdrom$ = {size:parseInt($query_args$jscomp$1$$.get("cdrom.size"), 10) || void 0, url:$query_args$jscomp$1$$.get("cdrom.url"), $fixed_chunk_size$:$bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$, async:!0, });
      $query_args$jscomp$1$$.has("fda.url") && ($settings$jscomp$4$$.$fda$ = {size:parseInt($query_args$jscomp$1$$.get("fda.size"), 10) || void 0, url:$query_args$jscomp$1$$.get("fda.url"), async:!1, });
      $bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$ = parseInt($query_args$jscomp$1$$.get("m"), 10);
      0 < $bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$ && ($settings$jscomp$4$$.$memory_size$ = 1048576 * Math.max(16, $bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$));
      $bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$ = parseInt($query_args$jscomp$1$$.get("vram"), 10);
      0 < $bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$ && ($settings$jscomp$4$$.$vga_memory_size$ = 1048576 * $bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$);
      $settings$jscomp$4$$.$acpi$ = $query_args$jscomp$1$$.has("acpi") ? $bool_arg$$module$src$browser$main$$($query_args$jscomp$1$$.get("acpi")) : $settings$jscomp$4$$.$acpi$;
      $settings$jscomp$4$$.$use_bochs_bios$ = "bochs" === $query_args$jscomp$1$$.get("bios");
      $settings$jscomp$4$$.$net_device_type$ = $query_args$jscomp$1$$.get("net_device_type") || $settings$jscomp$4$$.$net_device_type$;
    }
    $settings$jscomp$4$$.$relay_url$ = $query_args$jscomp$1$$.get("relay_url");
    $settings$jscomp$4$$.$disable_jit$ = $bool_arg$$module$src$browser$main$$($query_args$jscomp$1$$.get("disable_jit"));
    $settings$jscomp$4$$.$disable_audio$ = $bool_arg$$module$src$browser$main$$($query_args$jscomp$1$$.get("mute"));
  }
  $settings$jscomp$4$$.$relay_url$ || ($settings$jscomp$4$$.$relay_url$ = $$$$module$src$browser$main$$("relay_url").value, $DEFAULT_NETWORKING_PROXIES$$module$src$browser$main$$.includes($settings$jscomp$4$$.$relay_url$) || $new_query_args$$.set("relay_url", $settings$jscomp$4$$.$relay_url$));
  $settings$jscomp$4$$.$relay_url$.startsWith("fetch:") && ($settings$jscomp$4$$.$cors_proxy$ = $settings$jscomp$4$$.$relay_url$.slice(6), $settings$jscomp$4$$.$relay_url$ = "fetch");
  $settings$jscomp$4$$.$disable_audio$ = $$$$module$src$browser$main$$("disable_audio").checked || $settings$jscomp$4$$.$disable_audio$;
  $settings$jscomp$4$$.$disable_audio$ && $new_query_args$$.set("mute", "1");
  if (!$settings$jscomp$4$$.$initial_state$) {
    if ($bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$ = $$$$module$src$browser$main$$("bios").files[0]) {
      $settings$jscomp$4$$.$bios$ = {buffer:$bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$};
    }
    if ($empty_size_empty_size$jscomp$1_fda$jscomp$1_vga_bios$jscomp$1$$ = $$$$module$src$browser$main$$("vga_bios").files[0]) {
      $settings$jscomp$4$$.$vga_bios$ = {buffer:$empty_size_empty_size$jscomp$1_fda$jscomp$1_vga_bios$jscomp$1$$};
    }
    if ($empty_size_empty_size$jscomp$1_fda$jscomp$1_vga_bios$jscomp$1$$ = $$$$module$src$browser$main$$("fda_image")?.files[0]) {
      $settings$jscomp$4$$.$fda$ = {buffer:$empty_size_empty_size$jscomp$1_fda$jscomp$1_vga_bios$jscomp$1$$};
    }
    var $cdrom_fda_empty_size_fdb$jscomp$1_fdb_empty_size$$ = +$$$$module$src$browser$main$$("fda_empty_size")?.value;
    $cdrom_fda_empty_size_fdb$jscomp$1_fdb_empty_size$$ && ($settings$jscomp$4$$.$fda$ = {buffer:new ArrayBuffer($cdrom_fda_empty_size_fdb$jscomp$1_fdb_empty_size$$)});
    if ($cdrom_fda_empty_size_fdb$jscomp$1_fdb_empty_size$$ = $$$$module$src$browser$main$$("fdb_image")?.files[0]) {
      $settings$jscomp$4$$.$fdb$ = {buffer:$cdrom_fda_empty_size_fdb$jscomp$1_fdb_empty_size$$};
    }
    if ($cdrom_fda_empty_size_fdb$jscomp$1_fdb_empty_size$$ = +$$$$module$src$browser$main$$("fdb_empty_size")?.value) {
      $settings$jscomp$4$$.$fdb$ = {buffer:new ArrayBuffer($cdrom_fda_empty_size_fdb$jscomp$1_fdb_empty_size$$)};
    }
    if ($cdrom_fda_empty_size_fdb$jscomp$1_fdb_empty_size$$ = $$$$module$src$browser$main$$("cdrom_image").files[0]) {
      $settings$jscomp$4$$.$cdrom$ = {buffer:$cdrom_fda_empty_size_fdb$jscomp$1_fdb_empty_size$$};
    }
    const $hda$$ = $$$$module$src$browser$main$$("hda_image")?.files[0];
    $hda$$ && ($settings$jscomp$4$$.$hda$ = {buffer:$hda$$});
    var $hda_empty_size_hdb_size$jscomp$48$$ = +$$$$module$src$browser$main$$("hda_empty_size")?.value;
    $hda_empty_size_hdb_size$jscomp$48$$ && ($hda_empty_size_hdb_size$jscomp$48$$ = 1048576 * Math.min(1, Math.max(2000, $hda_empty_size_hdb_size$jscomp$48$$)), $settings$jscomp$4$$.$hda$ = {buffer:new ArrayBuffer($hda_empty_size_hdb_size$jscomp$48$$)}, $new_query_args$$.set("hda.empty", String($hda_empty_size_hdb_size$jscomp$48$$)));
    if ($hda_empty_size_hdb_size$jscomp$48$$ = $$$$module$src$browser$main$$("hdb_image")?.files[0]) {
      $settings$jscomp$4$$.$hdb$ = {buffer:$hda_empty_size_hdb_size$jscomp$48$$};
    }
    var $hdb_empty_size_multiboot$$ = +$$$$module$src$browser$main$$("hdb_empty_size")?.value;
    $hdb_empty_size_multiboot$$ && ($bzimage$jscomp$2_initrd$jscomp$3_size$jscomp$49$$ = 1048576 * Math.min(1, Math.max(2000, $hdb_empty_size_multiboot$$)), $settings$jscomp$4$$.$hdb$ = {buffer:new ArrayBuffer($hdb_empty_size_multiboot$$)}, $new_query_args$$.set("hdb.empty", String($bzimage$jscomp$2_initrd$jscomp$3_size$jscomp$49$$)));
    if ($hdb_empty_size_multiboot$$ = $$$$module$src$browser$main$$("multiboot_image")?.files[0]) {
      $settings$jscomp$4$$.$multiboot$ = {buffer:$hdb_empty_size_multiboot$$};
    }
    var $bzimage$jscomp$2_initrd$jscomp$3_size$jscomp$49$$ = $$$$module$src$browser$main$$("bzimage").files[0];
    $bzimage$jscomp$2_initrd$jscomp$3_size$jscomp$49$$ && ($settings$jscomp$4$$.$bzimage$ = {buffer:$bzimage$jscomp$2_initrd$jscomp$3_size$jscomp$49$$});
    if ($bzimage$jscomp$2_initrd$jscomp$3_size$jscomp$49$$ = $$$$module$src$browser$main$$("initrd").files[0]) {
      $settings$jscomp$4$$.$initrd$ = {buffer:$bzimage$jscomp$2_initrd$jscomp$3_size$jscomp$49$$};
    }
    ($bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$ = $hdb_empty_size_multiboot$$?.name || $hda$$?.name || $cdrom_fda_empty_size_fdb$jscomp$1_fdb_empty_size$$?.name || $hda_empty_size_hdb_size$jscomp$48$$?.name || $empty_size_empty_size$jscomp$1_fda$jscomp$1_vga_bios$jscomp$1$$?.name || $bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$?.name) && 
    $set_title$$module$src$browser$main$$($bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$);
    $bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$ = parseInt($$$$module$src$browser$main$$("memory_size").value, 10) || 128;
    $settings$jscomp$4$$.$memory_size$ && 128 === $bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$ || ($settings$jscomp$4$$.$memory_size$ = 1048576 * $bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$);
    128 !== $bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$ && $new_query_args$$.set("m", String($bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$));
    $bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$ = parseInt($$$$module$src$browser$main$$("vga_memory_size").value, 10) || 8;
    $settings$jscomp$4$$.$vga_memory_size$ && 8 === $bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$ || ($settings$jscomp$4$$.$vga_memory_size$ = 1048576 * $bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$);
    8 !== $bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$ && $new_query_args$$.set("vram", String($bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$));
    $bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$ = parseInt($$$$module$src$browser$main$$("boot_order").value, 16) || 0;
    $settings$jscomp$4$$.$boot_order$ && 0 === $bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$ || ($settings$jscomp$4$$.$boot_order$ = $bios$jscomp$1_boot_order$jscomp$2_chunk_size_link$jscomp$2_m_memory_size$jscomp$1_title$jscomp$12_vga_memory_size$jscomp$1_vram$$);
    0 !== $settings$jscomp$4$$.$boot_order$ && $new_query_args$$.set("boot_order", $settings$jscomp$4$$.$boot_order$.toString(16));
    void 0 === $settings$jscomp$4$$.$acpi$ && ($settings$jscomp$4$$.$acpi$ = $$$$module$src$browser$main$$("acpi").checked, $settings$jscomp$4$$.$acpi$ && $new_query_args$$.set("acpi", "1"));
    $settings$jscomp$4$$.$bios$ || ($settings$jscomp$4$$.$bios$ = {url:"bios/seabios.bin"});
    $settings$jscomp$4$$.$vga_bios$ || ($settings$jscomp$4$$.$vga_bios$ = {url:"bios/vgabios.bin"});
    $settings$jscomp$4$$.$use_bochs_bios$ && ($settings$jscomp$4$$.$bios$ = {url:"bios/bochs-bios.bin"}, $settings$jscomp$4$$.$vga_bios$ = {url:"bios/bochs-vgabios.bin"});
  }
  $query_args$jscomp$1$$ || $push_state$$module$src$browser$main$$($new_query_args$$);
  const $emulator$jscomp$2$$ = new $V86$$module$src$browser$starter$$({$wasm_path$:"build/v86.wasm" + $query_append$$module$src$browser$main$$(), screen:{$container$:$$$$module$src$browser$main$$("screen_container"), $use_graphical_text$:!1, }, $net_device$:{type:$settings$jscomp$4$$.$net_device_type$ || "ne2k", $relay_url$:$settings$jscomp$4$$.$relay_url$, $cors_proxy$:$settings$jscomp$4$$.$cors_proxy$}, $autostart$:!0, $memory_size$:$settings$jscomp$4$$.$memory_size$, $vga_memory_size$:$settings$jscomp$4$$.$vga_memory_size$, 
  $boot_order$:$settings$jscomp$4$$.$boot_order$, $bios$:$settings$jscomp$4$$.$bios$, $vga_bios$:$settings$jscomp$4$$.$vga_bios$, $fda$:$settings$jscomp$4$$.$fda$, $fdb$:$settings$jscomp$4$$.$fdb$, $hda$:$settings$jscomp$4$$.$hda$, $hdb$:$settings$jscomp$4$$.$hdb$, $cdrom$:$settings$jscomp$4$$.$cdrom$, $multiboot$:$settings$jscomp$4$$.$multiboot$, $bzimage$:$settings$jscomp$4$$.$bzimage$, $initrd$:$settings$jscomp$4$$.$initrd$, $cmdline$:$settings$jscomp$4$$.$cmdline$, $bzimage_initrd_from_filesystem$:$settings$jscomp$4$$.$bzimage_initrd_from_filesystem$, 
  $acpi$:$settings$jscomp$4$$.$acpi$, $disable_jit$:$settings$jscomp$4$$.$disable_jit$, $initial_state$:$settings$jscomp$4$$.$initial_state$, filesystem:$settings$jscomp$4$$.filesystem || {}, $disable_speaker$:$settings$jscomp$4$$.$disable_audio$, $mac_address_translation$:$settings$jscomp$4$$.$mac_address_translation$, $cpuid_level$:$settings$jscomp$4$$.$cpuid_level$, });
  $JSCompiler_StaticMethods_add_listener$$($emulator$jscomp$2$$, "emulator-ready", function() {
    if ($emulator$jscomp$2$$.$v86$.$cpu$.$wm$.exports.profiler_is_enabled()) {
      const $panel$$ = document.createElement("pre");
      document.body.appendChild($panel$$);
      setInterval(function() {
        if ($emulator$jscomp$2$$.$is_running$()) {
          var $JSCompiler_inline_result$jscomp$1077_cpu$jscomp$inline_1051$$ = $emulator$jscomp$2$$.$v86$.$cpu$;
          $JSCompiler_temp_const$jscomp$1076_text$jscomp$inline_1248$$ = "";
          var $stat_names$jscomp$inline_1249_tlb_entries$jscomp$inline_1252$$ = "COMPILE COMPILE_SKIPPED_NO_NEW_ENTRY_POINTS COMPILE_WRONG_ADDRESS_SPACE COMPILE_CUT_OFF_AT_END_OF_PAGE COMPILE_WITH_LOOP_SAFETY COMPILE_PAGE COMPILE_PAGE/COMPILE COMPILE_BASIC_BLOCK COMPILE_DUPLICATED_BASIC_BLOCK COMPILE_WASM_BLOCK COMPILE_WASM_LOOP COMPILE_DISPATCHER COMPILE_ENTRY_POINT COMPILE_WASM_TOTAL_BYTES COMPILE_WASM_TOTAL_BYTES/COMPILE_PAGE RUN_INTERPRETED RUN_INTERPRETED_NEW_PAGE RUN_INTERPRETED_PAGE_HAS_CODE RUN_INTERPRETED_PAGE_HAS_ENTRY_AFTER_PAGE_WALK RUN_INTERPRETED_NEAR_END_OF_PAGE RUN_INTERPRETED_DIFFERENT_STATE RUN_INTERPRETED_DIFFERENT_STATE_CPL3 RUN_INTERPRETED_DIFFERENT_STATE_FLAT RUN_INTERPRETED_DIFFERENT_STATE_IS32 RUN_INTERPRETED_DIFFERENT_STATE_SS32 RUN_INTERPRETED_MISSED_COMPILED_ENTRY_RUN_INTERPRETED RUN_INTERPRETED_STEPS RUN_FROM_CACHE RUN_FROM_CACHE_STEPS RUN_FROM_CACHE_STEPS/RUN_FROM_CACHE RUN_FROM_CACHE_STEPS/RUN_INTERPRETED_STEPS DIRECT_EXIT INDIRECT_JUMP INDIRECT_JUMP_NO_ENTRY NORMAL_PAGE_CHANGE NORMAL_FALLTHRU NORMAL_FALLTHRU_WITH_TARGET_BLOCK NORMAL_BRANCH NORMAL_BRANCH_WITH_TARGET_BLOCK CONDITIONAL_JUMP CONDITIONAL_JUMP_PAGE_CHANGE CONDITIONAL_JUMP_EXIT CONDITIONAL_JUMP_FALLTHRU CONDITIONAL_JUMP_FALLTHRU_WITH_TARGET_BLOCK CONDITIONAL_JUMP_BRANCH CONDITIONAL_JUMP_BRANCH_WITH_TARGET_BLOCK DISPATCHER_SMALL DISPATCHER_LARGE LOOP LOOP_SAFETY CONDITION_OPTIMISED CONDITION_UNOPTIMISED CONDITION_UNOPTIMISED_PF CONDITION_UNOPTIMISED_UNHANDLED_L CONDITION_UNOPTIMISED_UNHANDLED_LE FAILED_PAGE_CHANGE SAFE_READ_FAST SAFE_READ_SLOW_PAGE_CROSSED SAFE_READ_SLOW_NOT_VALID SAFE_READ_SLOW_NOT_USER SAFE_READ_SLOW_IN_MAPPED_RANGE SAFE_WRITE_FAST SAFE_WRITE_SLOW_PAGE_CROSSED SAFE_WRITE_SLOW_NOT_VALID SAFE_WRITE_SLOW_NOT_USER SAFE_WRITE_SLOW_IN_MAPPED_RANGE SAFE_WRITE_SLOW_READ_ONLY SAFE_WRITE_SLOW_HAS_CODE SAFE_READ_WRITE_FAST SAFE_READ_WRITE_SLOW_PAGE_CROSSED SAFE_READ_WRITE_SLOW_NOT_VALID SAFE_READ_WRITE_SLOW_NOT_USER SAFE_READ_WRITE_SLOW_IN_MAPPED_RANGE SAFE_READ_WRITE_SLOW_READ_ONLY SAFE_READ_WRITE_SLOW_HAS_CODE PAGE_FAULT TLB_MISS MAIN_LOOP MAIN_LOOP_IDLE DO_MANY_CYCLES CYCLE_INTERNAL INVALIDATE_ALL_MODULES_NO_FREE_WASM_INDICES INVALIDATE_MODULE_WRITTEN_WHILE_COMPILED INVALIDATE_MODULE_UNUSED_AFTER_OVERWRITE INVALIDATE_MODULE_DIRTY_PAGE INVALIDATE_PAGE_HAD_CODE INVALIDATE_PAGE_HAD_ENTRY_POINTS DIRTY_PAGE_DID_NOT_HAVE_CODE RUN_FROM_CACHE_EXIT_SAME_PAGE RUN_FROM_CACHE_EXIT_NEAR_END_OF_PAGE RUN_FROM_CACHE_EXIT_DIFFERENT_PAGE CLEAR_TLB FULL_CLEAR_TLB TLB_FULL TLB_GLOBAL_FULL MODRM_SIMPLE_REG MODRM_SIMPLE_REG_WITH_OFFSET MODRM_SIMPLE_CONST_OFFSET MODRM_COMPLEX SEG_OFFSET_OPTIMISED SEG_OFFSET_NOT_OPTIMISED SEG_OFFSET_NOT_OPTIMISED_ES SEG_OFFSET_NOT_OPTIMISED_FS SEG_OFFSET_NOT_OPTIMISED_GS SEG_OFFSET_NOT_OPTIMISED_NOT_FLAT".split(" "), 
          $global_tlb_entries$jscomp$inline_1253_j$jscomp$inline_1250$$ = 0;
          const $stat_values$jscomp$inline_1251$$ = {};
          for (let $i$jscomp$inline_1254$$ = 0; $i$jscomp$inline_1254$$ < $stat_names$jscomp$inline_1249_tlb_entries$jscomp$inline_1252$$.length; $i$jscomp$inline_1254$$++) {
            const $name$jscomp$inline_1255$$ = $stat_names$jscomp$inline_1249_tlb_entries$jscomp$inline_1252$$[$i$jscomp$inline_1254$$];
            var $stat$jscomp$inline_1259_value$jscomp$inline_1256$$ = void 0;
            if ($name$jscomp$inline_1255$$.includes("/")) {
              $global_tlb_entries$jscomp$inline_1253_j$jscomp$inline_1250$$++;
              const [$left$jscomp$inline_1257$$, $right$jscomp$inline_1258$$] = $name$jscomp$inline_1255$$.split("/");
              $stat$jscomp$inline_1259_value$jscomp$inline_1256$$ = $stat_values$jscomp$inline_1251$$[$left$jscomp$inline_1257$$] / $stat_values$jscomp$inline_1251$$[$right$jscomp$inline_1258$$];
            } else {
              $stat$jscomp$inline_1259_value$jscomp$inline_1256$$ = $stat_values$jscomp$inline_1251$$[$name$jscomp$inline_1255$$] = $JSCompiler_inline_result$jscomp$1077_cpu$jscomp$inline_1051$$.$wm$.exports.profiler_stat_get($i$jscomp$inline_1254$$ - $global_tlb_entries$jscomp$inline_1253_j$jscomp$inline_1250$$), $stat$jscomp$inline_1259_value$jscomp$inline_1256$$ = 100e6 <= $stat$jscomp$inline_1259_value$jscomp$inline_1256$$ ? Math.round($stat$jscomp$inline_1259_value$jscomp$inline_1256$$ / 1e6) + 
              "m" : 100e3 <= $stat$jscomp$inline_1259_value$jscomp$inline_1256$$ ? Math.round($stat$jscomp$inline_1259_value$jscomp$inline_1256$$ / 1e3) + "k" : $stat$jscomp$inline_1259_value$jscomp$inline_1256$$;
            }
            $JSCompiler_temp_const$jscomp$1076_text$jscomp$inline_1248$$ += $name$jscomp$inline_1255$$ + "=" + $stat$jscomp$inline_1259_value$jscomp$inline_1256$$ + "\n";
          }
          $JSCompiler_temp_const$jscomp$1076_text$jscomp$inline_1248$$ += "\n";
          $stat_names$jscomp$inline_1249_tlb_entries$jscomp$inline_1252$$ = $JSCompiler_inline_result$jscomp$1077_cpu$jscomp$inline_1051$$.$wm$.exports.get_valid_tlb_entries_count();
          $global_tlb_entries$jscomp$inline_1253_j$jscomp$inline_1250$$ = $JSCompiler_inline_result$jscomp$1077_cpu$jscomp$inline_1051$$.$wm$.exports.get_valid_global_tlb_entries_count();
          $JSCompiler_temp_const$jscomp$1076_text$jscomp$inline_1248$$ = $JSCompiler_temp_const$jscomp$1076_text$jscomp$inline_1248$$ + ("TLB_ENTRIES=" + $stat_names$jscomp$inline_1249_tlb_entries$jscomp$inline_1252$$ + " (" + $global_tlb_entries$jscomp$inline_1253_j$jscomp$inline_1250$$ + " global, " + ($stat_names$jscomp$inline_1249_tlb_entries$jscomp$inline_1252$$ - $global_tlb_entries$jscomp$inline_1253_j$jscomp$inline_1250$$) + " non-global)\nWASM_TABLE_FREE=") + ($JSCompiler_inline_result$jscomp$1077_cpu$jscomp$inline_1051$$.$wm$.exports.jit_get_wasm_table_index_free_list_count() + 
          "\n");
          $JSCompiler_temp_const$jscomp$1076_text$jscomp$inline_1248$$ += "JIT_CACHE_SIZE=" + $JSCompiler_inline_result$jscomp$1077_cpu$jscomp$inline_1051$$.$wm$.exports.jit_get_cache_size() + "\n";
          $JSCompiler_temp_const$jscomp$1076_text$jscomp$inline_1248$$ += "FLAT_SEGMENTS=" + $JSCompiler_inline_result$jscomp$1077_cpu$jscomp$inline_1051$$.$wm$.exports.has_flat_segmentation() + "\n";
          $JSCompiler_temp_const$jscomp$1076_text$jscomp$inline_1248$$ += "wasm memory size: " + ($JSCompiler_inline_result$jscomp$1077_cpu$jscomp$inline_1051$$.$wasm_memory$.buffer.byteLength >> 20) + "m\n";
          $JSCompiler_temp_const$jscomp$1076_text$jscomp$inline_1248$$ += "Config:\n";
          $JSCompiler_temp_const$jscomp$1076_text$jscomp$inline_1248$$ += "JIT_DISABLED=" + $JSCompiler_inline_result$jscomp$1077_cpu$jscomp$inline_1051$$.$wm$.exports.get_jit_config(0) + "\n";
          $JSCompiler_temp_const$jscomp$1076_text$jscomp$inline_1248$$ += "MAX_PAGES=" + $JSCompiler_inline_result$jscomp$1077_cpu$jscomp$inline_1051$$.$wm$.exports.get_jit_config(1) + "\n";
          $JSCompiler_temp_const$jscomp$1076_text$jscomp$inline_1248$$ += "JIT_USE_LOOP_SAFETY=" + !!$JSCompiler_inline_result$jscomp$1077_cpu$jscomp$inline_1051$$.$wm$.exports.get_jit_config(2) + "\n";
          var $JSCompiler_temp_const$jscomp$1076_text$jscomp$inline_1248$$ = $JSCompiler_temp_const$jscomp$1076_text$jscomp$inline_1248$$ += "MAX_EXTRA_BASIC_BLOCKS=" + $JSCompiler_inline_result$jscomp$1077_cpu$jscomp$inline_1051$$.$wm$.exports.get_jit_config(3) + "\n";
          $JSCompiler_inline_result$jscomp$1077_cpu$jscomp$inline_1051$$ = [$print_instruction_counts_offset$$module$src$browser$print_stats$$($JSCompiler_inline_result$jscomp$1077_cpu$jscomp$inline_1051$$, !1, !1, !1, !1), $print_instruction_counts_offset$$module$src$browser$print_stats$$($JSCompiler_inline_result$jscomp$1077_cpu$jscomp$inline_1051$$, !0, !1, !1, !1), $print_instruction_counts_offset$$module$src$browser$print_stats$$($JSCompiler_inline_result$jscomp$1077_cpu$jscomp$inline_1051$$, 
          !1, !0, !1, !1), $print_instruction_counts_offset$$module$src$browser$print_stats$$($JSCompiler_inline_result$jscomp$1077_cpu$jscomp$inline_1051$$, !1, !1, !0, !1), $print_instruction_counts_offset$$module$src$browser$print_stats$$($JSCompiler_inline_result$jscomp$1077_cpu$jscomp$inline_1051$$, !1, !1, !1, !0), ].join("\n\n");
          $panel$$.textContent = $JSCompiler_temp_const$jscomp$1076_text$jscomp$inline_1248$$ + $JSCompiler_inline_result$jscomp$1077_cpu$jscomp$inline_1051$$;
        }
      }, 1000);
    }
    "dsl helenos android android4 redox beos 9legacy".split(" ").includes($profile$jscomp$2$$?.id) && setTimeout(() => {
      $JSCompiler_StaticMethods_keyboard_send_text$$($emulator$jscomp$2$$, "9legacy" === $profile$jscomp$2$$.id ? "1\n" : "\n");
    }, 3000);
    $init_ui$$module$src$browser$main$$($profile$jscomp$2$$, $settings$jscomp$4$$, $emulator$jscomp$2$$);
    $query_args$jscomp$1$$?.has("c") && setTimeout(function() {
      $JSCompiler_StaticMethods_keyboard_send_text$$($emulator$jscomp$2$$, $query_args$jscomp$1$$.get("c") + "\n");
    }, 25);
    $query_args$jscomp$1$$?.has("s") && setTimeout(function() {
      for (var $data$jscomp$inline_812$$ = $query_args$jscomp$1$$.get("s") + "\n", $i$jscomp$inline_813$$ = 0; $i$jscomp$inline_813$$ < $data$jscomp$inline_812$$.length; $i$jscomp$inline_813$$++) {
        $emulator$jscomp$2$$.$bus$.send("serial0-input", $data$jscomp$inline_812$$.charCodeAt($i$jscomp$inline_813$$));
      }
    }, 25);
    $query_args$jscomp$1$$?.has("theatre") && $bool_arg$$module$src$browser$main$$($query_args$jscomp$1$$?.get("theatre")) && $$$$module$src$browser$main$$("toggle_theatre").click();
  });
  $JSCompiler_StaticMethods_add_listener$$($emulator$jscomp$2$$, "emulator-loaded", function() {
    $emulator$jscomp$2$$.$v86$.$cpu$.$devices$.$cdrom$ || ($$$$module$src$browser$main$$("change_cdrom_image").style.display = "none");
  });
  $JSCompiler_StaticMethods_add_listener$$($emulator$jscomp$2$$, "download-progress", function($e$jscomp$66_per100$jscomp$inline_818$$) {
    const $el$jscomp$inline_816$$ = $$$$module$src$browser$main$$("loading");
    $el$jscomp$inline_816$$.style.display = "block";
    if ($e$jscomp$66_per100$jscomp$inline_818$$.$file_name$.endsWith(".wasm")) {
      $line$jscomp$inline_817_parts$jscomp$inline_820$$ = $e$jscomp$66_per100$jscomp$inline_818$$.$file_name$.split("/"), $el$jscomp$inline_816$$.textContent = "Fetching " + $line$jscomp$inline_817_parts$jscomp$inline_820$$[$line$jscomp$inline_817_parts$jscomp$inline_820$$.length - 1] + " ...";
    } else {
      if ($e$jscomp$66_per100$jscomp$inline_818$$.$file_index$ === $e$jscomp$66_per100$jscomp$inline_818$$.$file_count$ - 1 && $e$jscomp$66_per100$jscomp$inline_818$$.loaded >= $e$jscomp$66_per100$jscomp$inline_818$$.total - 2048) {
        $el$jscomp$inline_816$$.textContent = "Done downloading. Starting now ...";
      } else {
        var $line$jscomp$inline_817_parts$jscomp$inline_820$$ = "Downloading images ";
        "number" === typeof $e$jscomp$66_per100$jscomp$inline_818$$.$file_index$ && $e$jscomp$66_per100$jscomp$inline_818$$.$file_count$ && ($line$jscomp$inline_817_parts$jscomp$inline_820$$ += "[" + ($e$jscomp$66_per100$jscomp$inline_818$$.$file_index$ + 1) + "/" + $e$jscomp$66_per100$jscomp$inline_818$$.$file_count$ + "] ");
        if ($e$jscomp$66_per100$jscomp$inline_818$$.total && "number" === typeof $e$jscomp$66_per100$jscomp$inline_818$$.loaded) {
          $e$jscomp$66_per100$jscomp$inline_818$$ = Math.floor($e$jscomp$66_per100$jscomp$inline_818$$.loaded / $e$jscomp$66_per100$jscomp$inline_818$$.total * 100);
          $e$jscomp$66_per100$jscomp$inline_818$$ = Math.min(100, Math.max(0, $e$jscomp$66_per100$jscomp$inline_818$$));
          var $per50$jscomp$inline_819$$ = Math.floor($e$jscomp$66_per100$jscomp$inline_818$$ / 2);
          $line$jscomp$inline_817_parts$jscomp$inline_820$$ = $line$jscomp$inline_817_parts$jscomp$inline_820$$ + ($e$jscomp$66_per100$jscomp$inline_818$$ + "% [") + "#".repeat($per50$jscomp$inline_819$$);
          $line$jscomp$inline_817_parts$jscomp$inline_820$$ += " ".repeat(50 - $per50$jscomp$inline_819$$) + "]";
        } else {
          $line$jscomp$inline_817_parts$jscomp$inline_820$$ += ".".repeat($progress_ticks$$module$src$browser$main$$++ % 50);
        }
        $el$jscomp$inline_816$$.textContent = $line$jscomp$inline_817_parts$jscomp$inline_820$$;
      }
    }
  });
  $JSCompiler_StaticMethods_add_listener$$($emulator$jscomp$2$$, "download-error", function($e$jscomp$67$$) {
    const $el$jscomp$1$$ = $$$$module$src$browser$main$$("loading");
    $el$jscomp$1$$.style.display = "block";
    $el$jscomp$1$$.textContent = `Loading ${$e$jscomp$67$$.$file_name$} failed. Check your connection and reload the page to try again.`;
  });
}
function $init_ui$$module$src$browser$main$$($profile$jscomp$3$$, $phone_keyboard_script_settings$jscomp$5$$, $emulator$jscomp$3$$) {
  function $zoom_to_fit$$() {
    $emulator$jscomp$3$$.$screen_adapter$ && $emulator$jscomp$3$$.$screen_adapter$.$set_scale$(1, 1);
    var $emulator_screen_n$jscomp$17$$ = $$$$module$src$browser$main$$("screen_container").getBoundingClientRect();
    $emulator_screen_n$jscomp$17$$ = Math.min(window.innerWidth / $emulator_screen_n$jscomp$17$$.width, window.innerHeight / $emulator_screen_n$jscomp$17$$.height);
    $emulator$jscomp$3$$.$screen_adapter$ && $emulator$jscomp$3$$.$screen_adapter$.$set_scale$($emulator_screen_n$jscomp$17$$, $emulator_screen_n$jscomp$17$$);
  }
  function $enable_theatre_ui$$($enabled$jscomp$7$$) {
    $theatre_ui$$ = $enabled$jscomp$7$$;
    $$$$module$src$browser$main$$("runtime_options").style.display = $theatre_ui$$ ? "block" : "none";
    $$$$module$src$browser$main$$("runtime_infos").style.display = $theatre_ui$$ ? "block" : "none";
    $$$$module$src$browser$main$$("filesystem_panel").style.display = $filesystem_is_enabled$$ && $theatre_ui$$ ? "block" : "none";
    $$$$module$src$browser$main$$("toggle_ui").value = ($theatre_ui$$ ? "Hide" : "Show") + " UI";
  }
  function $enable_zoom_to_fit$$($enabled$jscomp$8_n$jscomp$18$$) {
    $theatre_zoom_to_fit$$ = $enabled$jscomp$8_n$jscomp$18$$;
    ($$$$module$src$browser$main$$("scale").disabled = $theatre_zoom_to_fit$$) ? (window.addEventListener("resize", $zoom_to_fit$$, !0), $JSCompiler_StaticMethods_add_listener$$($emulator$jscomp$3$$, "screen-set-size", $zoom_to_fit$$), $zoom_to_fit$$()) : (window.removeEventListener("resize", $zoom_to_fit$$, !0), $emulator$jscomp$3$$.$bus$.unregister("screen-set-size", $zoom_to_fit$$), $enabled$jscomp$8_n$jscomp$18$$ = parseFloat($$$$module$src$browser$main$$("scale").value) || 1, $emulator$jscomp$3$$.$screen_adapter$ && 
    $emulator$jscomp$3$$.$screen_adapter$.$set_scale$($enabled$jscomp$8_n$jscomp$18$$, $enabled$jscomp$8_n$jscomp$18$$));
    $$$$module$src$browser$main$$("toggle_zoom_to_fit").value = ($theatre_zoom_to_fit$$ ? "Dis" : "En") + "able zoom to fit";
  }
  function $update_info$$() {
    var $now$jscomp$15_time$jscomp$inline_838$$ = Date.now(), $delta_time_instruction_counter$$ = $emulator$jscomp$3$$.$v86$ ? $emulator$jscomp$3$$.$v86$.$cpu$.$instruction_counter$[0] >>> 0 : 0;
    $delta_time_instruction_counter$$ < $last_instr_counter$$ && ($last_instr_counter$$ -= 4294967296);
    var $last_ips$$ = $delta_time_instruction_counter$$ - $last_instr_counter$$;
    $last_instr_counter$$ = $delta_time_instruction_counter$$;
    $total_instructions$$ += $last_ips$$;
    if ($delta_time_instruction_counter$$ = $now$jscomp$15_time$jscomp$inline_838$$ - $last_tick$$) {
      $running_time$$ += $delta_time_instruction_counter$$, $last_tick$$ = $now$jscomp$15_time$jscomp$inline_838$$, $$$$module$src$browser$main$$("speed").textContent = ($last_ips$$ / 1000 / $delta_time_instruction_counter$$).toFixed(1), $$$$module$src$browser$main$$("avg_speed").textContent = ($total_instructions$$ / 1000 / $running_time$$).toFixed(1), $now$jscomp$15_time$jscomp$inline_838$$ = $running_time$$ / 1000 | 0, $$$$module$src$browser$main$$("running_time").textContent = 60 > $now$jscomp$15_time$jscomp$inline_838$$ ? 
      $now$jscomp$15_time$jscomp$inline_838$$ + "s" : 3600 > $now$jscomp$15_time$jscomp$inline_838$$ ? ($now$jscomp$15_time$jscomp$inline_838$$ / 60 | 0) + "m " + $pad0$$module$src$lib$$($now$jscomp$15_time$jscomp$inline_838$$ % 60, 2) + "s" : ($now$jscomp$15_time$jscomp$inline_838$$ / 3600 | 0) + "h " + $pad0$$module$src$lib$$(($now$jscomp$15_time$jscomp$inline_838$$ / 60 | 0) % 60, 2) + "m " + $pad0$$module$src$lib$$($now$jscomp$15_time$jscomp$inline_838$$ % 60, 2) + "s";
    }
  }
  function $add_image_download_button$$($obj$jscomp$29$$, $buffer$jscomp$70$$, $type$jscomp$159$$) {
    var $elem$jscomp$5$$ = $$$$module$src$browser$main$$("get_" + $type$jscomp$159$$ + "_image");
    !$obj$jscomp$29$$ || $obj$jscomp$29$$.async ? $elem$jscomp$5$$.style.display = "none" : $elem$jscomp$5$$.onclick = function() {
      const $filename$jscomp$14$$ = $buffer$jscomp$70$$.file && $buffer$jscomp$70$$.file.name || ($profile$jscomp$3$$?.id || "v86") + ("cdrom" === $type$jscomp$159$$ ? ".iso" : ".img");
      if ($buffer$jscomp$70$$.$get_as_file$) {
        var $file$jscomp$13$$ = $buffer$jscomp$70$$.$get_as_file$($filename$jscomp$14$$);
        $download$$module$src$lib$$($file$jscomp$13$$, $filename$jscomp$14$$);
      } else {
        $buffer$jscomp$70$$.$get_buffer$(function($b$jscomp$20$$) {
          $b$jscomp$20$$ ? $dump_file$$module$src$lib$$($b$jscomp$20$$, $filename$jscomp$14$$) : alert("The file could not be loaded. Maybe it's too big?");
        });
      }
      $elem$jscomp$5$$.blur();
    };
  }
  function $ctrl_w_rescue$$($e$jscomp$75$$) {
    $e$jscomp$75$$.ctrlKey ? window.onbeforeunload = function() {
      window.onbeforeunload = null;
      return "CTRL-W cannot be sent to the emulator.";
    } : window.onbeforeunload = null;
  }
  $$$$module$src$browser$main$$("loading").style.display = "none";
  $$$$module$src$browser$main$$("runtime_options").style.display = "block";
  $$$$module$src$browser$main$$("runtime_infos").style.display = "block";
  $$$$module$src$browser$main$$("screen_container").style.display = "block";
  var $filesystem_is_enabled$$ = !1;
  $phone_keyboard_script_settings$jscomp$5$$.filesystem ? ($filesystem_is_enabled$$ = !0, $init_filesystem_panel$$module$src$browser$main$$($emulator$jscomp$3$$)) : $JSCompiler_StaticMethods_add_listener$$($emulator$jscomp$3$$, "9p-attach", function() {
    $filesystem_is_enabled$$ = !0;
    $init_filesystem_panel$$module$src$browser$main$$($emulator$jscomp$3$$);
  });
  $$$$module$src$browser$main$$("run").onclick = function() {
    $emulator$jscomp$3$$.$is_running$() ? ($$$$module$src$browser$main$$("run").value = "Run", $emulator$jscomp$3$$.stop()) : ($$$$module$src$browser$main$$("run").value = "Pause", $emulator$jscomp$3$$.$run$());
    $$$$module$src$browser$main$$("run").blur();
  };
  $$$$module$src$browser$main$$("exit").onclick = function() {
    $emulator$jscomp$3$$.$destroy$();
    const $url$jscomp$30$$ = new URL(location.href);
    $url$jscomp$30$$.searchParams.delete("profile");
    location.href = $url$jscomp$30$$.pathname + $url$jscomp$30$$.search;
  };
  $$$$module$src$browser$main$$("lock_mouse").onclick = function() {
    if (!$mouse_is_enabled$$) {
      $$$$module$src$browser$main$$("toggle_mouse").onclick();
    }
    $JSCompiler_StaticMethods_lock_mouse$$();
    $$$$module$src$browser$main$$("lock_mouse").blur();
  };
  var $mouse_is_enabled$$ = !0;
  $$$$module$src$browser$main$$("toggle_mouse").onclick = function() {
    $mouse_is_enabled$$ = !$mouse_is_enabled$$;
    $emulator$jscomp$3$$.$j$ && ($emulator$jscomp$3$$.$j$.$emu_enabled$ = $mouse_is_enabled$$);
    $$$$module$src$browser$main$$("toggle_mouse").value = ($mouse_is_enabled$$ ? "Dis" : "En") + "able mouse";
    $$$$module$src$browser$main$$("toggle_mouse").blur();
  };
  if ($profile$jscomp$3$$?.$mouse_disabled_default$) {
    $$$$module$src$browser$main$$("toggle_mouse").onclick();
  }
  var $theatre_mode$$ = !1, $theatre_ui$$ = !0, $theatre_zoom_to_fit$$ = !1;
  $$$$module$src$browser$main$$("toggle_ui").onclick = function() {
    $enable_theatre_ui$$(!$theatre_ui$$);
    $$$$module$src$browser$main$$("toggle_ui").blur();
  };
  $$$$module$src$browser$main$$("toggle_theatre").onclick = function() {
    $theatre_mode$$ = !$theatre_mode$$;
    $theatre_ui$$ || $enable_theatre_ui$$(!0);
    !$theatre_mode$$ && $theatre_zoom_to_fit$$ && $enable_zoom_to_fit$$(!1);
    for (const $el$jscomp$inline_844$$ of ["screen_container", "runtime_options", "runtime_infos", "filesystem_panel"]) {
      $$$$module$src$browser$main$$($el$jscomp$inline_844$$).classList.toggle("theatre_" + $el$jscomp$inline_844$$);
    }
    $$$$module$src$browser$main$$("theatre_background").style.display = $theatre_mode$$ ? "block" : "none";
    $$$$module$src$browser$main$$("toggle_zoom_to_fit").style.display = $theatre_mode$$ ? "inline" : "none";
    $$$$module$src$browser$main$$("toggle_ui").style.display = $theatre_mode$$ ? "block" : "none";
    document.body.style.overflow = $theatre_mode$$ ? "hidden" : "visible";
    $$$$module$src$browser$main$$("toggle_theatre").value = ($theatre_mode$$ ? "Dis" : "En") + "able theatre mode";
    $$$$module$src$browser$main$$("toggle_theatre").blur();
  };
  $$$$module$src$browser$main$$("toggle_zoom_to_fit").onclick = function() {
    $enable_zoom_to_fit$$(!$theatre_zoom_to_fit$$);
    $$$$module$src$browser$main$$("toggle_zoom_to_fit").blur();
  };
  var $last_tick$$ = 0, $running_time$$ = 0, $last_instr_counter$$ = 0, $interval$$ = null, $os_uses_mouse$$ = !1, $total_instructions$$ = 0;
  $JSCompiler_StaticMethods_add_listener$$($emulator$jscomp$3$$, "emulator-started", function() {
    $last_tick$$ = Date.now();
    $interval$$ = setInterval($update_info$$, 1000);
  });
  $JSCompiler_StaticMethods_add_listener$$($emulator$jscomp$3$$, "emulator-stopped", function() {
    $update_info$$();
    null !== $interval$$ && clearInterval($interval$$);
  });
  var $JSCompiler_object_inline_read_0$$ = 0, $JSCompiler_object_inline_write_1$$ = 0, $JSCompiler_object_inline_files_2$$ = [];
  $JSCompiler_StaticMethods_add_listener$$($emulator$jscomp$3$$, "9p-read-start", function($args$jscomp$21_file$jscomp$11$$) {
    $args$jscomp$21_file$jscomp$11$$ = $args$jscomp$21_file$jscomp$11$$[0];
    $JSCompiler_object_inline_files_2$$.push($args$jscomp$21_file$jscomp$11$$);
    $$$$module$src$browser$main$$("info_filesystem").style.display = "block";
    $$$$module$src$browser$main$$("info_filesystem_status").textContent = "Loading ...";
    $$$$module$src$browser$main$$("info_filesystem_last_file").textContent = $args$jscomp$21_file$jscomp$11$$;
  });
  $JSCompiler_StaticMethods_add_listener$$($emulator$jscomp$3$$, "9p-read-end", function($args$jscomp$22$$) {
    $JSCompiler_object_inline_read_0$$ += $args$jscomp$22$$[1];
    $$$$module$src$browser$main$$("info_filesystem_bytes_read").textContent = $JSCompiler_object_inline_read_0$$;
    const $file$jscomp$12$$ = $args$jscomp$22$$[0];
    $JSCompiler_object_inline_files_2$$ = $JSCompiler_object_inline_files_2$$.filter($f$jscomp$10$$ => $f$jscomp$10$$ !== $file$jscomp$12$$);
    $JSCompiler_object_inline_files_2$$[0] ? $$$$module$src$browser$main$$("info_filesystem_last_file").textContent = $JSCompiler_object_inline_files_2$$[0] : $$$$module$src$browser$main$$("info_filesystem_status").textContent = "Idle";
  });
  $JSCompiler_StaticMethods_add_listener$$($emulator$jscomp$3$$, "9p-write-end", function($args$jscomp$23$$) {
    $JSCompiler_object_inline_write_1$$ += $args$jscomp$23$$[1];
    $$$$module$src$browser$main$$("info_filesystem_bytes_written").textContent = $JSCompiler_object_inline_write_1$$;
    $JSCompiler_object_inline_files_2$$[0] || ($$$$module$src$browser$main$$("info_filesystem_last_file").textContent = $args$jscomp$23$$[0]);
  });
  var $JSCompiler_object_inline_read_3$$ = 0, $JSCompiler_object_inline_read_sectors_4$$ = 0, $JSCompiler_object_inline_write_5$$ = 0, $JSCompiler_object_inline_write_sectors_6$$ = 0;
  $$$$module$src$browser$main$$("ide_type").textContent = $emulator$jscomp$3$$.$disk_images$.$cdrom$ ? " (CD-ROM)" : " (hard disk)";
  $JSCompiler_StaticMethods_add_listener$$($emulator$jscomp$3$$, "ide-read-start", function() {
    $$$$module$src$browser$main$$("info_storage").style.display = "block";
    $$$$module$src$browser$main$$("info_storage_status").textContent = "Loading ...";
  });
  $JSCompiler_StaticMethods_add_listener$$($emulator$jscomp$3$$, "ide-read-end", function($args$jscomp$24$$) {
    $JSCompiler_object_inline_read_3$$ += $args$jscomp$24$$[1];
    $JSCompiler_object_inline_read_sectors_4$$ += $args$jscomp$24$$[2];
    $$$$module$src$browser$main$$("info_storage_status").textContent = "Idle";
    $$$$module$src$browser$main$$("info_storage_bytes_read").textContent = $JSCompiler_object_inline_read_3$$;
    $$$$module$src$browser$main$$("info_storage_sectors_read").textContent = $JSCompiler_object_inline_read_sectors_4$$;
  });
  $JSCompiler_StaticMethods_add_listener$$($emulator$jscomp$3$$, "ide-write-end", function($args$jscomp$25$$) {
    $JSCompiler_object_inline_write_5$$ += $args$jscomp$25$$[1];
    $JSCompiler_object_inline_write_sectors_6$$ += $args$jscomp$25$$[2];
    $$$$module$src$browser$main$$("info_storage_bytes_written").textContent = $JSCompiler_object_inline_write_5$$;
    $$$$module$src$browser$main$$("info_storage_sectors_written").textContent = $JSCompiler_object_inline_write_sectors_6$$;
  });
  var $JSCompiler_object_inline_bytes_transmitted_7$$ = 0, $JSCompiler_object_inline_bytes_received_8$$ = 0;
  $JSCompiler_StaticMethods_add_listener$$($emulator$jscomp$3$$, "eth-receive-end", function($args$jscomp$26$$) {
    $JSCompiler_object_inline_bytes_received_8$$ += $args$jscomp$26$$[0];
    $$$$module$src$browser$main$$("info_network").style.display = "block";
    $$$$module$src$browser$main$$("info_network_bytes_received").textContent = $JSCompiler_object_inline_bytes_received_8$$;
  });
  $JSCompiler_StaticMethods_add_listener$$($emulator$jscomp$3$$, "eth-transmit-end", function($args$jscomp$27$$) {
    $JSCompiler_object_inline_bytes_transmitted_7$$ += $args$jscomp$27$$[0];
    $$$$module$src$browser$main$$("info_network").style.display = "block";
    $$$$module$src$browser$main$$("info_network_bytes_transmitted").textContent = $JSCompiler_object_inline_bytes_transmitted_7$$;
  });
  $JSCompiler_StaticMethods_add_listener$$($emulator$jscomp$3$$, "mouse-enable", function($is_enabled$$) {
    $os_uses_mouse$$ = $is_enabled$$;
    $$$$module$src$browser$main$$("info_mouse_enabled").textContent = $is_enabled$$ ? "Yes" : "No";
  });
  $JSCompiler_StaticMethods_add_listener$$($emulator$jscomp$3$$, "screen-set-size", function($args$jscomp$28$$) {
    const [$w$jscomp$11$$, $h$jscomp$7$$, $bpp$jscomp$2$$] = $args$jscomp$28$$;
    $$$$module$src$browser$main$$("info_res").textContent = $w$jscomp$11$$ + "x" + $h$jscomp$7$$ + ($bpp$jscomp$2$$ ? "x" + $bpp$jscomp$2$$ : "");
    $$$$module$src$browser$main$$("info_vga_mode").textContent = $bpp$jscomp$2$$ ? "Graphical" : "Text";
  });
  $$$$module$src$browser$main$$("reset").onclick = function() {
    $emulator$jscomp$3$$.$restart$();
    $$$$module$src$browser$main$$("reset").blur();
  };
  $add_image_download_button$$($phone_keyboard_script_settings$jscomp$5$$.$hda$, $emulator$jscomp$3$$.$disk_images$.$hda$, "hda");
  $add_image_download_button$$($phone_keyboard_script_settings$jscomp$5$$.$hdb$, $emulator$jscomp$3$$.$disk_images$.$hdb$, "hdb");
  $add_image_download_button$$($phone_keyboard_script_settings$jscomp$5$$.$fda$, $emulator$jscomp$3$$.$disk_images$.$fda$, "fda");
  $add_image_download_button$$($phone_keyboard_script_settings$jscomp$5$$.$fdb$, $emulator$jscomp$3$$.$disk_images$.$fdb$, "fdb");
  $add_image_download_button$$($phone_keyboard_script_settings$jscomp$5$$.$cdrom$, $emulator$jscomp$3$$.$disk_images$.$cdrom$, "cdrom");
  $$$$module$src$browser$main$$("change_fda_image").value = $phone_keyboard_script_settings$jscomp$5$$.$fda$ ? "Eject floppy image" : "Insert floppy image";
  $$$$module$src$browser$main$$("change_fda_image").onclick = function() {
    if ($emulator$jscomp$3$$.$v86$.$cpu$.$devices$.$fdc$.$drives$[0].$get_buffer$()) {
      $JSCompiler_StaticMethods_eject_disk$$($emulator$jscomp$3$$.$v86$.$cpu$.$devices$.$fdc$.$drives$[0]), $$$$module$src$browser$main$$("change_fda_image").value = "Insert floppy image";
    } else {
      const $file_input$$ = document.createElement("input");
      $file_input$$.type = "file";
      $file_input$$.onchange = async function() {
        const $file$jscomp$14$$ = $file_input$$.files[0];
        $file$jscomp$14$$ && (await $JSCompiler_StaticMethods_set_fda$$($emulator$jscomp$3$$, {buffer:$file$jscomp$14$$}), $$$$module$src$browser$main$$("change_fda_image").value = "Eject floppy image");
      };
      $file_input$$.click();
    }
    $$$$module$src$browser$main$$("change_fda_image").blur();
  };
  $$$$module$src$browser$main$$("change_fdb_image").value = $phone_keyboard_script_settings$jscomp$5$$.$fdb$ ? "Eject second floppy image" : "Insert second floppy image";
  $$$$module$src$browser$main$$("change_fdb_image").onclick = function() {
    if ($emulator$jscomp$3$$.$v86$.$cpu$.$devices$.$fdc$.$drives$[1].$get_buffer$()) {
      $JSCompiler_StaticMethods_eject_disk$$($emulator$jscomp$3$$.$v86$.$cpu$.$devices$.$fdc$.$drives$[1]), $$$$module$src$browser$main$$("change_fdb_image").value = "Insert second floppy image";
    } else {
      const $file_input$jscomp$1$$ = document.createElement("input");
      $file_input$jscomp$1$$.type = "file";
      $file_input$jscomp$1$$.onchange = async function() {
        const $file$jscomp$15$$ = $file_input$jscomp$1$$.files[0];
        $file$jscomp$15$$ && (await $JSCompiler_StaticMethods_set_fdb$$($emulator$jscomp$3$$, {buffer:$file$jscomp$15$$}), $$$$module$src$browser$main$$("change_fdb_image").value = "Eject second floppy image");
      };
      $file_input$jscomp$1$$.click();
    }
    $$$$module$src$browser$main$$("change_fdb_image").blur();
  };
  $$$$module$src$browser$main$$("change_cdrom_image").value = $phone_keyboard_script_settings$jscomp$5$$.$cdrom$ ? "Eject CD image" : "Insert CD image";
  $$$$module$src$browser$main$$("change_cdrom_image").onclick = function() {
    if ($emulator$jscomp$3$$.$v86$.$cpu$.$devices$.$cdrom$.buffer) {
      $JSCompiler_StaticMethods_eject$$($emulator$jscomp$3$$.$v86$.$cpu$.$devices$.$cdrom$), $$$$module$src$browser$main$$("change_cdrom_image").value = "Insert CD image";
    } else {
      const $file_input$jscomp$2$$ = document.createElement("input");
      $file_input$jscomp$2$$.type = "file";
      $file_input$jscomp$2$$.multiple = "multiple";
      $file_input$jscomp$2$$.onchange = async function() {
        const $files$jscomp$1$$ = $file_input$jscomp$2$$.files;
        if (1 === $files$jscomp$1$$.length && $files$jscomp$1$$[0].name.endsWith(".iso")) {
          var $buffer$jscomp$71_files2$$ = $files$jscomp$1$$[0];
        } else {
          if ($files$jscomp$1$$.length) {
            $buffer$jscomp$71_files2$$ = [];
            for (const $file$jscomp$16$$ of $files$jscomp$1$$) {
              $buffer$jscomp$71_files2$$.push({name:$file$jscomp$16$$.name, $contents$:new Uint8Array(await $read_file$$module$src$browser$main$$($file$jscomp$16$$)), });
            }
            $buffer$jscomp$71_files2$$ = $generate$$module$src$iso9660$$($buffer$jscomp$71_files2$$).buffer;
          }
        }
        $buffer$jscomp$71_files2$$ && (await $emulator$jscomp$3$$.$set_cdrom$({buffer:$buffer$jscomp$71_files2$$}), $$$$module$src$browser$main$$("change_cdrom_image").value = "Eject CD image");
      };
      $file_input$jscomp$2$$.click();
    }
    $$$$module$src$browser$main$$("change_cdrom_image").blur();
  };
  $$$$module$src$browser$main$$("memory_dump").onclick = function() {
    const $mem8$jscomp$1$$ = $emulator$jscomp$3$$.$v86$.$cpu$.$mem8$;
    $dump_file$$module$src$lib$$(new Uint8Array($mem8$jscomp$1$$.buffer, $mem8$jscomp$1$$.byteOffset, $mem8$jscomp$1$$.length), "v86memory.bin");
    $$$$module$src$browser$main$$("memory_dump").blur();
  };
  $$$$module$src$browser$main$$("capture_network_traffic").onclick = function() {
    function $do_capture$$($direction$jscomp$7$$, $data$jscomp$248$$) {
      var $JSCompiler_temp_const$jscomp$880$$ = $capture$$, $JSCompiler_temp_const$jscomp$879$$ = $JSCompiler_temp_const$jscomp$880$$.push, $JSCompiler_temp_const$jscomp$878$$ = performance.now() / 1000;
      const $result$jscomp$inline_1054$$ = [];
      let $offset$jscomp$inline_1055$$ = 0;
      for (; $offset$jscomp$inline_1055$$ + 15 < $data$jscomp$248$$.length; $offset$jscomp$inline_1055$$ += 16) {
        $line$jscomp$inline_1056_line$jscomp$inline_1058$$ = $pad0$$module$src$lib$$($offset$jscomp$inline_1055$$.toString(16).toUpperCase(), 5) + "   ";
        for ($j$jscomp$inline_1059_j$jscomp$inline_1060_remainder$jscomp$inline_1057$$ = 0; 16 > $j$jscomp$inline_1059_j$jscomp$inline_1060_remainder$jscomp$inline_1057$$; $j$jscomp$inline_1059_j$jscomp$inline_1060_remainder$jscomp$inline_1057$$++) {
          $line$jscomp$inline_1056_line$jscomp$inline_1058$$ += $pad0$$module$src$lib$$($data$jscomp$248$$[$offset$jscomp$inline_1055$$ + $j$jscomp$inline_1059_j$jscomp$inline_1060_remainder$jscomp$inline_1057$$].toString(16).toUpperCase(), 2) + " ";
        }
        $line$jscomp$inline_1056_line$jscomp$inline_1058$$ += "  ";
        for ($j$jscomp$inline_1059_j$jscomp$inline_1060_remainder$jscomp$inline_1057$$ = 0; 16 > $j$jscomp$inline_1059_j$jscomp$inline_1060_remainder$jscomp$inline_1057$$; $j$jscomp$inline_1059_j$jscomp$inline_1060_remainder$jscomp$inline_1057$$++) {
          var $j$jscomp$inline_1062_x$jscomp$inline_1061$$ = $data$jscomp$248$$[$offset$jscomp$inline_1055$$ + $j$jscomp$inline_1059_j$jscomp$inline_1060_remainder$jscomp$inline_1057$$];
          $line$jscomp$inline_1056_line$jscomp$inline_1058$$ += 33 <= $j$jscomp$inline_1062_x$jscomp$inline_1061$$ && 34 !== $j$jscomp$inline_1062_x$jscomp$inline_1061$$ && 92 !== $j$jscomp$inline_1062_x$jscomp$inline_1061$$ && 126 >= $j$jscomp$inline_1062_x$jscomp$inline_1061$$ ? String.fromCharCode($j$jscomp$inline_1062_x$jscomp$inline_1061$$) : ".";
        }
        $result$jscomp$inline_1054$$.push($line$jscomp$inline_1056_line$jscomp$inline_1058$$);
      }
      for (var $line$jscomp$inline_1056_line$jscomp$inline_1058$$ = $pad0$$module$src$lib$$($offset$jscomp$inline_1055$$.toString(16).toUpperCase(), 5) + "   "; $offset$jscomp$inline_1055$$ < $data$jscomp$248$$.length; $offset$jscomp$inline_1055$$++) {
        $line$jscomp$inline_1056_line$jscomp$inline_1058$$ += $pad0$$module$src$lib$$($data$jscomp$248$$[$offset$jscomp$inline_1055$$].toString(16).toUpperCase(), 2) + " ";
      }
      var $j$jscomp$inline_1059_j$jscomp$inline_1060_remainder$jscomp$inline_1057$$ = $offset$jscomp$inline_1055$$ & 15;
      $line$jscomp$inline_1056_line$jscomp$inline_1058$$ += "   ".repeat(16 - $j$jscomp$inline_1059_j$jscomp$inline_1060_remainder$jscomp$inline_1057$$);
      $line$jscomp$inline_1056_line$jscomp$inline_1058$$ += "  ";
      for ($j$jscomp$inline_1062_x$jscomp$inline_1061$$ = 0; $j$jscomp$inline_1062_x$jscomp$inline_1061$$ < $j$jscomp$inline_1059_j$jscomp$inline_1060_remainder$jscomp$inline_1057$$; $j$jscomp$inline_1062_x$jscomp$inline_1061$$++) {
        const $x$jscomp$inline_1063$$ = $data$jscomp$248$$[$offset$jscomp$inline_1055$$ + $j$jscomp$inline_1062_x$jscomp$inline_1061$$];
        $line$jscomp$inline_1056_line$jscomp$inline_1058$$ += 33 <= $x$jscomp$inline_1063$$ && 34 !== $x$jscomp$inline_1063$$ && 92 !== $x$jscomp$inline_1063$$ && 126 >= $x$jscomp$inline_1063$$ ? String.fromCharCode($x$jscomp$inline_1063$$) : ".";
      }
      $result$jscomp$inline_1054$$.push($line$jscomp$inline_1056_line$jscomp$inline_1058$$);
      $JSCompiler_temp_const$jscomp$879$$.call($JSCompiler_temp_const$jscomp$880$$, {direction:$direction$jscomp$7$$, time:$JSCompiler_temp_const$jscomp$878$$, $hex_dump$:"\n" + $result$jscomp$inline_1054$$.join("\n") + "\n"});
      $$$$module$src$browser$main$$("capture_network_traffic").value = $capture$$.length + " packets";
    }
    this.value = "0 packets";
    let $capture$$ = [];
    $emulator$jscomp$3$$.$emulator_bus$.register("net0-receive", $do_capture$$.bind(this, "I"));
    $JSCompiler_StaticMethods_add_listener$$($emulator$jscomp$3$$, "net0-send", $do_capture$$.bind(this, "O"));
    this.onclick = function() {
      const $capture_raw$$ = $capture$$.map(({direction:$direction$jscomp$8$$, time:$time$jscomp$3$$, $hex_dump$:$hex_dump$$}) => $direction$jscomp$8$$ + " " + $time$jscomp$3$$.toFixed(6) + $hex_dump$$ + "\n").join("");
      $dump_file$$module$src$lib$$($capture_raw$$, "traffic.hex");
      $capture$$ = [];
      this.value = "0 packets";
    };
  };
  $$$$module$src$browser$main$$("save_state").onclick = async function() {
    const $result$jscomp$27$$ = await $emulator$jscomp$3$$.$save_state$();
    $dump_file$$module$src$lib$$($result$jscomp$27$$, "v86state.bin");
    $$$$module$src$browser$main$$("save_state").blur();
  };
  $$$$module$src$browser$main$$("load_state").onclick = function() {
    $$$$module$src$browser$main$$("load_state_input").click();
    $$$$module$src$browser$main$$("load_state").blur();
  };
  $$$$module$src$browser$main$$("load_state_input").onchange = async function() {
    var $file$jscomp$17$$ = this.files[0];
    if ($file$jscomp$17$$) {
      var $was_running$$ = $emulator$jscomp$3$$.$is_running$();
      $was_running$$ && await $emulator$jscomp$3$$.stop();
      var $filereader$jscomp$1$$ = new FileReader;
      $filereader$jscomp$1$$.onload = async function($e$jscomp$72$$) {
        try {
          await $emulator$jscomp$3$$.$restore_state$($e$jscomp$72$$.target.result);
        } catch ($err$jscomp$4$$) {
          throw alert("Something bad happened while restoring the state:\n" + $err$jscomp$4$$ + "\n\nNote that the current configuration must be the same as the original"), $err$jscomp$4$$;
        }
        $was_running$$ && $emulator$jscomp$3$$.$run$();
      };
      $filereader$jscomp$1$$.readAsArrayBuffer($file$jscomp$17$$);
      this.value = "";
    }
  };
  $$$$module$src$browser$main$$("ctrlaltdel").onclick = function() {
    $JSCompiler_StaticMethods_keyboard_send_scancodes$$($emulator$jscomp$3$$, [29, 56, 83, 157, 184, 211, ]);
    $$$$module$src$browser$main$$("ctrlaltdel").blur();
  };
  $$$$module$src$browser$main$$("alttab").onclick = function() {
    $JSCompiler_StaticMethods_keyboard_send_scancodes$$($emulator$jscomp$3$$, [56, 15, ]);
    setTimeout(function() {
      $JSCompiler_StaticMethods_keyboard_send_scancodes$$($emulator$jscomp$3$$, [184, 143, ]);
    }, 100);
    $$$$module$src$browser$main$$("alttab").blur();
  };
  $$$$module$src$browser$main$$("scale").onchange = function() {
    var $n$jscomp$19$$ = parseFloat(this.value);
    ($n$jscomp$19$$ || 0 < $n$jscomp$19$$) && $emulator$jscomp$3$$.$screen_adapter$ && $emulator$jscomp$3$$.$screen_adapter$.$set_scale$($n$jscomp$19$$, $n$jscomp$19$$);
  };
  $$$$module$src$browser$main$$("fullscreen").onclick = function() {
    if ($emulator$jscomp$3$$.$screen_adapter$) {
      var $elem$jscomp$inline_857_focus_element$jscomp$inline_859$$ = document.getElementById("screen_container");
      if ($elem$jscomp$inline_857_focus_element$jscomp$inline_859$$) {
        var $fn$jscomp$inline_858$$ = $elem$jscomp$inline_857_focus_element$jscomp$inline_859$$.requestFullScreen || $elem$jscomp$inline_857_focus_element$jscomp$inline_859$$.webkitRequestFullscreen || $elem$jscomp$inline_857_focus_element$jscomp$inline_859$$.mozRequestFullScreen || $elem$jscomp$inline_857_focus_element$jscomp$inline_859$$.msRequestFullScreen;
        $fn$jscomp$inline_858$$ && ($fn$jscomp$inline_858$$.call($elem$jscomp$inline_857_focus_element$jscomp$inline_859$$), ($elem$jscomp$inline_857_focus_element$jscomp$inline_859$$ = document.getElementsByClassName("phone_keyboard")[0]) && $elem$jscomp$inline_857_focus_element$jscomp$inline_859$$.focus());
        try {
          navigator.keyboard.lock();
        } catch ($e$jscomp$inline_860$$) {
        }
        $JSCompiler_StaticMethods_lock_mouse$$();
      }
    }
  };
  $$$$module$src$browser$main$$("screen_container").onclick = function($e$jscomp$73$$) {
    $emulator$jscomp$3$$.$is_running$() && "suspended" === $emulator$jscomp$3$$.$g$?.$audio_context$?.state && $emulator$jscomp$3$$.$g$.$audio_context$.resume();
    $mouse_is_enabled$$ && $os_uses_mouse$$ && $JSCompiler_StaticMethods_lock_mouse$$();
    if (window.getSelection().isCollapsed) {
      const $phone_keyboard$jscomp$1$$ = document.getElementsByClassName("phone_keyboard")[0];
      $phone_keyboard$jscomp$1$$.style.top = window.scrollY + $e$jscomp$73$$.clientY + 20 + "px";
      $phone_keyboard$jscomp$1$$.style.left = window.scrollX + $e$jscomp$73$$.clientX + "px";
      $phone_keyboard$jscomp$1$$.value = "";
      $phone_keyboard$jscomp$1$$.focus();
    }
  };
  $phone_keyboard_script_settings$jscomp$5$$ = document.getElementsByClassName("phone_keyboard")[0];
  $phone_keyboard_script_settings$jscomp$5$$.setAttribute("autocorrect", "off");
  $phone_keyboard_script_settings$jscomp$5$$.setAttribute("autocapitalize", "off");
  $phone_keyboard_script_settings$jscomp$5$$.setAttribute("spellcheck", "false");
  $phone_keyboard_script_settings$jscomp$5$$.tabIndex = 0;
  $$$$module$src$browser$main$$("take_screenshot").onclick = function() {
    const $image$jscomp$7$$ = $emulator$jscomp$3$$.$screen_adapter$ ? $emulator$jscomp$3$$.$screen_adapter$.$make_screenshot$() : null;
    try {
      window.open("").document.write($image$jscomp$7$$.outerHTML);
    } catch ($e$jscomp$74$$) {
    }
    $$$$module$src$browser$main$$("take_screenshot").blur();
  };
  if ($emulator$jscomp$3$$.$g$) {
    let $is_muted$$ = !1;
    $$$$module$src$browser$main$$("mute").onclick = function() {
      $is_muted$$ ? ($emulator$jscomp$3$$.$g$.$mixer$.$set_volume$(1, void 0), $is_muted$$ = !1, $$$$module$src$browser$main$$("mute").value = "Mute") : ($emulator$jscomp$3$$.$g$.$mixer$.$set_volume$(0, void 0), $is_muted$$ = !0, $$$$module$src$browser$main$$("mute").value = "Unmute");
      $$$$module$src$browser$main$$("mute").blur();
    };
  } else {
    $$$$module$src$browser$main$$("mute").remove();
  }
  window.addEventListener("keydown", $ctrl_w_rescue$$, !1);
  window.addEventListener("keyup", $ctrl_w_rescue$$, !1);
  window.addEventListener("blur", $ctrl_w_rescue$$, !1);
  $phone_keyboard_script_settings$jscomp$5$$ = document.createElement("script");
  $phone_keyboard_script_settings$jscomp$5$$.src = "build/xterm.js";
  $phone_keyboard_script_settings$jscomp$5$$.async = !0;
  $phone_keyboard_script_settings$jscomp$5$$.onload = function() {
    var $element$jscomp$inline_863$$ = $$$$module$src$browser$main$$("terminal");
    $emulator$jscomp$3$$.$serial_adapter$ && $emulator$jscomp$3$$.$serial_adapter$.$destroy$ && $emulator$jscomp$3$$.$serial_adapter$.$destroy$();
    $emulator$jscomp$3$$.$serial_adapter$ = new $SerialAdapterXtermJS$$module$src$browser$serial$$($element$jscomp$inline_863$$, $emulator$jscomp$3$$.$bus$);
    $emulator$jscomp$3$$.$serial_adapter$.show();
  };
  document.body.appendChild($phone_keyboard_script_settings$jscomp$5$$);
}
function $init_filesystem_panel$$module$src$browser$main$$($emulator$jscomp$4$$) {
  $$$$module$src$browser$main$$("filesystem_panel").style.display = "block";
  $$$$module$src$browser$main$$("filesystem_send_file").onchange = function() {
    Array.prototype.forEach.call(this.files, function($file$jscomp$18$$) {
      var $loader$$ = new $SyncFileBuffer$$module$src$buffer$$($file$jscomp$18$$);
      $loader$$.onload = function() {
        $loader$$.$get_buffer$(async function($buffer$jscomp$72$$) {
          await $emulator$jscomp$4$$.$create_file$("/" + $file$jscomp$18$$.name, new Uint8Array($buffer$jscomp$72$$));
        });
      };
      $loader$$.load();
    }, this);
    this.value = "";
    this.blur();
  };
  $$$$module$src$browser$main$$("filesystem_get_file").onkeypress = async function($e$jscomp$76_filename$jscomp$15$$) {
    if (13 === $e$jscomp$76_filename$jscomp$15$$.which) {
      this.disabled = !0;
      try {
        var $result$jscomp$28$$ = await $emulator$jscomp$4$$.$read_file$(this.value);
      } catch ($err$jscomp$5$$) {
        console.log($err$jscomp$5$$);
      }
      this.disabled = !1;
      $result$jscomp$28$$ ? ($e$jscomp$76_filename$jscomp$15$$ = this.value.replace(/\/$/, "").split("/"), $e$jscomp$76_filename$jscomp$15$$ = $e$jscomp$76_filename$jscomp$15$$[$e$jscomp$76_filename$jscomp$15$$.length - 1] || "root", $dump_file$$module$src$lib$$($result$jscomp$28$$, $e$jscomp$76_filename$jscomp$15$$), this.value = "") : alert("Can't read file");
    }
  };
}
function $onpopstate$$module$src$browser$main$$() {
  location.reload();
}
function $push_state$$module$src$browser$main$$($params$jscomp$1_search$$) {
  window.history.pushState && ($params$jscomp$1_search$$ = "?" + Array.from($params$jscomp$1_search$$.entries()).map(([$key$jscomp$42$$, $value$jscomp$197$$]) => $key$jscomp$42$$ + "=" + $value$jscomp$197$$.replace(/[?&=#+]/g, encodeURIComponent)).join("&"), window.history.pushState({search:$params$jscomp$1_search$$}, "", $params$jscomp$1_search$$));
}
;
